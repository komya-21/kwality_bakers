!function(E){function T(e,t,n){var i=e[0],o=/er/.test(n)?_indeterminate:/bl/.test(n)?y:R,r=n==_update?{checked:i[R],disabled:i[y],indeterminate:"true"==e.attr(_indeterminate)||"false"==e.attr(_determinate)}:i[o];if(/^(ch|di|in)/.test(n)&&!r)C(e,o);else if(/^(un|en|de)/.test(n)&&r)v(e,o);else if(n==_update)for(var s in r)r[s]?C(e,s,!0):v(e,s,!0);else t&&"toggle"!=n||(t||e[_callback]("ifClicked"),r?i[_type]!==D&&v(e,o):C(e,o))}function C(e,t,n){var i=e[0],o=e.parent(),r=t==R,s=t==_indeterminate,a=t==y,l=s?_determinate:r?g:"enabled",c=f(e,l+m(i[_type])),d=f(e,t+m(i[_type]));if(!0!==i[t]){if(!n&&t==R&&i[_type]==D&&i.name){var u=e.closest("form"),h='input[name="'+i.name+'"]';(h=u.length?u.find(h):E(h)).each(function(){this!==i&&E(this).data(O)&&v(E(this),t)})}s?(i[t]=!0,i[R]&&v(e,R,"force")):(n||(i[t]=!0),r&&i[_indeterminate]&&v(e,_indeterminate,!1)),p(e,r,t,n)}i[y]&&f(e,_cursor,!0)&&o.find("."+b).css(_cursor,"default"),o[_add](d||f(e,t)||""),o.attr("role")&&!s&&o.attr("aria-"+(a?y:R),"true"),o[_remove](c||f(e,l)||"")}function v(e,t,n){var i=e[0],o=e.parent(),r=t==R,s=t==_indeterminate,a=t==y,l=s?_determinate:r?g:"enabled",c=f(e,l+m(i[_type])),d=f(e,t+m(i[_type]));!1!==i[t]&&(!s&&n&&"force"!=n||(i[t]=!1),p(e,r,l,n)),!i[y]&&f(e,_cursor,!0)&&o.find("."+b).css(_cursor,"pointer"),o[_remove](d||f(e,t)||""),o.attr("role")&&!s&&o.attr("aria-"+(a?y:R),"false"),o[_add](c||f(e,l)||"")}function I(e,t){e.data(O)&&(e.parent().html(e.attr("style",e.data(O).s||"")),t&&e[_callback](t),e.off(".i").unwrap(),E(_label+'[for="'+e[0].id+'"]').add(e.closest(_label)).off(".i"))}function f(e,t,n){if(e.data(O))return e.data(O).o[t+(n?"":"Class")]}function m(e){return e.charAt(0).toUpperCase()+e.slice(1)}function p(e,t,n,i){i||(t&&e[_callback]("ifToggled"),e[_callback]("ifChanged")[_callback]("if"+m(n)))}var O="iCheck",b=O+"-helper",D="radio",R="checked",g="un"+R,y="disabled";_determinate="determinate",_indeterminate="in"+_determinate,_update="update",_type="type",_click="click",_touch="touchbegin.i touchend.i",_add="addClass",_remove="removeClass",_callback="trigger",_label="label",_cursor="cursor",_mobile=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent),E.fn[O]=function(t,n){var i='input[type="checkbox"], input[type="'+D+'"]',o=E(),e=function(e){e.each(function(){var e=E(this);o=e.is(i)?o.add(e):o.add(e.find(i))})};if(/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(t))return t=t.toLowerCase(),e(this),o.each(function(){var e=E(this);"destroy"==t?I(e,"ifDestroyed"):T(e,!0,t),E.isFunction(n)&&n()});if("object"!=typeof t&&t)return this;var d=E.extend({checkedClass:R,disabledClass:y,indeterminateClass:_indeterminate,labelHover:!0},t),r=d.handle,u=d.hoverClass||"hover",h=d.focusClass||"focus",f=d.activeClass||"active",m=!!d.labelHover,p=d.labelHoverClass||"hover",g=0|(""+d.increaseArea).replace("%","");return"checkbox"!=r&&r!=D||(i='input[type="'+r+'"]'),g<-50&&(g=-50),e(this),o.each(function(){var i=E(this);I(i);var o=this,e=o.id,t={position:"absolute",top:n=-g+"%",left:n,display:"block",width:t=100+2*g+"%",height:t,margin:0,padding:0,background:"#fff",border:0,opacity:0},n=_mobile?{position:"absolute",visibility:"hidden"}:g?t:{position:"absolute",opacity:0},r="checkbox"==o[_type]?d.checkboxClass||"icheckbox":d.radioClass||"i"+D,s=E(_label+'[for="'+e+'"]').add(i.closest(_label)),a=!!d.aria,l=O+"-"+Math.random().toString(36).substr(2,6),c='<div class="'+r+'" '+(a?'role="'+o[_type]+'" ':"");a&&s.each(function(){c+='aria-labelledby="',this.id?c+=this.id:(this.id=l,c+=l),c+='"'}),c=i.wrap(c+"/>")[_callback]("ifCreated").parent().append(d.insert),t=E('<ins class="'+b+'"/>').css(t).appendTo(c),i.data(O,{o:d,s:i.attr("style")}).css(n),d.inheritClass&&c[_add](o.className||""),d.inheritID&&e&&c.attr("id",O+"-"+e),"static"==c.css("position")&&c.css("position","relative"),T(i,!0,_update),s.length&&s.on(_click+".i mouseover.i mouseout.i "+_touch,function(e){var t=e[_type],n=E(this);if(!o[y]){if(t==_click){if(E(e.target).is("a"))return;T(i,!1,!0)}else m&&(/ut|nd/.test(t)?(c[_remove](u),n[_remove](p)):(c[_add](u),n[_add](p)));if(!_mobile)return!1;e.stopPropagation()}}),i.on(_click+".i focus.i blur.i keyup.i keydown.i keypress.i",function(e){var t=e[_type];return e=e.keyCode,t!=_click&&("keydown"==t&&32==e?(o[_type]==D&&o[R]||(o[R]?v(i,R):C(i,R)),!1):void("keyup"==t&&o[_type]==D?!o[R]&&C(i,R):/us|ur/.test(t)&&c["blur"==t?_remove:_add](h)))}),t.on(_click+" mousedown mouseup mouseover mouseout "+_touch,function(e){var t=e[_type],n=/wn|up/.test(t)?f:u;if(!o[y]){if(t==_click?T(i,!1,!0):(/wn|er|in/.test(t)?c[_add](n):c[_remove](n+" "+f),s.length&&m&&n==u&&s[/ut|nd/.test(t)?_remove:_add](p)),!_mobile)return!1;e.stopPropagation()}})})}}(window.jQuery||window.Zepto),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(jQuery)}(function(y){var _,e=navigator.userAgent,K=/iphone/i.test(e),w=/chrome/i.test(e),k=/android/i.test(e);y.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},y.fn.extend({caret:function(e,t){var n;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof e?(t="number"==typeof t?t:e,this.each(function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&((n=this.createTextRange()).collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select())})):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(n=document.selection.createRange(),e=0-n.duplicate().moveStart("character",-1e5),t=e+n.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(i,C){var o,v,I,O,b,D,R;if(!i&&0<this.length){var e=y(this[0]).data(y.mask.dataName);return e?e():undefined}return C=y.extend({autoclear:y.mask.autoclear,placeholder:y.mask.placeholder,completed:null},C),o=y.mask.definitions,v=[],I=D=i.length,O=null,y.each(i.split(""),function(e,t){"?"==t?(D--,I=e):o[t]?(v.push(new RegExp(o[t])),null===O&&(O=v.length-1),e<I&&(b=v.length-1)):v.push(null)}),this.trigger("unmask").each(function(){function s(){if(C.completed){for(var e=O;e<=b;e++)if(v[e]&&g[e]===a(e))return;C.completed.call(p)}}function a(e){return e<C.placeholder.length?C.placeholder.charAt(e):C.placeholder.charAt(0)}function l(e){for(;++e<D&&!v[e];);return e}function r(e){for(;0<=--e&&!v[e];);return e}function c(e,t){var n,i;if(!(e<0)){for(n=e,i=l(t);n<D;n++)if(v[n]){if(!(i<D&&v[n].test(g[i])))break;g[n]=g[i],g[i]=a(i),i=l(i)}f(),p.caret(Math.max(O,e))}}function d(e){var t,n,i,o;for(n=a(t=e);t<D;t++)if(v[t]){if(i=l(t),o=g[t],g[t]=n,!(i<D&&v[i].test(o)))break;n=o}}function e(){var e=p.val(),t=p.caret();if(e.length<R.length){for(m(!0);0<t.begin&&!v[t.begin-1];)t.begin--;if(0===t.begin)for(;t.begin<O&&!v[t.begin];)t.begin++;p.caret(t.begin,t.begin)}else{for(m(!0);t.begin<D&&!v[t.begin];)t.begin++;p.caret(t.begin,t.begin)}s()}function u(){m(),p.val()!=T&&p.change()}function t(e){if(!p.prop("readonly")){var t,n,i,o=e.which||e.keyCode;R=p.val(),8===o||46===o||K&&127===o?(n=(t=p.caret()).begin,(i=t.end)-n==0&&(n=46!==o?r(n):i=l(n-1),i=46===o?l(i):i),h(n,i),c(n,i-1),e.preventDefault()):13===o?u.call(this,e):27===o&&(p.val(T),p.caret(0,m()),e.preventDefault())}}function n(e){if(!p.prop("readonly")){var t,n,i,o=e.which||e.keyCode,r=p.caret();if(!(e.ctrlKey||e.altKey||e.metaKey||o<32)&&o&&13!==o){if(r.end-r.begin!=0&&(h(r.begin,r.end),c(r.begin,r.end-1)),(t=l(r.begin-1))<D&&(n=String.fromCharCode(o),v[t].test(n))){if(d(t),g[t]=n,f(),i=l(t),k)setTimeout(function(){y.proxy(y.fn.caret,p,i)()},0);else p.caret(i);r.begin<=b&&s()}e.preventDefault()}}}function h(e,t){var n;for(n=e;n<t&&n<D;n++)v[n]&&(g[n]=a(n))}function f(){p.val(g.join(""))}function m(e){var t,n,i,o=p.val(),r=-1;for(i=t=0;t<D;t++)if(v[t]){for(g[t]=a(t);i++<o.length;)if(n=o.charAt(i-1),v[t].test(n)){g[t]=n,r=t;break}if(i>o.length){h(t+1,D);break}}else g[t]===o.charAt(i)&&i++,t<I&&(r=t);return e?f():r+1<I?C.autoclear||g.join("")===E?(p.val()&&p.val(""),h(0,D)):f():(f(),p.val(p.val().substring(0,r+1))),I?t:O}var p=y(this),g=y.map(i.split(""),function(e,t){if("?"!=e)return o[e]?a(t):e}),E=g.join(""),T=p.val();p.data(y.mask.dataName,function(){return y.map(g,function(e,t){return v[t]&&e!=a(t)?e:null}).join("")}),p.one("unmask",function(){p.off(".mask").removeData(y.mask.dataName)}).on("focus.mask",function(){var e;p.prop("readonly")||(clearTimeout(_),T=p.val(),e=m(),_=setTimeout(function(){p.get(0)===document.activeElement&&(f(),e==i.replace("?","").length?p.caret(0,e):p.caret(e))},10))}).on("blur.mask",u).on("keydown.mask",t).on("keypress.mask",n).on("input.mask paste.mask",function(){p.prop("readonly")||setTimeout(function(){var e=m(!0);p.caret(e),s()},0)}),w&&k&&p.off("input.mask").on("input.mask",e),m()})}})}),function(c){c.extend(c.fn,{validate:function(e){if(this.length){var n=c.data(this[0],"validator");return n||(this.attr("novalidate","novalidate"),n=new c.validator(e,this[0]),c.data(this[0],"validator",n),n.settings.onsubmit&&(this.validateDelegate(":submit","click",function(e){n.settings.submitHandler&&(n.submitButton=e.target),c(e.target).hasClass("cancel")&&(n.cancelSubmit=!0),void 0!==c(e.target).attr("formnovalidate")&&(n.cancelSubmit=!0)}),this.submit(function(t){function e(){var e;return!n.settings.submitHandler||(n.submitButton&&(e=c("<input type='hidden'/>").attr("name",n.submitButton.name).val(c(n.submitButton).val()).appendTo(n.currentForm)),n.settings.submitHandler.call(n,n.currentForm,t),n.submitButton&&e.remove(),!1)}return n.settings.debug&&t.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,e()):n.form()?n.pendingRequest?!(n.formSubmitted=!0):e():(n.focusInvalid(),!1)})),n)}e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){if(c(this[0]).is("form"))return this.validate().form();var e=!0,t=c(this[0].form).validate();return this.each(function(){e=e&&t.element(this)}),e},removeAttrs:function(e){var n={},i=this;return c.each(e.split(/\s/),function(e,t){n[t]=i.attr(t),i.removeAttr(t)}),n},rules:function(e,t){var n=this[0];if(e){var i=c.data(n.form,"validator").settings,o=i.rules,r=c.validator.staticRules(n);switch(e){case"add":c.extend(r,c.validator.normalizeRule(t)),delete r.messages,o[n.name]=r,t.messages&&(i.messages[n.name]=c.extend(i.messages[n.name],t.messages));break;case"remove":if(!t)return delete o[n.name],r;var s={};return c.each(t.split(/\s/),function(e,t){s[t]=r[t],delete r[t]}),s}}var a=c.validator.normalizeRules(c.extend({},c.validator.classRules(n),c.validator.attributeRules(n),c.validator.dataRules(n),c.validator.staticRules(n)),n);if(a.required){var l=a.required;delete a.required,a=c.extend({required:l},a)}return a}}),c.extend(c.expr[":"],{blank:function(e){return!c.trim(""+c(e).val())},filled:function(e){return!!c.trim(""+c(e).val())},unchecked:function(e){return!c(e).prop("checked")}}),c.validator=function(e,t){this.settings=c.extend(!0,{},c.validator.defaults,e),this.currentForm=t,this.init()},c.validator.format=function(n,e){return 1===arguments.length?function(){var e=c.makeArray(arguments);return e.unshift(n),c.validator.format.apply(this,e)}:(2<arguments.length&&e.constructor!==Array&&(e=c.makeArray(arguments).slice(1)),e.constructor!==Array&&(e=[e]),c.each(e,function(e,t){n=n.replace(RegExp("\\{"+e+"\\}","g"),function(){return t})}),n)},c.extend(c.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:c([]),errorLabelContainer:c([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){(9!==t.which||""!==this.elementValue(e))&&(e.name in this.submitted||e===this.lastElement)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(e,t,n){"radio"===e.type?this.findByName(e.name).addClass(t).removeClass(n):c(e).addClass(t).removeClass(n)},unhighlight:function(e,t,n){"radio"===e.type?this.findByName(e.name).removeClass(t).addClass(n):c(e).removeClass(t).addClass(n)}},setDefaults:function(e){c.extend(c.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:c.validator.format("Please enter no more than {0} characters."),minlength:c.validator.format("Please enter at least {0} characters."),rangelength:c.validator.format("Please enter a value between {0} and {1} characters long."),range:c.validator.format("Please enter a value between {0} and {1}."),max:c.validator.format("Please enter a value less than or equal to {0}."),min:c.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var t=c.data(this[0].form,"validator"),n="on"+e.type.replace(/^validate/,"");t.settings[n]&&t.settings[n].call(t,this[0],e)}this.labelContainer=c(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||c(this.currentForm),this.containers=c(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i=this.groups={};c.each(this.settings.groups,function(n,e){"string"==typeof e&&(e=e.split(/\s/)),c.each(e,function(e,t){i[t]=n})});var n=this.settings.rules;c.each(n,function(e,t){n[e]=c.validator.normalizeRule(t)}),c(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",e).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",e),this.settings.invalidHandler&&c(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),c.extend(this.submitted,this.errorMap),this.invalid=c.extend({},this.errorMap),this.valid()||c(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(e){e=this.validationTargetFor(this.clean(e)),this.lastElement=e,this.prepareElement(e),this.currentElements=c(e);var t=!1!==this.check(e);return t?delete this.invalid[e.name]:this.invalid[e.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),t},showErrors:function(t){if(t){for(var e in c.extend(this.errorMap,t),this.errorList=[],t)this.errorList.push({message:t[e],element:this.findByName(e)[0]});this.successList=c.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){c.fn.resetForm&&c(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t=0;for(var n in e)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{c(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===c.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var e=this,t={};return c(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in t||!e.objectLength(c(this).rules()))&&(t[this.name]=!0)})},clean:function(e){return c(e)[0]},errors:function(){var e=this.settings.errorClass.replace(" ",".");return c(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=c([]),this.toHide=c([]),this.currentElements=c([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(e){var t=c(e).attr("type"),n=c(e).val();return"radio"===t||"checkbox"===t?c("input[name='"+c(e).attr("name")+"']:checked").val():"string"==typeof n?n.replace(/\r/g,""):n},check:function(e){e=this.validationTargetFor(this.clean(e));var t,n=c(e).rules(),i=!1,o=this.elementValue(e);for(var r in n){var s={method:r,parameters:n[r]};try{if("dependency-mismatch"===(t=c.validator.methods[r].call(this,o,e,s.parameters))){i=!0;continue}if(i=!1,"pending"===t)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!t)return this.formatAndAdd(e,s),!1}catch(a){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+s.method+"' method.",a),a}}return i?void 0:(this.objectLength(n)&&this.successList.push(e),!0)},customDataMessage:function(e,t){return c(e).data("msg-"+t.toLowerCase())||e.attributes&&c(e).attr("data-msg-"+t.toLowerCase())},customMessage:function(e,t){var n=this.settings.messages[e];return n&&(n.constructor===String?n:n[t])},findDefined:function(){for(var e=0;arguments.length>e;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(e,t){return this.findDefined(this.customMessage(e.name,t),this.customDataMessage(e,t),!this.settings.ignoreTitle&&e.title||void 0,c.validator.messages[t],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,t){var n=this.defaultMessage(e,t.method),i=/\$?\{(\d+)\}/g;"function"==typeof n?n=n.call(this,t.parameters,e):i.test(n)&&(n=c.validator.format(n.replace(i,"{$1}"),t.parameters)),this.errorList.push({message:n,element:e}),this.errorMap[e.name]=n,this.submitted[e.name]=n},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t;for(e=0;this.errorList[e];e++){var n=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return c(this.errorList).map(function(){return this.element})},showLabel:function(e,t){var n=this.errorsFor(e);n.length?(n.removeClass(this.settings.validClass).addClass(this.settings.errorClass),n.html(t)):(n=c("<"+this.settings.errorElement+">").attr("for",this.idOrName(e)).addClass(this.settings.errorClass).html(t||""),this.settings.wrapper&&(n=n.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(n).length||(this.settings.errorPlacement?this.settings.errorPlacement(n,c(e)):n.insertAfter(e))),!t&&this.settings.success&&(n.text(""),"string"==typeof this.settings.success?n.addClass(this.settings.success):this.settings.success(n,e)),this.toShow=this.toShow.add(n)},errorsFor:function(e){var t=this.idOrName(e);return this.errors().filter(function(){return c(this).attr("for")===t})},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name).not(this.settings.ignore)[0]),e},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(e){return c(this.currentForm).find("[name='"+e+"']")},getLength:function(e,t){switch(t.nodeName.toLowerCase()){case"select":return c("option:selected",t).length;case"input":if(this.checkable(t))return this.findByName(t.name).filter(":checked").length}return e.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{"boolean":function(e){return e},string:function(e,t){return!!c(e,t.form).length},"function":function(e,t){return e(t)}},optional:function(e){var t=this.elementValue(e);return!c.validator.methods.required.call(this,t,e)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(e,t){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],t&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(c(this.currentForm).submit(),this.formSubmitted=!1):!t&&0===this.pendingRequest&&this.formSubmitted&&(c(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return c.data(e,"previousValue")||c.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,t){e.constructor===String?this.classRuleSettings[e]=t:c.extend(this.classRuleSettings,e)},classRules:function(e){var t={},n=c(e).attr("class");return n&&c.each(n.split(" "),function(){this in c.validator.classRuleSettings&&c.extend(t,c.validator.classRuleSettings[this])}),t},attributeRules:function(e){var t={},n=c(e),i=n[0].getAttribute("type");for(var o in c.validator.methods){var r;r="required"===o?(""===(r=n.get(0).getAttribute(o))&&(r=!0),!!r):n.attr(o),/min|max/.test(o)&&(null===i||/number|range|text/.test(i))&&(r=Number(r)),r?t[o]=r:i===o&&"range"!==i&&(t[o]=!0)}return t.maxlength&&/-1|2147483647|524288/.test(t.maxlength)&&delete t.maxlength,t},dataRules:function(e){var t,n,i={},o=c(e);for(t in c.validator.methods)void 0!==(n=o.data("rule-"+t.toLowerCase()))&&(i[t]=n);return i},staticRules:function(e){var t={},n=c.data(e.form,"validator");return n.settings.rules&&(t=c.validator.normalizeRule(n.settings.rules[e.name])||{}),t},normalizeRules:function(i,o){return c.each(i,function(e,t){if(!1!==t){if(t.param||t.depends){var n=!0;switch(typeof t.depends){case"string":n=!!c(t.depends,o.form).length;break;case"function":n=t.depends.call(o,o)}n?i[e]=void 0===t.param||t.param:delete i[e]}}else delete i[e]}),c.each(i,function(e,t){i[e]=c.isFunction(t)?t(o):t}),c.each(["minlength","maxlength"],function(){i[this]&&(i[this]=Number(i[this]))}),c.each(["rangelength","range"],function(){var e;i[this]&&(c.isArray(i[this])?i[this]=[Number(i[this][0]),Number(i[this][1])]:"string"==typeof i[this]&&(e=i[this].split(/[\s,]+/),i[this]=[Number(e[0]),Number(e[1])]))}),c.validator.autoCreateRanges&&(i.min&&i.max&&(i.range=[i.min,i.max],delete i.min,delete i.max),i.minlength&&i.maxlength&&(i.rangelength=[i.minlength,i.maxlength],delete i.minlength,delete i.maxlength)),i},normalizeRule:function(e){if("string"==typeof e){var t={};c.each(e.split(/\s/),function(){t[this]=!0}),e=t}return e},addMethod:function(e,t,n){c.validator.methods[e]=t,c.validator.messages[e]=void 0!==n?n:c.validator.messages[e],t.length<3&&c.validator.addClassRules(e,c.validator.normalizeRule(e))},methods:{required:function(e,t,n){if(!this.depend(n,t))return"dependency-mismatch";if("select"!==t.nodeName.toLowerCase())return this.checkable(t)?0<this.getLength(e,t):0<c.trim(e).length;var i=c(t).val();return i&&0<i.length},email:function(e,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},url:function(e,t){return this.optional(t)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(""+new Date(e))},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;for(var n=0,i=0,o=!1,r=(e=e.replace(/\D/g,"")).length-1;0<=r;r--){var s=e.charAt(r);i=parseInt(s,10),o&&9<(i*=2)&&(i-=9),n+=i,o=!o}return 0==n%10},minlength:function(e,t,n){var i=c.isArray(e)?e.length:this.getLength(c.trim(e),t);return this.optional(t)||n<=i},maxlength:function(e,t,n){var i=c.isArray(e)?e.length:this.getLength(c.trim(e),t);return this.optional(t)||i<=n},rangelength:function(e,t,n){var i=c.isArray(e)?e.length:this.getLength(c.trim(e),t);return this.optional(t)||i>=n[0]&&n[1]>=i},min:function(e,t,n){return this.optional(t)||n<=e},max:function(e,t,n){return this.optional(t)||e<=n},range:function(e,t,n){return this.optional(t)||e>=n[0]&&n[1]>=e},equalTo:function(e,t,n){var i=c(n);return this.settings.onfocusout&&i.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){c(t).valid()}),e===i.val()},remote:function(r,s,e){if(this.optional(s))return"dependency-mismatch";var a=this.previousValue(s);if(this.settings.messages[s.name]||(this.settings.messages[s.name]={}),a.originalMessage=this.settings.messages[s.name].remote,this.settings.messages[s.name].remote=a.message,e="string"==typeof e&&{url:e}||e,a.old===r)return a.valid;a.old=r;var l=this;this.startRequest(s);var t={};return t[s.name]=r,c.ajax(c.extend(!0,{url:e,mode:"abort",port:"validate"+s.name,dataType:"json",data:t,success:function(e){l.settings.messages[s.name].remote=a.originalMessage;var t=!0===e||"true"===e;if(t){var n=l.formSubmitted;l.prepareElement(s),l.formSubmitted=n,l.successList.push(s),delete l.invalid[s.name],l.showErrors()}else{var i={},o=e||l.defaultMessage(s,"remote");i[s.name]=a.message=c.isFunction(o)?o(r):o,l.invalid[s.name]=!0,l.showErrors(i)}a.valid=t,l.stopRequest(s,t)}},e)),"pending"}}}),c.format=c.validator.format}(jQuery),function(i){var o={};if(i.ajaxPrefilter)i.ajaxPrefilter(function(e,t,n){var i=e.port;"abort"===e.mode&&(o[i]&&o[i].abort(),o[i]=n)});else{var r=i.ajax;i.ajax=function(e){var t=("mode"in e?e:i.ajaxSettings).mode,n=("port"in e?e:i.ajaxSettings).port;return"abort"===t?(o[n]&&o[n].abort(),o[n]=r.apply(this,arguments),o[n]):r.apply(this,arguments)}}}(jQuery),function(o){o.extend(o.fn,{validateDelegate:function(n,e,i){return this.bind(e,function(e){var t=o(e.target);return t.is(n)?i.apply(t,arguments):void 0})}})}(jQuery),function(){var e,t,n,i,o,r,s,a,l,c,d,u,h,f,m,p,g,E,T,C,v,I,O,b,D,R,y,_;(function(u){function r(e,t){var n,i,o,r,s,a,l,c,d,u,h=t&&t.split("/"),f=C.map,m=f&&f["*"]||{};if(e&&"."===e.charAt(0)&&t){for(e=(h=h.slice(0,h.length-1)).concat(e.split("/")),c=0;c<e.length;c+=1)if("."===(u=e[c]))e.splice(c,1),c-=1;else if(".."===u){if(1===c&&(".."===e[2]||".."===e[0]))break;0<c&&(e.splice(c-1,2),c-=2)}e=e.join("/")}if((h||m)&&f){for(c=(n=e.split("/")).length;0<c;c-=1){if(i=n.slice(0,c).join("/"),h)for(d=h.length;0<d;d-=1)if((o=f[h.slice(0,d).join("/")])&&(o=o[i])){r=o,s=c;break}if(r)break;!a&&m&&m[i]&&(a=m[i],l=c)}!r&&a&&(r=a,s=l),r&&(n.splice(0,s,r),e=n.join("/"))}return e}function h(e,t){return function(){return l.apply(u,n.call(arguments,0).concat([e,t]))}}function s(t){return function(e){return r(e,t)}}function f(t){return function(e){E[t]=e}}function m(e){if(T.hasOwnProperty(e)){var t=T[e];delete T[e],v[e]=!0,a.apply(u,t)}if(!E.hasOwnProperty(e))throw new Error("No "+e);return E[e]}function p(e,t){var n,i,o=e.indexOf("!");return e=-1!==o?(n=r(e.slice(0,o),t),e=e.slice(o+1),(i=m(n))&&i.normalize?i.normalize(e,s(t)):r(e,t)):r(e,t),{f:n?n+"!"+e:e,n:e,p:i}}function g(e){return function(){return C&&C.config&&C.config[e]||{}}}var a,l,E={},T={},C={},v={},n=[].slice;a=function(e,t,n,i){var o,r,s,a,l,c,d=[];if(i=i||e,"function"==typeof n){for(t=!t.length&&n.length?["require","exports","module"]:t,l=0;l<t.length;l+=1)if("require"===(r=(a=p(t[l],i)).f))d[l]=h(e);else if("exports"===r)d[l]=E[e]={},c=!0;else if("module"===r)o=d[l]={id:e,uri:"",exports:E[e],config:g(e)};else if(E.hasOwnProperty(r)||T.hasOwnProperty(r))d[l]=m(r);else if(a.p)a.p.load(a.n,h(i,!0),f(r),{}),d[l]=E[r];else if(!v[r])throw new Error(e+" missing "+r);s=n.apply(E[e],d),e&&(o&&o.exports!==u&&o.exports!==E[e]?E[e]=o.exports:s===u&&c||(E[e]=s))}else e&&(E[e]=n)},e=l=function(e,t,n,i,o){return"string"==typeof e?m(p(e,t).f):(e.splice||(C=e,t.splice?(e=t,t=n,n=null):e=u),t=t||function(){},"function"==typeof n&&(n=i,i=o),i?a(u,e,t,n):setTimeout(function(){a(u,e,t,n)},15),l)},l.config=function(e){return C=e,l},(t=function(e,t,n){t.splice||(n=t,t=[]),T[e]=[e,t,n]}).amd={jQuery:!0}})(),t("almond",function(){}),y=this,t("bootstrap/bootstrap-transition",["jquery"],function(){return function(){var t;(t=window.jQuery)(function(){var e;t.support.transition=(e=function(){var e,t=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in n)if(t.style[e]!==undefined)return n[e]}())&&{end:e}})}.call(y),_}),D=this,t("bootstrap/bootstrap-affix",["bootstrap/bootstrap-transition"],function(){return function(){!function(l){var o=function(e,t){this.options=l.extend({},l.fn.affix.defaults,t),this.$window=l(window).on("scroll.affix.data-api",l.proxy(this.checkPosition,this)).on("click.affix.data-api",l.proxy(function(){setTimeout(l.proxy(this.checkPosition,this),1)},this)),this.$element=l(e),this.checkPosition()}
;o.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e,t=l(document).height(),n=this.$window.scrollTop(),i=this.$element.offset(),o=this.options.offset,r=o.bottom,s=o.top,a="affix affix-top affix-bottom";"object"!=typeof o&&(r=s=o),"function"==typeof s&&(s=o.top()),"function"==typeof r&&(r=o.bottom()),e=!(null!=this.unpin&&n+this.unpin<=i.top)&&(null!=r&&i.top+this.$element.height()>=t-r?"bottom":null!=s&&n<=s&&"top"),this.affixed!==e&&(this.affixed=e,this.unpin="bottom"==e?i.top-n:null,this.$element.removeClass(a).addClass("affix"+(e?"-"+e:"")))}};var e=l.fn.affix;l.fn.affix=function(i){return this.each(function(){var e=l(this),t=e.data("affix"),n="object"==typeof i&&i;t||e.data("affix",t=new o(this,n)),"string"==typeof i&&t[i]()})},l.fn.affix.Constructor=o,l.fn.affix.defaults={offset:0},l.fn.affix.noConflict=function(){return l.fn.affix=e,this},l(window).on("load",function(){l('[data-spy="affix"]').each(function(){var e=l(this),t=e.data();t.offset=t.offset||{},t.offsetBottom&&(t.offset.bottom=t.offsetBottom),t.offsetTop&&(t.offset.top=t.offsetTop),e.affix(t)})})}(window.jQuery)}.call(D),R}),O=this,t("bootstrap/bootstrap-alert",["bootstrap/bootstrap-transition"],function(){return function(){!function(r){var t='[data-dismiss="alert"]',i=function(e){r(e).on("click",t,this.close)};i.prototype.close=function(e){function t(){n.trigger("closed").remove()}var n,i=r(this),o=i.attr("data-target");o||(o=(o=i.attr("href"))&&o.replace(/.*(?=#[^\s]*$)/,"")),n=r(o),e&&e.preventDefault(),n.length||(n=i.hasClass("alert")?i:i.parent()),n.trigger(e=r.Event("close")),e.isDefaultPrevented()||(n.removeClass("in"),r.support.transition&&n.hasClass("fade")?n.on(r.support.transition.end,t):t())};var e=r.fn.alert;r.fn.alert=function(n){return this.each(function(){var e=r(this),t=e.data("alert");t||e.data("alert",t=new i(this)),"string"==typeof n&&t[n].call(e)})},r.fn.alert.Constructor=i,r.fn.alert.noConflict=function(){return r.fn.alert=e,this},r(document).on("click.alert.data-api",t,i.prototype.close)}(window.jQuery)}.call(O),b}),v=this,t("bootstrap/bootstrap-button",["bootstrap/bootstrap-transition"],function(){return function(){!function(o){var r=function(e,t){this.$element=o(e),this.options=o.extend({},o.fn.button.defaults,t)};r.prototype.setState=function(e){var t="disabled",n=this.$element,i=n.data(),o=n.is("input")?"val":"html";e+="Text",i.resetText||n.data("resetText",n[o]()),n[o](i[e]||this.options[e]),setTimeout(function(){"loadingText"==e?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},r.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")};var e=o.fn.button;o.fn.button=function(i){return this.each(function(){var e=o(this),t=e.data("button"),n="object"==typeof i&&i;t||e.data("button",t=new r(this,n)),"toggle"==i?t.toggle():i&&t.setState(i)})},o.fn.button.defaults={loadingText:"loading..."},o.fn.button.Constructor=r,o.fn.button.noConflict=function(){return o.fn.button=e,this},o(document).on("click.button.data-api","[data-toggle^=button]",function(e){var t=o(e.target);t.hasClass("btn")||(t=t.closest(".btn")),t.button("toggle")})}(window.jQuery)}.call(v),I}),T=this,t("bootstrap/bootstrap-carousel",["bootstrap/bootstrap-transition"],function(){return function(){!function(c){var r=function(e,t){this.$element=c(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=t,"hover"==this.options.pause&&this.$element.on("mouseenter",c.proxy(this.pause,this)).on("mouseleave",c.proxy(this.cycle,this))};r.prototype={cycle:function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(c.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(e){var t=this.getActiveIndex(),n=this;if(!(e>this.$items.length-1||e<0))return this.sliding?this.$element.one("slid",function(){n.to(e)}):t==e?this.pause().cycle():this.slide(t<e?"next":"prev",c(this.$items[e]))},pause:function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&c.support.transition.end&&(this.$element.trigger(c.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){if(!this.sliding)return this.slide("next")},prev:function(){if(!this.sliding)return this.slide("prev")},slide:function(e,t){var n,i=this.$element.find(".item.active"),o=t||i[e](),r=this.interval,s="next"==e?"left":"right",a="next"==e?"first":"last",l=this;if(this.sliding=!0,r&&this.pause(),o=o.length?o:this.$element.find(".item")[a](),n=c.Event("slide",{relatedTarget:o[0],direction:s}),!o.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var e=c(l.$indicators.children()[l.getActiveIndex()]);e&&e.addClass("active")})),c.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(n),n.isDefaultPrevented())return;o.addClass(e),o[0].offsetWidth,i.addClass(s),o.addClass(s),this.$element.one(c.support.transition.end,function(){o.removeClass([e,s].join(" ")).addClass("active"),i.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger("slid")},0)})}else{if(this.$element.trigger(n),n.isDefaultPrevented())return;i.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return r&&this.cycle(),this}}};var e=c.fn.carousel;c.fn.carousel=function(o){return this.each(function(){var e=c(this),t=e.data("carousel"),n=c.extend({},c.fn.carousel.defaults,"object"==typeof o&&o),i="string"==typeof o?o:n.slide;t||e.data("carousel",t=new r(this,n)),"number"==typeof o?t.to(o):i?t[i]():n.interval&&t.pause().cycle()})},c.fn.carousel.defaults={interval:5e3,pause:"hover"},c.fn.carousel.Constructor=r,c.fn.carousel.noConflict=function(){return c.fn.carousel=e,this},c(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(e){var t,n,i=c(this),o=c(i.attr("data-target")||(t=i.attr("href"))&&t.replace(/.*(?=#[^\s]+$)/,"")),r=c.extend({},o.data(),i.data());o.carousel(r),(n=i.attr("data-slide-to"))&&o.data("carousel").pause().to(n).cycle(),e.preventDefault()})}(window.jQuery)}.call(T),C}),g=this,t("bootstrap/bootstrap-collapse",["bootstrap/bootstrap-transition"],function(){return function(){!function(r){var o=function(e,t){this.$element=r(e),this.options=r.extend({},r.fn.collapse.defaults,t),this.options.parent&&(this.$parent=r(this.options.parent)),this.options.toggle&&this.toggle()};o.prototype={constructor:o,dimension:function(){return this.$element.hasClass("width")?"width":"height"},show:function(){var e,t,n,i;if(!this.transitioning&&!this.$element.hasClass("in")){if(e=this.dimension(),t=r.camelCase(["scroll",e].join("-")),(n=this.$parent&&this.$parent.find("> .accordion-group > .in"))&&n.length){if((i=n.data("collapse"))&&i.transitioning)return;n.collapse("hide"),i||n.data("collapse",null)}this.$element[e](0),this.transition("addClass",r.Event("show"),"shown"),r.support.transition&&this.$element[e](this.$element[0][t])}},hide:function(){var e;!this.transitioning&&this.$element.hasClass("in")&&(e=this.dimension(),this.reset(this.$element[e]()),this.transition("removeClass",r.Event("hide"),"hidden"),this.$element[e](0))},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[null!==e?"addClass":"removeClass"]("collapse"),this},transition:function(e,t,n){var i=this,o=function(){"show"==t.type&&i.reset(),i.transitioning=0,i.$element.trigger(n)};this.$element.trigger(t),t.isDefaultPrevented()||(this.transitioning=1,this.$element[e]("in"),r.support.transition&&this.$element.hasClass("collapse")?this.$element.one(r.support.transition.end,o):o())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var e=r.fn.collapse;r.fn.collapse=function(i){return this.each(function(){var e=r(this),t=e.data("collapse"),n=r.extend({},r.fn.collapse.defaults,e.data(),"object"==typeof i&&i);t||e.data("collapse",t=new o(this,n)),"string"==typeof i&&t[i]()})},r.fn.collapse.defaults={toggle:!0},r.fn.collapse.Constructor=o,r.fn.collapse.noConflict=function(){return r.fn.collapse=e,this},r(document).on("click.collapse.data-api","[data-toggle=collapse]",function(e){var t,n=r(this),i=n.attr("data-target")||e.preventDefault()||(t=n.attr("href"))&&t.replace(/.*(?=#[^\s]+$)/,""),o=r(i).data("collapse")?"toggle":n.data();n[r(i).hasClass("in")?"addClass":"removeClass"]("collapsed"),r(i).collapse(o)})}(window.jQuery)}.call(g),E}),m=this,t("bootstrap/bootstrap-dropdown",["bootstrap/bootstrap-transition"],function(){return function(){!function(s){function i(){s(".dropdown-backdrop").remove(),s(l).each(function(){a(s(this)).removeClass("open")})}function a(e){var t,n=e.attr("data-target");return n||(n=(n=e.attr("href"))&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),(t=n&&s(n))&&t.length||(t=e.parent()),t}var l="[data-toggle=dropdown]",o=function(e){var t=s(e).on("click.dropdown.data-api",this.toggle);s("html").on("click.dropdown.data-api",function(){t.parent().removeClass("open")})};o.prototype={constructor:o,toggle:function(){var e,t,n=s(this);if(!n.is(".disabled, :disabled"))return t=(e=a(n)).hasClass("open"),i(),t||("ontouchstart"in document.documentElement&&s('<div class="dropdown-backdrop"/>').insertBefore(s(this)).on("click",i),e.toggleClass("open")),n.focus(),!1},keydown:function(e){var t,n,i,o,r;if(/(38|40|27)/.test(e.keyCode)&&(t=s(this),e.preventDefault(),e.stopPropagation(),!t.is(".disabled, :disabled"))){if(!(o=(i=a(t)).hasClass("open"))||o&&27==e.keyCode)return 27==e.which&&i.find(l).focus(),t.click();(n=s("[role=menu] li:not(.divider):visible a",i)).length&&(r=n.index(n.filter(":focus")),38==e.keyCode&&0<r&&r--,40==e.keyCode&&r<n.length-1&&r++,~r||(r=0),n.eq(r).focus())}}};var e=s.fn.dropdown;s.fn.dropdown=function(n){return this.each(function(){var e=s(this),t=e.data("dropdown");t||e.data("dropdown",t=new o(this)),"string"==typeof n&&t[n].call(e)})},s.fn.dropdown.Constructor=o,s.fn.dropdown.noConflict=function(){return s.fn.dropdown=e,this},s(document).on("click.dropdown.data-api",i).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api",l,o.prototype.toggle).on("keydown.dropdown.data-api",l+", [role=menu]",o.prototype.keydown)}(window.jQuery)}.call(m),p}),h=this,t("bootstrap/bootstrap-modal",["bootstrap/bootstrap-transition"],function(){return function(){!function(r){var o=function(e,t){this.options=t,this.$element=r(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",r.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};o.prototype={constructor:o,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,e=r.Event("show");this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var e=r.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),e&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),e?t.$element.one(r.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")}))},hide:function(e){e&&e.preventDefault(),e=r.Event("hide"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),r(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),r.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;r(document).on("focusin.modal",function(e){t.$element[0]!==e.target&&!t.$element.has(e.target).length&&t.$element.focus()})},escape:function(){var t=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(e){27==e.which&&t.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var e=this,t=setTimeout(function(){e.$element.off(r.support.transition.end),e.hideModal()},500);this.$element.one(r.support.transition.end,function(){clearTimeout(t),e.hideModal()})},hideModal:function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(e){var t=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=r.support.transition&&t;if(this.$backdrop=r('<div class="modal-backdrop '+t+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?r.proxy(this.$element[0].focus,this.$element[0]):r.proxy(this.hide,this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;n?this.$backdrop.one(r.support.transition.end,e):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),r.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(r.support.transition.end,e):e()):e&&e()}};var e=r.fn.modal;r.fn.modal=function(i){return this.each(function(){var e=r(this),t=e.data("modal"),n=r.extend({},r.fn.modal.defaults,e.data(),"object"==typeof i&&i);t||e.data("modal",t=new o(this,n)),"string"==typeof i?t[i]():n.show&&t.show()})},r.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},r.fn.modal.Constructor=o,r.fn.modal.noConflict=function(){return r.fn.modal=e,this},r(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var t=r(this),n=t.attr("href"),i=r(t.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),o=i.data("modal")?"toggle":r.extend({remote:!/#/.test(n)&&n},i.data(),t.data());e.preventDefault(),i.modal(o).one("hide",function(){t.focus()})})}(window.jQuery)}.call(h),f}),d=this,t("bootstrap/bootstrap-tooltip",["bootstrap/bootstrap-transition"],function(){return function(){!function(l){var o=function(e,t){this.init("tooltip",e,t)};o.prototype={constructor:o,init:function(e,t,n){var i,o,r,s,a;for(this.type=e,this.$element=l(t),this.options=this.getOptions(n),this.enabled=!0,a=(r=this.options.trigger.split(" ")).length;a--;)"click"==(s=r[a])?this.$element.on("click."+this.type,this.options.selector,l.proxy(this.toggle,this)):"manual"!=s&&(i="hover"==s?"mouseenter":"focus",o="hover"==s?"mouseleave":"blur",this.$element.on(i+"."+this.type,this.options.selector,l.proxy(this.enter,this)),this.$element.on(o+"."+this.type,this.options.selector,l.proxy(this.leave,this)));this.options.selector?this._options=l.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(e){return(e=l.extend({},l.fn[this.type].defaults,this.$element.data(),e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},enter:function(e){var t,n=l.fn[this.type].defaults,i={};if(this._options&&l.each(this._options,function(e,t){n[e]!=t&&(i[e]=t)}),!(t=l(e.currentTarget)[this.type](i).data(this.type)).options.delay||!t.options.delay.show)return t.show();clearTimeout(this.timeout),t.hoverState="in",this.timeout=setTimeout(function(){"in"==t.hoverState&&t.show()},t.options.delay.show)},leave:function(e){var t=l(e.currentTarget)[this.type](this._options).data(this.type);if(this.timeout&&clearTimeout(this.timeout),!t.options.delay||!t.options.delay.hide)return t.hide();t.hoverState="out",this.timeout=setTimeout(function(){"out"==t.hoverState&&t.hide()},t.options.delay.hide)},show:function(){var e,t,n,i,o,r,s=l.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(s),s.isDefaultPrevented())return;switch(e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),o="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,e.detach().css({top:0,left:0,display:"block"}),this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element),t=this.getPosition(),n=e[0].offsetWidth,i=e[0].offsetHeight,o){case"bottom":r={top:t.top+t.height,left:t.left+t.width/2-n/2};break;case"top":r={top:t.top-i,left:t.left+t.width/2-n/2};break;case"left":r={top:t.top+t.height/2-i/2,left:t.left-n};break;case"right":r={top:t.top+t.height/2-i/2,left:t.left+t.width}}this.applyPlacement(r,o),this.$element.trigger("shown")}},applyPlacement:function(e,t){var n,i,o,r,s=this.tip(),a=s[0].offsetWidth,l=s[0].offsetHeight;s.offset(e).addClass(t).addClass("in"),n=s[0].offsetWidth,i=s[0].offsetHeight,"top"==t&&i!=l&&(e.top=e.top+l-i,r=!0),"bottom"==t||"top"==t?(o=0,e.left<0&&(o=-2*e.left,e.left=0,s.offset(e),n=s[0].offsetWidth,i=s[0].offsetHeight),this.replaceArrow(o-a+n,n,"left")):this.replaceArrow(i-l,i,"top"),r&&s.offset(e)},replaceArrow:function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function e(){var e=setTimeout(function(){t.off(l.support.transition.end).detach()},500);t.one(l.support.transition.end,function(){clearTimeout(e),t.detach()})}var t=this.tip(),n=l.Event("hide");if(this.$element.trigger(n),!n.isDefaultPrevented())return t.removeClass("in"),l.support.transition&&this.$tip.hasClass("fade")?e():t.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var e=this.$element[0];return l.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},getTitle:function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},tip:function(){return this.$tip=this.$tip||l(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var t=e?l(e.currentTarget)[this.type](this._options).data(this.type):this;t.tip().hasClass("in")?t.hide():t.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var e=l.fn.tooltip;l.fn.tooltip=function(i){return this.each(function(){var e=l(this),t=e.data("tooltip"),n="object"==typeof i&&i;t||e.data("tooltip",t=new o(this,n)),"string"==typeof i&&t[i]()})},l.fn.tooltip.Constructor=o,l.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},l.fn.tooltip.noConflict=function(){return l.fn.tooltip=e,this}}(window.jQuery)}.call(d),u}),l=this,t("bootstrap/bootstrap-popover",["bootstrap/bootstrap-transition","bootstrap/bootstrap-tooltip"],function(){return function(){!function(o){var r=function(e,t){this.init("popover",e,t)};r.prototype=o.extend({},o.fn.tooltip.Constructor.prototype,{constructor:r,setContent:function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"html":"text"](n),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e=this.$element,t=this.options;return("function"==typeof t.content?t.content.call(e[0]):t.content)||e.attr("data-content")},tip:function(){return this.$tip||(this.$tip=o(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var e=o.fn.popover;o.fn.popover=function(i){return this.each(function(){var e=o(this),t=e.data("popover"),n="object"==typeof i&&i;t||e.data("popover",t=new r(this,n)),"string"==typeof i&&t[i]()})},o.fn.popover.Constructor=r,o.fn.popover.defaults=o.extend({},o.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),o.fn.popover.noConflict=function(){return o.fn.popover=e,this}}(window.jQuery)}.call(l),c}),s=this,t("bootstrap/bootstrap-scrollspy",["bootstrap/bootstrap-transition"],function(){return function(){!function(r){function o(e,t){var n,i=r.proxy(this.process,this),o=r(e).is("body")?r(window):r(e);this.options=r.extend({},r.fn.scrollspy.defaults,t),this.$scrollElement=o.on("scroll.scroll-spy.data-api",i),this.selector=(this.options.target||(n=r(e).attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=r("body"),this.refresh(),this.process()}o.prototype={constructor:o,refresh:function(){var i=this;this.offsets=r([]),this.targets=r([]),this.$body.find(this.selector).map(function(){var e=r(this),t=e.data("target")||e.attr("href"),n=/^#\w/.test(t)&&r(t);return n&&n.length&&[[n.position().top+(!r.isWindow(i.$scrollElement.get(0))&&i.$scrollElement.scrollTop()),t]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){i.offsets.push(this[0]),i.targets.push(this[1])})},process:function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=(this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight)-this.$scrollElement.height(),i=this.offsets,o=this.targets,r=this.activeTarget;if(n<=t)return r!=(e=o.last()[0])&&this.activate(e);for(e=i.length;e--;)r!=o[e]&&t>=i[e]&&(!i[e+1]||t<=i[e+1])&&this.activate(o[e])},activate:function(e){var t,n;this.activeTarget=e,r(this.selector).parent(".active").removeClass("active"),n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',(t=r(n).parent("li").addClass("active")).parent(".dropdown-menu").length&&(t=t.closest("li.dropdown").addClass("active")),t.trigger("activate")}};var e=r.fn.scrollspy;r.fn.scrollspy=function(i){return this.each(function(){var e=r(this),t=e.data("scrollspy"),n="object"==typeof i&&i;t||e.data("scrollspy",t=new o(this,n)),"string"==typeof i&&t[i]()})},r.fn.scrollspy.Constructor=o,r.fn.scrollspy.defaults={offset:10},r.fn.scrollspy.noConflict=function(){return r.fn.scrollspy=e,this},r(window).on("load",function(){r('[data-spy="scroll"]').each(function(){var e=r(this);e.scrollspy(e.data())})})}(window.jQuery)}.call(s),a}),o=this,t("bootstrap/bootstrap-tab",["bootstrap/bootstrap-transition"],function(){return function(){!function(s){var i=function(e){this.element=s(e)};i.prototype={constructor:i,show:function(){var e,t,n,i=this.element,o=i.closest("ul:not(.dropdown-menu)"),r=i.attr("data-target");r||(r=(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]*$)/,"")),i.parent("li").hasClass("active")||(e=o.find(".active:last a")[0],n=s.Event("show",{relatedTarget:e}),i.trigger(n),n.isDefaultPrevented()||(t=s(r),this.activate(i.parent("li"),o),this.activate(t,t.parent(),function(){i.trigger({type:"shown",relatedTarget:e})})))},activate:function(e,t,n){function i(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),r?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),n&&n()}var o=t.find("> .active"),r=n&&s.support.transition&&o.hasClass("fade");r?o.one(s.support.transition.end,i):i(),o.removeClass("in")}};var e=s.fn.tab;s.fn.tab=function(n){return this.each(function(){var e=s(this),t=e.data("tab");t||e.data("tab",t=new i(this)),"string"==typeof n&&t[n]()})},s.fn.tab.Constructor=i,s.fn.tab.noConflict=function(){return s.fn.tab=e,this},s(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),s(this).tab("show")})}(window.jQuery)}.call(o),r}),n=this,t("bootstrap/bootstrap-typeahead",["bootstrap/bootstrap-transition"],function(){return function(){!function(o){var r=function(e,t){this.$element=o(e),this.options=o.extend({},o.fn.typeahead.defaults,t),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=o(this.options.menu),this.shown=!1,this.listen()};r.prototype={constructor:r,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var e=o.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:e.top+e.height,left:e.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var e;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(e=o.isFunction(this.source)?this.source(this.query,o.proxy(this.process,this)):this.source)?this.process(e):this},process:function(e){var t=this;return e=o.grep(e,function(e){return t.matcher(e)}),(e=this.sorter(e)).length?this.render(e.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){for(var t,n=[],i=[],o=[];t=e.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?i.push(t):o.push(t):n.push(t);return n.concat(i,o)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(e){var n=this;return(e=o(e).map(function(e,t){return(e=o(n.options.item).attr("data-value",t)).find("a").html(n.highlighter(t)),e[0]})).first().addClass("active"),this.$menu.html(e),this},next:function(){var e=this.$menu.find(".active").removeClass("active").next();e.length||(e=o(this.$menu.find("li")[0])),e.addClass("active")},prev:function(){var e=this.$menu.find(".active").removeClass("active").prev();e.length||(e=this.$menu.find("li").last()),e.addClass("active")},listen:function(){this.$element.on("focus",o.proxy(this.focus,this)).on("blur",o.proxy(this.blur,this)).on("keypress",o.proxy(this.keypress,this)).on("keyup",o.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",o.proxy(this.keydown,this)),this.$menu.on("click",o.proxy(this.click,this)).on("mouseenter","li",o.proxy(this.mouseenter,this)).on("mouseleave","li",o.proxy(this.mouseleave,this))},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},move:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(e){this.suppressKeyPressRepeat=~o.inArray(e.keyCode,[40,38,9,13,27]),this.move(e)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(e){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),o(e.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var e=o.fn.typeahead;o.fn.typeahead=function(i){return this.each(function(){var e=o(this),t=e.data("typeahead"),n="object"==typeof i&&i;t||e.data("typeahead",t=new r(this,n)),"string"==typeof i&&t[i]()})},o.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},o.fn.typeahead.Constructor=r,o.fn.typeahead.noConflict=function(){return o.fn.typeahead=e,this},o(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var e=o(this);e.data("typeahead")||e.typeahead(e.data())})}(window.jQuery)}.call(n),i}),t("fuelux/checkbox",["require","jquery"],function(e){var s=e("jquery"),a=function(e,t){this.$element=s(e),this.options=s.extend({},s.fn.checkbox.defaults,t),this.$label=this.$element.parent(),this.$icon=this.$label.find("i"),this.$chk=this.$label.find("input[type=checkbox]"),this.setState(this.$chk),this.$chk.on("change",s.proxy(this.itemchecked,this))};a.prototype={constructor:a,setState:function(e){var t=e.is(":checked"),n=e.is(":disabled");this.$icon.removeClass("checked").removeClass("disabled"),!0===t&&this.$icon.addClass("checked"),!0===n&&this.$icon.addClass("disabled")},enable:function(){this.$chk.attr("disabled",!1),this.$icon.removeClass("disabled")},disable:function(){this.$chk.attr("disabled",!0),this.$icon.addClass("disabled")},toggle:function(){this.$chk.click()},itemchecked:function(e){var t=s(e.target);this.setState(t)}},s.fn.checkbox=function(i,o){var r,e=this.each(function(){var e=s(this),t=e.data("checkbox"),n="object"==typeof i&&i;t||e.data("checkbox",t=new a(this,n)),"string"==typeof i&&(r=t[i](o))});return r===undefined?e:r},s.fn.checkbox.defaults={},s.fn.checkbox.Constructor=a,s(function(){s(window).on("load",function(){s(".checkbox-custom > input[type=checkbox]").each(function(){var e=s(this);e.data("checkbox")||e.checkbox(e.data())})})})}),t("fuelux/util",["require","jquery"],function(e){function i(e,t){return(e.textContent||e.innerText||n(e).text()||"").toLowerCase()===(t||"").toLowerCase()}var n=e("jquery");n.expr[":"].fuelTextExactCI=n.expr.createPseudo?n.expr.createPseudo(function(t){return function(e){return i(e,t)}}):function(e,t,n){return i(e,n[3])}}),t("fuelux/combobox",["require","jquery","./util"],function(e){var s=e("jquery");e("./util");var a=function(e,t){this.$element=s(e),this.options=s.extend({},s.fn.combobox.defaults,t),this.$element.on("click","a",s.proxy(this.itemclicked,this)),this.$element.on("change","input",s.proxy(this.inputchanged,this)),this.$input=this.$element.find("input"),this.$button=this.$element.find(".btn"),this.setDefaultSelection()};a.prototype={constructor:a,selectedItem:function(){var e={};if(this.$selectedItem){var t=this.$selectedItem.text();e=s.extend({text:t},this.$selectedItem.data())}else e={text:this.$input.val()};return e},selectByText:function(e){var t="li:fuelTextExactCI("+e+")";this.selectBySelector(t)},selectByValue:function(e){var t='li[data-value="'+e+'"]';this.selectBySelector(t)},selectByIndex:function(e){var t="li:eq("+e+")";this.selectBySelector(t)},selectBySelector:function(e){var t=this.$element.find(e);"undefined"!=typeof t[0]?(this.$selectedItem=t,this.$input.val(this.$selectedItem.text())):this.$selectedItem=null},setDefaultSelection:function(){var e="li[data-selected=true]:first",t=this.$element.find(e);0<t.length&&(this.selectBySelector(e),t.removeData("selected"),t.removeAttr("data-selected"))},enable:function(){this.$input.removeAttr("disabled"),this.$button.removeClass("disabled")},disable:function(){this.$input.attr("disabled",!0),this.$button.addClass("disabled")},itemclicked:function(e){this.$selectedItem=s(e.target).parent(),this.$input.val(this.$selectedItem.text()).trigger("change",{synthetic:!0});var t=this.selectedItem();this.$element.trigger("changed",t),e.preventDefault()},inputchanged:function(e,t){if(!t||!t.synthetic){var n=s(e.target).val();this.selectByText(n);var i=this.selectedItem();0===i.text.length&&(i={text:n}),this.$element.trigger("changed",i)}}},s.fn.combobox=function(i,o){var r,e=this.each(function(){var e=s(this),t=e.data("combobox"),n="object"==typeof i&&i;t||e.data("combobox",t=new a(this,n)),"string"==typeof i&&(r=t[i](o))});return r===undefined?e:r},s.fn.combobox.defaults={},s.fn.combobox.Constructor=a,s(function(){s(window).on("load",function(){s(".combobox").each(function(){var e=s(this);e.data("combobox")||e.combobox(e.data())})}),s("body").on("mousedown.combobox.data-api",".combobox",function(){var e=s(this);e.data("combobox")||e.combobox(e.data())})})}),t("fuelux/datagrid",["require","jquery"
],function(e){var a=e("jquery"),l=22,o=function(e,t){this.$element=a(e),this.$thead=this.$element.find("thead"),this.$tfoot=this.$element.find("tfoot"),this.$footer=this.$element.find("tfoot th"),this.$footerchildren=this.$footer.children().show().css("visibility","hidden"),this.$topheader=this.$element.find("thead th"),this.$searchcontrol=this.$element.find(".datagrid-search"),this.$filtercontrol=this.$element.find(".filter"),this.$pagesize=this.$element.find(".grid-pagesize"),this.$pageinput=this.$element.find(".grid-pager input"),this.$pagedropdown=this.$element.find(".grid-pager .dropdown-menu"),this.$prevpagebtn=this.$element.find(".grid-prevpage"),this.$nextpagebtn=this.$element.find(".grid-nextpage"),this.$pageslabel=this.$element.find(".grid-pages"),this.$countlabel=this.$element.find(".grid-count"),this.$startlabel=this.$element.find(".grid-start"),this.$endlabel=this.$element.find(".grid-end"),this.$tbody=a("<tbody>").insertAfter(this.$thead),this.$colheader=a("<tr>").appendTo(this.$thead),this.options=a.extend(!0,{},a.fn.datagrid.defaults,t),this.$pagesize.hasClass("select")?this.options.dataOptions.pageSize=parseInt(this.$pagesize.select("selectedItem").value,10):this.options.dataOptions.pageSize=parseInt(this.$pagesize.val(),10),this.$searchcontrol.length<=0&&(this.$searchcontrol=this.$element.find(".search")),this.columns=this.options.dataSource.columns(),this.$nextpagebtn.on("click",a.proxy(this.next,this)),this.$prevpagebtn.on("click",a.proxy(this.previous,this)),this.$searchcontrol.on("searched cleared",a.proxy(this.searchChanged,this)),this.$filtercontrol.on("changed",a.proxy(this.filterChanged,this)),this.$colheader.on("click","th",a.proxy(this.headerClicked,this)),this.$pagesize.hasClass("select")?this.$pagesize.on("changed",a.proxy(this.pagesizeChanged,this)):this.$pagesize.on("change",a.proxy(this.pagesizeChanged,this)),this.$pageinput.on("change",a.proxy(this.pageChanged,this)),this.renderColumns(),this.options.stretchHeight&&this.initStretchHeight(),this.renderData()};o.prototype={constructor:o,renderColumns:function(){var e=this;this.$footer.attr("colspan",this.columns.length),this.$topheader.attr("colspan",this.columns.length);var n="";a.each(this.columns,function(e,t){n+='<th data-property="'+t.property+'"',t.sortable&&(n+=' class="sortable"'),n+=">"+t.label+"</th>"}),e.$colheader.append(n)},updateColumns:function(e,t){this._updateColumns(this.$colheader,e,t),this.$sizingHeader&&this._updateColumns(this.$sizingHeader,this.$sizingHeader.find("th").eq(e.index()),t)},_updateColumns:function(e,t,n){var i="asc"===n?"icon-chevron-up":"icon-chevron-down";e.find("i.datagrid-sort").remove(),e.find("th").removeClass("sorted"),a("<i>").addClass(i+" datagrid-sort").appendTo(t),t.addClass("sorted")},updatePageDropdown:function(e){for(var t="",n=1;n<=e.pages;n++)t+="<li><a>"+n+"</a></li>";this.$pagedropdown.html(t)},updatePageButtons:function(e){1===e.page?this.$prevpagebtn.attr("disabled","disabled"):this.$prevpagebtn.removeAttr("disabled"),e.page===e.pages?this.$nextpagebtn.attr("disabled","disabled"):this.$nextpagebtn.removeAttr("disabled")},renderData:function(){var o=this;this.$tbody.html(this.placeholderRowHTML(this.options.loadingHTML)),this.options.dataSource.data(this.options.dataOptions,function(e){var t=1===e.count?o.options.itemText:o.options.itemsText,i="";o.$footerchildren.css("visibility",function(){return 0<e.count?"visible":"hidden"}),o.$pageinput.val(e.page),o.$pageslabel.text(e.pages),o.$countlabel.text(e.count+" "+t),o.$startlabel.text(e.start),o.$endlabel.text(e.end),o.updatePageDropdown(e),o.updatePageButtons(e),a.each(e.data,function(e,n){i+="<tr>",a.each(o.columns,function(e,t){i+="<td>"+n[t.property]+"</td>"}),i+="</tr>"}),i||(i=o.placeholderRowHTML("0 "+o.options.itemsText)),o.$tbody.html(i),o.stretchHeight(),o.$element.trigger("loaded")})},placeholderRowHTML:function(e){return'<tr><td style="text-align:center;padding:20px;border-bottom:none;" colspan="'+this.columns.length+'">'+e+"</td></tr>"},headerClicked:function(e){var t=a(e.target);if(t.hasClass("sortable")){var n=this.options.dataOptions.sortDirection,i=this.options.dataOptions.sortProperty,o=t.data("property");i===o?this.options.dataOptions.sortDirection="asc"===n?"desc":"asc":(this.options.dataOptions.sortDirection="asc",this.options.dataOptions.sortProperty=o),this.options.dataOptions.pageIndex=0,this.updateColumns(t,this.options.dataOptions.sortDirection),this.renderData()}},pagesizeChanged:function(e,t){this.options.dataOptions.pageSize=t?parseInt(t.value,10):parseInt(a(e.target).val(),10),this.options.dataOptions.pageIndex=0,this.renderData()},pageChanged:function(e){var t=parseInt(a(e.target).val(),10);t=isNaN(t)?1:t;var n=this.$pageslabel.text();this.options.dataOptions.pageIndex=n<t?n-1:t-1,this.renderData()},searchChanged:function(e,t){this.options.dataOptions.search=t,this.options.dataOptions.pageIndex=0,this.renderData()},filterChanged:function(e,t){this.options.dataOptions.filter=t,this.options.dataOptions.pageIndex=0,this.renderData()},previous:function(){this.$nextpagebtn.attr("disabled","disabled"),this.$prevpagebtn.attr("disabled","disabled"),this.options.dataOptions.pageIndex--,this.renderData()},next:function(){this.$nextpagebtn.attr("disabled","disabled"),this.$prevpagebtn.attr("disabled","disabled"),this.options.dataOptions.pageIndex++,this.renderData()},reload:function(){this.options.dataOptions.pageIndex=0,this.renderData()},initStretchHeight:function(){this.$gridContainer=this.$element.parent(),this.$element.wrap('<div class="datagrid-stretch-wrapper">'),this.$stretchWrapper=this.$element.parent(),this.$headerTable=a("<table>").attr("class",this.$element.attr("class")),this.$footerTable=this.$headerTable.clone(),this.$headerTable.prependTo(this.$gridContainer).addClass("datagrid-stretch-header"),this.$thead.detach().appendTo(this.$headerTable),this.$sizingHeader=this.$thead.clone(),this.$sizingHeader.find("tr:first").remove(),this.$footerTable.appendTo(this.$gridContainer).addClass("datagrid-stretch-footer"),this.$tfoot.detach().appendTo(this.$footerTable)},stretchHeight:function(){if(this.$gridContainer){this.setColumnWidths();var e=this.$gridContainer.height(),t=this.$headerTable.outerHeight()+this.$footerTable.outerHeight();this.$stretchWrapper.height(e-t)}},setColumnWidths:function(){function e(e,t){if(e!==s-1){var n=a(t),i=r.eq(e),o=i.width();i.hasClass("sorted")&&"TD"===n.prop("tagName")&&(o+=l),n.width(o)}}if(this.$sizingHeader){this.$element.prepend(this.$sizingHeader);var r=this.$sizingHeader.find("th"),s=r.length;this.$colheader.find("th").each(e),this.$tbody.find("tr:first > td").each(e),this.$sizingHeader.detach()}}},a.fn.datagrid=function(i){return this.each(function(){var e=a(this),t=e.data("datagrid"),n="object"==typeof i&&i;t||e.data("datagrid",t=new o(this,n)),"string"==typeof i&&t[i]()})},a.fn.datagrid.defaults={dataOptions:{pageIndex:0,pageSize:10},loadingHTML:'<div class="progress progress-striped active" style="width:50%;margin:auto;"><div class="bar" style="width:100%;"></div></div>',itemsText:"items",itemText:"item"},a.fn.datagrid.Constructor=o}),t("fuelux/pillbox",["require","jquery"],function(e){var r=e("jquery"),s=function(e,t){this.$element=r(e),this.options=r.extend({},r.fn.pillbox.defaults,t),this.$element.on("click","li",r.proxy(this.itemclicked,this))};s.prototype={constructor:s,items:function(){return this.$element.find("li").map(function(){var e=r(this);return r.extend({text:e.text()},e.data())}).get()},itemclicked:function(e){r(e.currentTarget).remove(),e.preventDefault()}},r.fn.pillbox=function(i){var o,e=this.each(function(){var e=r(this),t=e.data("pillbox"),n="object"==typeof i&&i;t||e.data("pillbox",t=new s(this,n)),"string"==typeof i&&(o=t[i]())});return o===undefined?e:o},r.fn.pillbox.defaults={},r.fn.pillbox.Constructor=s,r(function(){r("body").on("mousedown.pillbox.data-api",".pillbox",function(){var e=r(this);e.data("pillbox")||e.pillbox(e.data())})})}),t("fuelux/radio",["require","jquery"],function(e){var s=e("jquery"),a=function(e,t){this.$element=s(e),this.options=s.extend({},s.fn.radio.defaults,t),this.$label=this.$element.parent(),this.$icon=this.$label.find("i"),this.$radio=this.$label.find("input[type=radio]"),this.groupName=this.$radio.attr("name"),this.setState(this.$radio),this.$radio.on("change",s.proxy(this.itemchecked,this))};a.prototype={constructor:a,setState:function(e){var t=e.is(":checked"),n=e.is(":disabled");!0===t&&this.$icon.addClass("checked"),!0===n&&this.$icon.addClass("disabled")},resetGroup:function(){s("input[name="+this.groupName+"]").next().removeClass("checked")},enable:function(){this.$radio.attr("disabled",!1),this.$icon.removeClass("disabled")},disable:function(){this.$radio.attr("disabled",!0),this.$icon.addClass("disabled")},itemchecked:function(e){var t=s(e.target);this.resetGroup(),this.setState(t)}},s.fn.radio=function(i,o){var r,e=this.each(function(){var e=s(this),t=e.data("radio"),n="object"==typeof i&&i;t||e.data("radio",t=new a(this,n)),"string"==typeof i&&(r=t[i](o))});return r===undefined?e:r},s.fn.radio.defaults={},s.fn.radio.Constructor=a,s(function(){s(window).on("load",function(){s(".radio-custom > input[type=radio]").each(function(){var e=s(this);e.data("radio")||e.radio(e.data())})})})}),t("fuelux/search",["require","jquery"],function(e){var o=e("jquery"),r=function(e,t){this.$element=o(e),this.options=o.extend({},o.fn.search.defaults,t),this.$button=this.$element.find("button").on("click",o.proxy(this.buttonclicked,this)),this.$input=this.$element.find("input").on("keydown",o.proxy(this.keypress,this)).on("keyup",o.proxy(this.keypressed,this)),this.$icon=this.$element.find("i"),this.activeSearch=""};r.prototype={constructor:r,search:function(e){this.$icon.attr("class","icon-remove"),this.activeSearch=e,this.$element.trigger("searched",e)},clear:function(){this.$icon.attr("class","icon-search"),this.activeSearch="",this.$input.val(""),this.$element.trigger("cleared")},action:function(){var e=this.$input.val(),t=""===e||e===this.activeSearch;this.activeSearch&&t?this.clear():e&&this.search(e)},buttonclicked:function(e){e.preventDefault(),o(e.currentTarget).is(".disabled, :disabled")||this.action()},keypress:function(e){13===e.which&&e.preventDefault()},keypressed:function(e){var t,n;13===e.which?(e.preventDefault(),this.action()):(n=(t=this.$input.val())&&t===this.activeSearch,this.$icon.attr("class",n?"icon-remove":"icon-search"))},disable:function(){this.$input.attr("disabled","disabled"),this.$button.addClass("disabled")},enable:function(){this.$input.removeAttr("disabled"),this.$button.removeClass("disabled")}},o.fn.search=function(i){return this.each(function(){var e=o(this),t=e.data("search"),n="object"==typeof i&&i;t||e.data("search",t=new r(this,n)),"string"==typeof i&&t[i]()})},o.fn.search.defaults={},o.fn.search.Constructor=r,o(function(){o("body").on("mousedown.search.data-api",".search",function(){var e=o(this);e.data("search")||e.search(e.data())})})}),t("fuelux/spinner",["require","jquery"],function(e){var s=e("jquery"),a=function(e,t){this.$element=s(e),this.options=s.extend({},s.fn.spinner.defaults,t),this.$input=this.$element.find(".spinner-input"),this.$element.on("keyup",this.$input,s.proxy(this.change,this)),this.options.hold?(this.$element.on("mousedown",".spinner-up",s.proxy(function(){this.startSpin(!0)},this)),this.$element.on("mouseup",".spinner-up, .spinner-down",s.proxy(this.stopSpin,this)),this.$element.on("mouseout",".spinner-up, .spinner-down",s.proxy(this.stopSpin,this)),this.$element.on("mousedown",".spinner-down",s.proxy(function(){this.startSpin(!1)},this))):(this.$element.on("click",".spinner-up",s.proxy(function(){this.step(!0)},this)),this.$element.on("click",".spinner-down",s.proxy(function(){this.step(!1)},this))),this.switches={count:1,enabled:!0},"medium"===this.options.speed?this.switches.speed=300:"fast"===this.options.speed?this.switches.speed=100:this.switches.speed=500,this.lastValue=null,this.render(),this.options.disabled&&this.disable()};a.prototype={constructor:a,render:function(){this.$input.val(this.options.value),this.$input.attr("maxlength",(this.options.max+"").split("").length)},change:function(){var e=this.$input.val();this.options.value=(e/1||(e=e.replace(/[^0-9]/g,""),this.$input.val(e)),e/1),this.triggerChangedEvent()},stopSpin:function(){clearTimeout(this.switches.timeout),this.switches.count=1,this.triggerChangedEvent()},triggerChangedEvent:function(){var e=this.value();e!==this.lastValue&&(this.lastValue=e,this.$element.trigger("changed",e),this.$element.trigger("change"))},startSpin:function(e){if(!this.options.disabled){var t=this.switches.count;t=1===t?(this.step(e),1):t<3?1.5:t<8?2.5:4,this.switches.timeout=setTimeout(s.proxy(function(){this.iterator(e)},this),this.switches.speed/t),this.switches.count++}},iterator:function(e){this.step(e),this.startSpin(e)},step:function(e){var t=this.options.value,n=e?this.options.max:this.options.min;if(e?t<n:n<t){var i=t+(e?1:-1)*this.options.step;(e?n<i:i<n)?this.value(n):this.value(i)}},value:function(e){return!isNaN(parseFloat(e))&&isFinite(e)?(e=parseFloat(e),this.options.value=e,this.$input.val(e),this):this.options.value},disable:function(){this.options.disabled=!0,this.$input.attr("disabled",""),this.$element.find("button").addClass("disabled")},enable:function(){this.options.disabled=!1,this.$input.removeAttr("disabled"),this.$element.find("button").removeClass("disabled")}},s.fn.spinner=function(i,o){var r,e=this.each(function(){var e=s(this),t=e.data("spinner"),n="object"==typeof i&&i;t||e.data("spinner",t=new a(this,n)),"string"==typeof i&&(r=t[i](o))});return r===undefined?e:r},s.fn.spinner.defaults={value:1,min:1,max:999,step:1,hold:!0,speed:"medium",disabled:!1},s.fn.spinner.Constructor=a,s(function(){s("body").on("mousedown.spinner.data-api",".spinner",function(){var e=s(this);e.data("spinner")||e.spinner(e.data())})})}),t("fuelux/select",["require","jquery","./util"],function(e){var s=e("jquery");e("./util");var a=function(e,t){this.$element=s(e),this.options=s.extend({},s.fn.select.defaults,t),this.$element.on("click","a",s.proxy(this.itemclicked,this)),this.$button=this.$element.find(".btn"),this.$label=this.$element.find(".dropdown-label"),this.setDefaultSelection(),"auto"===t.resize&&this.resize()};a.prototype={constructor:a,itemclicked:function(e){this.$selectedItem=s(e.target).parent(),this.$label.text(this.$selectedItem.text());var t=this.selectedItem();this.$element.trigger("changed",t),e.preventDefault()},resize:function(){s("#selectTextSize")[0]||s("<div/>").attr({id:"selectTextSize"}).appendTo("body");var n=0,i=0;this.$element.find("a").each(function(){var e=s(this).text(),t=s("#selectTextSize");t.text(e),i=t.outerWidth(),n<i&&(n=i)}),this.$label.width(n)},selectedItem:function(){var e=this.$selectedItem.text();return s.extend({text:e},this.$selectedItem.data())},selectByText:function(e){var t="li a:fuelTextExactCI("+e+")";this.selectBySelector(t)},selectByValue:function(e){var t='li[data-value="'+e+'"]';this.selectBySelector(t)},selectByIndex:function(e){var t="li:eq("+e+")";this.selectBySelector(t)},selectBySelector:function(e){var t=this.$element.find(e);this.$selectedItem=t,this.$label.text(this.$selectedItem.text())},setDefaultSelection:function(){var e="li[data-selected=true]:first",t=this.$element.find(e);0===t.length?this.selectByIndex(0):(this.selectBySelector(e),t.removeData("selected"),t.removeAttr("data-selected"))},enable:function(){this.$button.removeClass("disabled")},disable:function(){this.$button.addClass("disabled")}},s.fn.select=function(i,o){var r,e=this.each(function(){var e=s(this),t=e.data("select"),n="object"==typeof i&&i;t||e.data("select",t=new a(this,n)),"string"==typeof i&&(r=t[i](o))});return r===undefined?e:r},s.fn.select.defaults={},s.fn.select.Constructor=a,s(function(){s(window).on("load",function(){s(".select").each(function(){var e=s(this);e.data("select")||e.select(e.data())})}),s("body").on("mousedown.select.data-api",".select",function(){var e=s(this);e.data("select")||e.select(e.data())})})}),t("fuelux/tree",["require","jquery"],function(e){var s=e("jquery"),a=function(e,t){this.$element=s(e),this.options=s.extend({},s.fn.tree.defaults,t),this.$element.on("click",".tree-item",s.proxy(function(e){this.selectItem(e.currentTarget)},this)),this.$element.on("click",".tree-folder-header",s.proxy(function(e){this.selectFolder(e.currentTarget)},this)),this.render()};a.prototype={constructor:a,render:function(){this.populate(this.$element)},populate:function(i){var o=this,t=i.parent().find(".tree-loader:eq(0)");t.show(),this.options.dataSource.data(i.data(),function(e){t.hide(),s.each(e.data,function(e,t){var n;"folder"===t.type?((n=o.$element.find(".tree-folder:eq(0)").clone().show()).find(".tree-folder-name").html(t.name),n.find(".tree-loader").html(o.options.loadingHTML),n.find(".tree-folder-header").data(t)):"item"===t.type&&((n=o.$element.find(".tree-item:eq(0)").clone().show()).find(".tree-item-name").html(t.name),n.data(t)),i.hasClass("tree-folder-header")?i.parent().find(".tree-folder-content:eq(0)").append(n):i.append(n)}),o.$element.trigger("loaded")})},selectItem:function(e){var n=s(e),t=this.$element.find(".tree-selected"),i=[];this.options.multiSelect?s.each(t,function(e,t){s(t)[0]!==n[0]&&i.push(s(t).data())}):t[0]!==n[0]&&(t.removeClass("tree-selected").find("i").removeClass("icon-ok").addClass("tree-dot"),i.push(n.data())),n.hasClass("tree-selected")?(n.removeClass("tree-selected"),n.find("i").removeClass("icon-ok").addClass("tree-dot")):(n.addClass("tree-selected"),n.find("i").removeClass("tree-dot").addClass("icon-ok"),this.options.multiSelect&&i.push(n.data())),i.length&&this.$element.trigger("selected",{info:i})},selectFolder:function(e){var t=s(e),n=t.parent();t.find(".icon-folder-close").length?(n.find(".tree-folder-content").children().length?n.find(".tree-folder-content:eq(0)").show():this.populate(t),n.find(".icon-folder-close:eq(0)").removeClass("icon-folder-close").addClass("icon-folder-open"),this.$element.trigger("opened",t.data())):(this.options.cacheItems?n.find(".tree-folder-content:eq(0)").hide():n.find(".tree-folder-content:eq(0)").empty(),n.find(".icon-folder-open:eq(0)").removeClass("icon-folder-open").addClass("icon-folder-close"),this.$element.trigger("closed",t.data()))},selectedItems:function(){var e=this.$element.find(".tree-selected"),n=[];return s.each(e,function(e,t){n.push(s(t).data())}),n}},s.fn.tree=function(i,o){var r,e=this.each(function(){var e=s(this),t=e.data("tree"),n="object"==typeof i&&i;t||e.data("tree",t=new a(this,n)),"string"==typeof i&&(r=t[i](o))});return r===undefined?e:r},s.fn.tree.defaults={multiSelect:!1,loadingHTML:"<div>Loading...</div>",cacheItems:!0},s.fn.tree.Constructor=a}),t("fuelux/wizard",["require","jquery"],function(e){var h=e("jquery"),s=function(e,t){var n;this.$element=h(e),this.options=h.extend({},h.fn.wizard.defaults,t),this.currentStep=1,this.numSteps=this.$element.find("li").length,this.$prevBtn=this.$element.find("button.btn-prev"),this.$nextBtn=this.$element.find("button.btn-next"),n=this.$nextBtn.children().detach(),this.nextText=h.trim(this.$nextBtn.text()),this.$nextBtn.append(n),this.$prevBtn.on("click",h.proxy(this.previous,this)),this.$nextBtn.on("click",h.proxy(this.next,this)),this.$element.on("click","li.complete",h.proxy(this.stepclicked,this))};s.prototype={constructor:s,setState:function(){var e=1<this.currentStep,t=1===this.currentStep,n=this.currentStep===this.numSteps;this.$prevBtn.attr("disabled",!0===t||!1===e);var i=this.$nextBtn.data();if(i&&i.last&&(this.lastText=i.last,"undefined"!=typeof this.lastText)){var o=!0!==n?this.nextText:this.lastText,r=this.$nextBtn.children().detach();this.$nextBtn.text(o).append(r)}var s=this.$element.find("li");s.removeClass("active").removeClass("complete"),s.find("span.badge").removeClass("badge-info").removeClass("badge-success");var a="li:lt("+(this.currentStep-1)+")",l=this.$element.find(a);l.addClass("complete"),l.find("span.badge").addClass("badge-success");var c="li:eq("+(this.currentStep-1)+")",d=this.$element.find(c);d.addClass("active"),d.find("span.badge").addClass("badge-info");var u=d.data().target;h(".step-pane").removeClass("active"),h(u).addClass("active"),this.$element.trigger("changed")},stepclicked:function(e){var t=h(e.currentTarget),n=h(".steps li").index(t),i=h.Event("stepclick");this.$element.trigger(i,{step:n+1}),i.isDefaultPrevented()||(this.currentStep=n+1,this.setState())},previous:function(){if(1<this.currentStep){var e=h.Event("change");if(this.$element.trigger(e,{step:this.currentStep,direction:"previous"}),e.isDefaultPrevented())return;this.currentStep-=1,this.setState()}},next:function(){var e=this.currentStep+1<=this.numSteps,t=this.currentStep===this.numSteps;if(e){var n=h.Event("change");if(this.$element.trigger(n,{step:this.currentStep,direction:"next"}),n.isDefaultPrevented())return;this.currentStep+=1,this.setState()}else t&&this.$element.trigger("finished")},selectedItem:function(){return{step:this.currentStep}}},h.fn.wizard=function(i,o){var r,e=this.each(function(){var e=h(this),t=e.data("wizard"),n="object"==typeof i&&i;t||e.data("wizard",t=new s(this,n)),"string"==typeof i&&(r=t[i](o))});return r===undefined?e:r},h.fn.wizard.defaults={},h.fn.wizard.Constructor=s,h(function(){h("body").on("mousedown.wizard.data-api",".wizard",function(){var e=h(this);e.data("wizard")||e.wizard(e.data())})})}),t("fuelux/all",["require","jquery","bootstrap/bootstrap-affix","bootstrap/bootstrap-alert","bootstrap/bootstrap-button","bootstrap/bootstrap-carousel","bootstrap/bootstrap-collapse","bootstrap/bootstrap-dropdown","bootstrap/bootstrap-modal","bootstrap/bootstrap-popover","bootstrap/bootstrap-scrollspy","bootstrap/bootstrap-tab","bootstrap/bootstrap-tooltip","bootstrap/bootstrap-transition","bootstrap/bootstrap-typeahead","fuelux/checkbox","fuelux/combobox","fuelux/datagrid","fuelux/pillbox","fuelux/radio","fuelux/search","fuelux/spinner","fuelux/select","fuelux/tree","fuelux/wizard"],function(e){e("jquery"),e("bootstrap/bootstrap-affix"),e("bootstrap/bootstrap-alert"),e("bootstrap/bootstrap-button"),e("bootstrap/bootstrap-carousel"),e("bootstrap/bootstrap-collapse"),e("bootstrap/bootstrap-dropdown"),e("bootstrap/bootstrap-modal"),e("bootstrap/bootstrap-popover"),e("bootstrap/bootstrap-scrollspy"),e("bootstrap/bootstrap-tab"),e("bootstrap/bootstrap-tooltip"),e("bootstrap/bootstrap-transition"),e("bootstrap/bootstrap-typeahead"),e("fuelux/checkbox"),e("fuelux/combobox"),e("fuelux/datagrid"),e("fuelux/pillbox"),e("fuelux/radio"),e("fuelux/search"),e("fuelux/spinner"),e("fuelux/select"),e("fuelux/tree"),e("fuelux/wizard")}),t("jquery",[],function(){return jQuery}),t("fuelux/loader",["fuelux/all"],function(){}),e("fuelux/loader")}();var wysihtml5={version:"0.3.0",commands:{},dom:{},quirks:{},toolbar:{},lang:{},selection:{},views:{},INVISIBLE_SPACE:"\ufeff",EMPTY_FUNCTION:function(){},ELEMENT_NODE:1,TEXT_NODE:3,BACKSPACE_KEY:8,ENTER_KEY:13,ESCAPE_KEY:27,SPACE_KEY:32,DELETE_KEY:46};window.rangy=function(){function l(e,t){var n=typeof e[t];return n==a||!(n!=s||!e[t])||"unknown"==n}function c(e,t){return!(typeof e[t]!=s||!e[t])}function e(e,t){return typeof e[t]!=h}function t(i){return function(e,t){for(var n=t.length;n--;)if(!i(e,t[n]))return!1;return!0}}function d(e){return e&&E(e,g)&&C(e,p)}function u(e){window.alert("Rangy not supported in your browser. Reason: "+e),v.initialized=!0,v.supported=!1}function n(e){var t="Rangy warning: "+e;v.config.alertOnWarn?window.alert(t):typeof window.console!=h&&typeof window.console.log!=h&&window.console.log(t)}function i(){if(!v.initialized){var e,t=!1,n=!1;l(document,"createRange")&&(e=document.createRange(),E(e,m)&&C(e,f)&&(t=!0),e.detach());var i=c(document,"body")?document.body:document.getElementsByTagName("body")[0];i&&l(i,"createTextRange")&&d(e=i.createTextRange())&&(n=!0),t||n||u("Neither Range nor TextRange are implemented"),v.initialized=!0,v.features={implementsDomRange:t,implementsTextRange:n};for(var o=O.concat(I),r=0,s=o.length;r<s;++r)try{o[r](v)}catch(a){c(window,"console")&&l(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",a)}}}function o(e){e=e||window,i();for(var t=0,n=b.length;t<n;++t)b[t](e)}function r(e){this.name=e,this.initialized=!1,this.supported=!1}var s="object",a="function",h="undefined",f=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"],m=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],p=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],g=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"],E=t(l),T=t(c),C=t(e),v={version:"1.2.2",initialized:!1,supported:!0,util:{isHostMethod:l,isHostObject:c,isHostProperty:e,areHostMethods:E,areHostObjects:T,areHostProperties:C,isTextRange:d},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};v.fail=u,v.warn=n,!{}.hasOwnProperty?u("hasOwnProperty not supported"):v.util.extend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};var I=[],O=[];v.init=i,v.addInitListener=function(e){v.initialized?e(v):I.push(e)};var b=[];v.addCreateMissingNativeApiListener=function(e){b.push(e)},v.createMissingNativeApi=o,r.prototype.fail=function(e){throw this.initialized=!0,this.supported=!1,new Error("Module '"+this.name+"' failed to load: "+e)},r.prototype.warn=function(e){v.warn("Module "+this.name+": "+e)},r.prototype.createError=function(e){return new Error("Error in Rangy "+this.name+" module: "+e)},v.createModule=function(e,t){var n=new r(e);v.modules[e]=n,O.push(function(e){t(e,n),n.initialized=!0,n.supported=!0})};var D=!(v.requireModules=function(e){for(var t,n,i=0,o=e.length;i<o;++i){if(n=e[i],!((t=v.modules[n])&&t instanceof r))throw new Error("Module '"+n+"' not found");if(!t.supported)throw new Error("Module '"+n+"' not supported")}}),R=function(){D||(D=!0,v.initialized||i())};if(typeof window!=h){if(typeof document!=h)return l(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",R,!1),l(window,"addEventListener")?window.addEventListener("load",R,!1):l(window,"attachEvent")?window.attachEvent("onload",R):u("Window does not have required addEventListener or attachEvent method"),v;u("No document found")}else u("No window found")}(),rangy.createModule("DomUtil",function(e,t){function n(e){var t;return typeof e.namespaceURI==R||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t}function i(e){var t=e.parentNode;return 1==t.nodeType?t:null}function c(e){for(var t=0;e=e.previousSibling;)t++;return t}function o(e){var t;return s(e)?e.length:(t=e.childNodes)?t.length:0}function d(e,t){var n,i=[];for(n=e;n;n=n.parentNode)i.push(n);for(n=t;n;n=n.parentNode)if(w(i,n))return n;return null}function r(e,t,n){for(var i=n?t:t.parentNode;i;){if(i===e)return!0;i=i.parentNode}return!1}function u(e,t,n){for(var i,o=n?e:e.parentNode;o;){if((i=o.parentNode)===t)return o;o=i}return null}function s(e){var t=e.nodeType;return 3==t||4==t||8==t}function a(e,t){var n=t.nextSibling,i=t.parentNode;return n?i.insertBefore(e,n):i.appendChild(e),e}function l(e,t){var n=e.cloneNode(!1);return n.deleteData(0,t),e.deleteData(t,e.length-t),a(n,e),n}function h(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=R)return e.ownerDocument;if(typeof e.document!=R)return e.document;if(e.parentNode)return h(e.parentNode);throw new Error("getDocument: no document found for node")}function f(e){var t=h(e);if(typeof t.defaultView!=R)return t.defaultView;if(typeof t.parentWindow!=R)return t.parentWindow;throw new Error("Cannot get a window object for node")}function m(e){if(typeof e.contentDocument!=R)return e.contentDocument;if(typeof e.contentWindow!=R)return e.contentWindow.document;throw new Error("getIframeWindow: No Document object found for iframe element")}function p(e){if(typeof e.contentWindow!=R)return e.contentWindow;if(typeof e.contentDocument!=R)return e.contentDocument.defaultView;throw new Error("getIframeWindow: No Window object found for iframe element")}function g(e){return y.isHostObject(e,"body")?e.body:e.getElementsByTagName("body")[0]}function E(e){for(var t;t=e.parentNode;)e=t;return e}function T(e,t,n,i){var o,r,s,a,l;if(e==n)return t===i?0:t<i?-1:1;if(o=u(n,e,!0))return t<=c(o)?-1:1;if(o=u(e,n,!0))return c(o)<i?-1:1;if((s=e===(r=d(e,n))?r:u(e,r,!0))===(a=n===r?r:u(n,r,!0)))throw new Error("comparePoints got to case 4 and childA and childB are the same!");for(l=r.firstChild;l;){if(l===s)return-1;if(l===a)return 1;l=l.nextSibling}throw new Error("Should not be here!")}function C(e){for(var t,n=h(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n}function v(e){if(!e)return"[No node]";if(s(e))return'"'+e.data+'"';if(1!=e.nodeType)return e.nodeName;var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">["+e.childNodes.length+"]"}function I(e){this.root=e,this._next=e}function O(e){return new I(e)}function b(e,t){this.node=e,this.offset=t}function D(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}var R="undefined",y=e.util;y.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),y.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var _=document.createElement("div");y.areHostMethods(_,["insertBefore","appendChild","cloneNode"])||t.fail("Incomplete Element implementation"),y.isHostProperty(_,"innerHTML")||t.fail("Element is missing innerHTML property");var K=document.createTextNode("test");y.areHostMethods(K,["splitText","deleteData","insertData","appendData","cloneNode"])||t.fail("Incomplete Text Node implementation");var w=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1};I.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t,n=this._current=this._next;if(this._current)if(e=n.firstChild)this._next=e;else{for(t=null;n!==this.root&&!(t=n.nextSibling);)n=n.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null}},b.prototype={equals:function(e){return this.node===e.node&this.offset==e.offset},inspect:function(){return"[DomPosition("+v(this.node)+":"+this.offset+")]"}},D.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11},D.prototype.toString=function(){return this.message},e.dom={arrayContains:w,isHtmlNamespace:n,parentElement:i,getNodeIndex:c,getNodeLength:o,getCommonAncestor:d,isAncestorOf:r,getClosestAncestorIn:u,isCharacterDataNode:s,insertAfter:a,splitDataNode:l,getDocument:h,getWindow:f,getIframeWindow:p,getIframeDocument:m,getBody:g,getRootContainer:E,comparePoints:T,inspectNode:v,fragmentFromNodeChildren:C,createIterator:O,DomPosition:b},e.DOMException=D}),rangy.createModule("DomRange",function(s){function a(e,t){return 3!=e.nodeType&&($.isAncestorOf(e,t.startContainer,!0)||$.isAncestorOf(e,t.endContainer,!0))}function l(e){return $.getDocument(e.startContainer)}function c(e,t,n){var i=e._listeners[t];if(i)for(var o=0,r=i.length;o<r;++o)i[o].call(e,{target:e,args:n})}function d(e){return new F(e.parentNode,$.getNodeIndex(e))}function u(e){return new F(e.parentNode,$.getNodeIndex(e)+1)}function n(e,t,n){var i=11==e.nodeType?e.firstChild:e;return $.isCharacterDataNode(t)?n==t.length?$.insertAfter(e,t):t.parentNode.insertBefore(e,0==n?t:$.splitDataNode(t,n)):n>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[n]),i}function r(e){for(var t,n,i,o=l(e.range).createDocumentFragment();n=e.next();){if(t=e.isPartiallySelectedSubtree(),n=n.cloneNode(!t),t&&(i=e.getSubtreeIterator(),n.appendChild(r(i)),i.detach(!0)),10==n.nodeType)throw new P("HIERARCHY_REQUEST_ERR");o.appendChild(n)}return o}function h(e,t,n){var i,o,r,s;for(n=n||{stop:!1};r=e.next();)if(e.isPartiallySelectedSubtree()){if(!1===t(r))return void(n.stop=!0);if(h(s=e.getSubtreeIterator(),t,n),s.detach(!0),n.stop)return}else for(i=$.createIterator(r);o=i.next();)if(!1===t(o))return void(n.stop=!0)}function f(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(f(t=e.getSubtreeIterator()),t.detach(!0)):e.remove()}function m(e){for(var t,n,i=l(e.range).createDocumentFragment();t=e.next();){if(
e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),n=e.getSubtreeIterator(),t.appendChild(m(n)),n.detach(!0)):e.remove(),10==t.nodeType)throw new P("HIERARCHY_REQUEST_ERR");i.appendChild(t)}return i}function i(e,t,n){var i,o=!(!t||!t.length),r=!!n;o&&(i=new RegExp("^("+t.join("|")+")$"));var s=[];return h(new p(e,!1),function(e){o&&!i.test(e.nodeType)||r&&!n(e)||s.push(e)}),s}function e(e){return"["+("undefined"==typeof e.getName?"Range":e.getName())+"("+$.inspectNode(e.startContainer)+":"+e.startOffset+", "+$.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function p(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&$.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||$.isCharacterDataNode(this.sc)?$.getClosestAncestorIn(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||$.isCharacterDataNode(this.ec)?$.getClosestAncestorIn(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}function o(e){this.code=this[e],this.codeName=e,this.message="RangeException: "+this.codeName}function g(e,t,n){this.nodes=i(e,t,n),this._next=this.nodes[0],this._position=0}function t(o){return function(e,t){for(var n,i=t?e:e.parentNode;i;){if(n=i.nodeType,$.arrayContains(o,n))return i;i=i.parentNode}return null}}function E(e,t){if(W(e,t))throw new o("INVALID_NODE_TYPE_ERR")}function T(e){if(!e.startContainer)throw new P("INVALID_STATE_ERR")}function C(e,t){if(!$.arrayContains(t,e.nodeType))throw new o("INVALID_NODE_TYPE_ERR")}function v(e,t){if(t<0||t>($.isCharacterDataNode(e)?e.length:e.childNodes.length))throw new P("INDEX_SIZE_ERR")}function I(e,t){if(V(e,!0)!==V(t,!0))throw new P("WRONG_DOCUMENT_ERR")}function O(e){if(U(e,!0))throw new P("NO_MODIFICATION_ALLOWED_ERR")}function b(e,t){if(!e)throw new P(t)}function D(e){return!$.arrayContains(M,e.nodeType)&&!V(e,!0)}function R(e,t){return t<=($.isCharacterDataNode(e)?e.length:e.childNodes.length)}function y(e){if(T(e),D(e.startContainer)||D(e.endContainer)||!R(e.startContainer,e.startOffset)||!R(e.endContainer,e.endOffset))throw new Error("Range error: Range is no longer valid after DOM mutation ("+e.inspect()+")")}function _(){}function K(e){e.START_TO_START=Q,e.START_TO_END=J,e.END_TO_END=ee,e.END_TO_START=te,e.NODE_BEFORE=ne,e.NODE_AFTER=ie,e.NODE_BEFORE_AND_AFTER=oe,e.NODE_INSIDE=re}function w(e){K(e),K(e.prototype)}function k(s,a){return function(){y(this);var e,t=this.startContainer,n=this.startOffset,i=this.commonAncestorContainer,o=new p(this,!0);t!==i&&(t=(e=u($.getClosestAncestorIn(t,i,!0))).node,n=e.offset),h(o,O),o.reset();var r=s(o);return o.detach(),a(this,t,n,t,n),r}}function N(e,c,t){function n(n,i){return function(e){T(this),C(e,B),C(j(e),M);var t=(n?d:u)(e);(i?o:r)(this,t.node,t.offset)}}function o(e,t,n){var i=e.endContainer,o=e.endOffset;t===e.startContainer&&n===e.startOffset||(j(t)==j(i)&&1!=$.comparePoints(t,n,i,o)||(i=t,o=n),c(e,t,n,i,o))}function r(e,t,n){var i=e.startContainer,o=e.startOffset;t===e.endContainer&&n===e.endOffset||(j(t)==j(i)&&-1!=$.comparePoints(t,n,i,o)||(i=t,o=n),c(e,i,o,t,n))}function i(e,t,n){t===e.startContainer&&n===e.startOffset&&t===e.endContainer&&n===e.endOffset||c(e,t,n,t,n)}e.prototype=new _,s.util.extend(e.prototype,{setStart:function(e,t){T(this),E(e,!0),v(e,t),o(this,e,t)},setEnd:function(e,t){T(this),E(e,!0),v(e,t),r(this,e,t)},setStartBefore:n(!0,!0),setStartAfter:n(!1,!0),setEndBefore:n(!0,!1),setEndAfter:n(!1,!1),collapse:function(e){y(this),e?c(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):c(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){T(this),E(e,!0),c(this,e,0,e,$.getNodeLength(e))},selectNode:function(e){T(this),E(e,!1),C(e,B);var t=d(e),n=u(e);c(this,t.node,t.offset,n.node,n.offset)},extractContents:k(m,c),deleteContents:k(f,c),canSurroundContents:function(){y(this),O(this.startContainer),O(this.endContainer);var e=new p(this,!0),t=e._first&&a(e._first,this)||e._last&&a(e._last,this);return e.detach(),!t},detach:function(){t(this)},splitBoundaries:function(){y(this);var e=this.startContainer,t=this.startOffset,n=this.endContainer,i=this.endOffset,o=e===n;$.isCharacterDataNode(n)&&0<i&&i<n.length&&$.splitDataNode(n,i),$.isCharacterDataNode(e)&&0<t&&t<e.length&&(e=$.splitDataNode(e,t),o?(i-=t,n=e):n==e.parentNode&&i>=$.getNodeIndex(e)&&i++,t=0),c(this,e,t,n,i)},normalizeBoundaries:function(){y(this);var o=this.startContainer,r=this.startOffset,s=this.endContainer,a=this.endOffset,e=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(a=(s=e).length,e.appendData(t.data),t.parentNode.removeChild(t))},t=function(e){var t=e.previousSibling;if(t&&t.nodeType==e.nodeType){var n=(o=e).length;if(r=t.length,e.insertData(0,t.data),t.parentNode.removeChild(t),o==s)a+=r,s=o;else if(s==e.parentNode){var i=$.getNodeIndex(e);a==i?(s=e,a=n):i<a&&a--}}},n=!0;if($.isCharacterDataNode(s))s.length==a&&e(s);else{if(0<a){var i=s.childNodes[a-1];i&&$.isCharacterDataNode(i)&&e(i)}n=!this.collapsed}if(n){if($.isCharacterDataNode(o))0==r&&t(o);else if(r<o.childNodes.length){var l=o.childNodes[r];l&&$.isCharacterDataNode(l)&&t(l)}}else o=s,r=a;c(this,o,r,s,a)},collapseToPoint:function(e,t){T(this),E(e,!0),v(e,t),i(this,e,t)}}),w(e)}function x(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:$.getCommonAncestor(e.startContainer,e.endContainer)}function S(e,t,n,i,o){var r=e.startContainer!==t||e.startOffset!==n,s=e.endContainer!==i||e.endOffset!==o;e.startContainer=t,e.startOffset=n,e.endContainer=i,e.endOffset=o,x(e),c(e,"boundarychange",{startMoved:r,endMoved:s})}function A(e){T(e),e.startContainer=e.startOffset=e.endContainer=e.endOffset=null,e.collapsed=e.commonAncestorContainer=null,c(e,"detach",null),e._listeners=null}function L(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this._listeners={boundarychange:[],detach:[]},x(this)}s.requireModules(["DomUtil"]);var $=s.dom,F=$.DomPosition,P=s.DOMException;p.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,$.isCharacterDataNode(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,n=this._current;!$.isCharacterDataNode(n)||n!==this.sc&&n!==this.ec?n.parentNode&&n.parentNode.removeChild(n):(e=n===this.sc?this.so:0)!=(t=n===this.ec?this.eo:n.length)&&n.deleteData(e,t-e)},isPartiallySelectedSubtree:function(){return a(this._current,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)(e=this.range.cloneRange()).collapse();else{e=new L(l(this.range));var t=this._current,n=t,i=0,o=t,r=$.getNodeLength(t);$.isAncestorOf(t,this.sc,!0)&&(n=this.sc,i=this.so),$.isAncestorOf(t,this.ec,!0)&&(o=this.ec,r=this.eo),S(e,n,i,o,r)}return new p(e,this.clonePartiallySelectedTextNodes)},detach:function(e){e&&this.range.detach(),this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},o.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2},o.prototype.toString=function(){return this.message},g.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){return this._current=this._next,this._next=this.nodes[++this._position],this._current},detach:function(){this._current=this._next=this.nodes=null}};var B=[1,3,4,5,7,8,10],M=[2,9,11],H=[5,6,10,12],q=[1,3,4,5,7,8,10,11],z=[1,3,4,5,7,8],j=$.getRootContainer,V=t([9,11]),U=t(H),W=t([6,10,12]),G=document.createElement("style"),X=!1;try{G.innerHTML="<b>x</b>",X=3==G.firstChild.nodeType}catch(se){}var Y=(s.features.htmlParsingConforms=X)?function(e){var t=this.startContainer,n=$.getDocument(t);if(!t)throw new P("INVALID_STATE_ERR");var i=null;return 1==t.nodeType?i=t:$.isCharacterDataNode(t)&&(i=$.parentElement(t)),(i=null===i||"HTML"==i.nodeName&&$.isHtmlNamespace($.getDocument(i).documentElement)&&$.isHtmlNamespace(i)?n.createElement("body"):i.cloneNode(!1)).innerHTML=e,$.fragmentFromNodeChildren(i)}:function(e){T(this);var t=l(this).createElement("body");return t.innerHTML=e,$.fragmentFromNodeChildren(t)},Z=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],Q=0,J=1,ee=2,te=3,ne=0,ie=1,oe=2,re=3;_.prototype={attachListener:function(e,t){this._listeners[e].push(t)},compareBoundaryPoints:function(e,t){var n,i,o,r;y(this),I(this.startContainer,t.startContainer);var s=e==te||e==Q?"start":"end",a=e==J||e==Q?"start":"end";return n=this[s+"Container"],i=this[s+"Offset"],o=t[a+"Container"],r=t[a+"Offset"],$.comparePoints(n,i,o,r)},insertNode:function(e){if(y(this),C(e,q),O(this.startContainer),$.isAncestorOf(e,this.startContainer,!0))throw new P("HIERARCHY_REQUEST_ERR");var t=n(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){var e,t;if(y(this),this.collapsed)return l(this).createDocumentFragment();if(this.startContainer===this.endContainer&&$.isCharacterDataNode(this.startContainer))return(e=this.startContainer.cloneNode(!0)).data=e.data.slice(this.startOffset,this.endOffset),(t=l(this).createDocumentFragment()).appendChild(e),t;var n=new p(this,!0);return e=r(n),n.detach(),e},canSurroundContents:function(){y(this),O(this.startContainer),O(this.endContainer);var e=new p(this,!0),t=e._first&&a(e._first,this)||e._last&&a(e._last,this);return e.detach(),!t},surroundContents:function(e){if(C(e,z),!this.canSurroundContents())throw new o("BAD_BOUNDARYPOINTS_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);n(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){y(this);for(var e,t=new L(l(this)),n=Z.length;n--;)t[e=Z[n]]=this[e];return t},toString:function(){y(this);var e=this.startContainer;if(e===this.endContainer&&$.isCharacterDataNode(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],n=new p(this,!0);return h(n,function(e){3!=e.nodeType&&4!=e.nodeType||t.push(e.data)}),n.detach(),t.join("")},compareNode:function(e){y(this);var t=e.parentNode,n=$.getNodeIndex(e);if(!t)throw new P("NOT_FOUND_ERR");var i=this.comparePoint(t,n),o=this.comparePoint(t,n+1);return i<0?0<o?oe:ne:0<o?ie:re},comparePoint:function(e,t){return y(this),b(e,"HIERARCHY_REQUEST_ERR"),I(e,this.startContainer),$.comparePoints(e,t,this.startContainer,this.startOffset)<0?-1:0<$.comparePoints(e,t,this.endContainer,this.endOffset)?1:0},createContextualFragment:Y,toHtml:function(){y(this);var e=l(this).createElement("div");return e.appendChild(this.cloneContents()),e.innerHTML},intersectsNode:function(e,t){if(y(this),b(e,"NOT_FOUND_ERR"),$.getDocument(e)!==l(this))return!1;var n=e.parentNode,i=$.getNodeIndex(e);b(n,"NOT_FOUND_ERR");var o=$.comparePoints(n,i,this.endContainer,this.endOffset),r=$.comparePoints(n,i+1,this.startContainer,this.startOffset);return t?o<=0&&0<=r:o<0&&0<r},isPointInRange:function(e,t){return y(this),b(e,"HIERARCHY_REQUEST_ERR"),I(e,this.startContainer),0<=$.comparePoints(e,t,this.startContainer,this.startOffset)&&$.comparePoints(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e,t){if(y(this),l(e)!=l(this))throw new P("WRONG_DOCUMENT_ERR");var n=$.comparePoints(this.startContainer,this.startOffset,e.endContainer,e.endOffset),i=$.comparePoints(this.endContainer,this.endOffset,e.startContainer,e.startOffset);return t?n<=0&&0<=i:n<0&&0<i},intersection:function(e){if(this.intersectsRange(e)){var t=$.comparePoints(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=$.comparePoints(this.endContainer,this.endOffset,e.endContainer,e.endOffset),i=this.cloneRange();return-1==t&&i.setStart(e.startContainer,e.startOffset),1==n&&i.setEnd(e.endContainer,e.endOffset),i}return null},union:function(e){if(this.intersectsRange(e,!0)){var t=this.cloneRange();return-1==$.comparePoints(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==$.comparePoints(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new o("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==re},containsNodeContents:function(e){return 0<=this.comparePoint(e,0)&&this.comparePoint(e,$.getNodeLength(e))<=0},containsRange:function(e){return this.intersection(e).equals(e)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(0<n.length){t.setStart(n[0],0);var i=n.pop();t.setEnd(i,i.length);var o=this.containsRange(t);return t.detach(),o}return this.containsNodeContents(e)},createNodeIterator:function(e,t){return y(this),new g(this,e,t)},getNodes:function(e,t){return y(this),i(this,e,t)},getDocument:function(){return l(this)},collapseBefore:function(e){T(this),this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){T(this),this.setStartAfter(e),this.collapse(!0)},getName:function(){return"DomRange"},equals:function(e){return L.rangesEqual(this,e)},inspect:function(){return e(this)}},N(L,S,A),s.rangePrototype=_.prototype,L.rangeProperties=Z,L.RangeIterator=p,L.copyComparisonConstants=w,L.createPrototypeRange=N,L.inspect=e,L.getRangeDocument=l,L.rangesEqual=function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},s.DomRange=L,s.RangeException=o}),rangy.createModule("WrappedRange",function(d){function i(e){var t=e.parentElement(),n=e.duplicate();n.collapse(!0);var i=n.parentElement();(n=e.duplicate()).collapse(!1);var o=n.parentElement(),r=i==o?i:g.getCommonAncestor(i,o);return r==t?r:g.getCommonAncestor(t,r)}function o(e){return 0==e.compareEndPoints("StartToEnd",e)}function r(e,t,n,i){var o=e.duplicate();o.collapse(n);var r=o.parentElement();if(g.isAncestorOf(t,r,!0)||(r=t),!r.canHaveHTML)return new E(r.parentNode,g.getNodeIndex(r));for(var s,a,l,c,d,u=g.getDocument(r).createElement("span"),h=n?"StartToStart":"StartToEnd";r.insertBefore(u,u.previousSibling),o.moveToElementText(u),0<(s=o.compareEndPoints(h,e))&&u.previousSibling;);if(d=u.nextSibling,-1==s&&d&&g.isCharacterDataNode(d)){var f;if(o.setEndPoint(n?"EndToStart":"EndToEnd",e),/[\r\n]/.test(d.data)){var m=o.duplicate(),p=m.text.replace(/\r\n/g,"\r").length;for(f=m.moveStart("character",p);-1==(s=m.compareEndPoints("StartToEnd",m));)f++,m.moveStart("character",1)}else f=o.text.length;c=new E(d,f)}else a=(i||!n)&&u.previousSibling,c=(l=(i||n)&&u.nextSibling)&&g.isCharacterDataNode(l)?new E(l,0):a&&g.isCharacterDataNode(a)?new E(a,a.length):new E(r,g.getNodeIndex(u));return u.parentNode.removeChild(u),c}function s(e,t){var n,i,o,r,s=e.offset,a=g.getDocument(e.node),l=a.body.createTextRange(),c=g.isCharacterDataNode(e.node);return i=c?(n=e.node).parentNode:(n=s<(r=e.node.childNodes).length?r[s]:null,e.node),(o=a.createElement("span")).innerHTML="&#feff;",n?i.insertBefore(o,n):i.appendChild(o),l.moveToElementText(o),l.collapse(!t),i.removeChild(o),c&&l[t?"moveStart":"moveEnd"]("character",s),l}var u;d.requireModules(["DomUtil","DomRange"]);var g=d.dom,E=g.DomPosition,h=d.DomRange;if(!d.features.implementsDomRange||d.features.implementsTextRange&&d.config.preferTextRange){if(d.features.implementsTextRange){(u=function(e){this.textRange=e,this.refresh()}).prototype=new h(document),u.prototype.refresh=function(){var e,t,n=i(this.textRange);t=o(this.textRange)?e=r(this.textRange,n,!0,!0):(e=r(this.textRange,n,!0,!1),r(this.textRange,n,!1,!1)),this.setStart(e.node,e.offset),this.setEnd(t.node,t.offset)},h.copyComparisonConstants(u);var e=function(){return this}();"undefined"==typeof e.Range&&(e.Range=u),d.createNativeRange=function(e){return(e=e||document).body.createTextRange()}}}else!function(){function i(e){for(var t,n=r.length;n--;)e[t=r[n]]=e.nativeRange[t]}function e(e,t,n,i,o){var r=e.startContainer!==t||e.startOffset!=n,s=e.endContainer!==i||e.endOffset!=o;(r||s)&&(e.setEnd(i,o),e.setStart(t,n))}function t(e){e.nativeRange.detach(),e.detached=!0;for(var t=r.length;t--;)e[r[t]]=null}var n,o,r=h.rangeProperties;u=function(e){if(!e)throw new Error("Range must be specified");this.nativeRange=e,i(this)},h.createPrototypeRange(u,e,t),(n=u.prototype).selectNode=function(e){this.nativeRange.selectNode(e),i(this)},n.deleteContents=function(){this.nativeRange.deleteContents(),i(this)},n.extractContents=function(){var e=this.nativeRange.extractContents();return i(this),e},n.cloneContents=function(){return this.nativeRange.cloneContents()},n.surroundContents=function(e){this.nativeRange.surroundContents(e),i(this)},n.collapse=function(e){this.nativeRange.collapse(e),i(this)},n.cloneRange=function(){return new u(this.nativeRange.cloneRange())},n.refresh=function(){i(this)},n.toString=function(){return this.nativeRange.toString()};var s=document.createTextNode("test");g.getBody(document).appendChild(s);var a=document.createRange();a.setStart(s,0),a.setEnd(s,0);try{a.setStart(s,1),!0,n.setStart=function(e,t){this.nativeRange.setStart(e,t),i(this)},n.setEnd=function(e,t){this.nativeRange.setEnd(e,t),i(this)},o=function(t){return function(e){this.nativeRange[t](e),i(this)}}}catch(c){!1,n.setStart=function(e,t){try{this.nativeRange.setStart(e,t)}catch(HE){this.nativeRange.setEnd(e,t),this.nativeRange.setStart(e,t)}i(this)},n.setEnd=function(e,t){try{this.nativeRange.setEnd(e,t)}catch(HE){this.nativeRange.setStart(e,t),this.nativeRange.setEnd(e,t)}i(this)},o=function(t,n){return function(e){try{this.nativeRange[t](e)}catch(HE){this.nativeRange[n](e),this.nativeRange[t](e)}i(this)}}}n.setStartBefore=o("setStartBefore","setEndBefore"),n.setStartAfter=o("setStartAfter","setEndAfter"),n.setEndBefore=o("setEndBefore","setStartBefore"),n.setEndAfter=o("setEndAfter","setStartAfter"),a.selectNodeContents(s),a.startContainer==s&&a.endContainer==s&&0==a.startOffset&&a.endOffset==s.length?n.selectNodeContents=function(e){this.nativeRange.selectNodeContents(e),i(this)}:n.selectNodeContents=function(e){this.setStart(e,0),this.setEnd(e,h.getEndOffset(e))},a.selectNodeContents(s),a.setEnd(s,3);var l=document.createRange();l.selectNodeContents(s),l.setEnd(s,4),l.setStart(s,2),-1==a.compareBoundaryPoints(a.START_TO_END,l)&1==a.compareBoundaryPoints(a.END_TO_START,l)?n.compareBoundaryPoints=function(e,t){return e==(t=t.nativeRange||t).START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:n.compareBoundaryPoints=function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)},d.util.isHostMethod(a,"createContextualFragment")&&(n.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),g.getBody(document).removeChild(s),a.detach(),l.detach()}(),d.createNativeRange=function(e){return(e=e||document).createRange()};d.features.implementsTextRange&&(u.rangeToTextRange=function(e){if(e.collapsed)return s(new E(e.startContainer,e.startOffset),!0);var t=s(new E(e.startContainer,e.startOffset),!0),n=s(new E(e.endContainer,e.endOffset),!1),i=g.getDocument(e.startContainer).body.createTextRange();return i.setEndPoint("StartToStart",t),i.setEndPoint("EndToEnd",n),i}),u.prototype.getName=function(){return"WrappedRange"},d.WrappedRange=u,d.createRange=function(e){return e=e||document,new u(d.createNativeRange(e))},d.createRangyRange=function(e){return e=e||document,new h(e)},d.createIframeRange=function(e){return d.createRange(g.getIframeDocument(e))},d.createIframeRangyRange=function(e){return d.createRangyRange(g.getIframeDocument(e))},d.addCreateMissingNativeApiListener(function(e){var t=e.document;"undefined"==typeof t.createRange&&(t.createRange=function(){return d.createRange(this)}),t=e=null})}),rangy.createModule("WrappedSelection",function(r,e){function t(e){return(e||window).getSelection()}function o(e){return(e||window).document.selection}function s(e,t,n){var i=n?"end":"start",o=n?"start":"end";e.anchorNode=t[i+"Container"],e.anchorOffset=t[i+"Offset"],e.focusNode=t[o+"Container"],e.focusOffset=t[o+"Offset"]}function i(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}function a(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function l(e){var t;return e instanceof D?(t=e._selectionNativeRange)||((t=r.createNativeRange(O.getDocument(e.startContainer))).setEnd(e.endContainer,e.endOffset),t.setStart(e.startContainer,e.startOffset),e._selectionNativeRange=t,e.attachListener("detach",function(){this._selectionNativeRange=null})):e instanceof R?t=e.nativeRange:r.features.implementsDomRange&&e instanceof O.getWindow(e.startContainer).Range&&(t=e),t}function n(e){if(!e.length||1!=e[0].nodeType)return!1;for(var t=1,n=e.length;t<n;++t)if(!O.isAncestorOf(e[0],e[t]))return!1;return!0}function c(e){var t=e.getNodes();if(!n(t))throw new Error("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return t[0]}function d(e){return!!e&&"undefined"!=typeof e.text}function u(e,t){var n=new R(t);e._ranges=[n],s(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed}function h(e){if(e._ranges.length=0,"None"==e.docSelection.type)a(e);else{var t=e.docSelection.createRange();if(d(t))u(e,t);else{e.rangeCount=t.length;for(var n,i=O.getDocument(t.item(0)),o=0;o<e.rangeCount;++o)(n=r.createRange(i)).selectNode(t.item(o)),e._ranges.push(n);e.isCollapsed=1==e.rangeCount&&e._ranges[0].collapsed,s(e,e._ranges[e.rangeCount-1],!1)}}}function f(e,t){for(var n=e.docSelection.createRange(),i=c(t),o=O.getDocument(n.item(0)),r=O.getBody(o).createControlRange(),s=0,a=n.length;s<a;++s)r.add(n.item(s));try{r.add(i)}catch(l){throw new Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}r.select(),h(e)}function m(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}function p(e,t){for(var n,i=O.getDocument(t[0].startContainer),o=O.getBody(i).createControlRange(),r=0;r<rangeCount;++r){n=c(t[r]);try{o.add(n)}catch(s){throw new Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")}}o.select(),h(e)}function g(e,t){if(e.anchorNode&&O.getDocument(e.anchorNode)!==O.getDocument(t))throw new y("WRONG_DOCUMENT_ERR")}function E(e){var t=[],n=new _(e.anchorNode,e.anchorOffset),i=new _(e.focusNode,e.focusOffset),o="function"==typeof e.getName?e.getName():"Selection";if("undefined"!=typeof e.rangeCount)for(var r=0,s=e.rangeCount;r<s;++r)t[r]=D.inspect(e.getRangeAt(r));return"["+o+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+i.inspect()+"]"}r.requireModules(["DomUtil","DomRange","WrappedRange"]),r.config.checkSelectionRanges=!0;var T,C,v="boolean",I="_rangySelection",O=r.dom,b=r.util,D=r.DomRange,R=r.WrappedRange,y=r.DOMException,_=O.DomPosition,K="Control",w=r.util.isHostMethod(window,"getSelection"),k=r.util.isHostObject(document,"selection"),N=k&&(!w||r.config.preferTextRange);N?(T=o,r.isSelectionValid=function(e){var t=(e||window).document,n=t.selection;return"None"!=n.type||O.getDocument(n.createRange().parentElement())==t}):w?(T=t,r.isSelectionValid=function(){return!0}):e.fail("Neither document.selection or window.getSelection() detected.");var x=(r.getNativeSelection=T)(),S=r.createNativeRange(document),A=O.getBody(document),L=b.areHostObjects(x,b.areHostProperties(x,["anchorOffset","focusOffset"]));r.features.selectionHasAnchorAndFocus=L;var $=b.isHostMethod(x,"extend");r.features.selectionHasExtend=$;var F="number"==typeof x.rangeCount;r.features.selectionHasRangeCount=F;var P=!1,B=!0;b.areHostMethods(x,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof x.rangeCount&&r.features.implementsDomRange&&function(){var e=document.createElement("iframe");A.appendChild(e);var t=O.getIframeDocument(e);t.open(),t.write("<html><head></head><body>12</body></html>"),t.close();var n=O.getIframeWindow(e).getSelection(),i=t.documentElement.lastChild.firstChild,o=t.createRange();o.setStart(i,1),o.collapse(!0),n.addRange(o),B=1==n.rangeCount,n.removeAllRanges();var r=o.cloneRange();o.setStart(i,0),r.setEnd(i,2),n.addRange(o),n.addRange(r),P=2==n.rangeCount,o.detach(),r.detach(),A.removeChild(e)}(),r.features.selectionSupportsMultipleRanges=P,r.features.collapsedNonEditableSelectionsSupported=B;var M,H,q=!1;A&&b.isHostMethod(A,"createControlRange")&&(M=A.createControlRange(),b.areHostProperties(M,["item","add"])&&(q=!0)),r.features.implementsControlRange=q,C=L?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return!!e.rangeCount&&e.getRangeAt(e.rangeCount-1).collapsed},b.isHostMethod(x,"getRangeAt")?H=function(e,t){try{return e.getRangeAt(t)}catch(n){return null}}:L&&(H=function(e){var t=O.getDocument(e.anchorNode),n=r.createRange(t);return n.setStart(e.anchorNode,e.anchorOffset),n.setEnd(e.focusNode,e.focusOffset),n.collapsed!==this.isCollapsed&&(n.setStart(e.focusNode,e.focusOffset),n.setEnd(e.anchorNode,e.anchorOffset)),n}),r.getSelection=function(e){var t=(e=e||window)[I],n=T(e),i=k?o(e):null;return t?(t.nativeSelection=n,t.docSelection=i,t.refresh(e)):(t=new m(n,i,e),e[I]=t),t},r.getIframeSelection=function(e){return r.getSelection(O.getIframeWindow(e))};var z,j=m.prototype;if(!N&&L&&b.areHostMethods(x,["removeAllRanges","addRange"])){j.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),a(this)};var V=function(e,t){var n=D.getRangeDocument(t),i=r.createRange(n);i.collapseToPoint(t.endContainer,t.endOffset),e.nativeSelection.addRange(l(i)),e.nativeSelection.extend(t.startContainer,t.startOffset),e.refresh()};j.addRange=F?function(e,t){var n;if(q&&k&&this.docSelection.type==K)f(this,e);else if(t&&$)V(this,e);else if(n=P?this.rangeCount:(this.removeAllRanges(),0),this.nativeSelection.addRange(l(e)),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==n+1){if(r.config.checkSelectionRanges){var i=H(this.nativeSelection,this.rangeCount-1);i&&!D.rangesEqual(i,e)&&(e=new R(i))}this._ranges[this.rangeCount-1]=e,s(this,e,U(this.nativeSelection)),this.isCollapsed=C(this)}else this.refresh()}:function(e,t){t&&$?V(this,e):(this.nativeSelection.addRange(l(e)),this.refresh())},j.setRanges=function(e){if(q&&1<e.length)p(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;t<n;++t)this.addRange(e[t])}}}else{if(!(b.isHostMethod(x,"empty")&&b.isHostMethod(S,"select")&&q&&N))return e.fail("No means of selecting a Range or TextRange was found"),!1;j.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var e;if(this.anchorNode)e=O.getDocument(this.anchorNode);else if(this.docSelection.type==K){var t=this.docSelection.createRange();t.length&&(e=O.getDocument(t.item(0)).body.createTextRange())}if(e)e.body.createTextRange().select(),this.docSelection.empty()}}catch(n){}a(this)},j.addRange=function(e){this.docSelection.type==K?f(this,e):(R.rangeToTextRange(e).select(),this._ranges[0]=e,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,s(this,e,!1))},j.setRanges=function(e){this.removeAllRanges();var t=e.length;1<t?p(this,e):t&&this.addRange(e[0])}}if(j.getRangeAt=function(e){if(e<0||e>=this.rangeCount)throw new y("INDEX_SIZE_ERR");return this._ranges[e]},N)z=function(e){var t;r.isSelectionValid(e.win)?t=e.docSelection.createRange():(t=O.getBody(e.win.document).createTextRange()).collapse(!0),e.docSelection.type==K?h(e):d(t)?u(e,t):a(e)};else if(b.isHostMethod(x,"getRangeAt")&&"number"==typeof x.rangeCount)z=function(e){if(q&&k&&e.docSelection.type==K)h(e);else if(e._ranges.length=e.rangeCount=e.nativeSelection.rangeCount,e.rangeCount){for(var t=0,n=e.rangeCount;t<n;++t)e._ranges[t]=new r.WrappedRange(e.nativeSelection.getRangeAt(t));s(e,e._ranges[e.rangeCount-1],U(e.nativeSelection)),e.isCollapsed=C(e)}else a(e)};else{if(!L||typeof x.isCollapsed!=v||typeof S.collapsed!=v||!r.features.implementsDomRange)return e.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;z=function(e){var t,n=e.nativeSelection;n.anchorNode?(t=H(n,0),e._ranges=[t],e.rangeCount=1,i(e),e.isCollapsed=C(e)):a(e)}}j.refresh=function(e){var t=e?this._ranges.slice(0):null;if(z(this),e){var n=t.length;if(n!=this._ranges.length)return!1;for(;n--;)if(!D.rangesEqual(t[n],this._ranges[n]))return!1;return!0}};var U,W=function(e,t){var n=e.getAllRanges(),i=!1;e.removeAllRanges();for(var o=0,r=n.length;o<r;++o)i||t!==n[o]?e.addRange(n[o]):i=!0;e.rangeCount||a(e)};j.removeRange=q?function(e){if(this.docSelection.type==K){for(var t=this.docSelection.createRange(),n=c(e),i=O.getDocument(t.item(0)),o=O.getBody(i).createControlRange(),r=!1,s=0,a=t.length;s<a;++s)t.item(s)!==n||r?o.add(t.item(s)):r=!0;o.select(),h(this)}else W(this,e)}:function(e){W(this,e)},!N&&L&&r.features.implementsDomRange?(U=function(e){var t=!1;return e.anchorNode&&(t=1==O.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t},j.isBackwards=function(){return U(this)}):U=j.isBackwards=function(){return!1},j.toString=function(){for(var e=[],t=0,n=this.rangeCount;t<n;++t)e[t]=""+this._ranges[t];return e.join("")},j.collapse=function(e,t){g(this,e);var n=r.createRange(O.getDocument(e));n.collapseToPoint(e,t),this.removeAllRanges(),this.addRange(n),this.isCollapsed=!0},j.collapseToStart=function(){if(!this.rangeCount)throw new y("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},j.collapseToEnd=function(){if(!this.rangeCount)throw new y("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},j.selectAllChildren=function(e){g(this,e);var t=r.createRange(O.getDocument(e));t.selectNodeContents(e),this.removeAllRanges(),this.addRange(t)},j.deleteFromDocument=function(){if(q&&k&&this.docSelection.type==K){for(var e,t=this.docSelection.createRange();t.length;)e=t.item(0),t.remove(e),e.parentNode.removeChild(e);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();this.removeAllRanges();for(var i=0,o=n.length;i<o;++i)n[i].deleteContents();this.addRange(n[o-1])}},j.getAllRanges=function(){return this._ranges.slice(0)},j.setSingleRange=function(e){this.setRanges([e])},j.containsNode=function(e,t){for(var n=0,i=this._ranges.length;n<i;++n)if(this._ranges[n].containsNode(e,t))return!0;return!1},j.toHtml=function(){var e="";if(this.rangeCount){for(var t=D.getRangeDocument(this._ranges[0]).createElement("div"),n=0,i=this._ranges.length;n<i;++n)t.appendChild(this._ranges[n].cloneContents());e=t.innerHTML}return e},j.getName=function(){return"WrappedSelection"},j.inspect=function(){return E(this)},j.detach=function(){this.win[I]=null,this.win=this.anchorNode=this.focusNode=null},m.inspect=E,r.Selection=m,r.selectionPrototype=j,r.addCreateMissingNativeApiListener(function(e){"undefined"==typeof e.getSelection&&(e.getSelection=function(){return r.getSelection(this)}),e=null})});var Base=function(){};Base.extend=function(e,t){var n=Base.prototype.extend;Base._prototyping=!0;var i=new this;n.call(i,e),i.base=function(){},delete Base._prototyping;var o=i.constructor,r=i.constructor=function(e){if(!Base._prototyping)if(this._constructing||this.constructor==r)this._constructing=!0,o.apply(this,arguments),delete this._constructing;else if(null!=e)return(e.extend||n).call(e,i)};return r.ancestor=this,r.extend=this.extend,r.forEach=this.forEach,r.implement=this.implement,r.prototype=i,r.toString=this.toString,r.valueOf=function(e){return"object"==e?r:o.valueOf()},n.call(r,t),"function"==typeof r.init&&r.init(),r},Base.prototype={extend:function(e,t){if(1<arguments.length){var n=this[e];if(n&&"function"==typeof t&&(!n.valueOf||n.valueOf()!=t.valueOf())&&/\bbase\b/.test(t)){var i=t.valueOf();(t=function(){var e=this.base||Base.prototype.base;this.base=n;var t=i.apply(this,arguments);return this.base=e,t}).valueOf=function(e){return"object"==e?t:i},t.toString=Base.toString}this[e]=t}else if(e){var o=Base.prototype.extend;Base._prototyping||"function"==typeof this||(o=this.extend||o);for(var r={toSource:null},s=["constructor","toString","valueOf"],
a=Base._prototyping?0:1;l=s[a++];)e[l]!=r[l]&&o.call(this,l,e[l]);for(var l in e)r[l]||o.call(this,l,e[l])}return this}},Base=Base.extend({constructor:function(e){this.extend(e)}},{ancestor:Object,version:"1.1",forEach:function(e,t,n){for(var i in e)this.prototype[i]===undefined&&t.call(n,e[i],i,e)},implement:function(){for(var e=0;e<arguments.length;e++)"function"==typeof arguments[e]?arguments[e](this.prototype):this.prototype.extend(arguments[e]);return this},toString:function(){return String(this.valueOf())}}),wysihtml5.browser=function(){function r(e){return(/ipad|iphone|ipod/.test(e)&&e.match(/ os (\d+).+? like mac os x/)||[,0])[1]}var o,s,t=navigator.userAgent,a=document.createElement("div"),n=-1!==t.indexOf("MSIE")&&-1===t.indexOf("Opera"),e=-1!==t.indexOf("Gecko")&&-1===t.indexOf("KHTML"),i=-1!==t.indexOf("AppleWebKit/"),l=-1!==t.indexOf("Chrome/"),c=-1!==t.indexOf("Opera/");return{USER_AGENT:t,supported:function(){var e=this.USER_AGENT.toLowerCase(),t="contentEditable"in a,n=document.execCommand&&document.queryCommandSupported&&document.queryCommandState,i=document.querySelector&&document.querySelectorAll,o=this.isIos()&&r(e)<5||-1!==e.indexOf("opera mobi")||-1!==e.indexOf("hpwos/");return t&&n&&i&&!o},isTouchDevice:function(){return this.supportsEvent("touchmove")},isIos:function(){var e=this.USER_AGENT.toLowerCase();return-1!==e.indexOf("webkit")&&-1!==e.indexOf("mobile")},supportsSandboxedIframes:function(){return n},throwsMixedContentWarningWhenIframeSrcIsEmpty:function(){return!("querySelector"in document)},displaysCaretInEmptyContentEditableCorrectly:function(){return!e},hasCurrentStyleProperty:function(){return"currentStyle"in a},insertsLineBreaksOnReturn:function(){return e},supportsPlaceholderAttributeOn:function(e){return"placeholder"in e},supportsEvent:function(e){return"on"+e in a||(a.setAttribute("on"+e,"return;"),"function"==typeof a["on"+e])},supportsEventsInIframeCorrectly:function(){return!c},firesOnDropOnlyWhenOnDragOverIsCancelled:function(){return i||e},supportsDataTransfer:function(){try{return i&&(window.Clipboard||window.DataTransfer).prototype.getData}catch(e){return!1}},supportsHTML5Tags:function(e){var t=e.createElement("div"),n="<article>foo</article>";return t.innerHTML=n,t.innerHTML.toLowerCase()===n},supportsCommand:(o={formatBlock:n,insertUnorderedList:n||c||i,insertOrderedList:n||c||i},s={insertHTML:e},function(e,t){if(!o[t]){try{return e.queryCommandSupported(t)}catch(n){}try{return e.queryCommandEnabled(t)}catch(i){return!!s[t]}}return!1}),doesAutoLinkingInContentEditable:function(){return n},canDisableAutoLinking:function(){return this.supportsCommand(document,"AutoUrlDetect")},clearsContentEditableCorrectly:function(){return e||c||i},supportsGetAttributeCorrectly:function(){return"1"!=document.createElement("td").getAttribute("rowspan")},canSelectImagesInContentEditable:function(){return e||n||c},clearsListsInContentEditableCorrectly:function(){return e||n||i},autoScrollsToCaret:function(){return!i},autoClosesUnclosedTags:function(){var e,t,n=a.cloneNode(!1);return n.innerHTML="<p><div></div>",t=n.innerHTML.toLowerCase(),e="<p></p><div></div>"===t||"<p><div></div></p>"===t,this.autoClosesUnclosedTags=function(){return e},e},supportsNativeGetElementsByClassName:function(){return-1!==String(document.getElementsByClassName).indexOf("[native code]")},supportsSelectionModify:function(){return"getSelection"in window&&"modify"in window.getSelection()},supportsClassList:function(){return"classList"in a},needsSpaceAfterLineBreak:function(){return c},supportsSpeechApiOn:function(e){return 11<=(t.match(/Chrome\/(\d+)/)||[,0])[1]&&("onwebkitspeechchange"in e||"speech"in e)},crashesWhenDefineProperty:function(e){return n&&("XMLHttpRequest"===e||"XDomainRequest"===e)},doesAsyncFocus:function(){return n},hasProblemsSettingCaretAfterImg:function(){return n},hasUndoInContextMenu:function(){return e||l||c}}}(),wysihtml5.lang.array=function(o){return{contains:function(e){if(o.indexOf)return-1!==o.indexOf(e);for(var t=0,n=o.length;t<n;t++)if(o[t]===e)return!0;return!1},without:function(e){e=wysihtml5.lang.array(e);for(var t=[],n=0,i=o.length;n<i;n++)e.contains(o[n])||t.push(o[n]);return t},get:function(){for(var e=0,t=o.length,n=[];e<t;e++)n.push(o[e]);return n}}},wysihtml5.lang.Dispatcher=Base.extend({observe:function(e,t){return this.events=this.events||{},this.events[e]=this.events[e]||[],this.events[e].push(t),this},on:function(){return this.observe.apply(this,wysihtml5.lang.array(arguments).get())},fire:function(e,t){this.events=this.events||{};for(var n=this.events[e]||[],i=0;i<n.length;i++)n[i].call(this,t);return this},stopObserving:function(e,t){this.events=this.events||{};var n,i,o=0;if(e){for(n=this.events[e]||[],i=[];o<n.length;o++)n[o]!==t&&t&&i.push(n[o]);this.events[e]=i}else this.events={};return this}}),wysihtml5.lang.object=function(n){return{merge:function(e){for(var t in e)n[t]=e[t];return this},get:function(){return n},clone:function(){var e,t={};for(e in n)t[e]=n[e];return t},isArray:function(){return"[object Array]"===Object.prototype.toString.call(n)}}},function(){var e=/^\s+/,t=/\s+$/;wysihtml5.lang.string=function(n){return n=String(n),{trim:function(){return n.replace(e,"").replace(t,"")},interpolate:function(e){for(var t in e)n=this.replace("#{"+t+"}").by(e[t]);return n},replace:function(t){return{by:function(e){return n.split(t).join(e)}}}}}}(),function(o){function e(e){return t(e)?e:(e===e.ownerDocument.documentElement&&(e=e.ownerDocument.body),a(e))}function i(e){return e.replace(c,function(e,t){var n=(t.match(d)||[])[1]||"",i=h[n];(t=t.replace(d,"")).split(i).length>t.split(n).length&&(t+=n,n="");var o=t,r=t;return t.length>u&&(r=r.substr(0,u)+"..."),"www."===o.substr(0,4)&&(o="http://"+o),'<a href="'+o+'">'+r+"</a>"+n})}function r(e){var t=e._wysihtml5_tempElement;return t||(t=e._wysihtml5_tempElement=e.createElement("div")),t}function s(e){var t=e.parentNode,n=r(t.ownerDocument);for(n.innerHTML="<span></span>"+i(e.data),n.removeChild(n.firstChild);n.firstChild;)t.insertBefore(n.firstChild,e);t.removeChild(e)}function t(e){for(var t;e.parentNode;){if(t=(e=e.parentNode).nodeName,l.contains(t))return!0;if("body"===t)return!1}return!1}function a(e){if(!l.contains(e.nodeName)){if(e.nodeType!==o.TEXT_NODE||!e.data.match(c)){for(var t=o.lang.array(e.childNodes).get(),n=t.length,i=0;i<n;i++)a(t[i]);return e}s(e)}}var l=o.lang.array(["CODE","PRE","A","SCRIPT","HEAD","TITLE","STYLE"]),c=/((https?:\/\/|www\.)[^\s<]{3,})/gi,d=/([^\w\/\-](,?))$/i,u=100,h={")":"(","]":"[","}":"{"};o.dom.autoLink=e,o.dom.autoLink.URL_REG_EXP=c}(wysihtml5),function(e){var i=e.browser.supportsClassList(),n=e.dom;n.addClass=function(e,t){if(i)return e.classList.add(t);n.hasClass(e,t)||(e.className+=" "+t)},n.removeClass=function(e,t){if(i)return e.classList.remove(t);e.className=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ")},n.hasClass=function(e,t){if(i)return e.classList.contains(t);var n=e.className;return 0<n.length&&(n==t||new RegExp("(^|\\s)"+t+"(\\s|$)").test(n))}}(wysihtml5),wysihtml5.dom.contains=function(){var e=document.documentElement;return e.contains?function(e,t){return t.nodeType!==wysihtml5.ELEMENT_NODE&&(t=t.parentNode),e!==t&&e.contains(t)}:e.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:void 0}(),wysihtml5.dom.convertToList=function(){function p(e,t){var n=e.createElement("li");return t.appendChild(n),n}function g(e,t){return e.createElement(t)}function e(e,t){if("UL"===e.nodeName||"OL"===e.nodeName||"MENU"===e.nodeName)return e;var n,i,o,r,s,a,l,c,d,u=e.ownerDocument,h=g(u,t),f=e.querySelectorAll("br"),m=f.length;for(d=0;d<m;d++)for(r=f[d];(s=r.parentNode)&&s!==e&&s.lastChild===r;){if("block"===wysihtml5.dom.getStyle("display").from(s)){s.removeChild(r);break}wysihtml5.dom.insert(r).after(r.parentNode)}for(i=(n=wysihtml5.lang.array(e.childNodes).get()).length,d=0;d<i;d++)c=c||p(u,h),o=n[d],a="block"===wysihtml5.dom.getStyle("display").from(o),l="BR"===o.nodeName,a?((c=c.firstChild?p(u,h):c).appendChild(o),c=null):l?c=c.firstChild?null:c:c.appendChild(o);return e.parentNode.replaceChild(h,e),h}return e}(),wysihtml5.dom.copyAttributes=function(r){return{from:function(o){return{to:function(e){for(var t,n=0,i=r.length;n<i;n++)t=r[n],"undefined"!=typeof o[t]&&""!==o[t]&&(e[t]=o[t]);return{andTo:arguments.callee}}}}}},function(s){var a=["-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing"],l=function(e){return!!t(e)&&parseInt(s.getStyle("width").from(e),10)<e.offsetWidth},t=function(e){for(var t=0,n=a.length;t<n;t++)if("border-box"===s.getStyle(a[t]).from(e))return a[t]};s.copyStyles=function(r){return{from:function(e){l(e)&&(r=wysihtml5.lang.array(r).without(a));for(var t,n="",i=r.length,o=0;o<i;o++)t=r[o],n+=t+":"+s.getStyle(t).from(e)+";";return{to:function(e){return s.setStyles(n).on(e),{andTo:arguments.callee}}}}}}}(wysihtml5.dom),function(s){s.dom.delegate=function(i,o,e,r){return s.dom.observe(i,e,function(e){for(var t=e.target,n=s.lang.array(i.querySelectorAll(o));t&&t!==i;){if(n.contains(t)){r.call(t,e);break}t=t.parentNode}})}}(wysihtml5),wysihtml5.dom.getAsDom=function(){var i=function(e,t){var n=t.createElement("div");n.style.display="none",t.body.appendChild(n);try{n.innerHTML=e}catch(i){}return t.body.removeChild(n),n},o=function(e){if(!e._wysihtml5_supportsHTML5Tags){for(var t=0,n=r.length;t<n;t++)e.createElement(r[t]);e._wysihtml5_supportsHTML5Tags=!0}},r=["abbr","article","aside","audio","bdi","canvas","command","datalist","details","figcaption","figure","footer","header","hgroup","keygen","mark","meter","nav","output","progress","rp","rt","ruby","svg","section","source","summary","time","track","video","wbr"];return function(e,t){var n;return t=t||document,"object"==typeof e&&e.nodeType?(n=t.createElement("div")).appendChild(e):wysihtml5.browser.supportsHTML5Tags(t)?(n=t.createElement("div")).innerHTML=e:(o(t),n=i(e,t)),n}}(),wysihtml5.dom.getParentElement=function(){function r(e,t){return!t||!t.length||("string"==typeof t?e===t:wysihtml5.lang.array(t).contains(e))}function s(e){return e.nodeType===wysihtml5.ELEMENT_NODE}function a(e,t,n){var i=(e.className||"").match(n)||[];return t?i[i.length-1]===t:!!i.length}function i(e,t,n){for(;n--&&e&&"BODY"!==e.nodeName;){if(r(e.nodeName,t))return e;e=e.parentNode}return null}function o(e,t,n,i,o){for(;o--&&e&&"BODY"!==e.nodeName;){if(s(e)&&r(e.nodeName,t)&&a(e,n,i))return e;e=e.parentNode}return null}return function(e,t,n){return n=n||50,t.className||t.classRegExp?o(e,t.nodeName,t.className,t.classRegExp,n):i(e,t.nodeName,n)}}(),wysihtml5.dom.getStyle=function(){function h(e){return e.replace(t,function(e){return e.charAt(1).toUpperCase()})}var f={"float":"styleFloat"in document.createElement("div").style?"styleFloat":"cssFloat"},t=/\-[a-z]/g;return function(u){return{from:function(e){if(e.nodeType===wysihtml5.ELEMENT_NODE){var t=e.ownerDocument,n=f[u]||h(u),i=e.style,o=e.currentStyle,r=i[n];if(r)return r;if(o)try{return o[n]}catch(d){}var s,a,l=t.defaultView||t.parentWindow,c=("height"===u||"width"===u)&&"TEXTAREA"===e.nodeName;return l.getComputedStyle?(c&&(s=i.overflow,i.overflow="hidden"),a=l.getComputedStyle(e,null).getPropertyValue(u),c&&(i.overflow=s||""),a):void 0}}}}}(),wysihtml5.dom.hasElementWithTagName=function(){function o(e){return e._wysihtml5_identifier||(e._wysihtml5_identifier=t++)}var r={},t=1;return function(e,t){var n=o(e)+":"+t,i=r[n];return i||(i=r[n]=e.getElementsByTagName(t)),0<i.length}}(),function(o){function r(e){return e._wysihtml5_identifier||(e._wysihtml5_identifier=t++)}var s={},t=1;o.dom.hasElementWithClassName=function(e,t){if(!o.browser.supportsNativeGetElementsByClassName())return!!e.querySelector("."+t);var n=r(e)+":"+t,i=s[n];return i||(i=s[n]=e.getElementsByClassName(t)),0<i.length}}(wysihtml5),wysihtml5.dom.insert=function(t){return{after:function(e){e.parentNode.insertBefore(t,e.nextSibling)},before:function(e){e.parentNode.insertBefore(t,e)},into:function(e){e.appendChild(t)}}},wysihtml5.dom.insertCSS=function(i){return i=i.join("\n"),{into:function(e){var t=e.head||e.getElementsByTagName("head")[0],n=e.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=i:n.appendChild(e.createTextNode(i)),t&&t.appendChild(n)}}},wysihtml5.dom.observe=function(i,o,r){for(var s,e,t=0,n=(o="string"==typeof o?[o]:o).length;t<n;t++)e=o[t],i.addEventListener?i.addEventListener(e,r,!1):(s=function(e){"target"in e||(e.target=e.srcElement),e.preventDefault=e.preventDefault||function(){this.returnValue=!1},e.stopPropagation=e.stopPropagation||function(){this.cancelBubble=!0},r.call(i,e)},i.attachEvent("on"+e,s));return{stop:function(){for(var e,t=0,n=o.length;t<n;t++)e=o[t],i.removeEventListener?i.removeEventListener(e,r,!1):i.detachEvent("on"+e,s)}}},wysihtml5.dom.parse=function(){function e(e,t,n,i){wysihtml5.lang.object(D).merge(p).merge(t).get();var o,r,s,a=(n=n||e.ownerDocument||document).createDocumentFragment(),l="string"==typeof e;for(o=l?wysihtml5.dom.getAsDom(e,n):e;o.firstChild;)s=o.firstChild,o.removeChild(s),(r=c(s,i))&&a.appendChild(r);return o.innerHTML="",o.appendChild(a),l?wysihtml5.quirks.getCorrectInnerHTML(o):o}function c(e,t){var n,i=e.nodeType,o=e.childNodes,r=o.length,s=f[i],a=0;if(!(n=s&&s(e)))return null;for(a=0;a<r;a++)newChild=c(o[a],t),newChild&&n.appendChild(newChild);return t&&n.childNodes.length<=1&&n.nodeName.toLowerCase()===m&&!n.attributes.length?n.firstChild:n}function t(e){var t,n,i=D.tags,o=e.nodeName.toLowerCase(),r=e.scopeName;if(e._wysihtml5)return null;if(e._wysihtml5=1,"wysihtml5-temp"===e.className)return null;if(r&&"HTML"!=r&&(o=r+":"+o),"outerHTML"in e&&(wysihtml5.browser.autoClosesUnclosedTags()||"P"!==e.nodeName||"</p>"===e.outerHTML.slice(-4).toLowerCase()||(o="div")),o in i){if(!(t=i[o])||t.remove)return null;t="string"==typeof t?{rename_tag:t}:t}else{if(!e.firstChild)return null;t={rename_tag:m}}return s(e,n=e.ownerDocument.createElement(t.rename_tag||o),t),e=null,n}function s(e,t,n){var i,o,r,s,a,l,c,d={},u=n.set_class,h=n.add_class,f=n.set_attributes,m=n.check_attributes,p=D.classes,g=0,E=[],T=[],C=[],v=[];if(f&&(d=wysihtml5.lang.object(f).clone()),m)for(a in m)(c=R[m[a]])&&"string"==typeof(l=c(O(e,a)))&&(d[a]=l);if(u&&E.push(u),h)for(a in h)(c=y[h[a]])&&"string"==typeof(s=c(O(e,a)))&&E.push(s);for(p["_wysihtml5-temp-placeholder"]=1,(v=e.getAttribute("class"))&&(E=E.concat(v.split(b))),i=E.length;g<i;g++)p[r=E[g]]&&T.push(r);for(o=T.length;o--;)r=T[o],wysihtml5.lang.array(C).contains(r)||C.unshift(r);for(a in C.length&&(d["class"]=C.join(" ")),d)try{t.setAttribute(a,d[a])}catch(I){}d.src&&("undefined"!=typeof d.width&&t.setAttribute("width",d.width),"undefined"!=typeof d.height&&t.setAttribute("height",d.height))}function O(e,t){return t=t.toLowerCase(),"IMG"==e.nodeName&&"src"==t&&!0===n(e)?e.src:g&&"outerHTML"in e?-1!=e.outerHTML.toLowerCase().indexOf(" "+t+"=")?e.getAttribute(t):null:e.getAttribute(t)}function n(e){try{return e.complete&&!e.mozMatchesSelector(":-moz-broken")}catch(t){if(e.complete&&"complete"===e.readyState)return!0}}function i(e){return e.ownerDocument.createTextNode(e.data)}var o,r,a,l,d,u,h,f={1:t,3:i},m="span",b=/\s+/,p={tags:{},classes:{}},D={},g=!wysihtml5.browser.supportsGetAttributeCorrectly(),R={url:(a=/^https?:\/\//i,function(e){return e&&e.match(a)?e.replace(a,function(e){return e.toLowerCase()}):null}),alt:(r=/[^ a-z0-9_\-]/gi,function(e){return e?e.replace(r,""):""}),numbers:(o=/\D/g,function(e){return(e=(e||"").replace(o,""))||null})},y={align_img:(h={left:"wysiwyg-float-left",right:"wysiwyg-float-right"},function(e){return h[String(e).toLowerCase()]}),align_text:(u={left:"wysiwyg-text-align-left",right:"wysiwyg-text-align-right",center:"wysiwyg-text-align-center",justify:"wysiwyg-text-align-justify"},function(e){return u[String(e).toLowerCase()]}),clear_br:(d={left:"wysiwyg-clear-left",right:"wysiwyg-clear-right",both:"wysiwyg-clear-both",all:"wysiwyg-clear-both"},function(e){return d[String(e).toLowerCase()]}),size_font:(l={1:"wysiwyg-font-size-xx-small",2:"wysiwyg-font-size-small",3:"wysiwyg-font-size-medium",4:"wysiwyg-font-size-large",5:"wysiwyg-font-size-x-large",6:"wysiwyg-font-size-xx-large",7:"wysiwyg-font-size-xx-large","-":"wysiwyg-font-size-smaller","+":"wysiwyg-font-size-larger"},function(e){return l[String(e).charAt(0)]})};return e}(),wysihtml5.dom.removeEmptyTextNodes=function(e){for(var t,n=wysihtml5.lang.array(e.childNodes).get(),i=n.length,o=0;o<i;o++)(t=n[o]).nodeType===wysihtml5.TEXT_NODE&&""===t.data&&t.parentNode.removeChild(t)},wysihtml5.dom.renameElement=function(e,t){for(var n,i=e.ownerDocument.createElement(t);n=e.firstChild;)i.appendChild(n);return wysihtml5.dom.copyAttributes(["align","className"]).from(e).to(i),e.parentNode.replaceChild(i,e),i},wysihtml5.dom.replaceWithChildNodes=function(e){if(e.parentNode)if(e.firstChild){for(var t=e.ownerDocument.createDocumentFragment();e.firstChild;)t.appendChild(e.firstChild);e.parentNode.replaceChild(t,e),e=t=null}else e.parentNode.removeChild(e)},function(t){function a(e){return"block"===t.getStyle("display").from(e)}function l(e){return"BR"===e.nodeName}function c(e){var t=e.ownerDocument.createElement("br");e.appendChild(t)}function e(e){if("MENU"===e.nodeName||"UL"===e.nodeName||"OL"===e.nodeName){var t,n,i,o,r=e.ownerDocument.createDocumentFragment(),s=e.previousElementSibling||e.previousSibling;for(s&&!a(s)&&c(r);o=e.firstChild;){for(n=o.lastChild;t=o.firstChild;)i=t===n&&!a(t)&&!l(t),r.appendChild(t),i&&c(r);o.parentNode.removeChild(o)}e.parentNode.replaceChild(r,e)}}t.resolveList=e}(wysihtml5.dom),function(l){var c=document,d=["parent","top","opener","frameElement","frames","localStorage","globalStorage","sessionStorage","indexedDB"],u=["open","close","openDialog","showModalDialog","alert","confirm","prompt","openDatabase","postMessage","XMLHttpRequest","XDomainRequest"],h=["referrer","write","open","close"];l.dom.Sandbox=Base.extend({constructor:function(e,t){this.callback=e||l.EMPTY_FUNCTION,this.config=l.lang.object({}).merge(t).get(),this.iframe=this._createIframe()},insertInto:function(e){"string"==typeof e&&(e=c.getElementById(e)),e.appendChild(this.iframe)},getIframe:function(){return this.iframe},getWindow:function(){this._readyError()},getDocument:function(){this._readyError()},destroy:function(){var e=this.getIframe();e.parentNode.removeChild(e)},_readyError:function(){throw new Error("wysihtml5.Sandbox: Sandbox iframe isn't loaded yet")},_createIframe:function(){var e=this,t=c.createElement("iframe");return t.className="wysihtml5-sandbox",l.dom.setAttributes({security:"restricted",allowtransparency:"true",frameborder:0,width:0,height:0,marginwidth:0,marginheight:0}).on(t),l.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()&&(t.src="javascript:'<html></html>'"),t.onload=function(){t.onreadystatechange=t.onload=null,e._onLoadIframe(t)},t.onreadystatechange=function(){/loaded|complete/.test(t.readyState)&&(t.onreadystatechange=t.onload=null,e._onLoadIframe(t))},t},_onLoadIframe:function(e){if(l.dom.contains(c.documentElement,e)){var t=this,n=e.contentWindow,i=e.contentWindow.document,o=c.characterSet||c.charset||"utf-8",r=this._getHtml({charset:o,stylesheets:this.config.stylesheets});if(i.open("text/html","replace"),i.write(r),i.close(),this.getWindow=function(){return e.contentWindow},this.getDocument=function(){return e.contentWindow.document},n.onerror=function(e,t,n){throw new Error("wysihtml5.Sandbox: "+e,t,n)},!l.browser.supportsSandboxedIframes()){var s,a;for(s=0,a=d.length;s<a;s++)this._unset(n,d[s]);for(s=0,a=u.length;s<a;s++)this._unset(n,u[s],l.EMPTY_FUNCTION);for(s=0,a=h.length;s<a;s++)this._unset(i,h[s]);this._unset(i,"cookie","",!0)}this.loaded=!0,setTimeout(function(){t.callback(t)},0)}},_getHtml:function(e){var t,n=e.stylesheets,i="",o=0;if(n="string"==typeof n?[n]:n)for(t=n.length;o<t;o++)i+='<link rel="stylesheet" href="'+n[o]+'">';return e.stylesheets=i,l.lang.string('<!DOCTYPE html><html><head><meta charset="#{charset}">#{stylesheets}</head><body></body></html>').interpolate(e)},_unset:function(e,t,n,i){try{e[t]=n}catch(r){}try{e.__defineGetter__(t,function(){return n})}catch(r){}if(i)try{e.__defineSetter__(t,function(){})}catch(r){}if(!l.browser.crashesWhenDefineProperty(t))try{var o={get:function(){return n}};i&&(o.set=function(){}),Object.defineProperty(e,t,o)}catch(r){}}})}(wysihtml5),function(){var i={className:"class"};wysihtml5.dom.setAttributes=function(n){return{on:function(e){for(var t in n)e.setAttribute(i[t]||t,n[t])}}}}(),wysihtml5.dom.setStyles=function(i){return{on:function(e){var t=e.style;if("string"!=typeof i)for(var n in i)"float"===n?(t.cssFloat=i[n],t.styleFloat=i[n]):t[n]=i[n];else t.cssText+=";"+i}}},function(s){s.simulatePlaceholder=function(e,t,n){var i="placeholder",o=function(){t.hasPlaceholderSet()&&t.clear(),s.removeClass(t.element,i)},r=function(){t.isEmpty()&&(t.setValue(n),s.addClass(t.element,i))};e.observe("set_placeholder",r).observe("unset_placeholder",o).observe("focus:composer",o).observe("paste:composer",o).observe("blur:composer",r),r()}}(wysihtml5.dom),function(e){var t=document.documentElement;e.getTextContent="textContent"in t?(e.setTextContent=function(e,t){e.textContent=t},function(e){return e.textContent}):"innerText"in t?(e.setTextContent=function(e,t){e.innerText=t},function(e){return e.innerText}):(e.setTextContent=function(e,t){e.nodeValue=t},function(e){return e.nodeValue})}(wysihtml5.dom),wysihtml5.quirks.cleanPastedHTML=function(){function e(e,t,n){t=t||d,n=n||e.ownerDocument||document;var i,o,r,s,a,l="string"==typeof e,c=0;for(a in i=l?wysihtml5.dom.getAsDom(e,n):e,t)for(r=i.querySelectorAll(a),o=t[a],s=r.length;c<s;c++)o(r[c]);return r=e=t=null,l?i.innerHTML:i}var d={"a u":wysihtml5.dom.replaceWithChildNodes};return e}(),function(i){var t,o,r,s=i.dom;i.quirks.ensureProperClearing=(t=function(){var t=this;setTimeout(function(){var e=t.innerHTML.toLowerCase();"<p>&nbsp;</p>"!=e&&"<p>&nbsp;</p><p>&nbsp;</p>"!=e||(t.innerHTML="")},0)},function(e){s.observe(e.element,["cut","keydown"],t)}),i.quirks.ensureProperClearingOfLists=(o=["OL","UL","MENU"],r=function(e,t){if(t.firstChild&&i.lang.array(o).contains(t.firstChild.nodeName)){var n=s.getParentElement(e,{nodeName:o});if(n)if(n==t.firstChild)if(n.childNodes.length<=1)(!n.firstChild||""===n.firstChild.innerHTML)&&n.parentNode.removeChild(n)}},function(n){s.observe(n.element,"keydown",function(e){if(e.keyCode===i.BACKSPACE_KEY){var t=n.selection.getSelectedNode();r(t,n.element)}})})}(wysihtml5),function(a){var l="%7E";a.quirks.getCorrectInnerHTML=function(e){var t=e.innerHTML;if(-1===t.indexOf(l))return t;var n,i,o,r,s=e.querySelectorAll("[href*='~'], [src*='~']");for(r=0,o=s.length;r<o;r++)n=s[r].href||s[r].src,i=a.lang.string(n).replace("~").by(l),t=a.lang.string(t).replace(i).by(n);return t}}(wysihtml5),function(s){var a=s.dom,l=["LI","P","H1","H2","H3","H4","H5","H6"],c=["UL","OL","MENU"];s.quirks.insertLineBreakOnReturn=function(o){function r(e){var t=a.getParentElement(e,{nodeName:["P","DIV"]},2);if(t){var n=document.createTextNode(s.INVISIBLE_SPACE);a.insert(n).before(t),a.replaceWithChildNodes(t),o.selection.selectNode(n)}}function e(e){var t=e.keyCode;if(!(e.shiftKey||t!==s.ENTER_KEY&&t!==s.BACKSPACE_KEY)){e.target;var n=o.selection.getSelectedNode(),i=a.getParentElement(n,{nodeName:l},4);i?"LI"!==i.nodeName||t!==s.ENTER_KEY&&t!==s.BACKSPACE_KEY?i.nodeName.match(/H[1-6]/)&&t===s.ENTER_KEY&&setTimeout(function(){r(o.selection.getSelectedNode())},0):setTimeout(function(){var e=o.selection.getSelectedNode();e&&(a.getParentElement(e,{nodeName:c},2)||r(e))},0):t!==s.ENTER_KEY||s.browser.insertsLineBreaksOnReturn()||(o.commands.exec("insertLineBreak"),e.preventDefault())}}a.observe(o.element.ownerDocument,"keydown",e)}}(wysihtml5),function(i){var o="wysihtml5-quirks-redraw";i.quirks.redraw=function(e){i.dom.addClass(e,o),i.dom.removeClass(e,o);try{var t=e.ownerDocument;t.execCommand("italic",!1,null),t.execCommand("italic",!1,null)}catch(n){}}}(wysihtml5),function(h){function r(e){var t=0;if(e.parentNode)for(;t+=e.offsetTop||0,e=e.offsetParent;);return t}var c=h.dom;h.Selection=Base.extend({constructor:function(e){window.rangy.init(),this.editor=e,this.composer=e.composer,this.doc=this.composer.doc},getBookmark:function(){var e=this.getRange();return e&&e.cloneRange()},setBookmark:function(e){e&&this.setSelection(e)},setBefore:function(e){var t=rangy.createRange(this.doc);return t.setStartBefore(e),t.setEndBefore(e),this.setSelection(t)},setAfter:function(e){var t=rangy.createRange(this.doc);return t.setStartAfter(e),t.setEndAfter(e),this.setSelection(t)},selectNode:function(e){var t=rangy.createRange(this.doc),n=e.nodeType===h.ELEMENT_NODE,i="canHaveHTML"in e?e.canHaveHTML:"IMG"!==e.nodeName,o=n?e.innerHTML:e.data,r=""===o||o===h.INVISIBLE_SPACE,s=c.getStyle("display").from(e),a="block"===s||"list-item"===s;if(r&&n&&i)try{e.innerHTML=h.INVISIBLE_SPACE}catch(l){}i?t.selectNodeContents(e):t.selectNode(e),i&&r&&n?t.collapse(a):i&&r&&(t.setStartAfter(e),t.setEndAfter(e)),this.setSelection(t)},getSelectedNode:function(e){var t,n;return e&&this.doc.selection&&"Control"===this.doc.selection.type&&(n=this.doc.selection.createRange())&&n.length?n.item(0):(t=this.getSelection(this.doc)).focusNode===t.anchorNode?t.focusNode:(n=this.getRange(this.doc))?n.commonAncestorContainer:this.doc.body},executeAndRestore:function(e,t){var n,i=this.doc.body,o=t&&i.scrollTop,r=t&&i.scrollLeft,s="_wysihtml5-temp-placeholder",a='<span class="'+s+'">'+h.INVISIBLE_SPACE+"</span>",l=this.getRange(this.doc);if(l){var c=l.createContextualFragment(a);l.insertNode(c);try{e(l.startContainer,l.endContainer)}catch(d){setTimeout(function(){throw d},0)}caretPlaceholder=this.doc.querySelector("."+s),caretPlaceholder?((n=rangy.createRange(this.doc)).selectNode(caretPlaceholder),n.deleteContents(),this.setSelection(n)):i.focus(),t&&(i.scrollTop=o,i.scrollLeft=r);try{caretPlaceholder.parentNode.removeChild(caretPlaceholder)}catch(u){}}else e(i,i)},executeAndRestoreSimple:function(e){var t,n,i,o,r,s=this.getRange(),a=this.doc.body;if(s){n=(o=s.getNodes([3]))[0]||s.startContainer,i=o[o.length-1]||s.endContainer,r={collapsed:s.collapsed,startContainer:n,startOffset:n===s.startContainer?s.startOffset:0,endContainer:i,endOffset:i===s.endContainer?s.endOffset:i.length};try{e(s.startContainer,s.endContainer)}catch(l){setTimeout(function(){throw l},0)}t=rangy.createRange(this.doc);try{t.setStart(r.startContainer,r.startOffset)}catch(c){}try{t.setEnd(r.endContainer,r.endOffset)}catch(d){}try{this.setSelection(t)}catch(u){}}else e(a,a)},insertHTML:function(e){var t=rangy.createRange(this.doc).createContextualFragment(e),n=t.lastChild;this.insertNode(t),n&&this.setAfter(n)},insertNode:function(e){var t=this.getRange();t&&t.insertNode(e)},surround:function(e){var t=this.getRange();if(t)try{t.surroundContents(e),this.selectNode(e)}catch(n){e.appendChild(t.extractContents()),t.insertNode(e)}},scrollIntoView:function(){var e,t,n=this.doc,i=n.documentElement.scrollHeight>n.documentElement.offsetHeight,o=n._wysihtml5ScrollIntoViewElement=n._wysihtml5ScrollIntoViewElement||((t=n.createElement("span")).innerHTML=h.INVISIBLE_SPACE,t);i&&(this.insertNode(o),e=r(o),o.parentNode.removeChild(o),e>n.body.scrollTop&&(n.body.scrollTop=e))},selectLine:function(){h.browser.supportsSelectionModify()?this._selectLine_W3C():this.doc.selection&&this._selectLine_MSIE()},_selectLine_W3C:function(){var e=this.doc.defaultView.getSelection();e.modify("extend","left","lineboundary"),e.modify("extend","right","lineboundary")},_selectLine_MSIE:function(){var e,t,n,i,o,r=this.doc.selection.createRange(),s=r.boundingTop,a=(r.boundingHeight,this.doc.body.scrollWidth);if(r.moveToPoint){for(0===s&&(n=this.doc.createElement("span"),this.insertNode(n),s=n.offsetTop,n.parentNode.removeChild(n)),s+=1,i=-10;i<a;i+=2)try{r.moveToPoint(i,s);break}catch(l){}for(e=s,t=this.doc.selection.createRange(),o=a;0<=o;o--)try{t.moveToPoint(o,e);break}catch(c){}r.setEndPoint("EndToEnd",t),r.select()}},getText:function(){var e=this.getSelection();return e?e.toString():""},getNodes:function(e,t){var n=this.getRange();return n?n.getNodes([e],t):[]},getRange:function(){var e=this.getSelection();return e&&e.rangeCount&&e.getRangeAt(0)},getSelection:function(){return rangy.getSelection(this.doc.defaultView||this.doc.parentWindow)},setSelection:function(e){var t=this.doc.defaultView||this.doc.parentWindow;return rangy.getSelection(t).setSingleRange(e)}})}(wysihtml5),function(a,r){function n(e,t,n){if(!e.className)return!1;var i=e.className.match(n)||[];return i[i.length-1]===t}function i(e,t,n){e.className?(o(e,n),e.className+=" "+t):e.className=t}function o(e,t){e.className&&(e.className=e.className.replace(t,""))}function s(e,t){return e.className.replace(f," ")==t.className.replace(f," ")}function l(e){for(var t=e.parentNode;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)}function c(e,t){if(e.attributes.length!=t.attributes.length)return!1;for(var n,i,o,r=0,s=e.attributes.length;r<s;++r)if("class"!=(o=(n=e.attributes[r]).name)){if(i=t.attributes.getNamedItem(o),n.specified!=i.specified)return!1;if(n.specified&&n.nodeValue!==i.nodeValue)return!1}return!0}function d(e,t){return r.dom.isCharacterDataNode(e)?0==t?!!e.previousSibling:t!=e.length||!!e.nextSibling:0<t&&t<e.childNodes.length}function u(e,t,n){var i;if(r.dom.isCharacterDataNode(t)&&(0==n?(n=r.dom.getNodeIndex(t),t=t.parentNode):n==t.length?(n=r.dom.getNodeIndex(t)+1,t=t.parentNode):i=r.dom.splitDataNode(t,n)),!i){var o;for((i=t.cloneNode(!1)).id&&i.removeAttribute("id");o=t.childNodes[n];)i.appendChild(o);r.dom.insertAfter(i,t)}return t==e?i:u(e,i.parentNode,r.dom.getNodeIndex(i))}function p(e){this.isElementMerge=e.nodeType==a.ELEMENT_NODE,this.firstTextNode=this.isElementMerge?e.lastChild:e,this.textNodes=[this.firstTextNode]}function e(e,t,n,i){this.tagNames=e||[h],this.cssClass=t||"",this.similarClassRegExp=n,this.normalize=i,this.applyToAnyTagName=!1}var h="span",f=/\s+/g;p.prototype={doMerge:function(){for(var e,t,n,i=[],o=0,r=this.textNodes.length;o<r;++o)t=(e=this.textNodes[o]).parentNode,i[o]=e.data,o&&(t.removeChild(e),t.hasChildNodes()||t.parentNode.removeChild(t));return this.firstTextNode.data=n=i.join(""),n},getLength:function(){for(var e=this.textNodes.length,t=0;e--;)t+=this.textNodes[e].length;return t},toString:function(){for(var e=[],t=0,n=this.textNodes.length;t<n;++t)e[t]="'"+this.textNodes[t].data+"'";return"[Merge("+e.join(",")+")]"}},e.prototype={getAncestorWithClass:function(e){for(var t;e;){if(t=!this.cssClass||n(e,this.cssClass,this.similarClassRegExp),e.nodeType==a.ELEMENT_NODE&&r.dom.arrayContains(this.tagNames,e.tagName.toLowerCase())&&t)return e;e=e.parentNode}return!1},postApply:function(e,t){for(var n,i,o,r=e[0],s=e[e.length-1],a=[],l=r,c=s,d=0,u=s.length,h=0,f=e.length;h<f;++h)i=e[h],(o=this.getAdjacentMergeableTextNode(i.parentNode,!1))?(n||(n=new p(o),a.push(n)),n.textNodes.push(i),i===r&&(d=(l=n.firstTextNode).length),i===s&&(c=n.firstTextNode,u=n.getLength())):n=null;var m=this.getAdjacentMergeableTextNode(s.parentNode,!0);if(m&&(n||(n=new p(s),a.push(n)),n.textNodes.push(m)),a.length){for(h=0,f=a.length;h<f;++h)a[h].doMerge();t.setStart(l,d),t.setEnd(c,u)}},getAdjacentMergeableTextNode:function(e,t){var n,i=e.nodeType==a.TEXT_NODE,o=i?e.parentNode:e,r=t?"nextSibling":"previousSibling";if(i){if((n=e[r])&&n.nodeType==a.TEXT_NODE)return n}else if((n=o[r])&&this.areElementsMergeable(e,n))return n[t?"firstChild":"lastChild"];return null},areElementsMergeable:function(e,t){return r.dom.arrayContains(this.tagNames,(e.tagName||"").toLowerCase())&&r.dom.arrayContains(this.tagNames,(t.tagName||"").toLowerCase())&&s(e,t)&&c(e,t)},createContainer:function(e){var t=e.createElement(this.tagNames[0]);return this.cssClass&&(t.className=this.cssClass),t},applyToTextNode:function(e){var t=e.parentNode;if(1==t.childNodes.length&&r.dom.arrayContains(this.tagNames,t.tagName.toLowerCase()))this.cssClass&&i(t,this.cssClass,this.similarClassRegExp);else{var n=this.createContainer(r.dom.getDocument(e));e.parentNode.insertBefore(n,e),n.appendChild(e)}},isRemovable:function(e){return r.dom.arrayContains(this.tagNames,e.tagName.toLowerCase())&&a.lang.string(e.className).trim()==this.cssClass},undoToTextNode:function(e,t,n){if(!t.containsNode(n)){var i=t.cloneRange();i.selectNode(n),i.isPointInRange(t.endContainer,t.endOffset)&&d(t.endContainer,t.endOffset)&&(u(n,t.endContainer,t.endOffset),t.setEndAfter(n)),i.isPointInRange(t.startContainer,t.startOffset)&&d(t.startContainer,t.startOffset)&&(n=u(n,t.startContainer,t.startOffset))}this.similarClassRegExp&&o(n,this.similarClassRegExp),this.isRemovable(n)&&l(n)},applyToRange:function(e){var t=e.getNodes([
a.TEXT_NODE]);if(!t.length)try{var n=this.createContainer(e.endContainer.ownerDocument);return e.surroundContents(n),void this.selectNode(e,n)}catch(s){}if(e.splitBoundaries(),(t=e.getNodes([a.TEXT_NODE])).length){for(var i,o=0,r=t.length;o<r;++o)i=t[o],this.getAncestorWithClass(i)||this.applyToTextNode(i);e.setStart(t[0],0),i=t[t.length-1],e.setEnd(i,i.length),this.normalize&&this.postApply(t,e)}},undoToRange:function(e){var t,n,i=e.getNodes([a.TEXT_NODE]);if(i.length)e.splitBoundaries(),i=e.getNodes([a.TEXT_NODE]);else{var o=e.endContainer.ownerDocument.createTextNode(a.INVISIBLE_SPACE);e.insertNode(o),e.selectNode(o),i=[o]}for(var r=0,s=i.length;r<s;++r)t=i[r],(n=this.getAncestorWithClass(t))&&this.undoToTextNode(t,e,n);1==s?this.selectNode(e,i[0]):(e.setStart(i[0],0),t=i[i.length-1],e.setEnd(t,t.length),this.normalize&&this.postApply(i,e))},selectNode:function(e,t){var n=t.nodeType===a.ELEMENT_NODE,i=!("canHaveHTML"in t)||t.canHaveHTML,o=n?t.innerHTML:t.data,r=""===o||o===a.INVISIBLE_SPACE;if(r&&n&&i)try{t.innerHTML=a.INVISIBLE_SPACE}catch(s){}e.selectNodeContents(t),r&&n?e.collapse(!1):r&&(e.setStartAfter(t),e.setEndAfter(t))},getTextSelectedByRange:function(e,t){var n=t.cloneRange();n.selectNodeContents(e);var i=n.intersection(t),o=i?i.toString():"";return n.detach(),o},isAppliedToRange:function(e){var t,n=[],i=e.getNodes([a.TEXT_NODE]);if(!i.length)return!!(t=this.getAncestorWithClass(e.startContainer))&&[t];for(var o,r=0,s=i.length;r<s;++r){if(o=this.getTextSelectedByRange(i[r],e),t=this.getAncestorWithClass(i[r]),""!=o&&!t)return!1;n.push(t)}return n},toggleRange:function(e){this.isAppliedToRange(e)?this.undoToRange(e):this.applyToRange(e)}},a.selection.HTMLApplier=e}(wysihtml5,rangy),wysihtml5.Commands=Base.extend({constructor:function(e){this.editor=e,this.composer=e.composer,this.doc=this.composer.doc},support:function(e){return wysihtml5.browser.supportsCommand(this.doc,e)},exec:function(e,t){var n=wysihtml5.commands[e],i=wysihtml5.lang.array(arguments).get(),o=n&&n.exec,r=null;if(this.editor.fire("beforecommand:composer"),o)i.unshift(this.composer),r=o.apply(n,i);else try{r=this.doc.execCommand(e,!1,t)}catch(s){}return this.editor.fire("aftercommand:composer"),r},state:function(e,t){var n=wysihtml5.commands[e],i=wysihtml5.lang.array(arguments).get(),o=n&&n.state;if(o)return i.unshift(this.composer),o.apply(n,i);try{return this.doc.queryCommandState(e)}catch(r){return!1}},value:function(e){var t=wysihtml5.commands[e],n=t&&t.value;if(n)return n.call(t,this.composer,e);try{return this.doc.queryCommandValue(e)}catch(i){return null}}}),function(n){var e;n.commands.bold={exec:function(e,t){return n.commands.formatInline.exec(e,t,"b")},state:function(e,t){return n.commands.formatInline.state(e,t,"b")},value:function(){return e}}}(wysihtml5),function(p){function o(e,t){for(var n,i,o=t.length,r=0;r<o;r++)n=t[r],i=T.getParentElement(n,{nodeName:"code"}),T.getTextContent(n).match(T.autoLink.URL_REG_EXP)&&!i?i=T.renameElement(n,"code"):T.replaceWithChildNodes(n)}function r(e,t){var n,i,o,r,s,a,l,c,d,u=e.doc,h="_wysihtml5-temp-"+ +new Date,f=/non-matching-class/g,m=0;for(p.commands.formatInline.exec(e,g,E,h,f),n=(i=u.querySelectorAll(E+"."+h)).length;m<n;m++)for(d in(o=i[m]).removeAttribute("class"),t)o.setAttribute(d,t[d]);a=o,1===n&&(l=T.getTextContent(o),r=!!o.querySelector("*"),s=""===l||l===p.INVISIBLE_SPACE,!r&&s&&(T.setTextContent(o,t.text||o.href),c=u.createTextNode(" "),e.selection.setAfter(o),e.selection.insertNode(c),a=c)),e.selection.setAfter(a)}var g,E="A",T=p.dom;p.commands.createLink={exec:function(e,t,n){var i=this.state(e,t);i?e.selection.executeAndRestore(function(){o(e,i)}):r(e,n="object"==typeof n?n:{href:n})},state:function(e,t){return p.commands.formatInline.state(e,t,"A")},value:function(){return g}}}(wysihtml5),function(i){var e,o=/wysiwyg-font-size-[a-z\-]+/g;i.commands.fontSize={exec:function(e,t,n){return i.commands.formatInline.exec(e,t,"span","wysiwyg-font-size-"+n,o)},state:function(e,t,n){return i.commands.formatInline.state(e,t,"span","wysiwyg-font-size-"+n,o)},value:function(){return e}}}(wysihtml5),function(i){var e,o=/wysiwyg-color-[a-z]+/g;i.commands.foreColor={exec:function(e,t,n){return i.commands.formatInline.exec(e,t,"span","wysiwyg-color-"+n,o)},state:function(e,t,n){return i.commands.formatInline.state(e,t,"span","wysiwyg-color-"+n,o)},value:function(){return e}}}(wysihtml5),function(l){function c(e,t,n){e.className?(d(e,n),e.className+=" "+t):e.className=t}function d(e,t){e.className=e.className.replace(t,"")}function n(e){return e.nodeType===l.TEXT_NODE&&!l.lang.string(e.data).trim()}function o(e){for(var t=e.previousSibling;t&&n(t);)t=t.previousSibling;return t}function r(e){for(var t=e.nextSibling;t&&n(t);)t=t.nextSibling;return t}function u(e){var t=e.ownerDocument,n=r(e),i=o(e);n&&!h(n)&&e.parentNode.insertBefore(t.createElement("br"),n),i&&!h(i)&&e.parentNode.insertBefore(t.createElement("br"),e)}function i(e){var t=r(e),n=o(e);t&&a(t)&&t.parentNode.removeChild(t),n&&a(n)&&n.parentNode.removeChild(n)}function s(e){var t=e.lastChild;t&&a(t)&&t.parentNode.removeChild(t)}function a(e){return"BR"===e.nodeName}function h(e){return!!a(e)||"block"===g.getStyle("display").from(e)}function f(e,t,n,i){if(i)var o=g.observe(e,"DOMNodeInserted",function(e){var t=e.target;t.nodeType===l.ELEMENT_NODE&&"inline"!==g.getStyle("display").from(t).substr(0,6)&&(t.className+=" "+i)});e.execCommand(t,!1,n),o&&o.stop()}function m(e,t){e.selection.selectLine(),e.selection.surround(t),i(t),s(t),e.selection.selectNode(t)}function p(e){return!!l.lang.string(e.className).trim()}var e,g=l.dom,E="DIV",T=["H1","H2","H3","H4","H5","H6","P","BLOCKQUOTE",E];l.commands.formatBlock={exec:function(e,t,n,i,o){var r,s=e.doc,a=this.state(e,t,n,i,o);n="string"==typeof n?n.toUpperCase():n,a?e.selection.executeAndRestoreSimple(function(){o&&d(a,o);var e=p(a);e||a.nodeName!==(n||E)?e&&g.renameElement(a,E):(u(a),g.replaceWithChildNodes(a))}):(null===n||l.lang.array(T).contains(n))&&(r=e.selection.getSelectedNode(),a=g.getParentElement(r,{nodeName:T}))?e.selection.executeAndRestoreSimple(function(){n&&(a=g.renameElement(a,n)),i&&c(a,i,o)}):e.commands.support(t)?f(s,t,n||E,i):(a=s.createElement(n||E),i&&(a.className=i),m(e,a))},state:function(e,t,n,i,o){n="string"==typeof n?n.toUpperCase():n;var r=e.selection.getSelectedNode();return g.getParentElement(r,{nodeName:n,className:i,classRegExp:o})},value:function(){return e}}}(wysihtml5),function(l){function o(e){var t=d[e];return t?[e.toLowerCase(),t.toLowerCase()]:[e.toLowerCase()]}function c(e,t,n){var i=e+":"+t;return r[i]||(r[i]=new l.selection.HTMLApplier(o(e),t,n,!0)),r[i]}var e,d={strong:"b",em:"i",b:"strong",i:"em"},r={};l.commands.formatInline={exec:function(e,t,n,i,o){var r=e.selection.getRange();if(!r)return!1;c(n,i,o).toggleRange(r),e.selection.setSelection(r)},state:function(e,t,n,i,o){var r,s=e.doc,a=d[n]||n;return!(!l.dom.hasElementWithTagName(s,n)&&!l.dom.hasElementWithTagName(s,a))&&(!(i&&!l.dom.hasElementWithClassName(s,i))&&(!!(r=e.selection.getRange())&&c(n,i,o).isAppliedToRange(r)))},value:function(){return e}}}(wysihtml5),function(){var e;wysihtml5.commands.insertHTML={exec:function(e,t,n){e.commands.support(t)?e.doc.execCommand(t,!1,n):e.selection.insertHTML(n)},state:function(){return!1},value:function(){return e}}}(),function(l){var c="IMG";l.commands.insertImage={exec:function(e,t,n){n="object"==typeof n?n:{src:n};var i,o,r,s=e.doc,a=this.state(e);if(a)return e.selection.setBefore(a),(r=a.parentNode).removeChild(a),l.dom.removeEmptyTextNodes(r),"A"!==r.nodeName||r.firstChild||(e.selection.setAfter(r),r.parentNode.removeChild(r)),void l.quirks.redraw(e.element);for(o in a=s.createElement(c),n)a[o]=n[o];e.selection.insertNode(a),l.browser.hasProblemsSettingCaretAfterImg()?(i=s.createTextNode(l.INVISIBLE_SPACE),e.selection.insertNode(i),e.selection.setAfter(i)):e.selection.setAfter(a)},state:function(e){var t,n,i,o=e.doc;return!!l.dom.hasElementWithTagName(o,c)&&(!!(t=e.selection.getSelectedNode())&&(t.nodeName===c?t:t.nodeType===l.ELEMENT_NODE&&(n=e.selection.getText(),!(n=l.lang.string(n).trim())&&(1===(i=e.selection.getNodes(l.ELEMENT_NODE,function(e){return"IMG"===e.nodeName})).length&&i[0]))))},value:function(e){var t=this.state(e);return t&&t.src}}}(wysihtml5),function(n){var e,i="<br>"+(n.browser.needsSpaceAfterLineBreak()?" ":"");n.commands.insertLineBreak={exec:function(e,t){e.commands.support(t)?(e.doc.execCommand(t,!1,null),n.browser.autoScrollsToCaret()||e.selection.scrollIntoView()):e.commands.exec("insertHTML",i)},state:function(){return!1},value:function(){return e}}}(wysihtml5),function(c){var e;c.commands.insertOrderedList={exec:function(e,t){var n,i,o=e.doc,r=e.selection.getSelectedNode(),s=c.dom.getParentElement(r,{nodeName:"OL"}),a=c.dom.getParentElement(r,{nodeName:"UL"}),l="_wysihtml5-temp-"+(new Date).getTime();e.commands.support(t)?o.execCommand(t,!1,null):s?e.selection.executeAndRestoreSimple(function(){c.dom.resolveList(s)}):a?e.selection.executeAndRestoreSimple(function(){c.dom.renameElement(a,"ol")}):(e.commands.exec("formatBlock","div",l),n=""===(i=o.querySelector("."+l)).innerHTML||i.innerHTML===c.INVISIBLE_SPACE,e.selection.executeAndRestoreSimple(function(){s=c.dom.convertToList(i,"ol")}),n&&e.selection.selectNode(s.querySelector("li")))},state:function(e){var t=e.selection.getSelectedNode();return c.dom.getParentElement(t,{nodeName:"OL"})},value:function(){return e}}}(wysihtml5),function(c){var e;c.commands.insertUnorderedList={exec:function(e,t){var n,i,o=e.doc,r=e.selection.getSelectedNode(),s=c.dom.getParentElement(r,{nodeName:"UL"}),a=c.dom.getParentElement(r,{nodeName:"OL"}),l="_wysihtml5-temp-"+(new Date).getTime();e.commands.support(t)?o.execCommand(t,!1,null):s?e.selection.executeAndRestoreSimple(function(){c.dom.resolveList(s)}):a?e.selection.executeAndRestoreSimple(function(){c.dom.renameElement(a,"ul")}):(e.commands.exec("formatBlock","div",l),n=""===(i=o.querySelector("."+l)).innerHTML||i.innerHTML===c.INVISIBLE_SPACE,e.selection.executeAndRestoreSimple(function(){s=c.dom.convertToList(i,"ul")}),n&&e.selection.selectNode(s.querySelector("li")))},state:function(e){var t=e.selection.getSelectedNode();return c.dom.getParentElement(t,{nodeName:"UL"})},value:function(){return e}}}(wysihtml5),function(n){var e;n.commands.italic={exec:function(e,t){return n.commands.formatInline.exec(e,t,"i")},state:function(e,t){return n.commands.formatInline.state(e,t,"i")},value:function(){return e}}}(wysihtml5),function(t){var e,n="wysiwyg-text-align-center",i=/wysiwyg-text-align-[a-z]+/g;t.commands.justifyCenter={exec:function(e){return t.commands.formatBlock.exec(e,"formatBlock",null,n,i)},state:function(e){return t.commands.formatBlock.state(e,"formatBlock",null,n,i)},value:function(){return e}}}(wysihtml5),function(t){var e,n="wysiwyg-text-align-left",i=/wysiwyg-text-align-[a-z]+/g;t.commands.justifyLeft={exec:function(e){return t.commands.formatBlock.exec(e,"formatBlock",null,n,i)},state:function(e){return t.commands.formatBlock.state(e,"formatBlock",null,n,i)},value:function(){return e}}}(wysihtml5),function(t){var e,n="wysiwyg-text-align-right",i=/wysiwyg-text-align-[a-z]+/g;t.commands.justifyRight={exec:function(e){return t.commands.formatBlock.exec(e,"formatBlock",null,n,i)},state:function(e){return t.commands.formatBlock.state(e,"formatBlock",null,n,i)},value:function(){return e}}}(wysihtml5),function(n){var e;n.commands.underline={exec:function(e,t){return n.commands.formatInline.exec(e,t,"u")},state:function(e,t){return n.commands.formatInline.state(e,t,"u")},value:function(){return e}}}(wysihtml5),function(s){function a(e){for(var t;t=e.querySelector("._wysihtml5-temp");)t.parentNode.removeChild(t)}var l=90,c=89,d=8,u=46,i=40,h='<span id="_wysihtml5-undo" class="_wysihtml5-temp">'+s.INVISIBLE_SPACE+"</span>",f='<span id="_wysihtml5-redo" class="_wysihtml5-temp">'+s.INVISIBLE_SPACE+"</span>",m=s.dom;s.UndoManager=s.lang.Dispatcher.extend({constructor:function(e){this.editor=e,this.composer=e.composer,this.element=this.composer.element,this.history=[this.composer.getValue()],this.position=1,this.composer.commands.support("insertHTML")&&this._observe()},_observe:function(){var n,o=this,e=this.composer.sandbox.getDocument();if(m.observe(this.element,"keydown",function(e){if(!e.altKey&&(e.ctrlKey||e.metaKey)){var t=e.keyCode,n=t===l&&!e.shiftKey,i=t===l&&e.shiftKey||t===c;n?(o.undo(),e.preventDefault()):i&&(o.redo(),e.preventDefault())}}),m.observe(this.element,"keydown",function(e){var t=e.keyCode;t!==n&&((n=t)!==d&&t!==u||o.transact())}),s.browser.hasUndoInContextMenu()){var t,i,r=function(){a(e),clearInterval(t)};m.observe(this.element,"contextmenu",function(){r(),o.composer.selection.executeAndRestoreSimple(function(){o.element.lastChild&&o.composer.selection.setAfter(o.element.lastChild),e.execCommand("insertHTML",!1,h),e.execCommand("insertHTML",!1,f),e.execCommand("undo",!1,null)}),t=setInterval(function(){e.getElementById("_wysihtml5-redo")?(r(),o.redo()):e.getElementById("_wysihtml5-undo")||(r(),o.undo())},400),i||(i=!0,m.observe(document,"mousedown",r),m.observe(e,["mousedown","paste","cut","copy"],r))})}this.editor.observe("newword:composer",function(){o.transact()}).observe("beforecommand:composer",function(){o.transact()})},transact:function(){var e=this.history[this.position-1],t=this.composer.getValue();if(t!=e){var n=this.history.length=this.position;i<n&&(this.history.shift(),this.position--),this.position++,this.history.push(t)}},undo:function(){this.transact(),this.position<=1||(this.set(this.history[--this.position-1]),this.editor.fire("undo:composer"))},redo:function(){this.position>=this.history.length||(this.set(this.history[++this.position-1]),this.editor.fire("redo:composer"))},set:function(e){this.composer.setValue(e),this.editor.focus(!0)}})}(wysihtml5),wysihtml5.views.View=Base.extend({constructor:function(e,t,n){this.parent=e,this.element=t,this.config=n,this._observeViewChange()},_observeViewChange:function(){var t=this;this.parent.observe("beforeload",function(){t.parent.observe("change_view",function(e){e===t.name?((t.parent.currentView=t).show(),setTimeout(function(){t.focus()},0)):t.hide()})})},focus:function(){if(this.element.ownerDocument.querySelector(":focus")!==this.element)try{this.element.focus()}catch(e){}},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display=""},disable:function(){this.element.setAttribute("disabled","disabled")},enable:function(){this.element.removeAttribute("disabled")}}),function(l){var c=l.dom,i=l.browser;l.views.Composer=l.views.View.extend({name:"composer",CARET_HACK:"<br>",constructor:function(e,t,n){this.base(e,t,n),this.textarea=this.parent.textarea,this._initSandbox()},clear:function(){this.element.innerHTML=i.displaysCaretInEmptyContentEditableCorrectly()?"":this.CARET_HACK},getValue:function(e){var t=this.isEmpty()?"":l.quirks.getCorrectInnerHTML(this.element);return e&&(t=this.parent.parse(t)),t=l.lang.string(t).replace(l.INVISIBLE_SPACE).by("")},setValue:function(e,t){t&&(e=this.parent.parse(e)),this.element.innerHTML=e},show:function(){this.iframe.style.display=this._displayStyle||"",this.disable(),this.enable()},hide:function(){this._displayStyle=c.getStyle("display").from(this.iframe),"none"===this._displayStyle&&(this._displayStyle=null),this.iframe.style.display="none"},disable:function(){this.element.removeAttribute("contentEditable"),this.base()},enable:function(){this.element.setAttribute("contentEditable","true"),this.base()},focus:function(e){l.browser.doesAsyncFocus()&&this.hasPlaceholderSet()&&this.clear(),this.base();var t=this.element.lastChild;e&&t&&("BR"===t.nodeName?this.selection.setBefore(this.element.lastChild):this.selection.setAfter(this.element.lastChild))},getTextContent:function(){return c.getTextContent(this.element)},hasPlaceholderSet:function(){return this.getTextContent()==this.textarea.element.getAttribute("placeholder")},isEmpty:function(){var e=this.element.innerHTML,t="blockquote, ul, ol, img, embed, object, table, iframe, svg, video, audio, button, input, select, textarea";return""===e||e===this.CARET_HACK||this.hasPlaceholderSet()||""===this.getTextContent()&&!this.element.querySelector(t)},_initSandbox:function(){var e=this;this.sandbox=new c.Sandbox(function(){e._create()},{stylesheets:this.config.stylesheets}),this.iframe=this.sandbox.getIframe();var t=document.createElement("input");t.type="hidden",t.name="_wysihtml5_mode",t.value=1;var n=this.textarea.element;c.insert(this.iframe).after(n),c.insert(t).after(n)},_create:function(){var e=this;this.doc=this.sandbox.getDocument(),this.element=this.doc.body,this.textarea=this.parent.textarea,this.element.innerHTML=this.textarea.getValue(!0),this.enable(),this.selection=new l.Selection(this.parent),this.commands=new l.Commands(this.parent),c.copyAttributes(["className","spellcheck","title","lang","dir","accessKey"]).from(this.textarea.element).to(this.element),c.addClass(this.element,this.config.composerClassName),this.config.style&&this.style(),this.observe();var t=this.config.name;t&&(c.addClass(this.element,t),c.addClass(this.iframe,t));var n="string"==typeof this.config.placeholder?this.config.placeholder:this.textarea.element.getAttribute("placeholder");n&&c.simulatePlaceholder(this.parent,this,n),this.commands.exec("styleWithCSS",!1),this._initAutoLinking(),this._initObjectResizing(),this._initUndoManager(),(this.textarea.element.hasAttribute("autofocus")||document.querySelector(":focus")==this.textarea.element)&&setTimeout(function(){e.focus()},100),l.quirks.insertLineBreakOnReturn(this),i.clearsContentEditableCorrectly()||l.quirks.ensureProperClearing(this),i.clearsListsInContentEditableCorrectly()||l.quirks.ensureProperClearingOfLists(this),this.initSync&&this.config.sync&&this.initSync(),this.textarea.hide(),this.parent.fire("beforeload").fire("load")},_initAutoLinking:function(){var o=this,e=i.canDisableAutoLinking(),t=i.doesAutoLinkingInContentEditable();if(e&&this.commands.exec("autoUrlDetect",!1),this.config.autoLink){(!t||t&&e)&&this.parent.observe("newword:composer",function(){o.selection.executeAndRestore(function(e,t){c.autoLink(t.parentNode)})});var r=this.sandbox.getDocument().getElementsByTagName("a"),s=c.autoLink.URL_REG_EXP,a=function(e){var t=l.lang.string(c.getTextContent(e)).trim();return"www."===t.substr(0,4)&&(t="http://"+t),t};c.observe(this.element,"keydown",function(e){if(r.length){var t,n=o.selection.getSelectedNode(e.target.ownerDocument),i=c.getParentElement(n,{nodeName:"A"},4);i&&(t=a(i),setTimeout(function(){var e=a(i);e!==t&&e.match(s)&&i.setAttribute("href",e)},0))}})}},_initObjectResizing:function(){var r=["width","height"],s=r.length,a=this.element;this.commands.exec("enableObjectResizing",this.config.allowObjectResizing),this.config.allowObjectResizing?i.supportsEvent("resizeend")&&c.observe(a,"resizeend",function(e){for(var t,n=e.target||e.srcElement,i=n.style,o=0;o<s;o++)i[t=r[o]]&&(n.setAttribute(t,parseInt(i[t],10)),i[t]="");l.quirks.redraw(a)}):i.supportsEvent("resizestart")&&c.observe(a,"resizestart",function(e){e.preventDefault()})},_initUndoManager:function(){new l.UndoManager(this.parent)}})}(wysihtml5),function(a){var l=a.dom,c=document,d=window,u=c.createElement("div"),h=["background-color","color","cursor","font-family","font-size","font-style","font-variant","font-weight","line-height","letter-spacing","text-align","text-decoration","text-indent","text-rendering","word-break","word-wrap","word-spacing"],f=["background-color","border-collapse","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-top-color","border-top-style","border-top-width","clear","display","float","margin-bottom","margin-left","margin-right","margin-top","outline-color","outline-offset","outline-width","outline-style","padding-left","padding-right","padding-top","padding-bottom","position","top","left","right","bottom","z-index","vertical-align","text-align","-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing","-webkit-box-shadow","-moz-box-shadow","-ms-box-shadow","box-shadow","-webkit-border-top-right-radius","-moz-border-radius-topright","border-top-right-radius","-webkit-border-bottom-right-radius","-moz-border-radius-bottomright","border-bottom-right-radius","-webkit-border-bottom-left-radius","-moz-border-radius-bottomleft","border-bottom-left-radius","-webkit-border-top-left-radius","-moz-border-radius-topleft","border-top-left-radius","width","height"],m=["width","height","top","left","right","bottom"],p=["html             { height: 100%; }","body             { min-height: 100%; padding: 0; margin: 0; margin-top: -1px; padding-top: 1px; }","._wysihtml5-temp { display: none; }",a.browser.isGecko?"body.placeholder { color: graytext !important; }":"body.placeholder { color: #a9a9a9 !important; }","body[disabled]   { background-color: #eee !important; color: #999 !important; cursor: default !important; }","img:-moz-broken  { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"],g=function(e){if(e.setActive)try{e.setActive()}catch(r){}else{var t=e.style,n=c.documentElement.scrollTop||c.body.scrollTop,i=c.documentElement.scrollLeft||c.body.scrollLeft,o={position:t.position,top:t.top,left:t.left,WebkitUserSelect:t.WebkitUserSelect};l.setStyles({position:"absolute",top:"-99999px",left:"-99999px",WebkitUserSelect:"none"}).on(e),e.focus(),l.setStyles(o).on(e),d.scrollTo&&d.scrollTo(i,n)}};a.views.Composer.prototype.style=function(){var n=this,e=c.querySelector(":focus"),i=this.textarea.element,t=i.hasAttribute("placeholder"),o=t&&i.getAttribute("placeholder");this.focusStylesHost=this.focusStylesHost||u.cloneNode(!1),this.blurStylesHost=this.blurStylesHost||u.cloneNode(!1),t&&i.removeAttribute("placeholder"),i===e&&i.blur(),l.copyStyles(f).from(i).to(this.iframe).andTo(this.blurStylesHost),l.copyStyles(h).from(i).to(this.element).andTo(this.blurStylesHost),l.insertCSS(p).into(this.element.ownerDocument),g(i),l.copyStyles(f).from(i).to(this.focusStylesHost),l.copyStyles(h).from(i).to(this.focusStylesHost);var r=a.lang.array(f).without(["display"]);if(e?e.focus():i.blur(),t&&i.setAttribute("placeholder",o),!a.browser.hasCurrentStyleProperty())var s=l.observe(d,"resize",function(){if(l.contains(document.documentElement,n.iframe)){var e=l.getStyle("display").from(i),t=l.getStyle("display").from(n.iframe);i.style.display="",n.iframe.style.display="none",l.copyStyles(m).from(i).to(n.iframe).andTo(n.focusStylesHost).andTo(n.blurStylesHost),n.iframe.style.display=t,i.style.display=e}else s.stop()});return this.parent.observe("focus:composer",function(){l.copyStyles(r).from(n.focusStylesHost).to(n.iframe),l.copyStyles(h).from(n.focusStylesHost).to(n.element)}),this.parent.observe("blur:composer",function(){l.copyStyles(r).from(n.blurStylesHost).to(n.iframe),l.copyStyles(h).from(n.blurStylesHost).to(n.element)}),this}}(wysihtml5),function(l){var c=l.dom,d=l.browser,u={66:"bold",73:"italic",85:"underline"};l.views.Composer.prototype.observe=function(){var o=this,e=this.getValue(),t=this.sandbox.getIframe(),r=this.element,n=d.supportsEventsInIframeCorrectly()?r:this.sandbox.getWindow(),i=d.supportsEvent("drop")?["drop","paste"]:["dragdrop","paste"];c.observe(t,"DOMNodeRemoved",function(){clearInterval(s),o.parent.fire("destroy:composer")});var s=setInterval(function(){c.contains(document.documentElement,t)||(clearInterval(s),o.parent.fire("destroy:composer"))},250);c.observe(n,"focus",function(){o.parent.fire("focus").fire("focus:composer"),setTimeout(function(){e=o.getValue()},0)}),c.observe(n,"blur",function(){e!==o.getValue()&&o.parent.fire("change").fire("change:composer"),o.parent.fire("blur").fire("blur:composer")}),l.browser.isIos()&&c.observe(r,"blur",function(){var e=r.ownerDocument.createElement("input"),t=document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.scrollLeft||document.body.scrollLeft;try{o.selection.insertNode(e)}catch(i){r.appendChild(e)}e.focus(),e.parentNode.removeChild(e),window.scrollTo(n,t)}),c.observe(r,"dragenter",function(){o.parent.fire("unset_placeholder")}),d.firesOnDropOnlyWhenOnDragOverIsCancelled()&&c.observe(r,["dragover","dragenter"],function(e){e.preventDefault()}),c.observe(r,i,function(e){var t,n=e.dataTransfer;console.log("PASTED",e),n&&d.supportsDataTransfer()&&(t=n.getData("text/html")||n.getData("text/plain")),t?(r.focus(),o.commands.exec("insertHTML",t),o.parent.fire("paste").fire("paste:composer"),e.stopPropagation(),e.preventDefault()):setTimeout(function(){o.parent.fire("paste").fire("paste:composer")},0)}),c.observe(r,"keyup",function(e){var t=e.keyCode;t!==l.SPACE_KEY&&t!==l.ENTER_KEY||o.parent.fire("newword:composer")}),this.parent.observe("paste:composer",function(){setTimeout(function(){o.parent.fire("newword:composer")},0)}),d.canSelectImagesInContentEditable()||c.observe(r,"mousedown",function(e){var t=e.target;"IMG"===t.nodeName&&(o.selection.selectNode(t),e.preventDefault())}),c.observe(r,"keydown",function(e){var t=e.keyCode,n=u[t];(e.ctrlKey||e.metaKey)&&!e.altKey&&n&&(o.commands.exec(n),e.preventDefault())}),c.observe(r,"keydown",function(e){var t,n=o.selection.getSelectedNode(!0),i=e.keyCode;!n||"IMG"!==n.nodeName||i!==l.BACKSPACE_KEY&&i!==l.DELETE_KEY||((t=n.parentNode).removeChild(n),"A"!==t.nodeName||t.firstChild||t.parentNode.removeChild(t),setTimeout(function(){l.quirks.redraw(r)},0),e.preventDefault())});var a={IMG:"Image: ",A:"Link: "};c.observe(r,"mouseover",function(e){var t,n=e.target,i=n.nodeName;"A"!==i&&"IMG"!==i||(n.hasAttribute("title")||(t=a[i]+(n.getAttribute("href")||n.getAttribute("src")),n.setAttribute("title",t)))})}}(wysihtml5),function(r){var s=400;r.views.Synchronizer=Base.extend({constructor:function(e,t,n){this.editor=e,this.textarea=t,this.composer=n,this._observe()},fromComposerToTextarea:function(e){this.textarea.setValue(r.lang.string(this.composer.getValue()).trim(),e)},fromTextareaToComposer:function(e){var t=this.textarea.getValue();t?this.composer.setValue(t,e):(this.composer.clear(),this.editor.fire("set_placeholder"))},sync:function(e){"textarea"===this.editor.currentView.name?this.fromTextareaToComposer(e):this.fromComposerToTextarea(e)},_observe:function(){var t,n=this,e=this.textarea.element.form,i=function(){t=setInterval(function(){n.fromComposerToTextarea()},s)},o=function(){clearInterval(t),t=null};i(),e&&(r.dom.observe(e,"submit",function(){n.sync(!0)}),r.dom.observe(e,"reset",function(){setTimeout(function(){n.fromTextareaToComposer()},0)})),this.editor.observe("change_view",function(e){"composer"!==e||t?"textarea"===e&&(n.fromComposerToTextarea(!0),o()):(n.fromTextareaToComposer(!0),i())}),this.editor.observe("destroy:composer",o)}})}(wysihtml5),wysihtml5.views.Textarea=wysihtml5.views.View.extend({name:"textarea",constructor:function(e,t,n){this.base(e,t,n),this._observe()},clear:function(){this.element.value=""},getValue:function(e){var t=this.isEmpty()?"":this.element.value;return e&&(t=this.parent.parse(t)),t},setValue:function(e,t){t&&(e=this.parent.parse(e)),this.element.value=e},hasPlaceholderSet:function(){var e=wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),t=this.element.getAttribute("placeholder")||null,n=this.element.value;return e&&!n||n===t},isEmpty:function(){return!wysihtml5.lang.string(this.element.value).trim()||this.hasPlaceholderSet()},_observe:function(){var e=this.element,n=this.parent,i={focusin:"focus",focusout:"blur"},t=wysihtml5.browser.supportsEvent("focusin")?["focusin","focusout","change"]:["focus","blur","change"];n.observe("beforeload",function(){wysihtml5.dom.observe(e,t,function(e){var t=i[e.type]||e.type;n.fire(t).fire(t+":textarea")}),wysihtml5.dom.observe(e,["paste","drop"],function(){setTimeout(function(){n.fire("paste").fire("paste:textarea")},0)})})}}),function(s){var a=s.dom,l="wysihtml5-command-dialog-opened",c="input, select, textarea",d="[data-wysihtml5-dialog-field]",u="data-wysihtml5-dialog-field";s.toolbar.Dialog=s.lang.Dispatcher.extend({constructor:function(e,t){this.link=e,this.container=t},_observe:function(){if(!this._observed){var n=this,i=function(e){var t=n._serialize();t==n.elementToChange?n.fire("edit",t):n.fire("save",t),n.hide(),e.preventDefault(),e.stopPropagation()};a.observe(n.link,"click",function(){a.hasClass(n.link,l)&&setTimeout(function(){n.hide()},0)}),a.observe(this.container,"keydown",function(e){var t=e.keyCode;t===s.ENTER_KEY&&i(e),t===s.ESCAPE_KEY&&n.hide()}),a.delegate(this.container,"[data-wysihtml5-dialog-action=save]","click",i),a.delegate(this.container,"[data-wysihtml5-dialog-action=cancel]","click",function(e){n.fire("cancel"),n.hide(),e.preventDefault(),e.stopPropagation()});for(var e=this.container.querySelectorAll(c),t=0,o=e.length,r=function(){clearInterval(n.interval)};t<o;t++)a.observe(e[t],"change",r);this._observed=!0}},_serialize:function(){for(var e=this.elementToChange||{},t=this.container.querySelectorAll(d),n=t.length,i=0;i<n;i++)e[t[i].getAttribute(u)]=t[i].value;return e},_interpolate:function(e){for(var t,n,i,o=document.querySelector(":focus"),r=this.container.querySelectorAll(d),s=r.length,a=0;a<s;a++)(t=r[a])!==o&&(e&&"hidden"===t.type||(n=t.getAttribute(u),i=this.elementToChange?this.elementToChange[n]||"":t.defaultValue,t.value=i))},show:function(e){var t=this,n=this.container.querySelector(c);if(this.elementToChange=e,this._observe(),this._interpolate(),e&&(this.interval=setInterval(function(){t._interpolate(!0)},500)),a.addClass(this.link,l),this.container.style.display="",this.fire("show"),n&&!e)try{n.focus()}catch(i){}},hide:function(){clearInterval(this.interval),this.elementToChange=null,a.removeClass(this.link,l),this.container.style.display="none",this.fire("hide")}})}(wysihtml5),function(r){var s=r.dom,a={position:"relative"},l={left:0,margin:0,opacity:0,overflow:"hidden",padding:0,position:"absolute",top:0,zIndex:1},c={cursor:"inherit",fontSize:"50px",height:"50px",marginTop:"-25px",outline:0,padding:0,position:"absolute",right:"-4px",top:"50%"},d={"x-webkit-speech":"",speech:""};r.toolbar.Speech=function(e,t){var n=document.createElement("input");if(r.browser.supportsSpeechApiOn(n)){var i=document.createElement("div");r.lang.object(l).merge({width:t.offsetWidth+"px",height:t.offsetHeight+"px"}),s.insert(n).into(i),s.insert(i).into(t),s.setStyles(c).on(n),s.setAttributes(d).on(n),s.setStyles(l).on(i),s.setStyles(a).on(t);var o="onwebkitspeechchange"in n?"webkitspeechchange":"speechchange";s.observe(n,o,function(){e.execCommand("insertText",n.value),n.value=""}),s.observe(n,"click",function(e){s.hasClass(t,"wysihtml5-command-disabled")&&e.preventDefault(),e.stopPropagation()})}else t.style.display="none"}}(wysihtml5),function(d){var s="wysihtml5-command-disabled",a="wysihtml5-commands-disabled",l="wysihtml5-command-active",c="wysihtml5-action-active",u=d.dom;d.toolbar.Toolbar=Base.extend({constructor:function(e,t){this.editor=e,this.container="string"==typeof t?document.getElementById(t):t,this.composer=e.composer,this._getLinks("command"),this._getLinks("action"),this._observe(),this.show();for(var n=this.container.querySelectorAll("[data-wysihtml5-command=insertSpeech]"),i=n.length,o=0;o<i;o++)new d.toolbar.Speech(this,n[o])},_getLinks:function(e){for(var t,n,i,o,r,s=this[e+"Links"]=d.lang.array(this.container.querySelectorAll("[data-wysihtml5-"+e+"]")).get(),a=s.length,l=0,c=this[e+"Mapping"]={};l<a;l++)i=(t=s[l]).getAttribute("data-wysihtml5-"+e),o=t.getAttribute("data-wysihtml5-"+e+"-value"),n=this.container.querySelector("[data-wysihtml5-"+e+"-group='"+i+"']"),r=this._getDialog(t,i),c[i+":"+o]={link:t,group:n,name:i,value:o,dialog:r,state:!1}},_getDialog:function(t,n){var e,i,o=this,r=this.container.querySelector("[data-wysihtml5-dialog='"+n+"']");return r&&((e=new d.toolbar.Dialog(t,r)).observe("show",function(){i=o.composer.selection.getBookmark(),o.editor.fire("show:dialog",{command:n,dialogContainer:r,commandLink:t})}),e.observe("save",function(e){i&&o.composer.selection.setBookmark(i),o._execCommand(n,e),o.editor.fire("save:dialog",{command:n,dialogContainer:r,commandLink:t})}),e.observe("cancel",function(){o.editor.focus(!1),o.editor.fire("cancel:dialog",{command:n,dialogContainer:r,commandLink:t})})),e},execCommand:function(e,t){if(!this.commandsDisabled){var n=this.commandMapping[e+":"+t];n&&n.dialog&&!n.state?n.dialog.show():this._execCommand(e,t)}},_execCommand:function(e,t){this.editor.focus(!1),this.composer.commands.exec(e,t),this._updateLinkStates()},execAction:function(e){var t=this.editor;switch(e){case"change_view":t.currentView===t.textarea?t.fire("change_view",
"composer"):t.fire("change_view","textarea")}},_observe:function(){for(var o=this,e=this.editor,t=this.container,n=this.commandLinks.concat(this.actionLinks),i=n.length,r=0;r<i;r++)u.setAttributes({href:"javascript:;",unselectable:"on"}).on(n[r]);u.delegate(t,"[data-wysihtml5-command]","mousedown",function(e){e.preventDefault()}),u.delegate(t,"[data-wysihtml5-command]","click",function(e){var t=this,n=t.getAttribute("data-wysihtml5-command"),i=t.getAttribute("data-wysihtml5-command-value");o.execCommand(n,i),e.preventDefault()}),u.delegate(t,"[data-wysihtml5-action]","click",function(e){var t=this.getAttribute("data-wysihtml5-action");o.execAction(t),e.preventDefault()}),e.observe("focus:composer",function(){o.bookmark=null,clearInterval(o.interval),o.interval=setInterval(function(){o._updateLinkStates()},500)}),e.observe("blur:composer",function(){clearInterval(o.interval)}),e.observe("destroy:composer",function(){clearInterval(o.interval)}),e.observe("change_view",function(e){setTimeout(function(){o.commandsDisabled="composer"!==e,o._updateLinkStates(),o.commandsDisabled?u.addClass(t,a):u.removeClass(t,a)},0)})},_updateLinkStates:function(){this.composer.element;var e,t,n,i,o=this.commandMapping,r=this.actionMapping;for(e in o)i=o[e],this.commandsDisabled?(t=!1,u.removeClass(i.link,l),i.group&&u.removeClass(i.group,l),i.dialog&&i.dialog.hide()):(t=this.composer.commands.state(i.name,i.value),d.lang.object(t).isArray()&&(t=1!==t.length||t[0]),u.removeClass(i.link,s),i.group&&u.removeClass(i.group,s)),i.state!==t&&((i.state=t)?(u.addClass(i.link,l),i.group&&u.addClass(i.group,l),i.dialog&&("object"==typeof t?i.dialog.show(t):i.dialog.hide())):(u.removeClass(i.link,l),i.group&&u.removeClass(i.group,l),i.dialog&&i.dialog.hide()));for(e in r)"change_view"===(n=r[e]).name&&(n.state=this.editor.currentView===this.editor.textarea,n.state?u.addClass(n.link,c):u.removeClass(n.link,c))},show:function(){this.container.style.display=""},hide:function(){this.container.style.display="none"}})}(wysihtml5),function(i){var e,o={name:e,style:!0,toolbar:e,autoLink:!0,parserRules:{tags:{br:{},span:{},div:{},p:{}},classes:{}},parser:i.dom.parse,composerClassName:"wysihtml5-editor",bodyClassName:"wysihtml5-supported",stylesheets:[],placeholderText:e,allowObjectResizing:!0,supportTouchDevices:!0};i.Editor=i.lang.Dispatcher.extend({constructor:function(e,t){if(this.textareaElement="string"==typeof e?document.getElementById(e):e,this.config=i.lang.object({}).merge(o).merge(t).get(),this.textarea=new i.views.Textarea(this,this.textareaElement,this.config),this.currentView=this.textarea,this._isCompatible=i.browser.supported(),!this._isCompatible||!this.config.supportTouchDevices&&i.browser.isTouchDevice()){var n=this;setTimeout(function(){n.fire("beforeload").fire("load")},0)}else i.dom.addClass(document.body,this.config.bodyClassName),this.composer=new i.views.Composer(this,this.textareaElement,this.config),this.currentView=this.composer,"function"==typeof this.config.parser&&this._initParser(),this.observe("beforeload",function(){this.synchronizer=new i.views.Synchronizer(this,this.textarea,this.composer),this.config.toolbar&&(this.toolbar=new i.toolbar.Toolbar(this,this.config.toolbar))})},isCompatible:function(){return this._isCompatible},clear:function(){return this.currentView.clear(),this},getValue:function(e){return this.currentView.getValue(e)},setValue:function(e,t){return e?(this.currentView.setValue(e,t),this):this.clear()},focus:function(e){return this.currentView.focus(e),this},disable:function(){return this.currentView.disable(),this},enable:function(){return this.currentView.enable(),this},isEmpty:function(){return this.currentView.isEmpty()},hasPlaceholderSet:function(){return this.currentView.hasPlaceholderSet()},parse:function(e){var t=this.config.parser(e,this.config.parserRules,this.composer.sandbox.getDocument(),!0);return"object"==typeof e&&i.quirks.redraw(e),t},_initParser:function(){this.observe("paste:composer",function(){var e=!0,t=this;t.composer.selection.executeAndRestore(function(){i.quirks.cleanPastedHTML(t.composer.element),t.parse(t.composer.element)},e)}),this.observe("paste:textarea",function(){var e,t=this.textarea.getValue();e=this.parse(t),this.textarea.setValue(e)})}})}(wysihtml5),function(c,i){"use strict";var o={"font-styles":function(e,t){return"<li class='dropdown'><a class='btn dropdown-toggle btn-"+(t&&t.size?" btn-"+t.size:"")+" btn-default' data-toggle='dropdown' href='#'><i class='glyphicon glyphicon-font'></i>&nbsp;<span class='current-font'>"+e.font_styles.normal+"</span>&nbsp;<b class='caret'></b></a><ul class='dropdown-menu'><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='div' tabindex='-1'>"+e.font_styles.normal+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h1' tabindex='-1'>"+e.font_styles.h1+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h2' tabindex='-1'>"+e.font_styles.h2+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h3' tabindex='-1'>"+e.font_styles.h3+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h4'>"+e.font_styles.h4+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h5'>"+e.font_styles.h5+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h6'>"+e.font_styles.h6+"</a></li></ul></li>"},emphasis:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li><div class='btn-group'><a class='btn btn-"+n+" btn-default' data-wysihtml5-command='bold' title='CTRL+B' tabindex='-1'>"+e.emphasis.bold+"</a><a class='btn btn-"+n+" btn-default' data-wysihtml5-command='italic' title='CTRL+I' tabindex='-1'>"+e.emphasis.italic+"</a><a class='btn btn-"+n+" btn-default' data-wysihtml5-command='underline' title='CTRL+U' tabindex='-1'>"+e.emphasis.underline+"</a></div></li>"},lists:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li><div class='btn-group'><a class='btn btn-"+n+" btn-default' data-wysihtml5-command='insertUnorderedList' title='"+e.lists.unordered+"' tabindex='-1'><i class='glyphicon glyphicon-list'></i></a><a class='btn btn-"+n+" btn-default' data-wysihtml5-command='insertOrderedList' title='"+e.lists.ordered+"' tabindex='-1'><i class='glyphicon glyphicon-th-list'></i></a><a class='btn btn-"+n+" btn-default' data-wysihtml5-command='Outdent' title='"+e.lists.outdent+"' tabindex='-1'><i class='glyphicon glyphicon-indent-right'></i></a><a class='btn btn-"+n+" btn-default' data-wysihtml5-command='Indent' title='"+e.lists.indent+"' tabindex='-1'><i class='glyphicon glyphicon-indent-left'></i></a></div></li>"},link:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li><div class='bootstrap-wysihtml5-insert-link-modal modal fade'><div class='modal-dialog'><div class='modal-content'><div class='modal-header'><a class='close' data-dismiss='modal'>&times;</a><h4>"+e.link.insert+"</h4></div><div class='modal-body'><input value='http://' class='bootstrap-wysihtml5-insert-link-url form-control'><label class='checkbox'> <input type='checkbox' class='bootstrap-wysihtml5-insert-link-target' checked>"+e.link.target+"</label></div><div class='modal-footer'><button class='btn btn-default' data-dismiss='modal'>"+e.link.cancel+"</button><button href='#' class='btn btn-primary' data-dismiss='modal'>"+e.link.insert+"</button></div></div></div></div><a class='btn btn-"+n+" btn-default' data-wysihtml5-command='createLink' title='"+e.link.insert+"' tabindex='-1'><i class='glyphicon glyphicon-share'></i></a></li>"},image:function(e,t){var n=t&&t.size?" btn-"+t.size:"";return"<li><div class='bootstrap-wysihtml5-insert-image-modal modal fade'><div class='modal-dialog'><div class='modal-content'><div class='modal-header'><a class='close' data-dismiss='modal'>&times;</a><h4>"+e.image.insert+"</h4></div><div class='modal-body'><input value='http://' class='bootstrap-wysihtml5-insert-image-url form-control'></div><div class='modal-footer'><button class='btn btn-default' data-dismiss='modal'>"+e.image.cancel+"</button><button class='btn btn-primary' data-dismiss='modal'>"+e.image.insert+"</button></div></div></div></div><a class='btn btn-"+n+" btn-default' data-wysihtml5-command='insertImage' title='"+e.image.insert+"' tabindex='-1'><i class='glyphicon glyphicon-picture'></i></a></li>"},html:function(e,t){return"<li><div class='btn-group'><a class='btn btn-"+(t&&t.size?" btn-"+t.size:"")+" btn-default' data-wysihtml5-action='change_view' title='"+e.html.edit+"' tabindex='-1'><i class='glyphicon glyphicon-pencil'></i></a></div></li>"},color:function(e,t){return"<li class='dropdown'><a class='btn dropdown-toggle btn-"+(t&&t.size?" btn-"+t.size:"")+" btn-default' data-toggle='dropdown' href='#' tabindex='-1'><span class='current-color'>"+e.colours.black+"</span>&nbsp;<b class='caret'></b></a><ul class='dropdown-menu'><li><div class='wysihtml5-colors' data-wysihtml5-command-value='black'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='black'>"+e.colours.black+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='silver'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='silver'>"+e.colours.silver+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='gray'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='gray'>"+e.colours.gray+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='maroon'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='maroon'>"+e.colours.maroon+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='red'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='red'>"+e.colours.red+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='purple'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='purple'>"+e.colours.purple+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='green'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='green'>"+e.colours.green+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='olive'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='olive'>"+e.colours.olive+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='navy'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='navy'>"+e.colours.navy+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='blue'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='blue'>"+e.colours.blue+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='orange'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='orange'>"+e.colours.orange+"</a></li></ul></li>"}},a=function(e,t,n){return o[e](t,n)},n=function(e,t){this.el=e;var n=t||l;for(var i in n.customTemplates)o[i]=n.customTemplates[i];this.toolbar=this.createToolbar(e,n),this.editor=this.createEditor(t),window.editor=this.editor,c("iframe.wysihtml5-sandbox").each(function(e,t){c(t.contentWindow).off("focus.wysihtml5").on({"focus.wysihtml5":function(){c("li.dropdown").removeClass("open")}})})};n.prototype={constructor:n,createEditor:function(e){e=e||{},(e=c.extend(!0,{},e)).toolbar=this.toolbar[0];var t=new i.Editor(this.el[0],e);if(e&&e.events)for(var n in e.events)t.on(n,e.events[n]);return t},createToolbar:function(e,t){var i=this,n=c("<ul/>",{"class":"wysihtml5-toolbar",style:"display:none"}),o=t.locale||l.locale||"en";for(var r in l){var s=!1;t[r]!==undefined?!0===t[r]&&(s=!0):s=l[r],!0===s&&(n.append(a(r,d[o],t)),"html"===r&&this.initHtml(n),"link"===r&&this.initInsertLink(n),"image"===r&&this.initInsertImage(n))}if(t.toolbar)for(r in t.toolbar)n.append(t.toolbar[r]);return n.find("a[data-wysihtml5-command='formatBlock']").click(function(e){var t=e.target||e.srcElement,n=c(t);i.toolbar.find(".current-font").text(n.html())}),n.find("a[data-wysihtml5-command='foreColor']").click(function(e){var t=e.target||e.srcElement,n=c(t);i.toolbar.find(".current-color").text(n.html())}),this.el.before(n),n},initHtml:function(e){var t="a[data-wysihtml5-action='change_view']";e.find(t).click(function(){e.find("a.btn").not(t).toggleClass("disabled")})},initInsertImage:function(e){var t,n=this,i=e.find(".bootstrap-wysihtml5-insert-image-modal"),o=i.find(".bootstrap-wysihtml5-insert-image-url"),r=i.find(".btn-primary"),s=o.val(),a=function(){var e=o.val();o.val(s),n.editor.currentView.element.focus(),t&&(n.editor.composer.selection.setBookmark(t),t=null),n.editor.composer.commands.exec("insertImage",e)};o.keypress(function(e){13==e.which&&(a(),i.modal("hide"))}),r.click(a),i.on("shown",function(){o.focus()}),i.on("hide",function(){n.editor.currentView.element.focus()}),e.find("a[data-wysihtml5-command=insertImage]").click(function(){return!!c(this).hasClass("wysihtml5-command-active")||(n.editor.currentView.element.focus(!1),t=n.editor.composer.selection.getBookmark(),i.appendTo("body").modal("show"),i.on("click.dismiss.modal",'[data-dismiss="modal"]',function(e){e.stopPropagation()}),!1)})},initInsertLink:function(e){var n,i=this,t=e.find(".bootstrap-wysihtml5-insert-link-modal"),o=t.find(".bootstrap-wysihtml5-insert-link-url"),r=t.find(".bootstrap-wysihtml5-insert-link-target"),s=t.find(".btn-primary"),a=o.val(),l=function(){var e=o.val();o.val(a),i.editor.currentView.element.focus(),n&&(i.editor.composer.selection.setBookmark(n),n=null);var t=r.prop("checked");i.editor.composer.commands.exec("createLink",{href:e,target:t?"_blank":"_self",rel:t?"nofollow":""})};o.keypress(function(e){13==e.which&&(l(),t.modal("hide"))}),s.click(l),t.on("shown",function(){o.focus()}),t.on("hide",function(){i.editor.currentView.element.focus()}),e.find("a[data-wysihtml5-command=createLink]").click(function(){return!!c(this).hasClass("wysihtml5-command-active")||(i.editor.currentView.element.focus(!1),n=i.editor.composer.selection.getBookmark(),t.appendTo("body").modal("show"),t.on("click.dismiss.modal",'[data-dismiss="modal"]',function(e){e.stopPropagation()}),!1)})}};var r={resetDefaults:function(){c.fn.wysihtml5.defaultOptions=c.extend(!0,{},c.fn.wysihtml5.defaultOptionsCache)},bypassDefaults:function(t){return this.each(function(){var e=c(this);e.data("wysihtml5",new n(e,t))})},shallowExtend:function(e){var t=c.extend({},c.fn.wysihtml5.defaultOptions,e||{},c(this).data()),n=this;return r.bypassDefaults.apply(n,[t])},deepExtend:function(e){var t=c.extend(!0,{},c.fn.wysihtml5.defaultOptions,e||{}),n=this;return r.bypassDefaults.apply(n,[t])},init:function(e){var t=this;return r.shallowExtend.apply(t,[e])}};c.fn.wysihtml5=function(e){return r[e]?r[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void c.error("Method "+e+" does not exist on jQuery.wysihtml5"):r.init.apply(this,arguments)},c.fn.wysihtml5.Constructor=n;var l=c.fn.wysihtml5.defaultOptions={"font-styles":!0,color:!1,emphasis:!0,lists:!0,html:!1,link:!0,image:!0,size:"sm",events:{},parserRules:{classes:{"wysiwyg-color-silver":1,"wysiwyg-color-gray":1,"wysiwyg-color-white":1,"wysiwyg-color-maroon":1,"wysiwyg-color-red":1,"wysiwyg-color-purple":1,"wysiwyg-color-fuchsia":1,"wysiwyg-color-green":1,"wysiwyg-color-lime":1,"wysiwyg-color-olive":1,"wysiwyg-color-yellow":1,"wysiwyg-color-navy":1,"wysiwyg-color-blue":1,"wysiwyg-color-teal":1,"wysiwyg-color-aqua":1,"wysiwyg-color-orange":1},tags:{b:{},i:{},br:{},ol:{},ul:{},li:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},blockquote:{},u:1,img:{check_attributes:{width:"numbers",alt:"alt",src:"url",height:"numbers"}},a:{check_attributes:{href:"url",target:"alt",rel:"alt"}},span:1,div:1,code:1,pre:1}},locale:"en"};"undefined"==typeof c.fn.wysihtml5.defaultOptionsCache&&(c.fn.wysihtml5.defaultOptionsCache=c.extend(!0,{},c.fn.wysihtml5.defaultOptions));var d=c.fn.wysihtml5.locale={en:{font_styles:{normal:"Normal text",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6"},emphasis:{bold:"Bold",italic:"Italic",underline:"Underline"},lists:{unordered:"Unordered list",ordered:"Ordered list",outdent:"Outdent",indent:"Indent"},link:{insert:"Insert link",cancel:"Cancel",target:"Open link in new window"},image:{insert:"Insert image",cancel:"Cancel"},html:{edit:"Edit HTML"},colours:{black:"Black",silver:"Silver",gray:"Grey",maroon:"Maroon",red:"Red",purple:"Purple",green:"Green",olive:"Olive",navy:"Navy",blue:"Blue",orange:"Orange"}}}}(window.jQuery,window.wysihtml5),function(){var t,n,i,o,r,s,e,a,l,c,d,u,h,f,m,p,g,E,T,C,v,I,O,b,D,R,y,_,K,w,k,N,x,S,A,L,$,F,P,B,M,H,q,z,j;window.CKEDITOR&&window.CKEDITOR.dom||(window.CKEDITOR||(window.CKEDITOR=function(){var t={timestamp:"E0LB",version:"4.3.2",revision:"ba625e6",rnd:Math.floor(900*Math.random())+100,_:{pending:[]},status:"unloaded",basePath:function(){var e=window.CKEDITOR_BASEPATH||"";if(!e)for(var t=document.getElementsByTagName("script"),n=0;n<t.length;n++){var i=t[n].src.match(/(^|.*[\\\/])ckeditor(?:_basic)?(?:_source)?.js(?:\?.*)?$/i);if(i){e=i[1];break}}if(-1==e.indexOf(":/")&&"//"!=e.slice(0,2)&&(e=0===e.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+e:location.href.match(/^[^\?]*\/(?:)/)[0]+e),!e)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return e}(),getUrl:function(e){return-1==e.indexOf(":/")&&0!==e.indexOf("/")&&(e=this.basePath+e),this.timestamp&&"/"!=e.charAt(e.length-1)&&!/[&?]t=/.test(e)&&(e+=(0<=e.indexOf("?")?"&":"?")+"t="+this.timestamp),e},domReady:function(){function n(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",n,!1),e()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",n),e())}catch(i){}}function e(){for(var e;e=i.shift();)e()}var i=[];return function(e){if(i.push(e),"complete"===document.readyState&&setTimeout(n,1),1==i.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",n),window.attachEvent("onload",n),e=!1;try{e=!window.frameElement}catch(o){}if(document.documentElement.doScroll&&e){var t=function(){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(t,1)}n()};t()}}}}()},o=window.CKEDITOR_GETURL;if(o){var n=t.getUrl;t.getUrl=function(e){return o.call(t,e)||n.call(t,e)}}return t}()),CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(e){var t,n=CKEDITOR.event.prototype;for(t in n)null==e[t]&&(e[t]=n[t])},CKEDITOR.event.prototype=function(){function d(e){var t=m(this);return t[e]||(t[e]=new n(e))}var c,u,h,f,m=function(e){return(e=e.getPrivate&&e.getPrivate()||e._||(e._={})).events||(e.events={})},n=function(e){this.name=e,this.listeners=[]};return n.prototype={getListenerIndex:function(e){for(var t=0,n=this.listeners;t<n.length;t++)if(n[t].fn==e)return t;return-1}},{define:function(e,t){var n=d.call(this,e);CKEDITOR.tools.extend(n,t,!0)},on:function(o,r,s,a,e){function t(e,t,n,i){return!(e={name:o,sender:this,editor:e,data:t,listenerData:a,stop:n,cancel:i,removeListener:l})!==r.call(s,e)&&e.data}function l(){i.removeListener(o,r)}var n=d.call(this,o);if(n.getListenerIndex(r)<0){n=n.listeners,s||(s=this),isNaN(e)&&(e=10);var i=this;t.fn=r,t.priority=e;for(var c=n.length-1;0<=c;c--)if(n[c].priority<=e)return n.splice(c+1,0,t),{removeListener:l};n.unshift(t)}return{removeListener:l}},once:function(e,t){var n=t;return t=function(e){return e.removeListener(),n.apply(this,arguments)},this.on.apply(this,arguments)},capture:function(){CKEDITOR.event.useCapture=1;var e=this.on.apply(this,arguments);return CKEDITOR.event.useCapture=0,e},fire:(c=0,u=function(){c=1},h=0,f=function(){h=1},function(e,t,n){var i=m(this)[e],o=(e=c,h);if(c=h=0,i&&(s=i.listeners).length)for(var r,s=s.slice(0),a=0;a<s.length;a++){if(i.errorProof)try{r=s[a].call(this,n,t,u,f)}catch(l){}else r=s[a].call(this,n,t,u,f);if(!1===r?h=1:void 0!==r&&(t=r),c||h)break}return t=!h&&(void 0===t||t),c=e,h=o,t}),fireOnce:function(e,t,n){return t=this.fire(e,t,n),delete m(this)[e],t},removeListener:function(e,t){var n=m(this)[e];if(n){var i=n.getListenerIndex(t);0<=i&&n.listeners.splice(i,1)}},removeAllListeners:function(){var e,t=m(this);for(e in t)delete t[e]},hasListeners:function(e){return(e=m(this)[e])&&0<e.listeners.length}}}()),CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]),CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(e,t){return e in{instanceReady:1,loaded:1}&&(this[e]=!0),CKEDITOR.event.prototype.fire.call(this,e,t,this)},CKEDITOR.editor.prototype.fireOnce=function(e,t){return e in{instanceReady:1,loaded:1}&&(this[e]=!0),CKEDITOR.event.prototype.fireOnce.call(this,e,t,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype)),CKEDITOR.env||(CKEDITOR.env=function(){var e=navigator.userAgent.toLowerCase(),t=window.opera,n={ie:-1<e.indexOf("trident/"),opera:!!t&&t.version,webkit:-1<e.indexOf(" applewebkit/"),air:-1<e.indexOf(" adobeair/"),mac:-1<e.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode&&(!document.documentMode||document.documentMode<10),mobile:-1<e.indexOf("mobile"),iOS:/(ipad|iphone|ipod)/.test(e),isCustomDomain:function(){if(!this.ie)return!1;var e=document.domain,t=window.location.hostname;return e!=t&&e!="["+t+"]"},secure:"https:"==location.protocol};n.gecko="Gecko"==navigator.product&&!n.webkit&&!n.opera&&!n.ie,n.webkit&&(-1<e.indexOf("chrome")?n.chrome=!0:n.safari=!0);var i=0;if(n.ie&&(i=n.quirks||!document.documentMode?parseFloat(e.match(/msie (\d+)/)[1]):document.documentMode,n.ie9Compat=9==i,n.ie8Compat=8==i,n.ie7Compat=7==i,n.ie6Compat=i<7||n.quirks),n.gecko){var o=e.match(/rv:([\d\.]+)/);o&&(i=1e4*(o=o[1].split("."))[0]+100*(o[1]||0)+1*(o[2]||0))}return n.opera&&(i=parseFloat(t.version())),n.air&&(i=parseFloat(e.match(/ adobeair\/(\d+)/)[1])),n.webkit&&(i=parseFloat(e.match(/ applewebkit\/(\d+)/)[1])),n.version=i,n.isCompatible=n.iOS&&534<=i||!n.mobile&&(n.ie&&6<i||n.gecko&&10801<=i||n.opera&&9.5<=i||n.air&&1<=i||n.webkit&&522<=i||!1),n.hidpi=2<=window.devicePixelRatio,n.needsBrFiller=n.gecko||n.webkit||n.ie&&10<i,n.needsNbspFiller=n.ie&&i<11,n.cssClass="cke_browser_"+(n.ie?"ie":n.gecko?"gecko":n.opera?"opera":n.webkit?"webkit":"unknown"),n.quirks&&(n.cssClass=n.cssClass+" cke_browser_quirks"),n.ie&&(n.cssClass=n.cssClass+" cke_browser_ie"+(n.quirks||n.version<7?"6":n.version),n.quirks&&(n.cssClass=n.cssClass+" cke_browser_iequirks")),n.gecko&&(i<10900?n.cssClass=n.cssClass+" cke_browser_gecko18":i<=11e3&&(n.cssClass=n.cssClass+" cke_browser_gecko19")),n.air&&(n.cssClass=n.cssClass+" cke_browser_air"),n.iOS&&(n.cssClass=n.cssClass+" cke_browser_ios"),n.hidpi&&(n.cssClass=n.cssClass+" cke_hidpi"),n}()),"unloaded"==CKEDITOR.status&&(CKEDITOR.event.implementOn(CKEDITOR),CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status)CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var e=document.createElement("script");e.type="text/javascript",e.src=CKEDITOR.basePath+"ckeditor.js",document.getElementsByTagName("head")[0].appendChild(e)}},CKEDITOR.loadFullCoreTimeout=0,CKEDITOR.add=function(e){(this._.pending||(this._.pending=[])).push(e)},CKEDITOR.domReady(function(){var e=CKEDITOR.loadFullCore,t=CKEDITOR.loadFullCoreTimeout;e&&(CKEDITOR.status="basic_ready",e&&e._load?e():t&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},1e3*t))}),CKEDITOR.status="basic_loaded"),CKEDITOR.dom={},c=[],d=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.opera?"-o-":CKEDITOR.env.ie?"-ms-":"",CKEDITOR.on("reset",function(){c=[]}),CKEDITOR.tools={arrayCompare:function(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0},clone:function(e){var t;if(e&&e instanceof Array){t=[];for(var n=0;n<e.length;n++)t[n]=CKEDITOR.tools.clone(e[n]);return t}if(null===e||"object"!=typeof e||e instanceof String||e instanceof Number||e instanceof Boolean||e instanceof Date||e instanceof RegExp)return e;for(n in t=new e.constructor,e)t[n]=CKEDITOR.tools.clone(e[n]);return t},capitalize:function(e,t){return e.charAt(0).toUpperCase()+(t?e.slice(1):e.slice(1).toLowerCase())},extend:function(e){var t,n,i=arguments.length;"boolean"==typeof(t=arguments[i-1])?i--:"boolean"==typeof(t=arguments[i-2])&&(n=arguments[i-1],i-=2);for(var o=1;o<i;o++){var r,s=arguments[o];for(r in s)!0!==t&&null!=e[r]||(!n||r in n)&&(e[r]=s[r])}return e},prototypedCopy:function(e){var t=function(){};return t.prototype=e,new t},copy:function(e){var t,n={};for(t in e)n[t]=e[t];return n},isArray:function(e){return"[object Array]"==Object.prototype.toString.call(e)},isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},cssVendorPrefix:function(e,t,n){return n?d+e+":"+t+";"+e+":"+t:((n={})[e]=t,n[d+e]=t,n)},cssStyleToDomStyle:(a=document.createElement("div").style,l="undefined"!=typeof a.cssFloat?"cssFloat":"undefined"!=typeof a.styleFloat?"styleFloat":"float",function(e){return"float"==e?l:e.replace(/-./g,function(e){return e.substr(1).toUpperCase()})}),buildStyleHtml:function(e){e=[].concat(e);for(var t,n=[],i=0;i<e.length;i++)(t=e[i])&&(/@import|[{}]/.test(t)?n.push("<style>"+t+"</style>"):n.push('<link type="text/css" rel=stylesheet href="'+t+'">'));return n.join("")},htmlEncode:function(e){return(""+e).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")},htmlEncodeAttr:function(e){return e.replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},htmlDecodeAttr:function(e){return e.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">")},getNextNumber:(e=0,function(){return++e}),getNextId:function(){return"cke_"+this.getNextNumber()},override:function(e,t){var n=t(e);return n.prototype=e.prototype,n},setTimeout:function(e,t,n,i,o){return o||(o=window),n||(n=o),o.setTimeout(function(){i?e.apply(n,[].concat(i)):e.apply(n)},t||0)},trim:(s=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,function(e){return e.replace(s,"")}),ltrim:(r=/^[ \t\n\r]+/g,function(e){return e.replace(r,"")}),rtrim:(o=/[ \t\n\r]+$/g,function(e){return e.replace(o,"")}),indexOf:function(e,t){if("function"==typeof t){for(var n=0,i=e.length;n<i;n++)if(t(e[n]))return n}else{if(e.indexOf)return e.indexOf(t);for(n=0,i=e.length;n<i;n++)if(e[n]===t)return n}return-1},search:function(e,t){var n=CKEDITOR.tools.indexOf(e,t);return 0<=n?e[n]:null},bind:function(e,t){return function(){return e.apply(t,arguments)}},createClass:function(e){var t=e.$,n=e.base,i=e.privates||e._,o=e.proto;if(e=e.statics,!t&&(t=function(){n&&this.base.apply(this,arguments)}),i){var r=t;t=function(){var e,t=this._||(this._={});for(e in i){var n=i[e];t[e]="function"==typeof n?CKEDITOR.tools.bind(n,this):n}r.apply(this,arguments)}}return n&&(t.prototype=this.prototypedCopy(n.prototype),(t.prototype.constructor=t).base=n,t.baseProto=n.prototype,t.prototype.base=function(){this.base=n.prototype.base,n.apply(this,arguments),this.base=arguments.callee}),o&&this.extend(t.prototype,o,!0),e&&this.extend(t,e,!0),t},addFunction:function(e,t){return c.push(function(){return e.apply(t||this,arguments)})-1},removeFunction:function(e){c[e]=null},callFunction:function(e){var t=c[e];return t&&t.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:(i=/^-?\d+\.?\d*px$/,function(e){return n=CKEDITOR.tools.trim(e+"")+"px",i.test(n)?n:e||""}),convertToPx:function(e){return t||(t=CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',CKEDITOR.document),CKEDITOR.document.getBody().append(t)),/%$/.test(e)?e:(t.setStyle("width",e),t.$.clientWidth)},repeat:function(e,t){return Array(t+1).join(e)},tryThese:function(){for(var e,t=0,n=arguments.length;t<n;t++){var i=arguments[t];try{e=i();break}catch(d){}}return e},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(n){return function(){var e=arguments,t=this;window.setTimeout(function(){n.apply(t,e)},0)}},normalizeCssText:function(e,t){var n,i=[],o=CKEDITOR.tools.parseCssText(e,!0,t);for(n in o)i.push(n+":"+o[n]);return i.sort(),i.length?i.join(";")+";":""},convertRgbToHex:function(e){return e.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(e,t,n,i){for(e=[t,n,i],t=0;t<3;t++)e[t]=("0"+parseInt(e[t],10).toString(16)).slice(-2);return"#"+e.join("")})},parseCssText:function(e,i,t){var o={};return t&&((t=new CKEDITOR.dom.element("span")).setAttribute("style",e),e=CKEDITOR.tools.convertRgbToHex(t.getAttribute("style")||"")),e&&";"!=e&&e.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(e,t,n){i&&("font-family"==(t=t.toLowerCase())&&(n=n.toLowerCase().replace(/["']/g,"").replace(/\s*,\s*/g,",")),n=CKEDITOR.tools.trim(n)),o[t]=n}),o},writeCssText:function(e,t){var n,i=[];for(n in e)i.push(n+":"+e[n]);return t&&i.sort(),i.join("; ")},objectCompare:function(e,t,n){var i;if(!e&&!t)return!0;if(!e||!t)return!1;for(i in e)if(e[i]!=t[i])return!1;if(!n)for(i in t)if(e[i]!=t[i])return!1;return!0},objectKeys:function(e){var t,n=[];for(t in e)n.push(t);return n},convertArrayToObject:function(e,t){var n={};1==arguments.length&&(t=!0);for(var i=0,o=e.length;i<o;++i)n[e[i]]=t;return n},fixDomain:function(){for(var e;;)try{e=window.parent.document.domain;break}catch(t){if(!(e=e?e.replace(/.+?(?:\.|$)/,""):document.domain))break;document.domain=e}return!!e},eventsBuffer:function(t,e){function n(){o=(new Date).getTime(),i=!1,e()}var i,o=0;return{input:function(){if(!i){var e=(new Date).getTime()-o;e<t?i=setTimeout(n,t-e):n()}},reset:function(){i&&clearTimeout(i),i=o=0}}},enableHtml5Elements:function(e,t){for(var n,i=["abbr","article","aside","audio","bdi","canvas","data","datalist","details","figcaption","figure","footer","header","hgroup","mark","meter","nav","output","progress","section","summary","time","video"],o=i.length;o--;)n=e.createElement(i[o]),t&&e.appendChild(n)}},CKEDITOR.dtd=(u=CKEDITOR.tools.extend,h=function(e,t){for(var n=CKEDITOR.tools.clone(e),i=1;i<arguments.length;i++){var o;t=arguments[i];for(o in t)delete n[o]}return n},m={},p={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},g={command:1,link:1,meta:1,noscript:1,script:1,style:1},E={},C={center:1,dir:1,noframes:1},u(f={},{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,"var":1,video:1,wbr:1},T={"#":1},{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1}),u(m,p,f,C),u(h={a:h(f,{a:1,button:1}),abbr:f,address:m,area:E,article:u({style:1},m),aside:u({style:1},m),audio:u({source:1,track:1},m),b:f,base:E,bdi:f,bdo:f,blockquote:m,body:m,br:E,button:h(f,{a:1,button:1}),canvas:f,caption:m,cite:f,code:f,col:E,colgroup:{col:1},command:E,datalist:u({option:1},f),dd:m,del:f,details:u({summary:1},m),dfn:f,div:u({style:1},m),dl:{dt:1,dd:1},dt:m,em:f,embed:E,fieldset:u({legend:1},m),figcaption:m,figure:u({figcaption:1},m),footer:m,form:m,h1:f,h2:f,h3:f,h4:f,h5:f,h6:f,head:u({title:1,base:1},g),header:m,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:E,html:u({head:1,body:1},m,g),i:f,iframe:T,img:E,input:E,ins:f,kbd:f,keygen:E,label:f,legend:f,li:m,link:E,map:m,mark:f,menu:u({li:1},m),meta:E,meter:h(f,{meter:1}),nav:m,noscript:u({link:1,meta:1,style:1},f),object:u({param:1},f),ol:{li:1},optgroup:{option:1},option:T,output:f,p:f,param:E,pre:f,progress:h(f,{progress:1}),q:f,rp:f,rt:f,ruby:u({rp:1,rt:1},f),s:f,samp:f,script:T,section:u({style:1},m),select:{optgroup:1,option:1},small:f,source:E,span:f,strong:f,style:T,sub:f,summary:f,sup:f,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:m,textarea:T,tfoot:{tr:1},th:m,thead:{tr:1},time:h(f,{time:1}),title:T,tr:{th:1,td:1},track:E,u:f,ul:{li:1},"var":f,video:u({
source:1,track:1},m),wbr:E,acronym:f,applet:u({param:1},m),basefont:E,big:f,center:m,dialog:E,dir:{li:1},font:f,isindex:E,noframes:m,strike:f,tt:f},{$block:u({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},p,C),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:f,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:u({body:1,head:1,html:1},h.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,"var":1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}}),h),CKEDITOR.dom.event=function(e){this.$=e},CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var e=this.getKey();return(this.$.ctrlKey||this.$.metaKey)&&(e+=CKEDITOR.CTRL),this.$.shiftKey&&(e+=CKEDITOR.SHIFT),this.$.altKey&&(e+=CKEDITOR.ALT),e},preventDefault:function(e){var t=this.$;t.preventDefault?t.preventDefault():t.returnValue=!1,e&&this.stopPropagation()},stopPropagation:function(){var e=this.$;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},getTarget:function(){var e=this.$.target||this.$.srcElement;return e?new CKEDITOR.dom.node(e):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var e=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(e.documentElement.scrollLeft||e.body.scrollLeft),y:this.$.pageY||this.$.clientY+(e.documentElement.scrollTop||e.body.scrollTop)}}},CKEDITOR.CTRL=1114112,CKEDITOR.SHIFT=2228224,CKEDITOR.ALT=4456448,CKEDITOR.EVENT_PHASE_CAPTURING=1,CKEDITOR.EVENT_PHASE_AT_TARGET=2,CKEDITOR.EVENT_PHASE_BUBBLING=3,CKEDITOR.dom.domObject=function(e){e&&(this.$=e)},CKEDITOR.dom.domObject.prototype=(v=function(t,n){return function(e){"undefined"!=typeof CKEDITOR&&t.fire(n,new CKEDITOR.dom.event(e))}},{getPrivate:function(){var e;return(e=this.getCustomData("_"))||this.setCustomData("_",e={}),e},on:function(e){var t=this.getCustomData("_cke_nativeListeners");return t||(t={},this.setCustomData("_cke_nativeListeners",t)),t[e]||(t=t[e]=v(this,e),this.$.addEventListener?this.$.addEventListener(e,t,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+e,t)),CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(e){if(CKEDITOR.event.prototype.removeListener.apply(this,arguments),!this.hasListeners(e)){var t=this.getCustomData("_cke_nativeListeners"),n=t&&t[e];n&&(this.$.removeEventListener?this.$.removeEventListener(e,n,!1):this.$.detachEvent&&this.$.detachEvent("on"+e,n),delete t[e])}},removeAllListeners:function(){var e,t=this.getCustomData("_cke_nativeListeners");for(e in t){var n=t[e];this.$.detachEvent?this.$.detachEvent("on"+e,n):this.$.removeEventListener&&this.$.removeEventListener(e,n,!1),delete t[e]}}}),I=CKEDITOR.dom.domObject.prototype,O={},CKEDITOR.on("reset",function(){O={}}),I.equals=function(e){try{return e&&e.$===this.$}catch(t){return!1}},I.setCustomData=function(e,t){var n=this.getUniqueId();return(O[n]||(O[n]={}))[e]=t,this},I.getCustomData=function(e){var t=this.$["data-cke-expando"];return(t=t&&O[t])&&e in t?t[e]:null},I.removeCustomData=function(e){var t,n,i;return(t=(t=this.$["data-cke-expando"])&&O[t])&&(n=t[e],i=e in t,delete t[e]),i?n:null},I.clearCustomData=function(){this.removeAllListeners();var e=this.$["data-cke-expando"];e&&delete O[e]},I.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())},CKEDITOR.event.implementOn(I),CKEDITOR.dom.node=function(e){return e?new CKEDITOR.dom[e.nodeType==CKEDITOR.NODE_DOCUMENT?"document":e.nodeType==CKEDITOR.NODE_ELEMENT?"element":e.nodeType==CKEDITOR.NODE_TEXT?"text":e.nodeType==CKEDITOR.NODE_COMMENT?"comment":e.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](e):this},CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject,CKEDITOR.NODE_ELEMENT=1,CKEDITOR.NODE_DOCUMENT=9,CKEDITOR.NODE_TEXT=3,CKEDITOR.NODE_COMMENT=8,CKEDITOR.NODE_DOCUMENT_FRAGMENT=11,CKEDITOR.POSITION_IDENTICAL=0,CKEDITOR.POSITION_DISCONNECTED=1,CKEDITOR.POSITION_FOLLOWING=2,CKEDITOR.POSITION_PRECEDING=4,CKEDITOR.POSITION_IS_CONTAINED=8,CKEDITOR.POSITION_CONTAINS=16,CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(e,t){return e.append(this,t),e},clone:function(n,i){var e=this.$.cloneNode(n),o=function(e){if(e["data-cke-expando"]&&(e["data-cke-expando"]=!1),e.nodeType==CKEDITOR.NODE_ELEMENT&&(i||e.removeAttribute("id",!1),n)){e=e.childNodes;for(var t=0;t<e.length;t++)o(e[t])}};return o(e),new CKEDITOR.dom.node(e)},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(e){return e.$.parentNode.insertBefore(this.$,e.$.nextSibling),e},insertBefore:function(e){return e.$.parentNode.insertBefore(this.$,e.$),e},insertBeforeMe:function(e){return this.$.parentNode.insertBefore(e.$,this.$),e},getAddress:function(e){for(var t=[],n=this.getDocument().$.documentElement,i=this.$;i&&i!=n;){var o=i.parentNode;o&&t.unshift(this.getIndex.call({$:i},e)),i=o}return t},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(e){var t,n=this.$,i=-1;if(!this.$.parentNode)return i;for(;(!e||n==this.$||n.nodeType!=CKEDITOR.NODE_TEXT||!t&&n.nodeValue)&&(i++,t=n.nodeType==CKEDITOR.NODE_TEXT),n=n.previousSibling;);return i},getNextSourceNode:function(e,t,n){if(n&&!n.call){var i=n;n=function(e){return!e.equals(i)}}var o;if(!(e=!e&&this.getFirst&&this.getFirst())){if(this.type==CKEDITOR.NODE_ELEMENT&&n&&!1===n(this,!0))return null;e=this.getNext()}for(;!e&&(o=(o||this).getParent());){if(n&&!1===n(o,!0))return null;e=o.getNext()}return!e||n&&!1===n(e)?null:t&&t!=e.type?e.getNextSourceNode(!1,t,n):e},getPreviousSourceNode:function(e,t,n){if(n&&!n.call){var i=n;n=function(e){return!e.equals(i)}}var o;if(!(e=!e&&this.getLast&&this.getLast())){if(this.type==CKEDITOR.NODE_ELEMENT&&n&&!1===n(this,!0))return null;e=this.getPrevious()}for(;!e&&(o=(o||this).getParent());){if(n&&!1===n(o,!0))return null;e=o.getPrevious()}return!e||n&&!1===n(e)?null:t&&e.type!=t?e.getPreviousSourceNode(!1,t,n):e},getPrevious:function(e){for(var t,n=this.$;(t=(n=n.previousSibling)&&10!=n.nodeType&&new CKEDITOR.dom.node(n))&&e&&!e(t););return t},getNext:function(e){for(var t,n=this.$;(t=(n=n.nextSibling)&&new CKEDITOR.dom.node(n))&&e&&!e(t););return t},getParent:function(e){var t=this.$.parentNode;return t&&(t.nodeType==CKEDITOR.NODE_ELEMENT||e&&t.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(t):null},getParents:function(e){for(var t=this,n=[];n[e?"push":"unshift"](t),t=t.getParent(););return n},getCommonAncestor:function(e){if(e.equals(this))return this;if(e.contains&&e.contains(this))return e;var t=this.contains?this:this.getParent();do{if(t.contains(e))return t}while(t=t.getParent());return null},getPosition:function(e){var t=this.$,n=e.$;if(t.compareDocumentPosition)return t.compareDocumentPosition(n);if(t==n)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&e.type==CKEDITOR.NODE_ELEMENT){if(t.contains){if(t.contains(n))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(n.contains(t))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in t)return t.sourceIndex<0||n.sourceIndex<0?CKEDITOR.POSITION_DISCONNECTED:t.sourceIndex<n.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}t=this.getAddress(),e=e.getAddress(),n=Math.min(t.length,e.length);for(var i=0;i<=n-1;i++)if(t[i]!=e[i]){if(i<n)return t[i]<e[i]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;break}return t.length<e.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(e,t){var n,i=this.$;for(t||(i=i.parentNode);i;){if(i.nodeName&&(n=i.nodeName.toLowerCase(),"string"==typeof e?n==e:n in e))return new CKEDITOR.dom.node(i);try{i=i.parentNode}catch(o){i=null}}return null},hasAscendant:function(e,t){var n=this.$;for(t||(n=n.parentNode);n;){if(n.nodeName&&n.nodeName.toLowerCase()==e)return!0;n=n.parentNode}return!1},move:function(e,t){e.append(this.remove(),t)},remove:function(e){var t=this.$,n=t.parentNode;if(n){if(e)for(;e=t.firstChild;)n.insertBefore(t.removeChild(e),t);n.removeChild(t)}return this},replace:function(e){this.insertBefore(e),e.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var e;this.getFirst&&(e=this.getFirst());){if(e.type==CKEDITOR.NODE_TEXT){var t=CKEDITOR.tools.ltrim(e.getText()),n=e.getLength();if(!t){e.remove();continue}t.length<n&&(e.split(n-t.length),this.$.removeChild(this.$.firstChild))}break}},rtrim:function(){for(var e;this.getLast&&(e=this.getLast());){if(e.type==CKEDITOR.NODE_TEXT){var t=CKEDITOR.tools.rtrim(e.getText()),n=e.getLength();if(!t){e.remove();continue}t.length<n&&(e.split(t.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild))}break}CKEDITOR.env.needsBrFiller&&(e=this.$.lastChild)&&1==e.type&&"br"==e.nodeName.toLowerCase()&&e.parentNode.removeChild(e)},isReadOnly:function(){var e=this;if(this.type!=CKEDITOR.NODE_ELEMENT&&(e=this.getParent()),e&&"undefined"!=typeof e.$.isContentEditable)return!(e.$.isContentEditable||e.data("cke-editable"));for(;e&&!e.data("cke-editable");){if("false"==e.getAttribute("contentEditable"))return!0;if("true"==e.getAttribute("contentEditable"))break;e=e.getParent()}return!e}}),CKEDITOR.dom.window=function(e){CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var e=this.$.document,t="CSS1Compat"==e.compatMode;return{width:(t?e.documentElement.clientWidth:e.body.clientWidth)||0,height:(t?e.documentElement.clientHeight:e.body.clientHeight)||0}},getScrollPosition:function(){var e=this.$;return"pageXOffset"in e?{x:e.pageXOffset||0,y:e.pageYOffset||0}:{x:(e=e.document).documentElement.scrollLeft||e.body.scrollLeft||0,y:e.documentElement.scrollTop||e.body.scrollTop||0}},getFrame:function(){var e=this.$.frameElement;return e?new CKEDITOR.dom.element.get(e):null}}),CKEDITOR.dom.document=function(e){CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(e){if(this.$.createStyleSheet)this.$.createStyleSheet(e);else{var t=new CKEDITOR.dom.element("link");t.setAttributes({rel:"stylesheet",type:"text/css",href:e}),this.getHead().append(t)}},appendStyleText:function(e){if(this.$.createStyleSheet){var t=this.$.createStyleSheet("");t.cssText=e}else{var n=new CKEDITOR.dom.element("style",this);n.append(new CKEDITOR.dom.text(e,this)),this.getHead().append(n)}return t||n.$.sheet},createElement:function(e,t){var n=new CKEDITOR.dom.element(e,this);return t&&(t.attributes&&n.setAttributes(t.attributes),t.styles&&n.setStyles(t.styles)),n},createText:function(e){return new CKEDITOR.dom.text(e,this)},focus:function(){this.getWindow().focus()},getActive:function(){return new CKEDITOR.dom.element(this.$.activeElement)},getById:function(e){return(e=this.$.getElementById(e))?new CKEDITOR.dom.element(e):null},getByAddress:function(e,t){for(var n=this.$.documentElement,i=0;n&&i<e.length;i++){var o=e[i];if(t)for(var r=-1,s=0;s<n.childNodes.length;s++){var a=n.childNodes[s];if((!0!==t||3!=a.nodeType||!a.previousSibling||3!=a.previousSibling.nodeType)&&++r==o){n=a;break}}else n=n.childNodes[o]}return n?new CKEDITOR.dom.node(n):null},getElementsByTag:function(e,t){return(!CKEDITOR.env.ie||8<document.documentMode)&&t&&(e=t+":"+e),new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(e))},getHead:function(){var e=this.$.getElementsByTagName("head")[0];return e?new CKEDITOR.dom.element(e):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(e){this.$.open("text/html","replace"),CKEDITOR.env.ie&&(e=e.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$&\n<script data-cke-temp="1">('+CKEDITOR.tools.fixDomain+")();</script>")),this.$.write(e),this.$.close()},find:function(e){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(e))},findOne:function(e){return(e=this.$.querySelector(e))?new CKEDITOR.dom.element(e):null},_getHtml5ShivFrag:function(){var e=this.getCustomData("html5ShivFrag");return e||(e=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(e,!0),this.setCustomData("html5ShivFrag",e)),e}}),CKEDITOR.dom.nodeList=function(e){this.$=e},CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(e){return e<0||e>=this.$.length?null:(e=this.$[e])?new CKEDITOR.dom.node(e):null}},CKEDITOR.dom.element=function(e,t){"string"==typeof e&&(e=(t?t.$:document).createElement(e)),CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.element.get=function(e){return(e="string"==typeof e?document.getElementById(e)||document.getElementsByName(e)[0]:e)&&(e.$?e:new CKEDITOR.dom.element(e))},CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node,CKEDITOR.dom.element.createFromHtml=function(e,t){var n=new CKEDITOR.dom.element("div",t);return n.setHtml(e),n.getFirst().remove()},CKEDITOR.dom.element.setMarker=function(e,t,n,i){var o=t.getCustomData("list_marker_id")||t.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),r=t.getCustomData("list_marker_names")||t.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");return e[o]=t,r[n]=1,t.setCustomData(n,i)},CKEDITOR.dom.element.clearAllMarkers=function(e){for(var t in e)CKEDITOR.dom.element.clearMarkers(e,e[t],1)},CKEDITOR.dom.element.clearMarkers=function(e,t,n){var i,o=t.getCustomData("list_marker_names"),r=t.getCustomData("list_marker_id");for(i in o)t.removeCustomData(i);t.removeCustomData("list_marker_names"),n&&(t.removeCustomData("list_marker_id"),delete e[r])},function(){function n(e){var t=!0;return e.$.id||(e.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),t=!1),function(){t||e.removeAttribute("id")}}function i(e,t){return"#"+e.$.id+" "+t.split(/,\s*/).join(", #"+e.$.id+" ")}function o(e){for(var t=0,n=0,i=s[e].length;n<i;n++)t+=parseInt(this.getComputedStyle(s[e][n])||0,10)||0;return t}var e,r,t;CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:function(e){var t=this.$.className;t&&(RegExp("(?:^|\\s)"+e+"(?:\\s|$)","").test(t)||(t=t+" "+e)),this.$.className=t||e},removeClass:function(e){var t=this.getAttribute("class");return t&&(e=RegExp("(?:^|\\s+)"+e+"(?=\\s|$)","i")).test(t)&&((t=t.replace(e,"").replace(/^\s+/,""))?this.setAttribute("class",t):this.removeAttribute("class")),this},hasClass:function(e){return RegExp("(?:^|\\s+)"+e+"(?=\\s|$)","").test(this.getAttribute("class"))},append:function(e,t){return"string"==typeof e&&(e=this.getDocument().createElement(e)),t?this.$.insertBefore(e.$,this.$.firstChild):this.$.appendChild(e.$),e},appendHtml:function(e){if(this.$.childNodes.length){var t=new CKEDITOR.dom.element("div",this.getDocument());t.setHtml(e),t.moveChildren(this)}else this.setHtml(e)},appendText:function(e){null!=this.$.text?this.$.text=this.$.text+e:this.append(new CKEDITOR.dom.text(e))},appendBogus:function(e){if(e||CKEDITOR.env.needsBrFiller||CKEDITOR.env.opera){for(e=this.getLast();e&&e.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(e.getText());)e=e.getPrevious();e&&e.is&&e.is("br")||(e=CKEDITOR.env.opera?this.getDocument().createText(""):this.getDocument().createElement("br"),CKEDITOR.env.gecko&&e.setAttribute("type","_moz"),this.append(e))}},breakParent:function(e){var t=new CKEDITOR.dom.range(this.getDocument());t.setStartAfter(this),t.setEndAfter(e),e=t.extractContents(),t.insertNode(this.remove()),e.insertAfterNode(this)},contains:CKEDITOR.env.ie||CKEDITOR.env.webkit?function(e){var t=this.$;return e.type!=CKEDITOR.NODE_ELEMENT?t.contains(e.getParent().$):t!=e.$&&t.contains(e.$)}:function(e){return!!(16&this.$.compareDocumentPosition(e.$))},focus:function(){function t(){try{this.$.focus()}catch(o){}}return function(e){e?CKEDITOR.tools.setTimeout(t,100,this):t.call(this)}}(),getHtml:function(){var e=this.$.innerHTML;return CKEDITOR.env.ie?e.replace(/<\?[^>]*>/g,""):e},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var e=this.$.ownerDocument.createElement("div");return e.appendChild(this.$.cloneNode(!0)),e.innerHTML},getClientRect:function(){var e=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());return!e.width&&(e.width=e.right-e.left),!e.height&&(e.height=e.bottom-e.top),e},setHtml:CKEDITOR.env.ie&&CKEDITOR.env.version<9?function(e){try{var t=this.$;if(this.getParent())return t.innerHTML=e;var n=this.getDocument()._getHtml5ShivFrag();return n.appendChild(t),t.innerHTML=e,n.removeChild(t),e}catch(i){for(this.$.innerHTML="",(t=new CKEDITOR.dom.element("body",this.getDocument())).$.innerHTML=e,t=t.getChildren();t.count();)this.append(t.getItem(0));return e}}:function(e){return this.$.innerHTML=e},setText:function(e){return CKEDITOR.dom.element.prototype.setText=null!=this.$.innerText?function(e){return this.$.innerText=e}:function(e){return this.$.textContent=e},this.setText(e)},getAttribute:(t=function(e){return this.$.getAttribute(e,2)},CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(e){switch(e){case"class":e="className";break;case"http-equiv":e="httpEquiv";break;case"name":return this.$.name;case"tabindex":return 0!==(e=this.$.getAttribute(e,2))&&0===this.$.tabIndex&&(e=null),e;case"checked":return((e=this.$.attributes.getNamedItem(e)).specified?e.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[e];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(e,2)}:t),getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:CKEDITOR.env.ie?function(e){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(e)]}:function(e){var t=this.getWindow().$.getComputedStyle(this.$,null);return t?t.getPropertyValue(e):""},getDtd:function(){var e=CKEDITOR.dtd[this.getName()];return this.getDtd=function(){return e},e},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:CKEDITOR.env.ie?function(){var e=this.$.tabIndex;return 0===e&&!CKEDITOR.dtd.$tabIndex[this.getName()]&&0!==parseInt(this.getAttribute("tabindex"),10)&&(e=-1),e}:CKEDITOR.env.webkit?function(){var e=this.$.tabIndex;return null==e&&(e=parseInt(this.getAttribute("tabindex"),10),isNaN(e)&&(e=-1)),e}:function(){return this.$.tabIndex},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var e=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&!(8<document.documentMode)){var t=this.$.scopeName;"HTML"!=t&&(e=t.toLowerCase()+":"+e)}return(this.getName=function(){return e})()},getValue:function(){return this.$.value},getFirst:function(e){var t=this.$.firstChild;return(t=t&&new CKEDITOR.dom.node(t))&&e&&!e(t)&&(t=t.getNext(e)),t},getLast:function(e){var t=this.$.lastChild;return(t=t&&new CKEDITOR.dom.node(t))&&e&&!e(t)&&(t=t.getPrevious(e)),t},getStyle:function(e){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(e)]},is:function(e){var t=this.getName();if("object"==typeof e)return!!e[t];for(var n=0;n<arguments.length;n++)if(arguments[n]==t)return!0;return!1},isEditable:function(e){var t=this.getName();return!(this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[t]||CKEDITOR.dtd.$empty[t]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount())&&(!1===e||!(!(e=CKEDITOR.dtd[t]||CKEDITOR.dtd.span)||!e["#"]))},isIdentical:function(e){var t=this.clone(0,1);e=e.clone(0,1);if(t.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),e.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),t.$.isEqualNode)return t.$.style.cssText=CKEDITOR.tools.normalizeCssText(t.$.style.cssText),e.$.style.cssText=CKEDITOR.tools.normalizeCssText(e.$.style.cssText),t.$.isEqualNode(e.$);if(t=t.getOuterHtml(),e=e.getOuterHtml(),CKEDITOR.env.ie&&CKEDITOR.env.version<9&&this.is("a")){var n=this.getParent();n.type==CKEDITOR.NODE_ELEMENT&&((n=n.clone()).setHtml(t),t=n.getHtml(),n.setHtml(e),e=n.getHtml())}return t==e},isVisible:function(){var e,t,n=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility");return n&&(CKEDITOR.env.webkit||CKEDITOR.env.opera)&&!(e=this.getWindow()).equals(CKEDITOR.document.getWindow())&&(t=e.$.frameElement)&&(n=new CKEDITOR.dom.element(t).isVisible()),!!n},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var e=this.getChildren(),t=0,n=e.count();t<n;t++){var i=e.getItem(t);if((i.type!=CKEDITOR.NODE_ELEMENT||!i.data("cke-bookmark"))&&(i.type==CKEDITOR.NODE_ELEMENT&&!i.isEmptyInlineRemoveable()||i.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(i.getText())))return!1}return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(){for(var e=this.$.attributes,t=0;t<e.length;t++){var n=e[t];switch(n.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(n.specified)return!0}}return!1}:function(){var e=this.$.attributes,t=e.length,n={"data-cke-expando":1,_moz_dirty:1};return 0<t&&(2<t||!n[e[0].nodeName]||2==t&&!n[e[1].nodeName])},hasAttribute:function(){function t(e){return!(!(e=this.$.attributes.getNamedItem(e))||!e.specified)}return CKEDITOR.env.ie&&CKEDITOR.env.version<8?function(e){return"name"==e?!!this.$.name:t.call(this,e)}:t}(),hide:function(){this.setStyle("display","none")},moveChildren:function(e,t){var n,i=this.$;if(i!=(e=e.$))if(t)for(;n=i.lastChild;)e.insertBefore(i.removeChild(n),e.firstChild);else for(;n=i.firstChild;)e.appendChild(i.removeChild(n))},mergeSiblings:function(){function t(e,t,n){if(t&&t.type==CKEDITOR.NODE_ELEMENT){for(var i=[];t.data("cke-bookmark")||t.isEmptyInlineRemoveable();)if(i.push(t),!(t=n?t.getNext():t.getPrevious())||t.type!=CKEDITOR.NODE_ELEMENT)return;if(e.isIdentical(t)){for(var o=n?e.getLast():e.getFirst();i.length;)i.shift().move(e,!n);t.moveChildren(e,!n),t.remove(),o&&o.type==CKEDITOR.NODE_ELEMENT&&o.mergeSiblings()}}}return function(e){(!1===e||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))&&(t(this,this.getNext(),!0),t(this,this.getPrevious()))}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:(r=function(e,t){return this.$.setAttribute(e,t),this},CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(e,t){return"class"==e?this.$.className=t:"style"==e?this.$.style.cssText=t:"tabindex"==e?this.$.tabIndex=t:"checked"==e?this.$.checked=t:"contenteditable"==e?r.call(this,"contentEditable",t):r.apply(this,arguments),this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(e,t){if("src"==e&&t.match(/^http:\/\//))try{r.apply(this,arguments)}catch(i){}else r.apply(this,arguments);return this}:r),setAttributes:function(e){for(var t in e)this.setAttribute(t,e[t]);return this},setValue:function(e){return this.$.value=e,this},removeAttribute:(e=function(e){this.$.removeAttribute(e)},CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(e){"class"==e?e="className":"tabindex"==e?e="tabIndex":"contenteditable"==e&&(e="contentEditable"),this.$.removeAttribute(e)}:e),removeAttributes:function(e){if(CKEDITOR.tools.isArray(e))for(var t=0;t<e.length;t++)this.removeAttribute(e[t]);else for(t in e)e.hasOwnProperty(t)&&this.removeAttribute(t)},removeStyle:function(e){if((i=this.$.style).removeProperty||"border"!=e&&"margin"!=e&&"padding"!=e)i.removeProperty?i.removeProperty(e):i.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(e)),this.$.style.cssText||this.removeAttribute("style");else{var t,n=["top","left","right","bottom"];"border"==e&&(t=["color","style","width"]);for(var i=[],o=0;o<n.length;o++)if(t)for(var r=0;r<t.length;r++)i.push([e,n[o],t[r]].join("-"));else i.push([e,n[o]].join("-"));for(e=0;e<i.length;e++)this.removeStyle(i[e])}},setStyle:function(e,t){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(e)]=t,this},setStyles:function(e){for(var t in e)this.setStyle(t,e[t]);return this},setOpacity:function(e){CKEDITOR.env.ie&&CKEDITOR.env.version<9?(e=Math.round(100*e),this.setStyle("filter",100<=e?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+e+")")):this.setStyle("opacity",e)},unselectable:function(){if(this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none")),CKEDITOR.env.ie||CKEDITOR.env.opera){this.setAttribute("unselectable","on");for(var e=this.getElementsByTag("*"),t=0,n=e.count();t<n;t++)e.getItem(t).setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var e=this;"html"!=e.getName();){if("static"!=e.getComputedStyle("position"))return e;e=e.getParent()}return null},getDocumentPosition:function(e){var t=0,n=0,i=this.getDocument(),o=i.getBody(),r="BackCompat"==i.$.compatMode;if(document.documentElement.getBoundingClientRect){var s=this.$.getBoundingClientRect(),a=i.$.documentElement,l=a.clientTop||o.$.clientTop||0,c=a.clientLeft||o.$.clientLeft||0,d=!0;CKEDITOR.env.ie&&(d=i.getDocumentElement().contains(this),i=i.getBody().contains(this),d=r&&i||!r&&d),d&&(t=s.left+(!r&&a.scrollLeft||o.$.scrollLeft),t-=c,n=s.top+(!r&&a.scrollTop||o.$.scrollTop),n-=l)}else for(o=this,i=null;o&&"body"!=o.getName()&&"html"!=o.getName();){for(t+=o.$.offsetLeft-o.$.scrollLeft,n+=o.$.offsetTop-o.$.scrollTop,o.equals(this)||(t+=o.$.clientLeft||0,n+=o.$.clientTop||0);i&&!i.equals(o);)t-=i.$.scrollLeft,n-=i.$.scrollTop,i=i.getParent();o=(s=(i=o).$.offsetParent)?new CKEDITOR.dom.element(s):null}return e&&(o=this.getWindow(),i=e.getWindow(),!o.equals(i)&&o.$.frameElement&&(t+=(e=new CKEDITOR.dom.element(o.$.frameElement).getDocumentPosition(e)).x,n+=e.y)),document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||r||(t+=this.$.clientLeft?1:0,n+=this.$.clientTop?1:0),{x:t,y:n}},scrollIntoView:function(e){var t=this.getParent();if(t)do{if((t.$.clientWidth&&t.$.clientWidth<t.$.scrollWidth||t.$.clientHeight&&t.$.clientHeight<t.$.scrollHeight)&&!t.is("body")&&this.scrollIntoParent(t,e,1),t.is("html")){var n=t.getWindow();try{var i=n.$.frameElement;i&&(t=new CKEDITOR.dom.element(i))}catch(o){}}}while(t=t.getParent())},scrollIntoParent:function(n,e,t){function i(e,t){/body|html/.test(n.getName())?n.getWindow().$.scrollBy(e,t):(n.$.scrollLeft=n.$.scrollLeft+e,n.$.scrollTop=n.$.scrollTop+t)}function o(e,t){var n={x:0,y:0};if(!e.is(d?"body":"html")){var i=e.$.getBoundingClientRect();n.x=i.left,n.y=i.top}return(i=e.getWindow()).equals(t)||(i=o(CKEDITOR.dom.element.get(i.$.frameElement),t),n.x=n.x+i.x,n.y=n.y+i.y),n}function r(e,t){return parseInt(e.getComputedStyle("margin-"+t)||0,10)||0}var s,a,l,c;!n&&(n=this.getWindow());var d="BackCompat"==(l=n.getDocument()).$.compatMode;n instanceof CKEDITOR.dom.window&&(n=d?l.getBody():l.getDocumentElement()),a=o(this,l=n.getWindow());var u=o(n,l),h=this.$.offsetHeight;s=this.$.offsetWidth;var f=n.$.clientHeight,m=n.$.clientWidth;l=a.x-r(this,"left")-u.x||0,c=a.y-r(this,"top")-u.y||0,s=a.x+s+r(this,"right")-(u.x+m)||0,a=a.y+h+r(this,"bottom")-(u.y+f)||0,(c<0||0<a)&&i(0,!0===e?c:!1===e?a:c<0?c:a),t&&(l<0||0<s)&&i(l<0?l:s,0)},setState:function(e,t,n){switch(t=t||"cke",e){case CKEDITOR.TRISTATE_ON:this.addClass(t+"_on"),this.removeClass(t+"_off"),this.removeClass(t+"_disabled"),n&&this.setAttribute("aria-pressed",!0),n&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(t+"_disabled"),this.removeClass(t+"_off"),this.removeClass(t+"_on"),n&&this.setAttribute("aria-disabled",!0),n&&this.removeAttribute("aria-pressed");break;default:this.addClass(t+"_off"),this.removeClass(t+"_on"),this.removeClass(t+"_disabled"),n&&this.removeAttribute("aria-pressed"),n&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var e=this.$;try{e.contentWindow.document}catch(o){e.src=e.src}return e&&new CKEDITOR.dom.document(e.contentWindow.document)},copyAttributes:function(e,t){for(var n=this.$.attributes,i=(t=t||{},0);i<n.length;i++){var o,r=n[i],s=r.nodeName.toLowerCase();s in t||("checked"==s&&(o=this.getAttribute(s))?e.setAttribute(s,o):(r.specified||CKEDITOR.env.ie&&r.nodeValue&&"value"==s)&&(null===(o=this.getAttribute(s))&&(o=r.nodeValue),e.setAttribute(s,o)))}""!==this.$.style.cssText&&(e.$.style.cssText=this.$.style.cssText)},renameNode:function(e){if(this.getName()!=e){var t=this.getDocument();e=new CKEDITOR.dom.element(e,t);this.copyAttributes(e),this.moveChildren(e),this.getParent()&&this.$.parentNode.replaceChild(e.$,this.$),e.$["data-cke-expando"]=this.$["data-cke-expando"],this.$=e.$}},getChild:function(){function n(e,t){var n=e.childNodes;if(0<=t&&t<n.length)return n[t]}return function(e){var t=this.$;if(e.slice)for(;0<e.length&&t;)t=n(t,e.shift());else t=n(t,e);return t?new CKEDITOR.dom.node(t):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){this.on("contextmenu",function(e){e.data.getTarget().hasClass("cke_enable_context_menu")||e.data.preventDefault()})},getDirection:function(e){return e?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(e,t){return e="data-"+e,void 0===t?this.getAttribute(e):(!1===t?this.removeAttribute(e):this.setAttribute(e,t),null)},getEditor:function(){var e,t,n=CKEDITOR.instances;for(e in n)if((t=n[e]).element.equals(this)&&t.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO)return t;return null},find:function(e){var t=n(this);e=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(i(this,e)));return t(),e},findOne:function(e){var t=n(this);e=this.$.querySelector(i(this,e));return t(),e?new CKEDITOR.dom.element(e):null},forEach:function(e,t,n){if(!(n||t&&this.type!=t))var i=e(this);if(!1!==i){n=this.getChildren();for(var o=0;o<n.count();o++)(i=n.getItem(o)).type==CKEDITOR.NODE_ELEMENT?i.forEach(e,t):(!t||i.type==t)&&e(i)}}});var s={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(e,t,n){"number"==typeof t&&(!n||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(t-=o.call(this,e)),this.setStyle(e,t+"px"))},CKEDITOR.dom.element.prototype.getSize=function(e,t){var n=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(e)],this.$["client"+CKEDITOR.tools.capitalize(e)])||0;return t&&(n-=o.call(this,e)),n}}(),CKEDITOR.dom.documentFragment=function(e){e=e||CKEDITOR.document,this.$=e.type==CKEDITOR.NODE_DOCUMENT?e.$.createDocumentFragment():e},CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{
type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(e){(e=e.$).parentNode.insertBefore(this.$,e.nextSibling)}},!0,{append:1,appendBogus:1,getFirst:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),function(){function i(e,t){var n=this.range;if(this._.end)return null;if(!this._.start){if(this._.start=1,n.collapsed)return this.end(),null;n.optimize()}var i,o=n.startContainer;i=n.endContainer;var r,s=n.startOffset,a=n.endOffset,l=this.guard,c=this.type,d=e?"getPreviousSourceNode":"getNextSourceNode";if(!e&&!this._.guardLTR){var u=i.type==CKEDITOR.NODE_ELEMENT?i:i.getParent(),h=i.type==CKEDITOR.NODE_ELEMENT?i.getChild(a):i.getNext();this._.guardLTR=function(e,t){return!(t&&u.equals(e)||h&&e.equals(h)||e.type==CKEDITOR.NODE_ELEMENT&&t&&e.equals(n.root))}}if(e&&!this._.guardRTL){var f=o.type==CKEDITOR.NODE_ELEMENT?o:o.getParent(),m=o.type==CKEDITOR.NODE_ELEMENT?s?o.getChild(s-1):null:o.getPrevious();this._.guardRTL=function(e,t){return!(t&&f.equals(e)||m&&e.equals(m)||e.type==CKEDITOR.NODE_ELEMENT&&t&&e.equals(n.root))}}var p=e?this._.guardRTL:this._.guardLTR;for(r=l?function(e,t){return!1!==p(e,t)&&l(e,t)}:p,this.current?i=this.current[d](!1,c,r):(e?i.type==CKEDITOR.NODE_ELEMENT&&(i=0<a?i.getChild(a-1):!1===r(i,!0)?null:i.getPreviousSourceNode(!0,c,r)):(i=o).type!=CKEDITOR.NODE_ELEMENT||(i=i.getChild(s))||(i=!1===r(o,!0)?null:o.getNextSourceNode(!0,c,r)),i&&!1===r(i)&&(i=null));i&&!this._.end;){if(this.current=i,this.evaluator&&!1===this.evaluator(i)){if(t&&this.evaluator)return!1}else if(!t)return i;i=i[d](!1,c,r)}return this.end(),this.current=null}function e(e){for(var t,n=null;t=i.call(this,e);)n=t;return n}function n(e){if(c(e))return!1;if(e.type==CKEDITOR.NODE_TEXT)return!0;if(e.type==CKEDITOR.NODE_ELEMENT){if(e.is(CKEDITOR.dtd.$inline)||"false"==e.getAttribute("contenteditable"))return!0;var t;if((t=!CKEDITOR.env.needsBrFiller)&&(t=e.is(d)))e:{t=0;for(var n=e.getChildCount();t<n;++t)if(!c(e.getChild(t))){t=!1;break e}t=!0}if(t)return!0}return!1}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(e){this.range=e,this._={}},proto:{end:function(){this._.end=1},next:function(){return i.call(this)},previous:function(){return i.call(this,1)},checkForward:function(){return!1!==i.call(this,0,1)},checkBackward:function(){return!1!==i.call(this,1,1)},lastForward:function(){return e.call(this)},lastBackward:function(){return e.call(this,1)},reset:function(){delete this.current,this._={}}}});var t={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},o={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(e){return!("none"!=this.getComputedStyle("float")||this.getComputedStyle("position")in o||!t[this.getComputedStyle("display")])||!!(this.is(CKEDITOR.dtd.$block)||e&&this.is(e))},CKEDITOR.dom.walker.blockBoundary=function(t){return function(e){return!(e.type==CKEDITOR.NODE_ELEMENT&&e.isBlockBoundary(t))}},CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})},CKEDITOR.dom.walker.bookmark=function(i,o){function r(e){return e&&e.getName&&"span"==e.getName()&&e.data("cke-bookmark")}return function(e){var t,n;return t=e&&e.type!=CKEDITOR.NODE_ELEMENT&&(n=e.getParent())&&r(n),t=i?t:t||r(e),!!(o^t)}},CKEDITOR.dom.walker.whitespaces=function(n){return function(e){var t;return e&&e.type==CKEDITOR.NODE_TEXT&&(t=!CKEDITOR.tools.trim(e.getText())||CKEDITOR.env.webkit&&"\u200b"==e.getText()),!!(n^t)}},CKEDITOR.dom.walker.invisible=function(t){var n=CKEDITOR.dom.walker.whitespaces();return function(e){return e=n(e)?1:(e.type==CKEDITOR.NODE_TEXT&&(e=e.getParent()),!e.$.offsetHeight),!!(t^e)}},CKEDITOR.dom.walker.nodeType=function(t,n){return function(e){return!!(n^e.type==t)}},CKEDITOR.dom.walker.bogus=function(n){function i(e){return!s(e)&&!a(e)}return function(e){var t=CKEDITOR.env.needsBrFiller?e.is&&e.is("br"):e.getText&&r.test(e.getText());return t&&(t=e.getParent(),e=e.getNext(i),t=t.isBlockBoundary()&&(!e||e.type==CKEDITOR.NODE_ELEMENT&&e.isBlockBoundary())),!!(n^t)}},CKEDITOR.dom.walker.temp=function(t){return function(e){return e.type!=CKEDITOR.NODE_ELEMENT&&(e=e.getParent()),e=e&&e.hasAttribute("data-cke-temp"),!!(t^e)}};var r=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,s=CKEDITOR.dom.walker.whitespaces(),a=CKEDITOR.dom.walker.bookmark(),l=CKEDITOR.dom.walker.temp();CKEDITOR.dom.walker.ignored=function(t){return function(e){return e=s(e)||a(e)||l(e),!!(t^e)}};var c=CKEDITOR.dom.walker.ignored(),d=function(e){var t,n={};for(t in e)CKEDITOR.dtd[t]["#"]&&(n[t]=1);return n}(CKEDITOR.dtd.$block);CKEDITOR.dom.walker.editable=function(t){return function(e){return!!(t^n(e))}},CKEDITOR.dom.element.prototype.getBogus=function(){for(var e=this;e=e.getPreviousSourceNode(),a(e)||s(e)||e.type==CKEDITOR.NODE_ELEMENT&&e.is(CKEDITOR.dtd.$inline)&&!e.is(CKEDITOR.dtd.$empty););return!(!e||!(CKEDITOR.env.needsBrFiller?e.is&&e.is("br"):e.getText&&r.test(e.getText())))&&e}}(),CKEDITOR.dom.range=function(e){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null,this.collapsed=!0;var t=e instanceof CKEDITOR.dom.document;this.document=t?e:e.getDocument(),this.root=t?e.getBody():e},function(){function n(){var t=!1,n=CKEDITOR.dom.walker.whitespaces(),i=CKEDITOR.dom.walker.bookmark(!0),o=CKEDITOR.dom.walker.bogus();return function(e){return!(!i(e)&&!n(e))||(o(e)&&!t?t=!0:!(e.type==CKEDITOR.NODE_TEXT&&(e.hasAscendant("pre")||CKEDITOR.tools.trim(e.getText()).length)||e.type==CKEDITOR.NODE_ELEMENT&&!e.is(s)))}}function o(t){var n=CKEDITOR.dom.walker.whitespaces(),i=CKEDITOR.dom.walker.bookmark(1);return function(e){return!(!i(e)&&!n(e))||(!t&&a(e)||e.type==CKEDITOR.NODE_ELEMENT&&e.is(CKEDITOR.dtd.$removeEmpty))}}function e(e){return function(){var t;return this[e?"getPreviousNode":"getNextNode"](function(e){return!t&&d(e)&&(t=e),c(e)&&!(a(e)&&e.equals(t))})}}var i=function(e){e.collapsed=e.startContainer&&e.endContainer&&e.startContainer.equals(e.endContainer)&&e.startOffset==e.endOffset},r=function(e,t,n,i){e.optimizeBookmark();var o,r,s=e.startContainer,a=e.endContainer,l=e.startOffset,c=e.endOffset;a.type==CKEDITOR.NODE_TEXT?a=a.split(c):0<a.getChildCount()&&(c>=a.getChildCount()?(a=a.append(e.document.createText("")),r=!0):a=a.getChild(c)),s.type==CKEDITOR.NODE_TEXT?(s.split(l),s.equals(a)&&(a=s.getNext())):l?l>=s.getChildCount()?(s=s.append(e.document.createText("")),o=!0):s=s.getChild(l).getPrevious():(s=s.append(e.document.createText(""),1),o=!0);var d,u,h;l=s.getParents(),c=a.getParents();for(d=0;d<l.length&&(u=l[d],h=c[d],u.equals(h));d++);for(var f,m,p,g=n,E=d;E<l.length;E++){for(f=l[E],g&&!f.equals(s)&&(m=g.append(f.clone())),f=f.getNext();f&&(!f.equals(c[E])&&!f.equals(a));)p=f.getNext(),2==t?g.append(f.clone(!0)):(f.remove(),1==t&&g.append(f)),f=p;g&&(g=m)}for(g=n,n=d;n<c.length;n++){if(f=c[n],0<t&&!f.equals(a)&&(m=g.append(f.clone())),!l[n]||f.$.parentNode!=l[n].$.parentNode)for(f=f.getPrevious();f&&(!f.equals(l[n])&&!f.equals(s));)p=f.getPrevious(),2==t?g.$.insertBefore(f.$.cloneNode(!0),g.$.firstChild):(f.remove(),1==t&&g.$.insertBefore(f.$,g.$.firstChild)),f=p;g&&(g=m)}2==t?((u=e.startContainer).type==CKEDITOR.NODE_TEXT&&(u.$.data=u.$.data+u.$.nextSibling.data,u.$.parentNode.removeChild(u.$.nextSibling)),(e=e.endContainer).type==CKEDITOR.NODE_TEXT&&e.$.nextSibling&&(e.$.data=e.$.data+e.$.nextSibling.data,e.$.parentNode.removeChild(e.$.nextSibling))):(u&&h&&(s.$.parentNode!=u.$.parentNode||a.$.parentNode!=h.$.parentNode)&&(t=h.getIndex(),o&&h.$.parentNode==s.$.parentNode&&t--,i&&u.type==CKEDITOR.NODE_ELEMENT?((i=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',e.document)).insertAfter(u),u.mergeSiblings(!1),e.moveToBookmark({startNode:i})):e.setStart(h.getParent(),t)),e.collapse(!0)),o&&s.remove(),r&&a.$.parentNode&&a.remove()},s={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},a=CKEDITOR.dom.walker.bogus(),l=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,c=CKEDITOR.dom.walker.editable(),d=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var e=new CKEDITOR.dom.range(this.root);return e.startContainer=this.startContainer,e.startOffset=this.startOffset,e.endContainer=this.endContainer,e.endOffset=this.endOffset,e.collapsed=this.collapsed,e},collapse:function(e){e?(this.endContainer=this.startContainer,this.endOffset=this.startOffset):(this.startContainer=this.endContainer,this.startOffset=this.endOffset),this.collapsed=!0},cloneContents:function(){var e=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||r(this,2,e),e},deleteContents:function(e){this.collapsed||r(this,0,null,e)},extractContents:function(e){var t=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||r(this,1,t,e),t},createBookmark:function(e){var t,n,i,o,r=this.collapsed;return(t=this.document.createElement("span")).data("cke-bookmark",1),t.setStyle("display","none"),t.setHtml("&nbsp;"),e&&(i="cke_bm_"+CKEDITOR.tools.getNextNumber(),t.setAttribute("id",i+(r?"C":"S"))),r||((n=t.clone()).setHtml("&nbsp;"),e&&n.setAttribute("id",i+"E"),(o=this.clone()).collapse(),o.insertNode(n)),(o=this.clone()).collapse(!0),o.insertNode(t),n?(this.setStartAfter(t),this.setEndBefore(n)):this.moveToPosition(t,CKEDITOR.POSITION_AFTER_END),{startNode:e?i+(r?"C":"S"):t,endNode:e?i+"E":n,serializable:e,collapsed:r}},createBookmark2:function(){function o(e){var t,n=e.container,i=e.offset,o=i;if((t=(t=n).type!=CKEDITOR.NODE_ELEMENT||0===o||o==t.getChildCount()?0:t.getChild(o-1).type==CKEDITOR.NODE_TEXT&&t.getChild(o).type==CKEDITOR.NODE_TEXT)&&(i=(n=n.getChild(i-1)).getLength()),n.type==CKEDITOR.NODE_ELEMENT&&1<i&&(i=n.getChild(i-1).getIndex(!0)+1),n.type==CKEDITOR.NODE_TEXT){for(t=n,o=0;(t=t.getPrevious())&&t.type==CKEDITOR.NODE_TEXT;)o+=t.getLength();i+=o}e.container=n,e.offset=i}return function(e){var t=this.collapsed,n={container:this.startContainer,offset:this.startOffset},i={container:this.endContainer,offset:this.endOffset};return e&&(o(n),t||o(i)),{start:n.container.getAddress(e),end:t?null:i.container.getAddress(e),startOffset:n.offset,endOffset:i.offset,normalized:e,collapsed:t,is2:!0}}}(),moveToBookmark:function(e){if(e.is2){var t=this.document.getByAddress(e.start,e.normalized),n=e.startOffset,i=e.end&&this.document.getByAddress(e.end,e.normalized);e=e.endOffset;this.setStart(t,n),i?this.setEnd(i,e):this.collapse(!0)}else t=(n=e.serializable)?this.document.getById(e.startNode):e.startNode,e=n?this.document.getById(e.endNode):e.endNode,this.setStartBefore(t),t.remove(),e?(this.setEndBefore(e),e.remove()):this.collapse(!0)},getBoundaryNodes:function(){var e,t=this.startContainer,n=this.endContainer,i=this.startOffset,o=this.endOffset;if(t.type==CKEDITOR.NODE_ELEMENT)if(i<(e=t.getChildCount()))t=t.getChild(i);else if(e<1)t=t.getPreviousSourceNode();else{for(t=t.$;t.lastChild;)t=t.lastChild;t=(t=new CKEDITOR.dom.node(t)).getNextSourceNode()||t}if(n.type==CKEDITOR.NODE_ELEMENT)if(o<(e=n.getChildCount()))n=n.getChild(o).getPreviousSourceNode(!0);else if(e<1)n=n.getPreviousSourceNode();else{for(n=n.$;n.lastChild;)n=n.lastChild;n=new CKEDITOR.dom.node(n)}return t.getPosition(n)&CKEDITOR.POSITION_FOLLOWING&&(t=n),{startNode:t,endNode:n}},getCommonAncestor:function(e,t){var n=this.startContainer,i=this.endContainer;n=n.equals(i)?e&&n.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?n.getChild(this.startOffset):n:n.getCommonAncestor(i);return t&&!n.is?n.getParent():n},optimize:function(){var e=this.startContainer,t=this.startOffset;e.type!=CKEDITOR.NODE_ELEMENT&&(t?t>=e.getLength()&&this.setStartAfter(e):this.setStartBefore(e)),e=this.endContainer,t=this.endOffset,e.type!=CKEDITOR.NODE_ELEMENT&&(t?t>=e.getLength()&&this.setEndAfter(e):this.setEndBefore(e))},optimizeBookmark:function(){var e=this.startContainer,t=this.endContainer;e.is&&e.is("span")&&e.data("cke-bookmark")&&this.setStartAt(e,CKEDITOR.POSITION_BEFORE_START),t&&t.is&&t.is("span")&&t.data("cke-bookmark")&&this.setEndAt(t,CKEDITOR.POSITION_AFTER_END)},trim:function(e,t){var n=this.startContainer,i=this.startOffset,o=this.collapsed;if((!e||o)&&n&&n.type==CKEDITOR.NODE_TEXT){if(i)if(i>=n.getLength())i=n.getIndex()+1,n=n.getParent();else{var r=n.split(i);i=n.getIndex()+1,n=n.getParent();this.startContainer.equals(this.endContainer)?this.setEnd(r,this.endOffset-this.startOffset):n.equals(this.endContainer)&&(this.endOffset=this.endOffset+1)}else i=n.getIndex(),n=n.getParent();if(this.setStart(n,i),o)return void this.collapse(!0)}n=this.endContainer,i=this.endOffset,t||o||!n||n.type!=CKEDITOR.NODE_TEXT||(i=i?(i>=n.getLength()||n.split(i),n.getIndex()+1):n.getIndex(),n=n.getParent(),this.setEnd(n,i))},enlarge:function(e,t){function n(e){return e&&e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("contenteditable")?null:e}var o=RegExp(/[^\s\ufeff]/);switch(e){case CKEDITOR.ENLARGE_INLINE:var i=1;case CKEDITOR.ENLARGE_ELEMENT:if(this.collapsed)break;var r,s,a,l,c,d,u,h=this.getCommonAncestor(),f=this.root,m=!1;d=this.startContainer;var p=this.startOffset;for(d.type==CKEDITOR.NODE_TEXT?(p&&(m=!!(d=!CKEDITOR.tools.trim(d.substring(0,p)).length&&d)),d&&!(l=d.getPrevious())&&(a=d.getParent())):(p&&(l=d.getChild(p-1)||d.getLast()),l||(a=d)),a=n(a);a||l;){if(a&&!l){if(!c&&a.equals(h)&&(c=!0),i?a.isBlockBoundary():!f.contains(a))break;m&&"inline"==a.getComputedStyle("display")||(m=!1,c?r=a:this.setStartBefore(a)),l=a.getPrevious()}for(;l;)if(d=!1,l.type==CKEDITOR.NODE_COMMENT)l=l.getPrevious();else{if(l.type==CKEDITOR.NODE_TEXT)u=l.getText(),o.test(u)&&(l=null),d=/[\s\ufeff]$/.test(u);else if((0<l.$.offsetWidth||t&&l.is("br"))&&!l.data("cke-bookmark"))if(m&&CKEDITOR.dtd.$removeEmpty[l.getName()]){if(u=l.getText(),o.test(u))l=null;else{p=l.$.getElementsByTagName("*");for(var g,E=0;g=p[E++];)if(!CKEDITOR.dtd.$removeEmpty[g.nodeName.toLowerCase()]){l=null;break}}l&&(d=!!u.length)}else l=null;if(d&&(m?c?r=a:a&&this.setStartBefore(a):m=!0),l){if(d=l.getPrevious(),!a&&!d){a=l,l=null;break}l=d}else a=null}a&&(a=n(a.getParent()))}d=this.endContainer,p=this.endOffset,a=l=null,c=m=!1;var T=function(e,t){var n,i;for((n=new CKEDITOR.dom.range(f)).setStart(e,t),n.setEndAt(f,CKEDITOR.POSITION_BEFORE_END),(n=new CKEDITOR.dom.walker(n)).guard=function(e){return!(e.type==CKEDITOR.NODE_ELEMENT&&e.isBlockBoundary())};i=n.next();){if(i.type!=CKEDITOR.NODE_TEXT)return!1;if(u=i!=e?i.getText():i.substring(t),o.test(u))return!1}return!0};for(d.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(d.substring(p)).length?m=!0:(m=!d.getLength(),p==d.getLength()?(l=d.getNext())||(a=d.getParent()):T(d,p)&&(a=d.getParent())):(l=d.getChild(p))||(a=d);a||l;){if(a&&!l){if(!c&&a.equals(h)&&(c=!0),i?a.isBlockBoundary():!f.contains(a))break;m&&"inline"==a.getComputedStyle("display")||(m=!1,c?s=a:a&&this.setEndAfter(a)),l=a.getNext()}for(;l;){if(d=!1,l.type==CKEDITOR.NODE_TEXT)u=l.getText(),T(l,0)||(l=null),d=/^[\s\ufeff]/.test(u);else if(l.type==CKEDITOR.NODE_ELEMENT){if((0<l.$.offsetWidth||t&&l.is("br"))&&!l.data("cke-bookmark"))if(m&&CKEDITOR.dtd.$removeEmpty[l.getName()]){if(u=l.getText(),o.test(u))l=null;else for(p=l.$.getElementsByTagName("*"),E=0;g=p[E++];)if(!CKEDITOR.dtd.$removeEmpty[g.nodeName.toLowerCase()]){l=null;break}l&&(d=!!u.length)}else l=null}else d=1;if(d&&m&&(c?s=a:this.setEndAfter(a)),l){if(d=l.getNext(),!a&&!d){a=l,l=null;break}l=d}else a=null}a&&(a=n(a.getParent()))}r&&s&&(h=r.contains(s)?s:r,this.setStartBefore(h),this.setEndAfter(h));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:a=new CKEDITOR.dom.range(this.root),f=this.root,a.setStartAt(f,CKEDITOR.POSITION_AFTER_START),a.setEnd(this.startContainer,this.startOffset),a=new CKEDITOR.dom.walker(a);var C,v,I=CKEDITOR.dom.walker.blockBoundary(e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),O=null,b=function(e){if(e.type==CKEDITOR.NODE_ELEMENT&&"false"==e.getAttribute("contenteditable"))if(O){if(O.equals(e))return void(O=null)}else O=e;else if(O)return;var t=I(e);return t||(C=e),t};i=function(e){var t=b(e);return!t&&e.is&&e.is("br")&&(v=e),t};if(a.guard=b,a=a.lastBackward(),C=C||f,this.setStartAt(C,!C.is("br")&&(!a&&this.checkStartOfBlock()||a&&C.contains(a))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END),e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){a=this.clone(),a=new CKEDITOR.dom.walker(a);var D=CKEDITOR.dom.walker.whitespaces(),R=CKEDITOR.dom.walker.bookmark();if(a.evaluator=function(e){return!D(e)&&!R(e)},(a=a.previous())&&a.type==CKEDITOR.NODE_ELEMENT&&a.is("br"))break}(a=this.clone()).collapse(),a.setEndAt(f,CKEDITOR.POSITION_BEFORE_END),(a=new CKEDITOR.dom.walker(a)).guard=e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?i:b,C=null,a=a.lastForward(),C=C||f,this.setEndAt(C,!a&&this.checkEndOfBlock()||a&&C.contains(a)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START),v&&this.setEndAfter(v)}},shrink:function(n,e,i){if(!this.collapsed){n=n||CKEDITOR.SHRINK_TEXT;var t=this.clone(),o=this.startContainer,r=this.endContainer,s=this.startOffset,a=this.endOffset,l=1,c=1;o&&o.type==CKEDITOR.NODE_TEXT&&(s?s>=o.getLength()?t.setStartAfter(o):(t.setStartBefore(o),l=0):t.setStartBefore(o)),r&&r.type==CKEDITOR.NODE_TEXT&&(a?a>=r.getLength()?t.setEndAfter(r):(t.setEndAfter(r),c=0):t.setEndBefore(r));t=new CKEDITOR.dom.walker(t);var d,u=CKEDITOR.dom.walker.bookmark();return t.evaluator=function(e){return e.type==(n==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)},t.guard=function(e,t){return!!u(e)||!(n==CKEDITOR.SHRINK_ELEMENT&&e.type==CKEDITOR.NODE_TEXT||t&&e.equals(d)||!1===i&&e.type==CKEDITOR.NODE_ELEMENT&&e.isBlockBoundary()||e.type==CKEDITOR.NODE_ELEMENT&&e.hasAttribute("contenteditable"))&&(!t&&e.type==CKEDITOR.NODE_ELEMENT&&(d=e),!0)},l&&(o=t[n==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(o,e?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START),c&&(t.reset(),(t=t[n==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(t,e?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END)),!(!l&&!c)}},insertNode:function(e){this.optimizeBookmark(),this.trim(!1,!0);var t=this.startContainer,n=t.getChild(this.startOffset);n?e.insertBefore(n):t.append(e),e.getParent()&&e.getParent().equals(this.endContainer)&&this.endOffset++,this.setStartBefore(e)},moveToPosition:function(e,t){this.setStartAt(e,t),this.collapse(!0)},moveToRange:function(e){this.setStart(e.startContainer,e.startOffset),this.setEnd(e.endContainer,e.endOffset)},selectNodeContents:function(e){this.setStart(e,0),this.setEnd(e,e.type==CKEDITOR.NODE_TEXT?e.getLength():e.getChildCount())},setStart:function(e,t){e.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[e.getName()]&&(t=e.getIndex(),e=e.getParent()),this.startContainer=e,this.startOffset=t,this.endContainer||(this.endContainer=e,this.endOffset=t),i(this)},setEnd:function(e,t){e.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[e.getName()]&&(t=e.getIndex()+1,e=e.getParent()),this.endContainer=e,this.endOffset=t,this.startContainer||(this.startContainer=e,this.startOffset=t),i(this)},setStartAfter:function(e){this.setStart(e.getParent(),e.getIndex()+1)},setStartBefore:function(e){this.setStart(e.getParent(),e.getIndex())},setEndAfter:function(e){this.setEnd(e.getParent(),e.getIndex()+1)},setEndBefore:function(e){this.setEnd(e.getParent(),e.getIndex())},setStartAt:function(e,t){switch(t){case CKEDITOR.POSITION_AFTER_START:this.setStart(e,0);break;case CKEDITOR.POSITION_BEFORE_END:e.type==CKEDITOR.NODE_TEXT?this.setStart(e,e.getLength()):this.setStart(e,e.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(e);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(e)}i(this)},setEndAt:function(e,t){switch(t){case CKEDITOR.POSITION_AFTER_START:this.setEnd(e,0);break;case CKEDITOR.POSITION_BEFORE_END:e.type==CKEDITOR.NODE_TEXT?this.setEnd(e,e.getLength()):this.setEnd(e,e.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(e);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(e)}i(this)},fixBlock:function(e,t){var n=this.createBookmark(),i=this.document.createElement(t);return this.collapse(e),this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),this.extractContents().appendTo(i),i.trim(),i.appendBogus(),this.insertNode(i),this.moveToBookmark(n),i},splitBlock:function(e){var t=new CKEDITOR.dom.elementPath(this.startContainer,this.root),n=new CKEDITOR.dom.elementPath(this.endContainer,this.root),i=t.block,o=n.block,r=null;return t.blockLimit.equals(n.blockLimit)?("br"!=e&&(i||(i=this.fixBlock(!0,e),o=new CKEDITOR.dom.elementPath(this.endContainer,this.root).block),o||(o=this.fixBlock(!1,e))),e=i&&this.checkStartOfBlock(),t=o&&this.checkEndOfBlock(),this.deleteContents(),i&&i.equals(o)&&(t?(r=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(o,CKEDITOR.POSITION_AFTER_END),o=null):e?(r=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(i,CKEDITOR.POSITION_BEFORE_START),i=null):(o=this.splitElement(i),i.is("ul","ol")||i.appendBogus())),{previousBlock:i,nextBlock:o,wasStartOfBlock:e,wasEndOfBlock:t,elementPath:r}):null},splitElement:function(e){if(!this.collapsed)return null;this.setEndAt(e,CKEDITOR.POSITION_BEFORE_END);var t=this.extractContents(),n=e.clone(!1);return t.appendTo(n),n.insertAfter(e),this.moveToPosition(e,CKEDITOR.POSITION_AFTER_END),n},removeEmptyBlocksAtEnd:function(){function r(t){return function(e){return!(n(e)||i(e)||e.type==CKEDITOR.NODE_ELEMENT&&e.isEmptyInlineRemoveable()||t.is("table")&&e.is("caption"))}}var n=CKEDITOR.dom.walker.whitespaces(),i=CKEDITOR.dom.walker.bookmark(!1);return function(e){for(var t,n=this.createBookmark(),i=this[e?"endPath":"startPath"](),o=i.block||i.blockLimit;o&&!o.equals(i.root)&&!o.getFirst(r(o));)t=o.getParent(),this[e?"setEndAt":"setStartAt"](o,CKEDITOR.POSITION_AFTER_END),o.remove(1),o=t;this.moveToBookmark(n)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(e,t){var n=t==CKEDITOR.START,i=this.clone();return i.collapse(n),i[n?"setStartAt":"setEndAt"](e,n?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),(i=new CKEDITOR.dom.walker(i)).evaluator=o(n),i[n?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var e=this.startContainer,t=this.startOffset;return CKEDITOR.env.ie&&t&&e.type==CKEDITOR.NODE_TEXT&&(e=CKEDITOR.tools.ltrim(e.substring(0,t)),l.test(e)&&this.trim(0,1)),this.trim(),e=new CKEDITOR.dom.elementPath(this.startContainer,this.root),(t=this.clone()).collapse(!0),t.setStartAt(e.block||e.blockLimit,CKEDITOR.POSITION_AFTER_START),(e=new CKEDITOR.dom.walker(t)).evaluator=n(),e.checkBackward()},checkEndOfBlock:function(){var e=this.endContainer,t=this.endOffset;return CKEDITOR.env.ie&&e.type==CKEDITOR.NODE_TEXT&&(e=CKEDITOR.tools.rtrim(e.substring(t)),l.test(e)&&this.trim(1,0)),this.trim(),e=new CKEDITOR.dom.elementPath(this.endContainer,this.root),(t=this.clone()).collapse(!1),t.setEndAt(e.block||e.blockLimit,CKEDITOR.POSITION_BEFORE_END),(e=new CKEDITOR.dom.walker(t)).evaluator=n(),e.checkForward()},getPreviousNode:function(e,t,n){var i=this.clone();return i.collapse(1),i.setStartAt(n||this.root,CKEDITOR.POSITION_AFTER_START),(n=new CKEDITOR.dom.walker(i)).evaluator=e,n.guard=t,n.previous()},getNextNode:function(e,t,n){var i=this.clone();return i.collapse(),i.setEndAt(n||this.root,CKEDITOR.POSITION_BEFORE_END),(n=new CKEDITOR.dom.walker(i)).evaluator=e,n.guard=t,n.next()},checkReadOnly:function(){function n(e,t){for(;e;){if(e.type==CKEDITOR.NODE_ELEMENT){if("false"==e.getAttribute("contentEditable")&&!e.data("cke-editable"))return 0;if(e.is("html")||"true"==e.getAttribute("contentEditable")&&(e.contains(t)||e.equals(t)))break}e=e.getParent()}return 1}return function(){var e=this.startContainer,t=this.endContainer;return!(n(e,t)&&n(t,e))}}(),moveToElementEditablePosition:function(e,t){if(e.type==CKEDITOR.NODE_ELEMENT&&!e.isEditable(!1))return this.moveToPosition(e,t?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var n=0;e;){if(e.type==CKEDITOR.NODE_TEXT){t&&this.endContainer&&this.checkEndOfBlock()&&l.test(e.getText())?this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(e,t?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),n=1;break}if(e.type==CKEDITOR.NODE_ELEMENT)if(e.isEditable())this.moveToPosition(e,t?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),n=1;else if(t&&e.is("br")&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START);else if("false"==e.getAttribute("contenteditable")&&e.is(CKEDITOR.dtd.$block))return this.setStartBefore(e),this.setEndAfter(e),!0;var i=e,o=n,r=void 0;i.type==CKEDITOR.NODE_ELEMENT&&i.isEditable(!1)&&(r=i[t?"getLast":"getFirst"](d)),!o&&!r&&(r=i[t?"getPrevious":"getNext"](d)),e=r}return!!n},moveToClosestEditablePosition:function(e,t){var n,i=new CKEDITOR.dom.range(this.root),o=0,r=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];return i.moveToPosition(e,r[t?0:1]),e.is(CKEDITOR.dtd.$block)?(n=i[t?"getNextEditableNode":"getPreviousEditableNode"]())&&(o=1,n.type==CKEDITOR.NODE_ELEMENT&&n.is(CKEDITOR.dtd.$block)&&"false"==n.getAttribute("contenteditable")?(i.setStartAt(n,CKEDITOR.POSITION_BEFORE_START),i.setEndAt(n,CKEDITOR.POSITION_AFTER_END)):i.moveToPosition(n,r[t?1:0])):o=1,o&&this.moveToRange(i),!!o},moveToElementEditStart:function(e){return this.moveToElementEditablePosition(e)},moveToElementEditEnd:function(e){return this.moveToElementEditablePosition(e,!0)},getEnclosedNode:function(){if((e=this.clone()).optimize(),e.startContainer.type!=CKEDITOR.NODE_ELEMENT||e.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var e=new CKEDITOR.dom.walker(e),t=CKEDITOR.dom.walker.bookmark(!1,!0),n=CKEDITOR.dom.walker.whitespaces(!0);e.evaluator=function(e){return n(e)&&t(e)};var i=e.next();return e.reset(),i&&i.equals(e.previous())?i:null},getTouchedStartNode:function(){var e=this.startContainer;return this.collapsed||e.type!=CKEDITOR.NODE_ELEMENT?e:e.getChild(this.startOffset)||e},getTouchedEndNode:function(){var e=this.endContainer;return this.collapsed||e.type!=CKEDITOR.NODE_ELEMENT?e:e.getChild(this.endOffset-1)||e},getNextEditableNode:e(),getPreviousEditableNode:e(1),scrollIntoView:function(){var e,t,n,i=new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",this.document),o=this.clone();o.optimize(),(n=o.startContainer.type==CKEDITOR.NODE_TEXT)?(t=o.startContainer.getText(),e=o.startContainer.split(o.startOffset),i.insertAfter(o.startContainer)):o.insertNode(i),i.scrollIntoView(),n&&(o.startContainer.setText(t),e.remove()),i.remove()}}}(),CKEDITOR.POSITION_AFTER_START=1,CKEDITOR.POSITION_BEFORE_END=2,CKEDITOR.POSITION_BEFORE_START=3,CKEDITOR.POSITION_AFTER_END=4,CKEDITOR.ENLARGE_ELEMENT=1,CKEDITOR.ENLARGE_BLOCK_CONTENTS=2,CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3,CKEDITOR.ENLARGE_INLINE=4,CKEDITOR.START=1,CKEDITOR.END=2,CKEDITOR.SHRINK_ELEMENT=1,CKEDITOR.SHRINK_TEXT=2,function(){function e(e){arguments.length<1||(this.range=e,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function f(e,t,n){for(e=e.getNextSourceNode(t,null,n);!g(e);)e=e.getNextSourceNode(t,null,n);return e}function r(e){var t=[];return e.forEach(function(e){if("true"==e.getAttribute("contenteditable"))return t.push(e),!1},CKEDITOR.NODE_ELEMENT,!0),t}function m(e,t,n,i){e:{null==i&&(i=r(n));for(var o;o=i.shift();)if(o.getDtd().p){i={element:o,remaining:i};break e}i=null}return i?(o=CKEDITOR.filter.instances[i.element.data("cke-filter")])&&!o.check(t)?m(e,t,n,i.remaining):((t=new CKEDITOR.dom.range(i.element)).selectNodeContents(i.element),(t=t.createIterator()).enlargeBr=e.enlargeBr,t.enforceRealBlocks=e.enforceRealBlocks,t.activeFilter=t.filter=o,e._.nestedEditable={element:i.element,container:n,remaining:i.remaining,iterator:t},1):0}var p=/^[\r\n\t ]+$/,g=CKEDITOR.dom.walker.bookmark(!1,!0),t=CKEDITOR.dom.walker.whitespaces(!0),E=function(e){return g(e)&&t(e)};e.prototype={getNextParagraph:function(e){var t,n,i,o,r;e=e||"p";if(this._.nestedEditable){if(t=this._.nestedEditable.iterator.getNextParagraph(e))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,t;if(this.activeFilter=this.filter,m(this,e,this._.nestedEditable.container,this._.nestedEditable.remaining))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(e);this._.nestedEditable=null}if(!this.range.root.getDtd()[e])return null;if(!this._.started){var s=this.range.clone();if(s.shrink(CKEDITOR.SHRINK_ELEMENT,!0),n=s.endContainer.hasAscendant("pre",!0)||s.startContainer.hasAscendant("pre",!0),s.enlarge(this.forceBrBreak&&!n||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS),!s.collapsed){n=new CKEDITOR.dom.walker(s.clone());var a=CKEDITOR.dom.walker.bookmark(!0,!0);n.evaluator=a,this._.nextNode=n.next(),(n=new CKEDITOR.dom.walker(s.clone())).evaluator=a,n=n.previous(),this._.lastNode=n.getNextSourceNode(!0),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&((a=this.range.clone()).moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),a.checkEndOfBlock()&&(a=new CKEDITOR.dom.elementPath(a.endContainer,a.root),this._.lastNode=(a.block||a.blockLimit).getNextSourceNode(!0))),this._.lastNode&&s.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=s.document.createText(""),this._.lastNode.insertAfter(n)),s=null}this._.started=1,n=s}for(a=this._.nextNode,s=this._.lastNode,this._.nextNode=null;a;){var l=0,c=a.hasAscendant("pre"),d=a.type!=CKEDITOR.NODE_ELEMENT,u=0;if(d)a.type==CKEDITOR.NODE_TEXT&&p.test(a.getText())&&(d=0);else{var h=a.getName();if(CKEDITOR.dtd.$block[h]&&"false"==a.getAttribute("contenteditable")){m(this,e,t=a);break}if(a.isBlockBoundary(this.forceBrBreak&&!c&&{br:1})){if("br"==h)d=1;else if(!n&&!a.getChildCount()&&"hr"!=h){i=(t=a).equals(s);break}n&&(n.setEndAt(a,CKEDITOR.POSITION_BEFORE_START),"br"!=h&&(this._.nextNode=a)),l=1}else{if(a.getFirst()){n||(n=this.range.clone()).setStartAt(a,CKEDITOR.POSITION_BEFORE_START),a=a.getFirst();continue}d=1}}if(d&&!n&&(n=this.range.clone()).setStartAt(a,CKEDITOR.POSITION_BEFORE_START),i=(!l||d)&&a.equals(s),n&&!l)for(;!a.getNext(E)&&!i;){if((h=a.getParent()).isBlockBoundary(this.forceBrBreak&&!c&&{br:1})){l=1,d=0,i||h.equals(s),n.setEndAt(h,CKEDITOR.POSITION_BEFORE_END);break}d=1,i=(a=h).equals(s),u=1}if(d&&n.setEndAt(a,CKEDITOR.POSITION_AFTER_END),(i=!(a=f(a,u,s)))||l&&n)break}if(!t){if(!n)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;a=(t=new CKEDITOR.dom.elementPath(n.startContainer,n.root)).blockLimit,l={div:1,th:1,td:1},!(t=t.block)&&a&&!this.enforceRealBlocks&&l[a.getName()]&&n.checkStartOfBlock()&&n.checkEndOfBlock()&&!a.equals(n.root)?t=a:!t||this.enforceRealBlocks&&"li"==t.getName()?(t=this.range.document.createElement(e),n.extractContents().appendTo(t),t.trim(),n.insertNode(t),o=r=!0):"li"!=t.getName()?n.checkStartOfBlock()&&n.checkEndOfBlock()||(t=t.clone(!1),n.extractContents().appendTo(t),t.trim(),o=!(r=n.splitBlock()).wasStartOfBlock,r=!r.wasEndOfBlock,n.insertNode(t)):i||(this._.nextNode=t.equals(s)?null:f(n.getBoundaryNodes().endNode,1,s))}return o&&(o=t.getPrevious())&&o.type==CKEDITOR.NODE_ELEMENT&&("br"==o.getName()?o.remove():o.getLast()&&"br"==o.getLast().$.nodeName.toLowerCase()&&o.getLast().remove()),r&&(o=t.getLast())&&o.type==CKEDITOR.NODE_ELEMENT&&"br"==o.getName()&&(!CKEDITOR.env.needsBrFiller||o.getPrevious(g)||o.getNext(g))&&o.remove(),this._.nextNode||(this._.nextNode=i||t.equals(s)||!s?null:f(t,1,s)),t}},CKEDITOR.dom.range.prototype.createIterator=function(){return new e(this)}}(),CKEDITOR.command=function(t,n){var i;this.uiItems=[],this.exec=function(e){return!(this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed())&&(this.editorFocus&&t.focus(),!1===this.fire("exec")||!1!==n.exec.call(this,t,e))},this.refresh=function(e,t){return!(this.readOnly||!e.readOnly)||(this.context&&!t.isContextFor(this.context)?(this.disable(),!0):this.checkAllowed(!0)?(this.startDisabled||this.enable(),this.modes&&!this.modes[e.mode]&&this.disable(),!1===this.fire("refresh",{editor:e,path:t})||n.refresh&&!1!==n.refresh.apply(this,arguments)):(this.disable(),!0))},
this.checkAllowed=function(e){return e||"boolean"!=typeof i?i=t.activeFilter.checkFeature(this):i},CKEDITOR.tools.extend(this,n,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!n.context,state:CKEDITOR.TRISTATE_DISABLED}),CKEDITOR.event.call(this)},CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&"undefined"!=typeof this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(e){return!(this.state==e||e!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed())&&(this.previousState=this.state,this.state=e,this.fire("state"),!0)},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.event.implementOn(CKEDITOR.command.prototype),CKEDITOR.ENTER_P=1,CKEDITOR.ENTER_BR=2,CKEDITOR.ENTER_DIV=3,CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"<!DOCTYPE html>",bodyId:"",bodyClass:"",fullPage:!1,height:200,extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1e4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85,CKEDITOR.CTRL+89,CKEDITOR.CTRL+90,CKEDITOR.CTRL+CKEDITOR.SHIFT+90]},function(){function O(e,t,n,i,o){var r=t.name;if((i||"function"!=typeof e.elements||e.elements(r))&&(!e.match||e.match(t))){if(i=!o){e:if(e.nothingRequired)i=!0;else{if(o=e.requiredClasses)for(r=t.classes,i=0;i<o.length;++i)if(-1==CKEDITOR.tools.indexOf(r,o[i])){i=!1;break e}i=l(t.styles,e.requiredStyles)&&l(t.attributes,e.requiredAttributes)}i=!i}if(!i&&(e.propertiesOnly||(n.valid=!0),n.allAttributes||(n.allAttributes=a(e.attributes,t.attributes,n.validAttributes)),n.allStyles||(n.allStyles=a(e.styles,t.styles,n.validStyles)),!n.allClasses)){if(e=e.classes,t=t.classes,i=n.validClasses,e)if(!0===e)t=!0;else{var s;for(o=0,r=t.length;o<r;++o)i[s=t[o]]||(i[s]=e(s));t=!1}else t=!1;n.allClasses=t}}}function a(e,t,n){if(!e)return!1;if(!0===e)return!0;for(var i in t)n[i]||(n[i]=e(i,t[i]));return!1}function g(e,t){if(!e)return!1;if(!0===e)return e;if("string"==typeof e)return"*"==(e=_(e))||CKEDITOR.tools.convertArrayToObject(e.split(t));if(CKEDITOR.tools.isArray(e))return!!e.length&&CKEDITOR.tools.convertArrayToObject(e);var n,i={},o=0;for(n in e)i[n]=e[n],o++;return!!o&&i}function f(C){if(C._.filterFunction)return C._.filterFunction;var v=/^cke:(object|embed|param)$/,I=/^(object|embed|param)$/;return C._.filterFunction=function(e,t,n,i,o,r,s){var a,l=e.name,c=!1;if(o&&(e.name=l=l.replace(v,"$1")),n=n&&n[l]){for(b(e),l=0;l<n.length;++l)y(C,e,n[l]);D(e)}if(t){l=e.name,n=t.elements[l];var d=t.generic;t={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1};if(!n&&!d)return i.push(e),!0;if(b(e),n)for(l=0,a=n.length;l<a;++l)O(n[l],e,t,!0,r);if(d)for(l=0,a=d.length;l<a;++l)O(d[l],e,t,!1,r);if(!t.valid)return i.push(e),!0;r=t.validAttributes,l=t.validStyles,n=t.validClasses,a=e.attributes;d=e.styles;var u,h,f=a["class"],m=a.style,p=[],g=[],E=/^data-cke-/,T=!1;if(delete a.style,delete a["class"],!t.allAttributes)for(u in a)r[u]||E.test(u)&&(u==(h=u.replace(/^data-cke-saved-/,""))||r[h])||(delete a[u],T=!0);if(t.allStyles)m&&(a.style=m);else{for(u in d)l[u]?p.push(u+":"+d[u]):T=!0;p.length&&(a.style=p.sort().join("; "))}if(t.allClasses)f&&(a["class"]=f);else{for(u in n)n[u]&&g.push(u);g.length&&(a["class"]=g.sort().join(" ")),f&&g.length<f.split(/\s+/).length&&(T=!0)}if(T&&(c=!0),!s&&!R(e))return i.push(e),!0}return o&&(e.name=e.name.replace(I,"cke:$1")),c}}function l(e,t){if(!t)return!0;for(var n=0;n<t.length;++n)if(!(t[n]in e))return!1;return!0}function c(e){if(!e)return{};e=e.split(/\s*,\s*/).sort();for(var t={};e.length;)t[e.shift()]=K;return t}function E(e){var t,n,i,o,r={},s=1;for(e=_(e);t=e.match(x);)(n=t[2])?(i=d(n,"styles"),o=d(n,"attrs"),n=d(n,"classes")):i=o=n=null,r["$"+s++]={elements:t[1],classes:n,styles:i,attributes:o},e=e.slice(t[0].length);return r}function d(e,t){var n=e.match(i[t]);return n?_(n[1]):null}function b(e){e.styles||(e.styles=CKEDITOR.tools.parseCssText(e.attributes.style||"",1)),e.classes||(e.classes=e.attributes["class"]?e.attributes["class"].split(/\s+/):[])}function D(e){var t,n=e.attributes;delete n.style,delete n["class"],(t=CKEDITOR.tools.writeCssText(e.styles,!0))&&(n.style=t),e.classes.length&&(n["class"]=e.classes.sort().join(" "))}function R(e){switch(e.name){case"a":if(!e.children.length&&!e.attributes.name)return!1;break;case"img":if(!e.attributes.src)return!1}return!0}function T(t){return!!t&&(!0===t||function(e){return e in t})}function u(){return new CKEDITOR.htmlParser.element("br")}function h(e){return e.type==CKEDITOR.NODE_ELEMENT&&("br"==e.name||v.$block[e.name])}function o(e,t,n){var i=e.name;if(v.$empty[i]||!e.children.length)"hr"==i&&"br"==t?e.replaceWith(u()):(e.parent&&n.push({check:"it",el:e.parent}),e.remove());else if(v.$block[i]||"tr"==i)if("br"==t)e.previous&&!h(e.previous)&&(t=u()).insertBefore(e),e.next&&!h(e.next)&&(t=u()).insertAfter(e),e.replaceWithChildren();else{var o;i=e.children;e:{o=v[t];for(var r,s=0,a=i.length;s<a;++s)if((r=i[s]).type==CKEDITOR.NODE_ELEMENT&&!o[r.name]){o=!1;break e}o=!0}if(o)e.name=t,e.attributes={},n.push({check:"parent-down",el:e});else{var l;for(s=(o=e.parent).type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==o.name,a=i.length;0<a;)r=i[--a],s&&(r.type==CKEDITOR.NODE_TEXT||r.type==CKEDITOR.NODE_ELEMENT&&v.$inline[r.name])?(l||((l=new CKEDITOR.htmlParser.element(t)).insertAfter(e),n.push({check:"parent-down",el:l})),l.add(r,0)):(l=null,r.insertAfter(e),o.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&r.type==CKEDITOR.NODE_ELEMENT&&!v[o.name][r.name]&&n.push({check:"el-up",el:r}));e.remove()}}else"style"==i?e.remove():(e.parent&&n.push({check:"it",el:e.parent}),e.replaceWithChildren())}function y(e,t,n){var i,o;for(i=0;i<n.length;++i)if((!(o=n[i]).check||e.check(o.check,!1))&&(!o.left||o.left(t))){o.right(t,S);break}}function n(e,t){var n,i,o,r,s=t.getDefinition(),a=s.attributes,l=s.styles;if(e.name!=s.element)return!1;for(n in a)if("class"==n){for(s=a[n].split(/\s+/),o=e.classes.join("|");r=s.pop();)if(-1==o.indexOf(r))return!1}else if(e.attributes[n]!=a[n])return!1;for(i in l)if(e.styles[i]!=l[i])return!1;return!0}function r(e,n){var t,i;return"string"==typeof e?t=e:i=e instanceof CKEDITOR.style?e:(t=e[0],e[1]),[{element:t,left:i,right:function(e,t){t.transform(e,n)}}]}function m(t){return function(e){return n(e,t)}}function p(n){return function(e,t){t[n](e)}}var s,C,v=CKEDITOR.dtd,I=CKEDITOR.tools.copy,_=CKEDITOR.tools.trim,K="cke-test",w=["","p","br","div"];CKEDITOR.filter=function(e){if(this.allowedContent=[],this.disabled=!1,this.editor=null,this.id=CKEDITOR.tools.getNextNumber(),this._={rules:{},transformations:{},cachedTests:{}},CKEDITOR.filter.instances[this.id]=this,e instanceof CKEDITOR.editor){e=this.editor=e,this.customConfig=!0;var t=e.config.allowedContent;!0===t?this.disabled=!0:(t||(this.customConfig=!1),this.allow(t,"config",1),this.allow(e.config.extraAllowedContent,"extra",1),this.allow(w[e.enterMode]+" "+w[e.shiftEnterMode],"default",1))}else this.customConfig=!1,this.allow(e,"default",1)},CKEDITOR.filter.instances={},CKEDITOR.filter.prototype={allow:function(e,t,n){if(this.disabled||this.customConfig&&!n||!e)return!1;var i,o;if(this._.cachedChecks={},"string"==typeof e)e=E(e);else if(e instanceof CKEDITOR.style)n={},e=(o=e.getDefinition()).attributes,n[o.element]=o={styles:o.styles,requiredStyles:o.styles&&CKEDITOR.tools.objectKeys(o.styles)},e&&(e=I(e),o.classes=e["class"]?e["class"].split(/\s+/):null,o.requiredClasses=o.classes,delete e["class"],o.attributes=e,o.requiredAttributes=e&&CKEDITOR.tools.objectKeys(e)),e=n;else if(CKEDITOR.tools.isArray(e)){for(i=0;i<e.length;++i)o=this.allow(e[i],t,n);return o}var r;n=[];for(r in e){o="boolean"==typeof(o=e[r])?{}:"function"==typeof o?{match:o}:I(o),"$"!=r.charAt(0)&&(o.elements=r),t&&(o.featureName=t.toLowerCase());var s=o;s.elements=g(s.elements,/\s+/)||null,s.propertiesOnly=s.propertiesOnly||!0===s.elements;var a=/\s*,\s*/,l=void 0;for(l in k){s[l]=g(s[l],a)||null;var c=s,d=N[l],u=g(s[N[l]],a),h=s[l],f=[],m=!0,p=void 0;for(p in u?m=!1:u={},h)"!"==p.charAt(0)&&(p=p.slice(1),f.push(p),m=!(u[p]=!0));for(;p=f.pop();)h[p]=h["!"+p],delete h["!"+p];c[d]=!m&&u||null}s.match=s.match||null,this.allowedContent.push(o),n.push(o)}for(r=(t=this._.rules).elements||{},e=t.generic||[],o=0,s=n.length;o<s;++o){for(d in l=!0===(a=I(n[o])).classes||!0===a.styles||!0===a.attributes,c=a,d=void 0,k)c[d]=T(c[d]);for(d in u=!0,N)c[d=N[d]]=CKEDITOR.tools.objectKeys(c[d]),c[d]&&(u=!1);if(c.nothingRequired=u,!0===a.elements||null===a.elements)a.elements=T(a.elements),e[l?"unshift":"push"](a);else for(i in c=a.elements,delete a.elements,c)r[i]?r[i][l?"unshift":"push"](a):r[i]=[a]}return t.elements=r,t.generic=e.length?e:null,!0},applyTo:function(e,s,t,n){if(this.disabled)return!1;var a=[],l=!t&&this._.rules,c=this._.transformations,d=f(this),u=this.editor&&this.editor.config.protectedSource,h=!1;e.forEach(function(e){if(e.type==CKEDITOR.NODE_ELEMENT){if("off"==e.attributes["data-cke-filter"])return!1;s&&"span"==e.name&&~CKEDITOR.tools.objectKeys(e.attributes).join("|").indexOf("data-cke-")||d(e,l,c,a,s)&&(h=!0)}else if(e.type==CKEDITOR.NODE_COMMENT&&e.value.match(/^\{cke_protected\}(?!\{C\})/)){var t;e:{var n,i,o,r=decodeURIComponent(e.value.replace(/^\{cke_protected\}/,""));if(t=[],u)for(i=0;i<u.length;++i)if((o=r.match(u[i]))&&o[0].length==r.length){t=!0;break e}1==(r=CKEDITOR.htmlParser.fragment.fromHtml(r)).children.length&&(n=r.children[0]).type==CKEDITOR.NODE_ELEMENT&&d(n,l,c,t,s),t=!t.length}t||a.push(e)}},null,!0),a.length&&(h=!0);var i;for(e=[],n=w[n||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];t=a.pop();)t.type==CKEDITOR.NODE_ELEMENT?o(t,n,e):t.remove();for(;i=e.pop();)if((t=i.el).parent)switch(i.check){case"it":v.$removeEmpty[t.name]&&!t.children.length?o(t,n,e):R(t)||o(t,n,e);break;case"el-up":t.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&!v[t.parent.name][t.name]&&o(t,n,e);break;case"parent-down":t.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&!v[t.parent.name][t.name]&&o(t.parent,n,e)}return h},checkFeature:function(e){return!(!this.disabled&&e)||(e.toFeature&&(e=e.toFeature(this.editor)),!e.requiredContent||this.check(e.requiredContent))},disable:function(){this.disabled=!0},addContentForms:function(e){if(!this.disabled&&e){var t,n,i,o=[];for(t=0;t<e.length&&!i;++t)("string"==typeof(n=e[t])||n instanceof CKEDITOR.style)&&this.check(n)&&(i=n);if(i){for(t=0;t<e.length;++t)o.push(r(e[t],i));this.addTransformations(o)}}},addFeature:function(e){return!(!this.disabled&&e)||(e.toFeature&&(e=e.toFeature(this.editor)),this.allow(e.allowedContent,e.name),this.addTransformations(e.contentTransformations),this.addContentForms(e.contentForms),!this.customConfig||!e.requiredContent||this.check(e.requiredContent))},addTransformations:function(e){var t,n;if(!this.disabled&&e){var i,o=this._.transformations;for(i=0;i<e.length;++i){t=e[i];var r=void 0,s=void 0,a=void 0,l=void 0,c=void 0,d=void 0;for(n=[],s=0;s<t.length;++s)d="string"==typeof(a=t[s])?(l=(a=a.split(/\s*:\s*/))[0],c=null,a[1]):(l=a.check,c=a.left,a.right),r||(r=(r=a).element?r.element:l?l.match(/^([a-z0-9]+)/i)[0]:r.left.getDefinition().element),c instanceof CKEDITOR.style&&(c=m(c)),n.push({check:l==r?null:l,left:c,right:"string"==typeof d?p(d):d});o[t=r]||(o[t]=[]),o[t].push(n)}}},check:function(e,t,n){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(e)){for(var i=e.length;i--;)if(this.check(e[i],t,n))return!0;return!1}var o,r;if("string"==typeof e){if((r=e+"<"+(!1===t?"0":"1")+(n?"1":"0")+">")in this._.cachedChecks)return this._.cachedChecks[r];o=(i=E(e).$1).styles;var s=i.classes;i.name=i.elements,i.classes=s=s?s.split(/\s*,\s*/):[],i.styles=c(o),i.attributes=c(i.attributes),i.children=[],s.length&&(i.attributes["class"]=s.join(" ")),o&&(i.attributes.style=CKEDITOR.tools.writeCssText(i.styles)),o=i}else o=(i=e.getDefinition()).styles,s=i.attributes||{},o?(o=I(o),s.style=CKEDITOR.tools.writeCssText(o,!0)):o={},o={name:i.element,attributes:s,classes:s["class"]?s["class"].split(/\s+/):[],styles:o,children:[]};s=CKEDITOR.tools.clone(o);var a,l=[];if(!1!==t&&(a=this._.transformations[o.name])){for(i=0;i<a.length;++i)y(this,o,a[i]);D(o)}return f(this)(s,this._.rules,!1!==t&&this._.transformations,l,!1,!n,!n),t=!(0<l.length)&&!!CKEDITOR.tools.objectCompare(o.attributes,s.attributes,!0),"string"==typeof e&&(this._.cachedChecks[r]=t),t},getAllowedEnterMode:(s=["p","div","br"],C={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR},function(e,t){var n,i=s.slice();if(this.check(w[e]))return e;for(t||(i=i.reverse());n=i.pop();)if(this.check(n))return C[n];return CKEDITOR.ENTER_BR})};var k={styles:1,attributes:1,classes:1},N={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},x=/^([a-z0-9*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,i={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},S=CKEDITOR.filter.transformationsTools={sizeToStyle:function(e){this.lengthToStyle(e,"width"),this.lengthToStyle(e,"height")},sizeToAttribute:function(e){this.lengthToAttribute(e,"width"),this.lengthToAttribute(e,"height")},lengthToStyle:function(e,t,n){if(!((n=n||t)in e.styles)){var i=e.attributes[t];i&&(/^\d+$/.test(i)&&(i+="px"),e.styles[n]=i)}delete e.attributes[t]},lengthToAttribute:function(e,t,n){if(!((n=n||t)in e.attributes)){var i=e.styles[t],o=i&&i.match(/^(\d+)(?:\.\d*)?px$/);o?e.attributes[n]=o[1]:i==K&&(e.attributes[n]=K)}delete e.styles[t]},alignmentToStyle:function(e){if(!("float"in e.styles)){var t=e.attributes.align;"left"!=t&&"right"!=t||(e.styles["float"]=t)}delete e.attributes.align},alignmentToAttribute:function(e){if(!("align"in e.attributes)){var t=e.styles["float"];"left"!=t&&"right"!=t||(e.attributes.align=t)}delete e.styles["float"]},matchesStyle:n,transform:function(e,t){if("string"==typeof t)e.name=t;else{var n,i,o,r,s=t.getDefinition(),a=s.styles,l=s.attributes;for(n in e.name=s.element,l)if("class"==n)for(s=e.classes.join("|"),o=l[n].split(/\s+/);r=o.pop();)-1==s.indexOf(r)&&e.classes.push(r);else e.attributes[n]=l[n];for(i in a)e.styles[i]=a[i]}}}}(),CKEDITOR.focusManager=function(e){return e.focusManager?e.focusManager:(this.hasFocus=!1,this.currentActive=null,this._={editor:e},this)},CKEDITOR.focusManager._={blurDelay:200},CKEDITOR.focusManager.prototype={focus:function(e){this._.timer&&clearTimeout(this._.timer),e&&(this.currentActive=e),this.hasFocus||this._.locked||((e=CKEDITOR.currentInstance)&&e.focusManager.blur(1),this.hasFocus=!0,(e=this._.editor.container)&&e.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(e){function t(){if(this.hasFocus){this.hasFocus=!1;var e=this._.editor.container;e&&e.removeClass("cke_focus"),this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var n=CKEDITOR.focusManager._.blurDelay;e||!n?t.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer,t.call(this)},n,this)}},add:function(e,t){if(!(n=e.getCustomData("focusmanager"))||n!=this){n&&n.remove(e);var n="focus",i="blur";t&&(CKEDITOR.env.ie?(n="focusin",i="focusout"):CKEDITOR.event.useCapture=1);var o={blur:function(){e.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(e)}};e.on(n,o.focus,this),e.on(i,o.blur,this),t&&(CKEDITOR.event.useCapture=0),e.setCustomData("focusmanager",this),e.setCustomData("focusmanager_handlers",o)}},remove:function(e){e.removeCustomData("focusmanager");var t=e.removeCustomData("focusmanager_handlers");e.removeListener("blur",t.blur),e.removeListener("focus",t.focus)}},CKEDITOR.keystrokeHandler=function(e){return e.keystrokeHandler?e.keystrokeHandler:(this.keystrokes={},this.blockedKeystrokes={},this._={editor:e},this)},D=function(e){var t=(e=e.data).getKeystroke(),n=this.keystrokes[t],i=this._.editor;return(b=!1===i.fire("key",{keyCode:t}))||(n&&(b=!1!==i.execCommand(n,{from:"keystrokeHandler"})),b||(b=!!this.blockedKeystrokes[t])),b&&e.preventDefault(!0),!b},R=function(e){b&&(b=!1,e.data.preventDefault(!0))},CKEDITOR.keystrokeHandler.prototype={attach:function(e){e.on("keydown",D,this),(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)&&e.on("keypress",R,this)}},CKEDITOR.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(e,t,n){e&&CKEDITOR.lang.languages[e]||(e=this.detect(t,e)),this[e]?n(e,this[e]):CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+e+".js"),function(){this[e].dir=this.rtl[e]?"rtl":"ltr",n(e,this[e])},this)},detect:function(e,t){var n=this.languages,i=(o=(t=t||navigator.userLanguage||navigator.language||e).toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/))[1],o=o[2];return n[i+"-"+o]?i=i+"-"+o:n[i]||(i=null),CKEDITOR.lang.detect=i?function(){return i}:function(e){return e},i||e}},CKEDITOR.scriptLoader=(y={},_={},{load:function(e,i,t,n){var o="string"==typeof e;o&&(e=[e]),t||(t=CKEDITOR);var r=e.length,s=[],a=[],l=function(e){i&&(o?i.call(t,e):i.call(t,s,a))};if(0===r)l(!0);else{var c=function(e,t){(t?s:a).push(e),--r<=0&&(n&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),l(t))},d=function(e,t){y[e]=1;var n=_[e];delete _[e];for(var i=0;i<n.length;i++)n[i](e,t)},u=function(e){if(y[e])c(e,!0);else{var t=_[e]||(_[e]=[]);if(t.push(c),!(1<t.length)){var n=new CKEDITOR.dom.element("script");n.setAttributes({type:"text/javascript",src:e}),i&&(CKEDITOR.env.ie&&CKEDITOR.env.version<11?n.$.onreadystatechange=function(){"loaded"!=n.$.readyState&&"complete"!=n.$.readyState||(n.$.onreadystatechange=null,d(e,!0))}:(n.$.onload=function(){setTimeout(function(){d(e,!0)},0)},n.$.onerror=function(){d(e,!1)})),n.appendTo(CKEDITOR.document.getHead())}}};n&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var h=0;h<r;h++)u(e[h])}},queue:function(){function i(){var e;(e=o[0])&&this.load(e.scriptUrl,e.callback,CKEDITOR,0)}var o=[];return function(e,t){var n=this;o.push({scriptUrl:e,callback:function(){t&&t.apply(this,arguments),o.shift(),i.call(n)}}),1==o.length&&i.call(this)}}()}),CKEDITOR.resourceManager=function(e,t){this.basePath=e,this.fileName=t,this.registered={},this.loaded={},this.externals={},this._={waitingList:{}}},CKEDITOR.resourceManager.prototype={add:function(e,t){if(this.registered[e])throw'[CKEDITOR.resourceManager.add] The resource name "'+e+'" is already registered.';var n=this.registered[e]=t||{};return n.name=e,n.path=this.getPath(e),CKEDITOR.fire(e+CKEDITOR.tools.capitalize(this.fileName)+"Ready",n),this.get(e)},get:function(e){return this.registered[e]||null},getPath:function(e){var t=this.externals[e];return CKEDITOR.getUrl(t&&t.dir||this.basePath+e+"/")},getFilePath:function(e){var t=this.externals[e];return CKEDITOR.getUrl(this.getPath(e)+(t?t.file:this.fileName+".js"))},addExternal:function(e,t,n){e=e.split(",");for(var i=0;i<e.length;i++){var o=e[i];n||(t=t.replace(/[^\/]+$/,function(e){return n=e,""})),this.externals[o]={dir:t,file:n||this.fileName+".js"}}},load:function(e,s,a){CKEDITOR.tools.isArray(e)||(e=e?[e]:[]);for(var l=this.loaded,t=this.registered,n=[],c={},d={},i=0;i<e.length;i++){var o=e[i];if(o)if(l[o]||t[o])d[o]=this.get(o);else{var r=this.getFilePath(o);n.push(r),r in c||(c[r]=[]),c[r].push(o)}}CKEDITOR.scriptLoader.load(n,function(e,t){if(t.length)throw'[CKEDITOR.resourceManager.load] Resource name "'+c[t[0]].join(",")+'" was not found at "'+t[0]+'".';for(var n=0;n<e.length;n++)for(var i=c[e[n]],o=0;o<i.length;o++){var r=i[o];d[r]=this.get(r),l[r]=1}s.call(a,d)},this)}},CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin"),CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(t){var u={};return function(e,a,l){var c={},d=function(e){t.call(this,e,function(e){CKEDITOR.tools.extend(c,e);var t,n=[];for(t in e){var i=e[t],o=i&&i.requires;if(!u[t]){if(i.icons)for(var r=i.icons.split(","),s=r.length;s--;)CKEDITOR.skin.addIcon(r[s],i.path+"icons/"+(CKEDITOR.env.hidpi&&i.hidpi?"hidpi/":"")+r[s]+".png");u[t]=1}if(o)for(o.split&&(o=o.split(",")),i=0;i<o.length;i++)c[o[i]]||n.push(o[i])}if(n.length)d.call(this,n);else{for(t in c)(i=c[t]).onLoad&&!i.onLoad._called&&(!1===i.onLoad()&&delete c[t],i.onLoad._called=1);a&&a.call(l||window,c)}},this)};d.call(this,e)}}),CKEDITOR.plugins.setLang=function(e,t,n){var i;e=(i=this.get(e)).langEntries||(i.langEntries={});(i=i.lang||(i.lang=[])).split&&(i=i.split(",")),-1==CKEDITOR.tools.indexOf(i,t)&&i.push(t),e[t]=n},CKEDITOR.ui=function(e){return e.ui?e.ui:(this.items={},this.instances={},this.editor=e,this._={handlers:{}},this)},CKEDITOR.ui.prototype={add:function(e,t,n){n.name=e.toLowerCase();var i=this.items[e]={type:t,command:n.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(i,n)},get:function(e){return this.instances[e]},create:function(e){var t=this.items[e],n=t&&this._.handlers[t.type],i=t&&t.command&&this.editor.getCommand(t.command);n=n&&n.create.apply(this,t.args);return this.instances[e]=n,i&&i.uiItems.push(n),n&&!n.type&&(n.type=t.type),n},addHandler:function(e,t){this._.handlers[e]=t},space:function(e){return CKEDITOR.document.getById(this.spaceId(e))},spaceId:function(e){return this.editor.id+"_"+e}},CKEDITOR.event.implementOn(CKEDITOR.ui),function(){function e(e,t,n){if(CKEDITOR.event.call(this),e=e&&CKEDITOR.tools.clone(e),void 0!==t){if(!(t instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");if(!n)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&n==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!(n==CKEDITOR.ELEMENT_MODE_INLINE?t.is(CKEDITOR.dtd.$editable)||t.is("textarea"):n!=CKEDITOR.ELEMENT_MODE_REPLACE||!t.is(CKEDITOR.dtd.$nonBodyContent)))throw Error('The specified element mode is not supported on element: "'+t.getName()+'".');this.element=t,this.elementMode=n,this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(t.getId()||t.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={},this.commands={},this.templates={},this.name=this.name||i(),this.id=CKEDITOR.tools.getNextId(),this.status="unloaded",this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config),this.ui=new CKEDITOR.ui(this),this.focusManager=new CKEDITOR.focusManager(this),this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this),this.on("readOnly",o),this.on("selectionChange",function(e){s(this,e.data.path)}),this.on("activeFilterChange",function(){s(this,this.elementPath(),!0)}),this.on("mode",o),this.on("instanceReady",function(){this.config.startupFocus&&this.focus()}),CKEDITOR.fire("instanceCreated",null,this),CKEDITOR.add(this),CKEDITOR.tools.setTimeout(function(){l(this,e)},0,this)}function i(){do{var e="editor"+ ++h}while(CKEDITOR.instances[e]);return e}function o(){var e,t=this.commands;for(e in t)r(this,t[e])}function r(e,t){t[t.startDisabled?"disable":e.readOnly&&!t.readOnly?"disable":t.modes[e.mode]?"enable":"disable"]()}function s(e,t,n){if(t){var i,o,r=e.commands;for(o in r)i=r[o],(n||i.contextSensitive)&&i.refresh(e,t)}}function a(e){if(!(t=e.config.customConfig))return!1;var t=CKEDITOR.getUrl(t),n=f[t]||(f[t]={});return n.fn?(n.fn.call(e,e.config),(CKEDITOR.getUrl(e.config.customConfig)==t||!a(e))&&e.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(t,function(){n.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){},a(e)}),!0}function l(t,n){t.on("customConfigLoaded",function(){if(n){if(n.on)for(var e in n.on)t.on(e,n.on[e]);CKEDITOR.tools.extend(t.config,n,!0),delete t.config.on}e=t.config,t.readOnly=!(!e.readOnly&&!(t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?t.element.is("textarea")?t.element.hasAttribute("disabled"):t.element.isReadOnly():t.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&t.element.hasAttribute("disabled"))),t.blockless=t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&!(t.element.is("textarea")||CKEDITOR.dtd[t.element.getName()].p),t.tabIndex=e.tabIndex||t.element&&t.element.getAttribute("tabindex")||0,t.activeEnterMode=t.enterMode=t.blockless?CKEDITOR.ENTER_BR:e.enterMode,t.activeShiftEnterMode=t.shiftEnterMode=t.blockless?CKEDITOR.ENTER_BR:e.shiftEnterMode,e.skin&&(CKEDITOR.skinName=e.skin),t.fireOnce("configLoaded"),t.dataProcessor=new CKEDITOR.htmlDataProcessor(t),t.filter=t.activeFilter=new CKEDITOR.filter(t),c(t)}),n&&null!=n.customConfig&&(t.config.customConfig=n.customConfig),a(t)||t.fireOnce("customConfigLoaded")}function c(e){CKEDITOR.skin.loadPart("editor",function(){t(e)})}function t(i){CKEDITOR.lang.load(i.config.language,i.config.defaultLanguage,function(e,t){var n=i.config.title;i.langCode=e,i.lang=CKEDITOR.tools.prototypedCopy(t),i.title="string"==typeof n||!1===n?n:[i.lang.editor,i.name].join(", "),CKEDITOR.env.gecko&&CKEDITOR.env.version<10900&&"rtl"==i.lang.dir&&(i.lang.dir="ltr"),i.config.contentsLangDirection||(i.config.contentsLangDirection=i.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?i.element.getDirection(1):i.lang.dir),i.fire("langLoaded"),d(i)})}function d(t){t.getStylesSet(function(e){t.once("loaded",function(){t.fire("stylesSet",{styles:e})},null,null,1),n(t)})}function n(d){var u=d.config,e=u.plugins,t=u.extraPlugins,n=u.removePlugins;if(t){var i=RegExp("(?:^|,)(?:"+t.replace(/\s*,\s*/g,"|")+")(?=,|$)","g");e=(e=e.replace(i,""))+","+t}if(n){var h=RegExp("(?:^|,)(?:"+n.replace(/\s*,\s*/g,"|")+")(?=,|$)","g");e=e.replace(h,"")}CKEDITOR.env.air&&(e+=",adobeair"),CKEDITOR.plugins.load(e.split(","),function(e){var o=[],r=[],t=[];for(var n in d.plugins=e){var i,s=e[n],a=s.lang,l=null,c=s.requires;if(CKEDITOR.tools.isArray(c)&&(c=c.join(",")),c&&(i=c.match(h)))for(;c=i.pop();)CKEDITOR.tools.setTimeout(function(e,t){throw Error('Plugin "'+e.replace(",","")+'" cannot be removed from the plugins list, because it\'s required by "'+t+'" plugin.')},0,null,[c,n]);a&&!d.lang[n]&&(a.split&&(a=a.split(",")),l=0<=CKEDITOR.tools.indexOf(a,d.langCode)?d.langCode:(l=d.langCode.replace(/-.*/,""))!=d.langCode&&0<=CKEDITOR.tools.indexOf(a,l)?l:0<=CKEDITOR.tools.indexOf(a,"en")?"en":a[0],s.langEntries&&s.langEntries[l]?(d.lang[n]=s.langEntries[l],l=null):t.push(CKEDITOR.getUrl(s.path+"lang/"+l+".js"))),r.push(l),o.push(s)}CKEDITOR.scriptLoader.load(t,function(){for(var e=["beforeInit","init","afterInit"],t=0;t<e.length;t++)for(var n=0;n<o.length;n++){var i=o[n];0===t&&r[n]&&i.lang&&i.langEntries&&(d.lang[i.name]=i.langEntries[r[n]]),i[e[t]]&&i[e[t]](d)}for(d.fireOnce("pluginsLoaded"),u.keystrokes&&d.setKeystroke(d.config.keystrokes),n=0;n<d.config.blockedKeystrokes.length;n++)d.keystrokeHandler.blockedKeystrokes[d.config.blockedKeystrokes[n]]=1;d.status="loaded",d.fireOnce("loaded"),CKEDITOR.fire("instanceLoaded",null,d)})})}function u(){var e=this.element;if(e&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var t=this.getData();return this.config.htmlEncodeOutput&&(t=CKEDITOR.tools.htmlEncode(t)),e.is("textarea")?e.setValue(t):e.setHtml(t),!0}return!1}e.prototype=CKEDITOR.editor.prototype,CKEDITOR.editor=e;var h=0,f={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{addCommand:function(e,t){t.name=e.toLowerCase();var n=new CKEDITOR.command(this,t);return this.mode&&r(this,n),this.commands[e]=n},_attachToForm:function(){var t=this,n=t.element,e=new CKEDITOR.dom.element(n.$.form);if(n.is("textarea")&&e){var i=function(e){t.updateElement(),t._.required&&!n.getValue()&&!1===t.fire("required")&&e.data.preventDefault()};e.on("submit",i),e.$.submit&&e.$.submit.call&&e.$.submit.apply&&(e.$.submit=CKEDITOR.tools.override(e.$.submit,function(e){return function(){i(),e.apply?e.apply(this):e()}})),t.on("destroy",function(){e.removeListener("submit",i)})}},destroy:function(e){this.fire("beforeDestroy"),!e&&u.call(this),this.editable(null),this.status="destroyed",this.fire("destroy"),this.removeAllListeners(),CKEDITOR.remove(this),CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(e){return(e=e||this.getSelection().getStartElement())?new CKEDITOR.dom.elementPath(e,this.editable()):null},createRange:function(){var e=this.editable();return e?new CKEDITOR.dom.range(e):null},execCommand:function(e,t){var n=this.getCommand(e),i={name:e,commandData:t,command:n};return!(!n||n.state==CKEDITOR.TRISTATE_DISABLED||!0===this.fire("beforeCommandExec",i)||(i.returnValue=n.exec(i.commandData),n.async||!0===this.fire("afterCommandExec",i)))&&i.returnValue},getCommand:function(e){return this.commands[e]},getData:function(e){!e&&this.fire("beforeGetData");var t=this._.data;return"string"!=typeof t&&(t=(t=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?t.is("textarea")?t.getValue():t.getHtml():""),t={dataValue:t},!e&&this.fire("getData",t),t.dataValue},getSnapshot:function(){var e=this.fire("getSnapshot");if("string"!=typeof e){var t=this.element;t&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(e=t.is("textarea")?t.getValue():t.getHtml())}return e},loadSnapshot:function(e){this.fire("loadSnapshot",e)},setData:function(e,t,n){t&&this.on("dataReady",function(e){e.removeListener(),t.call(e.editor)}),e={dataValue:e},!n&&this.fire("setData",e),this._.data=e.dataValue,!n&&this.fire("afterSetData",e)},setReadOnly:function(e){e=null==e||e,this.readOnly!=e&&(this.readOnly=e,this.keystrokeHandler.blockedKeystrokes[8]=+e,this.editable().setReadOnly(e),this.fire("readOnly"))},insertHtml:function(e,t){this.fire("insertHtml",{dataValue:e,mode:t})},insertText:function(e){this.fire("insertText",e)},insertElement:function(e){this.fire("insertElement",e)},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return u.call(this)},setKeystroke:function(e){for(var t,n,i=this.keystrokeHandler.keystrokes,o=CKEDITOR.tools.isArray(e)?e:[[].slice.call(arguments,0)],r=o.length;r--;)t=o[r],n=0,CKEDITOR.tools.isArray(t)&&(n=t[1],t=t[0]),n?i[t]=n:delete i[t]},addFeature:function(e){return this.filter.addFeature(e)},setActiveFilter:function(e){e||(e=this.filter),this.activeFilter!==e&&(this.activeFilter=e,this.fire("activeFilterChange"),e===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(e.getAllowedEnterMode(this.enterMode),e.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(e,t){e=e?this.blockless?CKEDITOR.ENTER_BR:e:this.enterMode,t=t?this.blockless?CKEDITOR.ENTER_BR:t:this.shiftEnterMode,this.activeEnterMode==e&&this.activeShiftEnterMode==t||(this.activeEnterMode=e,this.activeShiftEnterMode=t,this.fire("activeEnterModeChange"))}})}(),CKEDITOR.ELEMENT_MODE_NONE=0,CKEDITOR.ELEMENT_MODE_REPLACE=1,CKEDITOR.ELEMENT_MODE_APPENDTO=2,CKEDITOR.ELEMENT_MODE_INLINE=3,CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:RegExp("<(?:(?:\\/([^>]+)>)|(?:!--([\\S|\\s]*?)-->)|(?:([^\\s>]+)\\s*((?:(?:\"[^\"]*\")|(?:'[^']*')|[^\"'>])*)\\/?>))","g")}},K=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,w={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1},CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(e){for(var t,n,i,o=0;t=this._.htmlPartsRegex.exec(e);)if(o<(n=t.index)&&(o=e.substring(o,n),i?i.push(o):this.onText(o)),o=this._.htmlPartsRegex.lastIndex,!(n=t[1])||(n=n.toLowerCase(),i&&CKEDITOR.dtd.$cdata[n]&&(this.onCDATA(i.join("")),i=null),i))if(i)i.push(t[0]);else if(n=t[3]){if(n=n.toLowerCase(),!/="/.test(n)){var r,s={},a=!(!(t=t[4])||"/"!=t.charAt(t.length-1));if(t)for(;r=K.exec(t);){var l=r[1].toLowerCase();r=r[2]||r[3]||r[4]||"",s[l]=!r&&w[l]?l:CKEDITOR.tools.htmlDecodeAttr(r)}this.onTagOpen(n,s,a),!i&&CKEDITOR.dtd.$cdata[n]&&(i=[])}}else(n=t[2])&&this.onComment(n);else this.onTagClose(n);e.length>o&&this.onText(e.substring(o,e.length))}},CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}
},proto:{openTag:function(e){this._.output.push("<",e)},openTagClose:function(e,t){t?this._.output.push(" />"):this._.output.push(">")},attribute:function(e,t){"string"==typeof t&&(t=CKEDITOR.tools.htmlEncodeAttr(t)),this._.output.push(" ",e,'="',t,'"')},closeTag:function(e){this._.output.push("</",e,">")},text:function(e){this._.output.push(e)},comment:function(e){this._.output.push("<!--",e,"-->")},write:function(e){this._.output.push(e)},reset:function(){this._.output=[],this._.indent=!1},getHtml:function(e){var t=this._.output.join("");return e&&this.reset(),t}}}),CKEDITOR.htmlParser.node=function(){},CKEDITOR.htmlParser.node.prototype={remove:function(){var e=this.parent.children,t=CKEDITOR.tools.indexOf(e,this),n=this.previous,i=this.next;n&&(n.next=i),i&&(i.previous=n),e.splice(t,1),this.parent=null},replaceWith:function(e){var t=this.parent.children,n=CKEDITOR.tools.indexOf(t,this),i=e.previous=this.previous,o=e.next=this.next;i&&(i.next=e),o&&(o.previous=e),(t[n]=e).parent=this.parent,this.parent=null},insertAfter:function(e){var t=e.parent.children,n=CKEDITOR.tools.indexOf(t,e),i=e.next;t.splice(n+1,0,this),this.next=e.next,(this.previous=e).next=this,i&&(i.previous=this),this.parent=e.parent},insertBefore:function(e){var t=e.parent.children,n=CKEDITOR.tools.indexOf(t,e);t.splice(n,0,this),this.next=e,(this.previous=e.previous)&&(e.previous.next=this),(e.previous=this).parent=e.parent},getAscendant:function(t){for(var e="function"==typeof t?t:"string"==typeof t?function(e){return e.name==t}:function(e){return e.name in t},n=this.parent;n&&n.type==CKEDITOR.NODE_ELEMENT;){if(e(n))return n;n=n.parent}return null},wrapWith:function(e){return this.replaceWith(e),e.add(this),e},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(e){return e||{}}},CKEDITOR.htmlParser.comment=function(e){this.value=e,this._={isBlockLike:!1}},CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(e,t){var n=this.value;return(n=e.onComment(t,n,this))?"string"!=typeof n?(this.replaceWith(n),!1):(this.value=n,!0):(this.remove(),!1)},writeHtml:function(e,t){t&&this.filter(t),e.comment(this.value)}}),CKEDITOR.htmlParser.text=function(e){this.value=e,this._={isBlockLike:!1}},CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(e,t){if(!(this.value=e.onText(t,this.value,this)))return this.remove(),!1},writeHtml:function(e,t){t&&this.filter(t),e.text(this.value)}}),CKEDITOR.htmlParser.cdata=function(e){this.value=e},CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(e){e.write(this.value)}}),CKEDITOR.htmlParser.fragment=function(){this.children=[],this.parent=null,this._={isBlockLike:!0,hasInlineStarted:!1}},function(){function T(e){return!e.attributes["data-cke-survive"]&&("a"==e.name&&e.attributes.href||CKEDITOR.dtd.$removeEmpty[e.name])}var C=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),v={ol:1,ul:1},I=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1});CKEDITOR.htmlParser.fragment.fromHtml=function(e,t,s){function o(e){var t;if(0<f.length)for(var n=0;n<f.length;n++){var i=f[n],o=i.name,r=CKEDITOR.dtd[o],s=p.name&&CKEDITOR.dtd[p.name];s&&!s[o]||e&&r&&!r[e]&&CKEDITOR.dtd[e]?o==p.name&&(l(p,p.parent,1),n--):(t||(a(),t=1),(i=i.clone()).parent=p,p=i,f.splice(n,1),n--)}}function a(){for(;m.length;)l(m.shift(),p)}function r(e){if(e._.isBlockLike&&"pre"!=e.name&&"textarea"!=e.name){var t,n=e.children.length,i=e.children[n-1];i&&i.type==CKEDITOR.NODE_TEXT&&((t=CKEDITOR.tools.rtrim(i.value))?i.value=t:e.children.length=n-1)}}function l(e,t,n){t=t||p||h;var i=p;void 0===e.previous&&(c(t,e)&&(p=t,u.onTagOpen(s,{}),e.returnPoint=t=p),r(e),(!T(e)||e.children.length)&&t.add(e),"pre"==e.name&&(E=!1),"textarea"==e.name&&(g=!1)),e.returnPoint?(p=e.returnPoint,delete e.returnPoint):p=n?t:i}function c(e,t){var n,i;if((e==h||"body"==e.name)&&s&&(!e.name||CKEDITOR.dtd[e.name][s]))return(n=t.attributes&&(i=t.attributes["data-cke-real-element-type"])?i:t.name)&&n in CKEDITOR.dtd.$inline&&!(n in CKEDITOR.dtd.head)&&!t.isOrphan||t.type==CKEDITOR.NODE_TEXT}function d(e,t){return(e in CKEDITOR.dtd.$listItem||e in CKEDITOR.dtd.$tableContent)&&(e==t||"dt"==e&&"dd"==t||"dd"==e&&"dt"==t)}var u=new CKEDITOR.htmlParser,h=t instanceof CKEDITOR.htmlParser.element?t:"string"==typeof t?new CKEDITOR.htmlParser.element(t):new CKEDITOR.htmlParser.fragment,f=[],m=[],p=h,g="textarea"==h.name,E="pre"==h.name;for(u.onTagOpen=function(e,t,n,i){if((t=new CKEDITOR.htmlParser.element(e,t)).isUnknown&&n&&(t.isEmpty=!0),t.isOptionalClose=i,T(t))f.push(t);else{if("pre"==e)E=!0;else{if("br"==e&&E)return void p.add(new CKEDITOR.htmlParser.text("\n"));"textarea"==e&&(g=!0)}if("br"==e)m.push(t);else{for(;i=(n=p.name)?CKEDITOR.dtd[n]||(p._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):I,!(t.isUnknown||p.isUnknown||i[e]);)if(p.isOptionalClose)u.onTagClose(n);else if(e in v&&n in v)(n=(n=p.children)[n.length-1])&&"li"==n.name||l(n=new CKEDITOR.htmlParser.element("li"),p),!t.returnPoint&&(t.returnPoint=p),p=n;else if(e in CKEDITOR.dtd.$listItem&&!d(e,n))u.onTagOpen("li"==e?"ul":"dl",{},0,1);else if(n in C&&!d(e,n))!t.returnPoint&&(t.returnPoint=p),p=p.parent;else{if(n in CKEDITOR.dtd.$inline&&f.unshift(p),!p.parent){t.isOrphan=1;break}l(p,p.parent,1)}o(e),a(),t.parent=p,t.isEmpty?l(t):p=t}}},u.onTagClose=function(e){for(var t=f.length-1;0<=t;t--)if(e==f[t].name)return void f.splice(t,1);for(var n=[],i=[],o=p;o!=h&&o.name!=e;)o._.isBlockLike||i.unshift(o),n.push(o),o=o.returnPoint||o.parent;if(o!=h){for(t=0;t<n.length;t++){var r=n[t];l(r,r.parent)}(p=o)._.isBlockLike&&a(),l(o,o.parent),o==p&&(p=p.parent),f=f.concat(i)}"body"==e&&(s=!1)},u.onText=function(e){if(p._.hasInlineStarted&&!m.length||E||g||0!==(e=CKEDITOR.tools.ltrim(e)).length){var t=p.name,n=t?CKEDITOR.dtd[t]||(p._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):I;!g&&!n["#"]&&t in C?(u.onTagOpen(t in v?"li":"dl"==t?"dd":"table"==t?"tr":"tr"==t?"td":""),u.onText(e)):(a(),o(),!E&&!g&&(e=e.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," ")),e=new CKEDITOR.htmlParser.text(e),c(p,e)&&this.onTagOpen(s,{},0,1),p.add(e))}},u.onCDATA=function(e){p.add(new CKEDITOR.htmlParser.cdata(e))},u.onComment=function(e){a(),o(),p.add(new CKEDITOR.htmlParser.comment(e))},u.parse(e),a();p!=h;)l(p,p.parent,1);return r(h),h},CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(e,t){isNaN(t)&&(t=this.children.length);var n=0<t?this.children[t-1]:null;if(n){if(e._.isBlockLike&&n.type==CKEDITOR.NODE_TEXT&&(n.value=CKEDITOR.tools.rtrim(n.value),0===n.value.length))return this.children.pop(),void this.add(e);n.next=e}e.previous=n,(e.parent=this).children.splice(t,0,e),this._.hasInlineStarted||(this._.hasInlineStarted=e.type==CKEDITOR.NODE_TEXT||e.type==CKEDITOR.NODE_ELEMENT&&!e._.isBlockLike)},filter:function(e,t){t=this.getFilterContext(t),e.onRoot(t,this),this.filterChildren(e,!1,t)},filterChildren:function(e,t,n){if(this.childrenFilteredBy!=e.id)for(n=this.getFilterContext(n),t&&!this.parent&&e.onRoot(n,this),this.childrenFilteredBy=e.id,t=0;t<this.children.length;t++)!1===this.children[t].filter(e,n)&&t--},writeHtml:function(e,t){t&&this.filter(t),this.writeChildrenHtml(e)},writeChildrenHtml:function(e,t,n){var i=this.getFilterContext();for(n&&!this.parent&&t&&t.onRoot(i,this),t&&this.filterChildren(t,!1,i),t=0,i=(n=this.children).length;t<i;t++)n[t].writeHtml(e)},forEach:function(e,t,n){if(!(n||t&&this.type!=t))var i=e(this);if(!1!==i){n=this.children;for(var o=0;o<n.length;o++)(i=n[o]).type==CKEDITOR.NODE_ELEMENT?i.forEach(e,t):(!t||i.type==t)&&e(i)}},getFilterContext:function(e){return e||{}}}}(),function(){function s(){this.rules=[]}function i(e,t,n,i){var o,r;for(o in t)(r=e[o])||(r=e[o]=new s),r.add(t[o],n,i)}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(e){this.id=CKEDITOR.tools.getNextNumber(),this.elementNameRules=new s,this.attributeNameRules=new s,this.elementsRules={},this.attributesRules={},this.textRules=new s,this.commentRules=new s,this.rootRules=new s,e&&this.addRules(e,10)},proto:{addRules:function(e,t){var n;"number"==typeof t?n=t:t&&"priority"in t&&(n=t.priority),"number"!=typeof n&&(n=10),"object"!=typeof t&&(t={}),e.elementNames&&this.elementNameRules.addMany(e.elementNames,n,t),e.attributeNames&&this.attributeNameRules.addMany(e.attributeNames,n,t),e.elements&&i(this.elementsRules,e.elements,n,t),e.attributes&&i(this.attributesRules,e.attributes,n,t),e.text&&this.textRules.add(e.text,n,t),e.comment&&this.commentRules.add(e.comment,n,t),e.root&&this.rootRules.add(e.root,n,t)},applyTo:function(e){e.filter(this)},onElementName:function(e,t){return this.elementNameRules.execOnName(e,t)},onAttributeName:function(e,t){return this.attributeNameRules.execOnName(e,t)},onText:function(e,t){return this.textRules.exec(e,t)},onComment:function(e,t,n){return this.commentRules.exec(e,t,n)},onRoot:function(e,t){return this.rootRules.exec(e,t)},onElement:function(e,t){for(var n,i=[this.elementsRules["^"],this.elementsRules[t.name],this.elementsRules.$],o=0;o<3;o++)if(n=i[o]){if(!1===(n=n.exec(e,t,this)))return null;if(n&&n!=t)return this.onNode(e,n);if(t.parent&&!t.name)break}return t},onNode:function(e,t){var n=t.type;return n==CKEDITOR.NODE_ELEMENT?this.onElement(e,t):n==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(e,t.value)):n==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(e,t.value)):null},onAttribute:function(e,t,n,i){return(n=this.attributesRules[n])?n.exec(e,i,t,this):i}}}),(CKEDITOR.htmlParser.filterRulesGroup=s).prototype={add:function(e,t,n){this.rules.splice(this.findIndex(t),0,{value:e,priority:t,options:n})},addMany:function(e,t,n){for(var i=[this.findIndex(t),0],o=0,r=e.length;o<r;o++)i.push({value:e[o],priority:t,options:n});this.rules.splice.apply(this.rules,i)},findIndex:function(e){for(var t=this.rules,n=t.length-1;0<=n&&e<t[n].priority;)n--;return n+1},exec:function(e,t){var n,i,o,r,s=t instanceof CKEDITOR.htmlParser.node||t instanceof CKEDITOR.htmlParser.fragment,a=Array.prototype.slice.call(arguments,1),l=this.rules,c=l.length;for(r=0;r<c;r++)if(s&&(n=t.type,i=t.name),o=l[r],!(e.nonEditable&&!o.options.applyToAll||e.nestedEditable&&o.options.excludeNestedEditable)){if(!1===(o=o.value.apply(null,a))||s&&o&&(o.name!=i||o.type!=n))return o;null!=o&&(a[0]=t=o)}return t},execOnName:function(e,t){for(var n,i=0,o=this.rules,r=o.length;t&&i<r;i++)n=o[i],!(e.nonEditable&&!n.options.applyToAll||e.nestedEditable&&n.options.excludeNestedEditable)&&(t=t.replace(n.value[0],n.value[1]));return t}}}(),function(){function n(e,t){function a(e){return e||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text("\xa0"):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function n(r,s){return function(e){if(e.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var t,n,i=[],o=d(e);if(o)for(l(o,1)&&i.push(o);o;)f(o)&&(t=u(o))&&l(t)&&((n=u(t))&&!f(n)?i.push(t):(a(c).insertAfter(t),t.remove())),o=o.previous;for(o=0;o<i.length;o++)i[o].remove();(i=CKEDITOR.env.opera&&!r||("function"==typeof s?!1!==s(e):s))&&(i=!(!c&&!CKEDITOR.env.needsBrFiller&&e.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&(!(!c&&!CKEDITOR.env.needsBrFiller&&(7<document.documentMode||e.name in CKEDITOR.dtd.tr||e.name in CKEDITOR.dtd.$listItem))&&(!(i=d(e))||"form"==e.name&&"input"==i.name))),i&&e.add(a(r))}}}function l(e,t){if((!c||CKEDITOR.env.needsBrFiller)&&e.type==CKEDITOR.NODE_ELEMENT&&"br"==e.name&&!e.attributes["data-cke-eol"])return!0;var n;if(e.type==CKEDITOR.NODE_TEXT&&(n=e.value.match(T))){if(n.index&&(new CKEDITOR.htmlParser.text(e.value.substring(0,n.index)).insertBefore(e),e.value=n[0]),!CKEDITOR.env.needsBrFiller&&c&&(!t||e.parent.name in s))return!0;if(!c&&((n=e.previous)&&"br"==n.name||!n||f(n)))return!0}return!1}var i,o,r={elements:{}},c="html"==t,s=CKEDITOR.tools.extend({},I);for(i in s)"#"in v[i]||delete s[i];for(i in s)r.elements[i]=n(c,!1!==e.config.fillEmptyBlocks);return r.root=n(c),r.elements.br=(o=c,function(e){if(e.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var t=e.attributes;if("data-cke-bogus"in t||"data-cke-eol"in t)delete t["data-cke-bogus"];else{for(t=e.next;t&&h(t);)t=t.next;var n=u(e);!t&&f(e.parent)?m(e.parent,a(o)):f(t)&&n&&!f(n)&&a(o).insertBefore(t)}}}),r}function r(e,t){return e!=CKEDITOR.ENTER_BR&&!1!==t&&(e==CKEDITOR.ENTER_DIV?"div":"p")}function d(e){for(e=e.children[e.children.length-1];e&&h(e);)e=e.previous;return e}function u(e){for(e=e.previous;e&&h(e);)e=e.previous;return e}function h(e){return e.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(e.value)||e.type==CKEDITOR.NODE_ELEMENT&&e.attributes["data-cke-bookmark"]}function f(e){return e&&(e.type==CKEDITOR.NODE_ELEMENT&&e.name in I||e.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function m(e,t){var n=e.children[e.children.length-1];e.children.push(t),t.parent=e,n&&((n.next=t).previous=n)}function e(e){"false"!=(e=e.attributes).contenteditable&&(e["data-cke-editable"]=e.contenteditable?"true":1),e.contenteditable="false"}function t(e){switch((e=e.attributes)["data-cke-editable"]){case"true":e.contenteditable="true";break;case"1":delete e.contenteditable}}function s(e){return e.replace(i,function(e,t,n){return"<"+t+n.replace(y,function(e,t){return/^on/.test(t)||-1!=n.indexOf("data-cke-saved-"+t)?e:" data-cke-saved-"+(e=e.slice(1))+" data-cke-"+CKEDITOR.rnd+"-"+e})+">"})}function a(e,t){return e.replace(t,function(e,t,n){return 0===e.indexOf("<textarea")&&(e=t+p(n).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>"),"<cke:encoded>"+encodeURIComponent(e)+"</cke:encoded>"})}function l(e){return e.replace(w,function(e,t){return decodeURIComponent(t)})}function c(e){return e.replace(/<\!--(?!{cke_protected})[\s\S]+?--\>/g,function(e){return"<!--"+C+"{C}"+encodeURIComponent(e).replace(/--/g,"%2D%2D")+"-->"})}function p(e){return e.replace(/<\!--\{cke_protected\}\{C\}([\s\S]+?)--\>/g,function(e,t){return decodeURIComponent(t)})}function g(e,t){var n=t._.dataStore;return e.replace(/<\!--\{cke_protected\}([\s\S]+?)--\>/g,function(e,t){return decodeURIComponent(t)}).replace(/\{cke_protected_(\d+)\}/g,function(e,t){return n&&n[t]||""})}function E(e,t){for(var i=[],n=t.config.protectedSource,o=t._.dataStore||(t._.dataStore={id:1}),r=/<\!--\{cke_temp(comment)?\}(\d*?)--\>/g,s=(n=[/<script[\s\S]*?<\/script>/gi,/<noscript[\s\S]*?<\/noscript>/gi].concat(n),e=e.replace(/<\!--[\s\S]*?--\>/g,function(e){return"<!--{cke_tempcomment}"+(i.push(e)-1)+"-->"}),0);s<n.length;s++)e=e.replace(n[s],function(e){return e=e.replace(r,function(e,t,n){return i[n]}),/cke_temp(comment)?/.test(e)?e:"<!--{cke_temp}"+(i.push(e)-1)+"-->"});return(e=e.replace(r,function(e,t,n){return"<!--"+C+(t?"{C}":"")+encodeURIComponent(i[n]).replace(/--/g,"%2D%2D")+"-->"})).replace(/(['"]).*?\1/g,function(e){return e.replace(/<\!--\{cke_protected\}([\s\S]+?)--\>/g,function(e,t){return o[o.id]=decodeURIComponent(t),"{cke_protected_"+o.id+++"}"})})}CKEDITOR.htmlDataProcessor=function(o){var e,t,i=this;this.editor=o,this.dataFilter=e=new CKEDITOR.htmlParser.filter,this.htmlFilter=t=new CKEDITOR.htmlParser.filter,this.writer=new CKEDITOR.htmlParser.basicWriter,e.addRules(O),e.addRules(b,{applyToAll:!0}),e.addRules(n(o,"data"),{applyToAll:!0}),t.addRules(D),t.addRules(R,{applyToAll:!0}),t.addRules(n(o,"html"),{applyToAll:!0}),o.on("toHtml",function(e){var t,n=(n=(n=a(n=s(n=a(n=E(n=(e=e.data).dataValue,o),K)),_)).replace(k,"$1cke:$2")).replace(x,"<cke:$1$2></cke:$1>"),i=(n=CKEDITOR.env.opera?n:n.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2"),e.context||o.editable().getName());CKEDITOR.env.ie&&CKEDITOR.env.version<9&&"pre"==i&&(i="div",n="<pre>"+n+"</pre>",t=1),(i=o.document.createElement(i)).setHtml("a"+n),n=(n=i.getHtml().substr(1)).replace(RegExp(" data-cke-"+CKEDITOR.rnd+"-","ig")," "),t&&(n=n.replace(/^<pre>|<\/pre>$/gi,"")),n=p(n=l(n=n.replace(N,"$1$2"))),e.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(n,e.context,!1!==e.fixForBody&&r(e.enterMode,o.config.autoParagraph))},null,null,5),o.on("toHtml",function(e){e.data.filter.applyTo(e.data.dataValue,!0,e.data.dontFilter,e.data.enterMode)&&o.fire("dataFiltered")},null,null,6),o.on("toHtml",function(e){e.data.dataValue.filterChildren(i.dataFilter,!0)},null,null,10),o.on("toHtml",function(e){var t=(e=e.data).dataValue,n=new CKEDITOR.htmlParser.basicWriter;t.writeChildrenHtml(n),t=n.getHtml(!0),e.dataValue=c(t)},null,null,15),o.on("toDataFormat",function(e){var t=e.data.dataValue;e.data.enterMode!=CKEDITOR.ENTER_BR&&(t=t.replace(/^<br *\/?>/i,"")),e.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(t,e.data.context,r(e.data.enterMode,o.config.autoParagraph))},null,null,5),o.on("toDataFormat",function(e){e.data.dataValue.filterChildren(i.htmlFilter,!0)},null,null,10),o.on("toDataFormat",function(e){e.data.filter.applyTo(e.data.dataValue,!1,!0)},null,null,11),o.on("toDataFormat",function(e){var t=e.data.dataValue,n=i.writer;n.reset(),t.writeChildrenHtml(n),t=g(t=p(t=n.getHtml(!0)),o),e.data.dataValue=t},null,null,15)},CKEDITOR.htmlDataProcessor.prototype={toHtml:function(e,t,n,i){var o,r,s,a=this.editor;return t&&"object"==typeof t?(o=t.context,n=t.fixForBody,i=t.dontFilter,r=t.filter,s=t.enterMode):o=t,!o&&null!==o&&(o=a.editable().getName()),a.fire("toHtml",{dataValue:e,context:o,fixForBody:n,dontFilter:i,filter:r||a.filter,enterMode:s||a.enterMode}).dataValue},toDataFormat:function(e,t){var n,i,o;return t&&(n=t.context,i=t.filter,o=t.enterMode),!n&&null!==n&&(n=this.editor.editable().getName()),this.editor.fire("toDataFormat",{dataValue:e,filter:i||this.editor.filter,context:n,enterMode:o||this.editor.enterMode}).dataValue}};var T=/(?:&nbsp;|\xa0)$/,C="{cke_protected}",v=CKEDITOR.dtd,o=["caption","colgroup","col","thead","tfoot","tbody"],I=CKEDITOR.tools.extend({},v.$blockLimit,v.$block),O={elements:{input:e,textarea:e}},b={attributeNames:[[/^on/,"data-cke-pa-on"],[/^data-cke-expando$/,""]]},D={elements:{embed:function(e){if((n=e.parent)&&"object"==n.name){var t=n.attributes.width,n=n.attributes.height;t&&(e.attributes.width=t),n&&(e.attributes.height=n)}},a:function(e){if(!e.children.length&&!e.attributes.name&&!e.attributes["data-cke-saved-name"])return!1}}},R={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(e){var t=e.attributes;if(t){if(t["data-cke-temp"])return!1;for(var n=["name","href","src"],i=0;i<n.length;i++)"data-cke-saved-"+n[i]in t&&delete t[n[i]]}return e},table:function(e){e.children.slice(0).sort(function(e,t){var n,i;return e.type==CKEDITOR.NODE_ELEMENT&&t.type==e.type&&(n=CKEDITOR.tools.indexOf(o,e.name),i=CKEDITOR.tools.indexOf(o,t.name)),-1<n&&-1<i&&n!=i||(n=e.parent?e.getIndex():-1,i=t.parent?t.getIndex():-1),i<n?1:-1})},param:function(e){return e.children=[],e.isEmpty=!0,e},span:function(e){"Apple-style-span"==e.attributes["class"]&&delete e.name},html:function(e){delete e.attributes.contenteditable,delete e.attributes["class"]},body:function(e){delete e.attributes.spellcheck,delete e.attributes.contenteditable},style:function(e){var t=e.children[0];t&&t.value&&(t.value=CKEDITOR.tools.trim(t.value)),e.attributes.type||(e.attributes.type="text/css")},title:function(e){var t=e.children[0];!t&&m(e,t=new CKEDITOR.htmlParser.text),t.value=e.attributes["data-cke-title"]||""},input:t,textarea:t},attributes:{"class":function(e){return CKEDITOR.tools.ltrim(e.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(R.attributes.style=function(e){return e.replace(/(^|;)([^\:]+)/g,function(e){return e.toLowerCase()})});var i=/<(a|area|img|input|source)\b([^>]*)>/gi,y=/\s(on\w+|href|src|name)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,_=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,K=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,w=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,k=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,N=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,x=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi}(),CKEDITOR.htmlParser.element=function(e,t){this.name=e,this.attributes=t||{},this.children=[];var n=e||"",i=n.match(/^cke:(.*)/);i&&(n=i[1]),n=!!(CKEDITOR.dtd.$nonBodyContent[n]||CKEDITOR.dtd.$block[n]||CKEDITOR.dtd.$listItem[n]||CKEDITOR.dtd.$tableContent[n]||CKEDITOR.dtd.$nonEditable[n]||"br"==n),this.isEmpty=!!CKEDITOR.dtd.$empty[e],this.isUnknown=!CKEDITOR.dtd[e],this._={isBlockLike:n,hasInlineStarted:this.isEmpty||!n}},CKEDITOR.htmlParser.cssStyle=function(e){var i={};return((e instanceof CKEDITOR.htmlParser.element?e.attributes.style:e)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(e,t,n){"font-family"==t&&(n=n.replace(/["']/g,"")),i[t.toLowerCase()]=n}),{rules:i,populate:function(e){var t=this.toString();t&&(e instanceof CKEDITOR.dom.element?e.setAttribute("style",t):e instanceof CKEDITOR.htmlParser.element?e.attributes.style=t:e.style=t)},toString:function(){var e,t=[];for(e in i)i[e]&&t.push(e,":",i[e],";");return t.join("")}}},function(){function i(t){return function(e){return e.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof t?e.name==t:e.name in t)}}var a=function(e,t){return(e=e[0])<(t=t[0])?-1:t<e?1:0},e=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:e.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(e,t){var n,i,o,r,s=this;if((t=s.getFilterContext(t)).off)return!0;for(s.parent||e.onRoot(t,s);;){if(n=s.name,!(i=e.onElementName(t,n)))return this.remove(),!1;if(s.name=i,!(s=e.onElement(t,s)))return this.remove(),!1;if(s!==this)return this.replaceWith(s),!1;if(s.name==n)break;if(s.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(s),!1;if(!s.name)return this.replaceWithChildren(),!1}for(o in n=s.attributes){for(i=n[r=o];;){if(!(r=e.onAttributeName(t,o))){delete n[o];break}if(r==o)break;delete n[o],o=r}r&&(!1===(i=e.onAttribute(t,s,r,i))?delete n[r]:n[r]=i)}return s.isEmpty||this.filterChildren(e,!1,t),!0},filterChildren:e.filterChildren,writeHtml:function(e,t){t&&this.filter(t);var n,i,o=this.name,r=[],s=this.attributes;for(n in e.openTag(o,s),s)r.push([n,s[n]]);for(e.sortAttributes&&r.sort(a),n=0,i=r.length;n<i;n++)s=r[n],e.attribute(s[0],s[1]);e.openTagClose(o,this.isEmpty),this.writeChildrenHtml(e),this.isEmpty||e.closeTag(o)},writeChildrenHtml:e.writeChildrenHtml,replaceWithChildren:function(){for(var e=this.children,t=e.length;t;)e[--t].insertAfter(this);this.remove()},forEach:e.forEach,getFirst:function(e){if(!e)return this.children.length?this.children[0]:null;"function"!=typeof e&&(e=i(e));for(var t=0,n=this.children.length;t<n;++t)if(e(this.children[t]))return this.children[t];return null},getHtml:function(){var e=new CKEDITOR.htmlParser.basicWriter;return this.writeChildrenHtml(e),e.getHtml()},setHtml:function(e){for(var t=0,n=(e=this.children=CKEDITOR.htmlParser.fragment.fromHtml(e).children).length;t<n;++t)e[t].parent=this},getOuterHtml:function(){var e=new CKEDITOR.htmlParser.basicWriter;return this.writeHtml(e),e.getHtml()},split:function(e){for(var t=this.children.splice(e,this.children.length-e),n=this.clone(),i=0;i<t.length;++i)t[i].parent=n;return(n.children=t)[0]&&(t[0].previous=null),0<e&&(this.children[e-1].next=null),this.parent.add(n,this.getIndex()+1),n},removeClass:function(e){var t=this.attributes["class"];t&&((t=CKEDITOR.tools.trim(t.replace(RegExp("(?:\\s+|^)"+e+"(?:\\s+|$)")," ")))?this.attributes["class"]=t:delete this.attributes["class"])},hasClass:function(e){var t=this.attributes["class"];return!!t&&RegExp("(?:^|\\s)"+e+"(?=\\s|$)").test(t)},getFilterContext:function(e){var t=[];if(e||(e={off:!1,nonEditable:!1,nestedEditable:!1}),!e.off&&"off"==this.attributes["data-cke-processor"]&&t.push("off",!0),e.nonEditable||"false"!=this.attributes.contenteditable?!e.nestedEditable&&"true"==this.attributes.contenteditable&&t.push("nestedEditable",!0):t.push("nonEditable",!0),t.length){e=CKEDITOR.tools.copy(e);for(var n=0;n<t.length;n+=2)e[t[n]]=t[n+1]}return e}},!0)}(),k={},N=/{([^}]+)}/g,x=/([\\'])/g,S=/\n/g,A=/\r/g,CKEDITOR.template=function(e){if(k[e])this.output=k[e];else{var t=e.replace(x,"\\$1").replace(S,"\\n").replace(A,"\\r").replace(N,function(e,t){return"',data['"+t+"']==undefined?'{"+t+"}':data['"+t+"'],'"});this.output=k[e]=Function("data","buffer","return buffer?buffer.push('"+t+"'):['"+t+"'].join('');")}},delete CKEDITOR.loadFullCore,CKEDITOR.instances={},CKEDITOR.document=new CKEDITOR.dom.document(document),CKEDITOR.add=function(e){(CKEDITOR.instances[e.name]=e).on("focus",function(){CKEDITOR.currentInstance!=e&&(CKEDITOR.currentInstance=e,CKEDITOR.fire("currentInstance"))}),e.on("blur",function(){CKEDITOR.currentInstance==e&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))}),CKEDITOR.fire("instance",null,e)},CKEDITOR.remove=function(e){delete CKEDITOR.instances[e.name]},L={},CKEDITOR.addTemplate=function(e,t){var n=L[e];return n||(n={name:e,source:t},CKEDITOR.fire("template",n),L[e]=new CKEDITOR.template(n.source))},CKEDITOR.getTemplate=function(e){return L[e]},$=[],CKEDITOR.addCss=function(e){$.push(e)},CKEDITOR.getCss=function(){return $.join("\n")},CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")}),CKEDITOR.TRISTATE_ON=1,CKEDITOR.TRISTATE_OFF=2,CKEDITOR.TRISTATE_DISABLED=0,CKEDITOR.inline=function(e,t){if(!CKEDITOR.env.isCompatible)return null;if((e=CKEDITOR.dom.element.get(e)).getEditor())throw'The editor instance "'+e.getEditor().name+'" is already attached to the provided element.';var n=new CKEDITOR.editor(t,e,CKEDITOR.ELEMENT_MODE_INLINE),i=e.is("textarea")?e:null;return i?(n.setData(i.getValue(),null,!0),(e=CKEDITOR.dom.element.createFromHtml('<div contenteditable="'+!!n.readOnly+'" class="cke_textarea_inline">'+i.getValue()+"</div>",CKEDITOR.document)).insertAfter(i),i.hide(),i.$.form&&n._attachToForm()):n.setData(e.getHtml(),null,!0),n.on("loaded",function(){n.fire("uiReady"),n.editable(e),n.container=e,n.setData(n.getData(1)),n.resetDirty(),n.fire("contentDom"),n.mode="wysiwyg",n.fire("mode"),n.status="ready",n.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,n)},null,null,1e4),n.on("destroy",function(){i&&(n.container.clearCustomData(),n.container.remove(),i.show()),n.element.clearCustomData(),delete n.element}),n},CKEDITOR.inlineAll=function(){var e,t,n;for(n in CKEDITOR.dtd.$editable)for(var i=CKEDITOR.document.getElementsByTag(n),o=0,r=i.count();o<r;o++)"true"==(e=i.getItem(o)).getAttribute("contenteditable")&&!(t={element:e,config:{}})!==CKEDITOR.fire("inline",t)&&CKEDITOR.inline(e,t.config)},CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()}),CKEDITOR.replaceClass="ckeditor",function(){function i(e,t,n,i){if(!CKEDITOR.env.isCompatible)return null;if((e=CKEDITOR.dom.element.get(e)).getEditor())throw'The editor instance "'+e.getEditor().name+'" is already attached to the provided element.';var o=new CKEDITOR.editor(t,e,i);return i==CKEDITOR.ELEMENT_MODE_REPLACE&&(e.setStyle("visibility","hidden"),o._.required=e.hasAttribute("required"),e.removeAttribute("required")),n&&o.setData(n,null,!0),o.on("loaded",function(){s(o),i==CKEDITOR.ELEMENT_MODE_REPLACE&&o.config.autoUpdateElement&&e.$.form&&o._attachToForm(),o.setMode(o.config.startupMode,function(){o.resetDirty(),o.status="ready",o.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,o)})}),o.on("destroy",r),o}function r(){var e=this.container,t=this.element;e&&(e.clearCustomData(),e.remove()),t&&(t.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(t.show(),this._.required&&t.setAttribute("required","required")),delete this.element)}function s(e){var t=e.name,n=e.element,i=e.elementMode,o=e.fire("uiSpace",{space:"top",html:""}).html,r=e.fire("uiSpace",{space:"bottom",html:""}).html;a||(a=CKEDITOR.addTemplate("maincontainer",'<{outerEl} id="cke_{name}" class="{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir="{langDir}" lang="{langCode}" role="application" aria-labelledby="cke_{name}_arialbl"><span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span><{outerEl} class="cke_inner cke_reset" role="presentation">{topHtml}<{outerEl} id="{contentId}" class="cke_contents cke_reset" role="presentation"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>')),t=CKEDITOR.dom.element.createFromHtml(a.output({id:e.id,name:t,langDir:e.lang.dir,langCode:e.langCode,voiceLabel:[e.lang.editor,e.name].join(", "),topHtml:o?'<span id="'+e.ui.spaceId("top")+'" class="cke_top cke_reset_all" role="presentation" style="height:auto">'+o+"</span>":"",contentId:e.ui.spaceId("contents"),bottomHtml:r?'<span id="'+e.ui.spaceId("bottom")+'" class="cke_bottom cke_reset_all" role="presentation">'+r+"</span>":"",outerEl:CKEDITOR.env.ie?"span":"div"})),i==CKEDITOR.ELEMENT_MODE_REPLACE?(n.hide(),t.insertAfter(n)):n.append(t),e.container=t,o&&e.ui.space("top").unselectable(),r&&e.ui.space("bottom").unselectable(),n=e.config.width,i=e.config.height,n&&t.setStyle("width",CKEDITOR.tools.cssLength(n)),i&&e.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(i)),t.disableContextMenu(),CKEDITOR.env.webkit&&t.on("focus",function(){e.focus()}),e.fireOnce("uiReady")}var a;CKEDITOR.replace=function(e,t){return i(e,t,null,CKEDITOR.ELEMENT_MODE_REPLACE)},CKEDITOR.appendTo=function(e,t,n){return i(e,t,n,CKEDITOR.ELEMENT_MODE_APPENDTO)},CKEDITOR.replaceAll=function(e){for(var t=document.getElementsByTagName("textarea"),n=0;n<t.length;n++){var i=null,o=t[n];if(o.name||o.id){if("string"==typeof e){if(!RegExp("(?:^|\\s)"+e+"(?:$|\\s)").test(o.className))continue}else if("function"==typeof e&&!(i={})===e(o,i))continue;this.replace(o,i)}}},CKEDITOR.editor.prototype.addMode=function(e,t){(this._.modes||(this._.modes={}))[e]=t},CKEDITOR.editor.prototype.setMode=function(e,t){var n=this,i=this._.modes;if(e!=n.mode&&i&&i[e]){if(n.fire("beforeSetMode",e),n.mode){var o=n.checkDirty();n._.previousMode=n.mode,n.fire("beforeModeUnload"),n.editable(0),n.ui.space("contents").setHtml(""),n.mode=""}this._.modes[e](function(){n.mode=e,void 0!==o&&!o&&n.resetDirty(),setTimeout(function(){n.fire("mode"),t&&t.call(n)},0)})}},CKEDITOR.editor.prototype.resize=function(e,t,n,i){var o=this.container,r=this.ui.space("contents"),s=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement;(i=i?o.getChild(1):o).setSize("width",e,!0),s&&(s.style.width="1%"),r.setStyle("height",Math.max(t-(n?0:(i.$.offsetHeight||0)-(r.$.clientHeight||0)),0)+"px"),s&&(s.style.width="100%"),this.fire("resize")},CKEDITOR.editor.prototype.getResizable=function(e){return e?this.ui.space("contents"):this.container},CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)})}(),CKEDITOR.config.startupMode="wysiwyg",function(){function i(e){var t,n=e.editor,i=e.data.path,o=i.blockLimit,r=e.data.selection,s=r.getRanges()[0];(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)&&(r=a(r,i))&&(r.appendBogus(),t=CKEDITOR.env.ie),!1!==n.config.autoParagraph&&n.activeEnterMode!=CKEDITOR.ENTER_BR&&n.editable().equals(o)&&!i.block&&s.collapsed&&!s.getCommonAncestor().isReadOnly()&&((i=s.clone()).enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),(o=new CKEDITOR.dom.walker(i)).guard=function(e){return!F(e)||e.type==CKEDITOR.NODE_COMMENT||e.isReadOnly()},(!o.checkForward()||i.checkStartOfBlock()&&i.checkEndOfBlock())&&(n=s.fixBlock(!0,n.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(n=n.getFirst(F))&&n.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(n.getText()).match(/^(?:&nbsp;|\xa0)$/)&&n.remove(),t=1,e.cancel())),t&&s.select()}function a(e,t){if(e.isFake)return 0;var n=t.block||t.blockLimit,i=n&&n.getLast(F);return!n||!n.isBlockBoundary()||i&&i.type==CKEDITOR.NODE_ELEMENT&&i.isBlockBoundary()||n.is("pre")||n.getBogus()?void 0:n}function o(e){var t=e.data.getTarget();t.is("input")&&("submit"==(t=t.getAttribute("type"))||"reset"==t)&&e.data.preventDefault()}function F(e){return f(e)&&t(e)}function r(n,i){return function(e){var t=CKEDITOR.dom.element.get(e.data.$.toElement||e.data.$.fromElement||e.data.$.relatedTarget);(!t||!i.equals(t)&&!i.contains(t))&&n.call(this,e)}}function u(e){var i,t=e.getRanges()[0],n=e.root,o={table:1,ul:1,ol:1,dl:1};if(t.startPath().contains(o)){e=function(n){return function(e,t){if(
t&&e.type==CKEDITOR.NODE_ELEMENT&&e.is(o)&&(i=e),!t&&F(e)&&(!n||!s(e)))return!1}};var r=t.clone();if(r.collapse(1),r.setStartAt(n,CKEDITOR.POSITION_AFTER_START),(n=new CKEDITOR.dom.walker(r)).guard=e(),n.checkBackward(),i)return(r=t.clone()).collapse(),r.setEndAt(i,CKEDITOR.POSITION_AFTER_END),(n=new CKEDITOR.dom.walker(r)).guard=e(!0),i=!1,n.checkForward(),i}return null}function l(e){e.editor.focus(),e.editor.fire("saveSnapshot")}function P(e,t){var n=e.editor;!t&&n.getSelection().scrollIntoView(),setTimeout(function(){n.fire("saveSnapshot")},0)}CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(e,t){this.base(t.$||t),this.editor=e,this.hasFocus=!1,this.setup()},proto:{focus:function(){var e;if(CKEDITOR.env.webkit&&!this.hasFocus&&(e=this.editor._.previousActive||this.getDocument().getActive(),this.contains(e)))e.focus();else{try{this.$[CKEDITOR.env.ie&&this.getDocument().equals(CKEDITOR.document)?"setActive":"focus"]()}catch(o){if(!CKEDITOR.env.ie)throw o}CKEDITOR.env.safari&&!this.isInline()&&((e=CKEDITOR.document.getActive()).equals(this.getWindow().getFrame())||this.getWindow().focus())}},on:function(e,t){var n=Array.prototype.slice.call(arguments,0);return CKEDITOR.env.ie&&/^focus|blur$/.exec(e)&&(e="focus"==e?"focusin":"focusout",t=r(t,this),n[0]=e,n[1]=t),CKEDITOR.dom.element.prototype.on.apply(this,n)},attachListener:function(e,t,n,i,o,r){!this._.listeners&&(this._.listeners=[]);var s=Array.prototype.slice.call(arguments,1);s=e.on.apply(e,s);return this._.listeners.push(s),s},clearListeners:function(){var e=this._.listeners;try{for(;e.length;)e.pop().removeListener()}catch(o){}},restoreAttrs:function(){var e,t,n=this._.attrChanges;for(t in n)n.hasOwnProperty(t)&&(null!==(e=n[t])?this.setAttribute(t,e):this.removeAttribute(t))},attachClass:function(e){var t=this.getCustomData("classes");this.hasClass(e)||(!t&&(t=[]),t.push(e),this.setCustomData("classes",t),this.addClass(e))},changeAttr:function(e,t){var n=this.getAttribute(e);t!==n&&(!this._.attrChanges&&(this._.attrChanges={}),e in this._.attrChanges||(this._.attrChanges[e]=n),this.setAttribute(e,t))},insertHtml:function(e,t){l(this),c(this,t||"html",e)},insertText:function(e){l(this);var t=(i=(t=this.editor).getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:t.activeEnterMode)==CKEDITOR.ENTER_BR,n=CKEDITOR.tools,i=(e=(e=n.htmlEncode(e.replace(/\r\n/g,"\n"))).replace(/\t/g,"&nbsp;&nbsp; &nbsp;"),i==CKEDITOR.ENTER_P?"p":"div");if(!t){var o=/\n{2}/g;if(o.test(e)){var r="<"+i+">",s="</"+i+">";e=r+e.replace(o,function(){return s+r})+s}}e=e.replace(/\n/g,"<br>"),t||(e=e.replace(RegExp("<br>(?=</"+i+">)"),function(e){return n.repeat(e,2)})),e=(e=e.replace(/^ | $/g,"&nbsp;")).replace(/(>|\s) /g,function(e,t){return t+"&nbsp;"}).replace(/ (?=<)/g,"&nbsp;"),c(this,"text",e)},insertElement:function(e,t){t?this.insertElementIntoRange(e,t):this.insertElementIntoSelection(e)},insertElementIntoRange:function(e,t){var n,i,o=this.editor,r=o.config.enterMode,s=e.getName(),a=CKEDITOR.dtd.$block[s];if(t.checkReadOnly())return!1;if(t.deleteContents(1),t.startContainer.type==CKEDITOR.NODE_ELEMENT&&t.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})&&d(t),a)for(;(n=t.getCommonAncestor(0,1))&&(i=CKEDITOR.dtd[n.getName()])&&(!i||!i[s]);)n.getName()in CKEDITOR.dtd.span?t.splitElement(n):t.checkStartOfBlock()&&t.checkEndOfBlock()?(t.setStartBefore(n),t.collapse(!0),n.remove()):t.splitBlock(r==CKEDITOR.ENTER_DIV?"div":"p",o.editable());return t.insertNode(e),!0},insertElementIntoSelection:function(e){var t,n=(t=this.editor).activeEnterMode,i=(t=t.getSelection()).getRanges()[0],o=e.getName();o=CKEDITOR.dtd.$block[o];l(this),this.insertElementIntoRange(e,i)&&(i.moveToPosition(e,CKEDITOR.POSITION_AFTER_END),o&&((o=e.getNext(function(e){return F(e)&&!s(e)}))&&o.type==CKEDITOR.NODE_ELEMENT&&o.is(CKEDITOR.dtd.$block)?o.getDtd()["#"]?i.moveToElementEditStart(o):i.moveToElementEditEnd(e):o||n==CKEDITOR.ENTER_BR||(o=i.fixBlock(!0,n==CKEDITOR.ENTER_DIV?"div":"p"),i.moveToElementEditStart(o)))),t.selectRanges([i]),P(this,CKEDITOR.env.opera)},setData:function(e,t){t||(e=this.editor.dataProcessor.toHtml(e)),this.setHtml(e),this.editor.fire("dataReady")},getData:function(e){var t=this.getHtml();return e||(t=this.editor.dataProcessor.toDataFormat(t)),t},setReadOnly:function(e){this.setAttribute("contenteditable",!e)},detach:function(){this.removeClass("cke_editable");var e=this.editor;this._.detach(),delete e.document,delete e.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},setup:function(){var c=this.editor;if(this.attachListener(c,"beforeGetData",function(){var e=this.getData();this.is("textarea")||!1!==c.config.ignoreEmptyParagraph&&(e=e.replace(h,function(e,t){return t})),c.setData(e,null,1)},this),this.attachListener(c,"getSnapshot",function(e){e.data=this.getData(1)},this),this.attachListener(c,"afterSetData",function(){this.setData(c.getData(1))},this),this.attachListener(c,"loadSnapshot",function(e){this.setData(e.data,1)},this),this.attachListener(c,"beforeFocus",function(){var e=c.getSelection();(e=e&&e.getNative())&&"Control"==e.type||this.focus()},this),this.attachListener(c,"insertHtml",function(e){this.insertHtml(e.data.dataValue,e.data.mode)},this),this.attachListener(c,"insertElement",function(e){this.insertElement(e.data)},this),this.attachListener(c,"insertText",function(e){this.insertText(e.data)},this),this.setReadOnly(c.readOnly),this.attachClass("cke_editable"),this.attachClass(c.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"cke_editable_inline":c.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE||c.elementMode==CKEDITOR.ELEMENT_MODE_APPENDTO?"cke_editable_themed":""),this.attachClass("cke_contents_"+c.config.contentsLangDirection),c.keystrokeHandler.blockedKeystrokes[8]=+c.readOnly,c.keystrokeHandler.attach(this),this.on("blur",function(e){CKEDITOR.env.opera&&CKEDITOR.document.getActive().equals(this.isInline()?this:this.getWindow().getFrame())?e.cancel():this.hasFocus=!1},null,null,-1),this.on("focus",function(){this.hasFocus=!0},null,null,-1),c.focusManager.add(this),this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,c.once("contentDom",function(){c.focusManager.focus()})),this.isInline()&&this.changeAttr("tabindex",c.tabIndex),!this.is("textarea")){c.document=this.getDocument(),c.window=this.getWindow();var e=c.document;this.changeAttr("spellcheck",!c.config.disableNativeSpellChecker);var t=c.config.contentsLangDirection;this.getDirection(1)!=t&&this.changeAttr("dir",t);var n=CKEDITOR.getCss();n&&((t=e.getHead()).getCustomData("stylesheet")||(n=e.appendStyleText(n),n=new CKEDITOR.dom.element(n.ownerNode||n.owningElement),t.setCustomData("stylesheet",n),n.data("cke-temp",1))),t=e.getCustomData("stylesheet_ref")||0,e.setCustomData("stylesheet_ref",t+1),this.setCustomData("cke_includeReadonly",!c.config.disableReadonlyStyling),this.attachListener(this,"click",function(e){e=e.data;var t=new CKEDITOR.dom.elementPath(e.getTarget(),this).contains("a");t&&2!=e.$.button&&t.isReadOnly()&&e.preventDefault()});var d={8:1,46:1};this.attachListener(c,"key",function(e){if(c.readOnly)return!0;var t;if((l=e.data.keyCode)in d){var n,i,o,r,s=(e=c.getSelection()).getRanges()[0],a=s.startPath(),l=8==l;CKEDITOR.env.ie&&CKEDITOR.env.version<11&&(n=e.getSelectedElement())||(n=u(e))?(c.fire("saveSnapshot"),s.moveToPosition(n,CKEDITOR.POSITION_BEFORE_START),n.remove(),s.select(),c.fire("saveSnapshot"),t=1):s.collapsed&&((i=a.block)&&(r=i[l?"getPrevious":"getNext"](f))&&r.type==CKEDITOR.NODE_ELEMENT&&r.is("table")&&s[l?"checkStartOfBlock":"checkEndOfBlock"]()?(c.fire("saveSnapshot"),s[l?"checkEndOfBlock":"checkStartOfBlock"]()&&i.remove(),s["moveToElementEdit"+(l?"End":"Start")](r),s.select(),c.fire("saveSnapshot"),t=1):a.blockLimit&&a.blockLimit.is("td")&&(o=a.blockLimit.getAscendant("table"))&&s.checkBoundaryOfElement(o,l?CKEDITOR.START:CKEDITOR.END)&&(r=o[l?"getPrevious":"getNext"](f))?(c.fire("saveSnapshot"),s["moveToElementEdit"+(l?"End":"Start")](r),s.checkStartOfBlock()&&s.checkEndOfBlock()?r.remove():s.select(),c.fire("saveSnapshot"),t=1):(o=a.contains(["td","th","caption"]))&&s.checkBoundaryOfElement(o,l?CKEDITOR.START:CKEDITOR.END)&&(t=1))}return!t}),c.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",function(e){e.data.getKeystroke()in d&&!this.getFirst(F)&&(this.appendBogus(),(e=c.createRange()).moveToPosition(this,CKEDITOR.POSITION_AFTER_START),e.select())}),this.attachListener(this,"dblclick",function(e){if(c.readOnly)return!1;e={element:e.data.getTarget()},c.fire("doubleclick",e)}),CKEDITOR.env.ie&&this.attachListener(this,"click",o),!CKEDITOR.env.ie&&!CKEDITOR.env.opera&&this.attachListener(this,"mousedown",function(e){var t=e.data.getTarget();t.is("img","hr","input","textarea","select")&&(c.getSelection().selectElement(t),t.is("input","textarea","select")&&e.data.preventDefault())}),CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(e){if(2==e.data.$.button&&!(e=e.data.getTarget()).getOuterHtml().replace(h,"")){var t=c.createRange();t.moveToElementEditStart(e),t.select(!0)}}),CKEDITOR.env.webkit&&(this.attachListener(this,"click",function(e){e.data.getTarget().is("input","select")&&e.data.preventDefault()}),this.attachListener(this,"mouseup",function(e){e.data.getTarget().is("input","textarea")&&e.data.preventDefault()}))}}},_:{detach:function(){var e;if(this.editor.setData(this.editor.getData(),0,1),this.clearListeners(),this.restoreAttrs(),e=this.removeCustomData("classes"))for(;e.length;)this.removeClass(e.pop());var t=(e=this.getDocument()).getHead();if(t.getCustomData("stylesheet")){var n=e.getCustomData("stylesheet_ref");--n?e.setCustomData("stylesheet_ref",n):(e.removeCustomData("stylesheet_ref"),t.removeCustomData("stylesheet").remove())}this.editor.fire("contentDomUnload"),delete this.editor}}}),CKEDITOR.editor.prototype.editable=function(e){var t=this._.editable;return t&&e?0:(arguments.length&&(t=this._.editable=e?e instanceof CKEDITOR.editable?e:new CKEDITOR.editable(this,e):(t&&t.detach(),null)),t)};var s=CKEDITOR.dom.walker.bogus(),h=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,f=CKEDITOR.dom.walker.whitespaces(!0),t=CKEDITOR.dom.walker.bookmark(!1,!0);CKEDITOR.on("instanceLoaded",function(e){var n=e.editor;n.on("insertElement",function(e){(e=e.data).type==CKEDITOR.NODE_ELEMENT&&(e.is("input")||e.is("textarea"))&&("false"!=e.getAttribute("contentEditable")&&e.data("cke-editable",e.hasAttribute("contenteditable")?"true":"1"),e.setAttribute("contentEditable",!1))}),n.on("selectionChange",function(e){if(!n.readOnly){var t=n.getSelection();t&&!t.isLocked&&(t=n.checkDirty(),n.fire("lockSnapshot"),i(e),n.fire("unlockSnapshot"),!t&&n.resetDirty())}})}),CKEDITOR.on("instanceCreated",function(e){var o=e.editor;o.on("mode",function(){var e=o.editable();if(e&&e.isInline()){var t=o.title;if(e.changeAttr("role","textbox"),e.changeAttr("aria-label",t),t&&e.changeAttr("title",t),t=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents")){var n=CKEDITOR.tools.getNextId(),i=CKEDITOR.dom.element.createFromHtml('<span id="'+n+'" class="cke_voice_label">'+this.lang.common.editorHelp+"</span>");t.append(i),e.changeAttr("aria-describedby",n)}}})}),CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}");var c=function(){function K(e){return e.type==CKEDITOR.NODE_ELEMENT}function w(e,t){var n,i,o,r,s=[],a=t.range.startContainer;n=t.range.startPath();a=A[a.getName()];for(var l=0,c=e.getChildren(),d=c.count(),u=-1,h=-1,f=0,m=n.contains(A.$list);l<d;++l)K(n=c.getItem(l))?(o=n.getName(),m&&o in CKEDITOR.dtd.$list?s=s.concat(w(n,t)):(r=!!a[o],"br"!=o||!n.data("cke-eol")||l&&l!=d-1||(f=(i=l?s[l-1].node:c.getItem(l+1))&&(!K(i)||!i.is("br")),i=i&&K(i)&&A.$block[i.getName()]),-1==u&&!r&&(u=l),r||(h=l),s.push({isElement:1,isLineBreak:f,isBlock:n.isBlockBoundary(),hasBlockSibling:i,node:n,name:o,allowed:r}),i=f=0)):s.push({isElement:0,node:n,allowed:1});return-1<u&&(s[u].firstNotAllowed=1),-1<h&&(s[h].lastNotAllowed=1),s}function k(e,t){var n,i=[],o=e.getChildren(),r=o.count(),s=0,a=A[t],l=!e.is(A.$inline)||e.is("br");for(l&&i.push(" ");s<r;s++)K(n=o.getItem(s))&&!n.is(a)?i=i.concat(k(n,t)):i.push(n);return l&&i.push(" "),i}function N(e){return e&&K(e)&&(e.is(A.$removeEmpty)||e.is("a")&&!e.isBlockBoundary())}function x(e,t,n,i){var o,r,s=e.clone();s.setEndAt(t,CKEDITOR.POSITION_BEFORE_END),(o=new CKEDITOR.dom.walker(s).next())&&K(o)&&a[o.getName()]&&(r=o.getPrevious())&&K(r)&&!r.getParent().equals(e.startContainer)&&n.contains(r)&&i.contains(o)&&o.isIdentical(r)&&(o.moveChildren(r),o.remove(),x(e,t,n,i))}function S(e,t){function n(e,t){if(t.isBlock&&t.isElement&&!t.node.is("br")&&K(e)&&e.is("br"))return e.remove(),1}var i=t.endContainer.getChild(t.endOffset),o=t.endContainer.getChild(t.endOffset-1);i&&n(i,e[e.length-1]),o&&n(o,e[0])&&(t.setEnd(t.endContainer,t.endOffset-1),t.collapse())}var A=CKEDITOR.dtd,a={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},L={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},$=CKEDITOR.tools.extend({},A.$inline);return delete $.br,function(e,t,n){var i=e.editor;e.getDocument();var o=i.getSelection().getRanges()[0],r=!1;if("unfiltered_html"==t&&(t="html",r=!0),!o.checkReadOnly()){var s,a,l,c,d;i=(t={type:t,dontFilter:r,editable:e,editor:i,range:o,blockLimit:u=new CKEDITOR.dom.elementPath(o.startContainer,o.root).blockLimit||o.root,mergeCandidates:[],zombies:[]}).range,r=t.mergeCandidates;if("text"==t.type&&i.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(s=CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",i.document),i.insertNode(s),i.setStartAfter(s)),a=new CKEDITOR.dom.elementPath(i.startContainer),t.endPath=l=new CKEDITOR.dom.elementPath(i.endContainer),!i.collapsed){var u=l.block||l.blockLimit,h=i.getCommonAncestor();u&&!u.equals(h)&&!u.contains(h)&&i.checkEndOfBlock()&&t.zombies.push(u),i.deleteContents()}for(;(c=K(i.startContainer)&&i.startContainer.getChild(i.startOffset-1))&&K(c)&&c.isBlockBoundary()&&a.contains(c);)i.moveToPosition(c,CKEDITOR.POSITION_BEFORE_END);for(x(i,t.blockLimit,a,l),s&&(i.setEndBefore(s),i.collapse(),s.remove()),(u=(s=i.startPath()).contains(N,!1,1))&&(i.splitElement(u),t.inlineStylesRoot=u,t.inlineStylesPeak=s.lastElement),(u=(s=i.createBookmark()).startNode.getPrevious(F))&&K(u)&&N(u)&&r.push(u),(u=s.startNode.getNext(F))&&K(u)&&N(u)&&r.push(u),u=s.startNode;(u=u.getParent())&&N(u);)r.push(u);if(i.moveToBookmark(s),s=n){if(s=t.range,"text"==t.type&&t.inlineStylesRoot){for(i=(c=t.inlineStylesPeak).getDocument().createText("{cke-peak}"),r=t.inlineStylesRoot.getParent();!c.equals(r);)i=i.appendTo(c.clone()),c=c.getParent();n=i.getOuterHtml().split("{cke-peak}").join(n)}if(c=t.blockLimit.getName(),/^\s+|\s+$/.test(n)&&"span"in CKEDITOR.dtd[c])n=(g='<span data-cke-marker="1">&nbsp;</span>')+n+g;if(n=t.editor.dataProcessor.toHtml(n,{context:null,fixForBody:!1,dontFilter:t.dontFilter,filter:t.editor.activeFilter,enterMode:t.editor.activeEnterMode}),(c=s.document.createElement("body")).setHtml(n),g&&(c.getFirst().remove(),c.getLast().remove()),(g=s.startPath().block)&&(1!=g.getChildCount()||!g.getBogus()))e:{var f;if(1==c.getChildCount()&&K(f=c.getFirst())&&f.is(L)){for(s=0,r=(g=f.getElementsByTag("*")).count();s<r;s++)if(!(i=g.getItem(s)).is($))break e;f.moveChildren(f.getParent(1)),f.remove()}}t.dataWrapper=c,s=n}if(s){var m,p,g=(f=t.range).document;n=t.blockLimit;c=[];var E,T,C,v,I;r=i=s=0;for(a=f.startContainer,l=(u=t.endPath.elements[0]).getPosition(a),h=!(!u.getCommonAncestor(a)||l==CKEDITOR.POSITION_IDENTICAL||l&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED),S(a=w(t.dataWrapper,t),f);s<a.length;s++){if(m=(l=a[s]).isLineBreak){m=f,C=n;var O=void 0,b=void 0;m=l.hasBlockSibling?1:(O=m.startContainer.getAscendant(A.$block,1))&&O.is({div:1,p:1})?(b=O.getPosition(C))==CKEDITOR.POSITION_IDENTICAL||b==CKEDITOR.POSITION_CONTAINS?0:(C=m.splitElement(O),m.moveToPosition(C,CKEDITOR.POSITION_AFTER_START),1):0}if(m)r=0<s;else{if(m=f.startPath(),!l.isBlock&&!1!==t.editor.config.autoParagraph&&t.editor.activeEnterMode!=CKEDITOR.ENTER_BR&&t.editor.editable().equals(m.blockLimit)&&!m.block&&(T=t.editor.activeEnterMode!=CKEDITOR.ENTER_BR&&!1!==t.editor.config.autoParagraph&&(t.editor.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"))&&((T=g.createElement(T)).appendBogus(),f.insertNode(T),CKEDITOR.env.needsBrFiller&&(p=T.getBogus())&&p.remove(),f.moveToPosition(T,CKEDITOR.POSITION_BEFORE_END)),(m=f.startPath().block)&&!m.equals(E)&&((p=m.getBogus())&&(p.remove(),c.push(m)),E=m),l.firstNotAllowed&&(i=1),i&&l.isElement){for(m=f.startContainer,C=null;m&&!A[m.getName()][l.name];){if(m.equals(n)){m=null;break}m=(C=m).getParent()}if(m)C&&(v=f.splitElement(C),t.zombies.push(v),t.zombies.push(C));else{C=n.getName(),I=!s,m=s==a.length-1;O=[],b=(C=k(l.node,C)).length;for(var D=0,R=void 0,y=0,_=-1;D<b;D++)y=" "==(R=C[D])?(y||I&&!D||(O.push(new CKEDITOR.dom.text(" ")),_=O.length),1):(O.push(R),0);m&&_==O.length&&O.pop(),I=O}}if(I){for(;m=I.pop();)f.insertNode(m);I=0}else f.insertNode(l.node);l.lastNotAllowed&&s<a.length-1&&((v=h?u:v)&&f.setEndAt(v,CKEDITOR.POSITION_AFTER_START),i=0),f.collapse()}}t.dontMoveCaret=r,t.bogusNeededBlocks=c}for(p=t.range,v=t.bogusNeededBlocks,I=p.createBookmark();E=t.zombies.pop();)E.getParent()&&((T=p.clone()).moveToElementEditStart(E),T.removeEmptyBlocksAtEnd());if(v)for(;E=v.pop();)CKEDITOR.env.needsBrFiller?E.appendBogus():E.append(p.document.createText("\xa0"));for(;E=t.mergeCandidates.pop();)E.mergeSiblings();if(p.moveToBookmark(I),!t.dontMoveCaret){for(E=K(p.startContainer)&&p.startContainer.getChild(p.startOffset-1);E&&K(E)&&!E.is(A.$empty);){if(E.isBlockBoundary())p.moveToPosition(E,CKEDITOR.POSITION_BEFORE_END);else{if(N(E)&&E.getHtml().match(/(\s|&nbsp;)$/g)){d=null;break}(d=p.clone()).moveToPosition(E,CKEDITOR.POSITION_BEFORE_END)}E=E.getLast(F)}d&&p.moveToRange(d)}o.select(),P(e)}}}(),d=function(){function o(e){return(e=new CKEDITOR.dom.walker(e)).guard=function(e,t){return!t&&(e.type==CKEDITOR.NODE_ELEMENT?e.is(CKEDITOR.dtd.$tableContent):void 0)},e.evaluator=function(e){return e.type==CKEDITOR.NODE_ELEMENT},e}function r(e,t,n){return t=e.getDocument().createElement(t),e.append(t,n),t}function s(e){for(var t,n=e.count();0<n--;)t=e.getItem(n),CKEDITOR.tools.trim(t.getHtml())||(t.appendBogus(),CKEDITOR.env.ie&&CKEDITOR.env.version<9&&t.getChildCount()&&t.getFirst().remove())}return function(e){var t=e.startContainer,n=t.getAscendant("table",1),i=!1;s(n.getElementsByTag("td")),s(n.getElementsByTag("th")),(n=e.clone()).setStart(t,0),(n=o(n).lastBackward())||((n=e.clone()).setEndAt(t,CKEDITOR.POSITION_BEFORE_END),n=o(n).lastForward(),i=!0),n||(n=t),n.is("table")?(e.setStartAt(n,CKEDITOR.POSITION_BEFORE_START),e.collapse(!0),n.remove()):(n.is({tbody:1,thead:1,tfoot:1})&&(n=r(n,"tr",i)),n.is("tr")&&(n=r(n,n.getParent().is("thead")?"th":"td",i)),(t=n.getBogus())&&t.remove(),e.moveToPosition(n,i?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}()}(),function(){function f(){var e,t=this._.fakeSelection;t&&((e=this.getSelection(1))&&e.isHidden()||(t.reset(),t=0)),(t||(t=e||this.getSelection(1))&&t.getType()!=CKEDITOR.SELECTION_NONE)&&(this.fire("selectionCheck",t),(e=this.elementPath()).compare(this._.selectionPreviousPath)||(CKEDITOR.env.webkit&&(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=e,this.fire("selectionChange",{selection:t,path:e})))}function m(){n=!0,e||(t.call(this),e=CKEDITOR.tools.setTimeout(t,200,this))}function t(){e=null,n&&(CKEDITOR.tools.setTimeout(f,0,this),n=!1)}function u(n){function e(e,t){return!(!e||e.type==CKEDITOR.NODE_TEXT)&&n.clone()["moveToElementEdit"+(t?"End":"Start")](e)}if(!(n.root instanceof CKEDITOR.editable))return!1;var t=n.startContainer,i=n.getPreviousNode(s,null,t),o=n.getNextNode(s,null,t);return!(!e(i)&&!e(o,1)&&(i||o||t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary()&&t.getBogus()))}function r(e){return e.getCustomData("cke-fillingChar")}function p(e,t){var n=e&&e.removeCustomData("cke-fillingChar");if(n){if(!1!==t){var i,o,r=e.getDocument().getSelection().getNative(),s=r&&"None"!=r.type&&r.getRangeAt(0);if(1<n.getLength()&&s&&s.intersectsNode(n.$))i=[r.anchorOffset,r.focusOffset],s=r.focusNode==n.$&&0<r.focusOffset,r.anchorNode==n.$&&0<r.anchorOffset&&i[0]--,s&&i[1]--,(s=r).isCollapsed||((o=s.getRangeAt(0)).setStart(s.anchorNode,s.anchorOffset),o.setEnd(s.focusNode,s.focusOffset),o=o.collapsed),o&&i.unshift(i.pop())}n.setText(a(n.getText())),i&&((n=r.getRangeAt(0)).setStart(n.startContainer,i[0]),n.setEnd(n.startContainer,i[1]),r.removeAllRanges(),r.addRange(n))}}function a(e){return e.replace(/\u200B( )?/g,function(e){return e[1]?"\xa0":""})}function g(e,t,n){var i=e.on("focus",function(e){e.cancel()},null,null,-100);if(CKEDITOR.env.ie)var o=e.getDocument().on("selectionchange",function(e){e.cancel()},null,null,-100);else{var r=new CKEDITOR.dom.range(e);r.moveToElementEditStart(e);var s=e.getDocument().$.createRange();s.setStart(r.startContainer.$,r.startOffset),s.collapse(1),t.removeAllRanges(),t.addRange(s)}n&&e.focus(),i.removeListener(),o&&o.removeListener()}function o(e){var t=CKEDITOR.dom.element.createFromHtml('<div data-cke-hidden-sel="1" data-cke-temp="1" style="'+(CKEDITOR.env.ie?"display:none":"position:fixed;top:0;left:-1000px")+'">&nbsp;</div>',e.document);e.fire("lockSnapshot"),e.editable().append(t);var n=e.getSelection(),i=e.createRange(),o=n.root.on("selectionchange",function(e){e.cancel()},null,null,0);i.setStartAt(t,CKEDITOR.POSITION_AFTER_START),i.setEndAt(t,CKEDITOR.POSITION_BEFORE_END),n.selectRanges([i]),o.removeListener(),e.fire("unlockSnapshot"),e._.hiddenSelectionContainer=t}function E(o){var r={37:1,39:1,8:1,46:1};return function(e){var t=e.data.getKeystroke();if(r[t]){var n=o.getSelection().getRanges(),i=n[0];1==n.length&&i.collapsed&&(t=i[t<38?"getPreviousEditableNode":"getNextEditableNode"]())&&t.type==CKEDITOR.NODE_ELEMENT&&"false"==t.getAttribute("contenteditable")&&(o.getSelection().fake(t),e.data.preventDefault(),e.cancel())}}}var e,n,s=CKEDITOR.dom.walker.invisible(1),T=function(){function e(n){return function(e){var t=e.editor.createRange();return t.moveToClosestEditablePosition(e.selected,n)&&e.editor.getSelection().selectRanges([t]),!1}}function t(o){return function(e){var t,n=e.editor,i=n.createRange();return(t=i.moveToClosestEditablePosition(e.selected,o))||(t=i.moveToClosestEditablePosition(e.selected,!o)),t&&n.getSelection().selectRanges([i]),n.fire("saveSnapshot"),e.selected.remove(),t||(i.moveToElementEditablePosition(n.editable()),n.getSelection().selectRanges([i])),n.fire("saveSnapshot"),!1}}var n=e(),i=e(1);return{37:n,38:n,39:i,40:i,8:t(),46:t(1)}}();CKEDITOR.on("instanceCreated",function(e){function t(){var e=h.getSelection();e&&e.removeAllRanges()}var h=e.editor;h.on("contentDom",function(){var t,e,n,i,o=h.document,r=CKEDITOR.document,s=h.editable(),a=o.getBody(),l=o.getDocumentElement(),c=s.isInline();if(CKEDITOR.env.gecko&&s.attachListener(s,"focus",function(e){e.removeListener(),0!==t&&(e=h.getSelection().getNative())&&e.isCollapsed&&e.anchorNode==s.$&&((e=h.createRange()).moveToElementEditStart(s),e.select())},null,null,-2),s.attachListener(s,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){t&&CKEDITOR.env.webkit&&(t=h._.previousActive&&h._.previousActive.equals(o.getActive())),h.unlockSelection(t),t=0},null,null,-1),s.attachListener(s,"mousedown",function(){t=0}),CKEDITOR.env.ie||CKEDITOR.env.opera||c){var d=function(){(e=new CKEDITOR.dom.selection(h.getSelection())).lock()};C?s.attachListener(s,"beforedeactivate",d,null,null,-1):s.attachListener(h,"selectionCheck",d,null,null,-1),s.attachListener(s,CKEDITOR.env.webkit?"DOMFocusOut":"blur",function(){h.lockSelection(e),t=1},null,null,-1),s.attachListener(s,"mousedown",function(){t=0})}if(CKEDITOR.env.ie&&!c&&(s.attachListener(s,"mousedown",function(e){2==e.data.$.button&&((e=h.document.getSelection())&&e.getType()!=CKEDITOR.SELECTION_NONE||(n=h.window.getScrollPosition()))}),s.attachListener(s,"mouseup",function(e){2==e.data.$.button&&n&&(h.document.$.documentElement.scrollLeft=n.x,h.document.$.documentElement.scrollTop=n.y),n=null}),"BackCompat"!=o.$.compatMode&&((CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&l.on("mousedown",function(e){function t(e){if(e=e.data.$,i){var t=a.$.createTextRange();try{t.moveToPoint(e.x,e.y)}catch(n){}i.setEndPoint(o.compareEndPoints("StartToStart",t)<0?"EndToEnd":"StartToStart",t),i.select()}}function n(){l.removeListener("mousemove",t),r.removeListener("mouseup",n),l.removeListener("mouseup",n),i.select()}if((e=e.data).getTarget().is("html")&&e.$.y<l.$.clientHeight&&e.$.x<l.$.clientWidth){var i=a.$.createTextRange();try{i.moveToPoint(e.$.x,e.$.y)}catch(C){}var o=i.duplicate();l.on("mousemove",t),r.on("mouseup",n),l.on("mouseup",n)}}),7<CKEDITOR.env.version&&CKEDITOR.env.version<11))){l.on("mousedown",function(e){e.data.getTarget().is("html")&&(r.on("mouseup",u),l.on("mouseup",u))});var u=function(){r.removeListener("mouseup",u),l.removeListener("mouseup",u);var e=CKEDITOR.document.$.selection,t=e.createRange();"None"!=e.type&&t.parentElement().ownerDocument==o.$&&t.select()}}(s.attachListener(s,"selectionchange",f,h),s.attachListener(s,"keyup",m,h),s.attachListener(s,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){h.forceNextSelectionCheck(),h.selectionChange(1)}),c?CKEDITOR.env.webkit||CKEDITOR.env.gecko:CKEDITOR.env.opera)?(s.attachListener(s,"mousedown",function(){i=1}),s.attachListener(o.getDocumentElement(),"mouseup",function(){i&&m.call(h),i=0})):s.attachListener(CKEDITOR.env.ie?s:o.getDocumentElement(),"mouseup",m,h);CKEDITOR.env.webkit&&s.attachListener(o,"keydown",function(e){switch(e.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:p(s)}},null,null,-1),s.attachListener(s,"keydown",E(h),null,null,-1)}),h.on("contentDomUnload",h.forceNextSelectionCheck,h),h.on("dataReady",function(){delete h._.fakeSelection,delete h._.hiddenSelectionContainer,h.selectionChange(1)}),h.on("loadSnapshot",function(){var e=h.editable().getLast(function(e){return e.type==CKEDITOR.NODE_ELEMENT});e&&e.hasAttribute("data-cke-hidden-sel")&&e.remove()},null,null,100),CKEDITOR.env.ie9Compat&&h.on("beforeDestroy",t,null,null,9),CKEDITOR.env.webkit&&h.on("setData",t),h.on("contentDomUnload",function(){h.unlockSelection()}),h.on("key",function(e){if("wysiwyg"==h.mode){var t=h.getSelection();if(t.isFake){var n=T[e.data.keyCode];if(n)return n({editor:h,selected:t.getSelectedElement(),selection:t,keyEvent:e})}}})}),CKEDITOR.on("instanceReady",function(e){var n=e.editor;if(CKEDITOR.env.webkit){n.on("selectionChange",function(){var e=n.editable(),t=r(e);t&&(t.getCustomData("ready")?p(e):t.setCustomData("ready",1))},null,null,-1),n.on("beforeSetMode",function(){p(n.editable())},null,null,-1);e=function(){var e=n.editable();if(e&&(e=r(e))){var t=n.document.$.defaultView.getSelection();"Caret"==t.type&&t.anchorNode==e.$&&(o=1),i=e.getText(),e.setText(a(i))}};var i,o,t=function(){var e=n.editable();e&&(e=r(e))&&(e.setText(i),o&&(n.document.$.defaultView.getSelection().setPosition(e.$,e.getLength()),o=0))};n.on("beforeUndoImage",e),n.on("afterUndoImage",t),n.on("beforeGetData",e,null,null,0),n.on("getData",t)}}),CKEDITOR.editor.prototype.selectionChange=function(e){(e?f:m).call(this)},CKEDITOR.editor.prototype.getSelection=function(e){return!this._.savedSelection&&!this._.fakeSelection||e?(e=this.editable())&&"wysiwyg"==this.mode?new CKEDITOR.dom.selection(e):null:this._.savedSelection||this._.fakeSelection},CKEDITOR.editor.prototype.lockSelection=function(e){return(e=e||this.getSelection(1)).getType()!=CKEDITOR.SELECTION_NONE&&(!e.isLocked&&e.lock(),this._.savedSelection=e,!0)},CKEDITOR.editor.prototype.unlockSelection=function(e){var t=this._.savedSelection;return!!t&&(t.unlock(e),delete this._.savedSelection,!0)},CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath},CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)},CKEDITOR.dom.range.prototype.select=function(){var e=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);return e.selectRanges([this]),e},CKEDITOR.SELECTION_NONE=1,CKEDITOR.SELECTION_TEXT=2,CKEDITOR.SELECTION_ELEMENT=3;var C="function"!=typeof window.getSelection,h=1;CKEDITOR.dom.selection=function(e){if(e instanceof CKEDITOR.dom.selection){var t=e;e=e.root}var n,i,o=e instanceof CKEDITOR.dom.element;if(this.rev=t?t.rev:h++,this.document=e instanceof CKEDITOR.dom.document?e:e.getDocument(),this.root=e=o?e:this.document.getBody(),this.isLocked=0,this._={cache:{}},t)return CKEDITOR.tools.extend(this._.cache,t._.cache),this.isFake=t.isFake,this.isLocked=t.isLocked,this;if(t=C?this.document.$.selection:this.document.getWindow().$.getSelection(),CKEDITOR.env.webkit)("None"==t.type&&this.document.getActive().equals(e)||"Caret"==t.type&&t.anchorNode.nodeType==CKEDITOR.NODE_DOCUMENT)&&g(e,t);else if(CKEDITOR.env.gecko)t&&this.document.getActive().equals(e)&&t.anchorNode&&t.anchorNode.nodeType==CKEDITOR.NODE_DOCUMENT&&g(e,t,!0);else if(CKEDITOR.env.ie){var r;try{r=this.document.getActive()}catch(m){}C?"None"==t.type&&r&&r.equals(this.document.getDocumentElement())&&g(e,null,!0):((t=t&&t.anchorNode)&&(t=new CKEDITOR.dom.node(t)),r&&r.equals(this.document.getDocumentElement())&&t&&(e.equals(t)||e.contains(t))&&g(e,null,!0))}if(r=this.getNative())if(r.getRangeAt)n=(i=r.rangeCount&&r.getRangeAt(0))&&new CKEDITOR.dom.node(i.commonAncestorContainer);else{try{i=r.createRange()}catch(E){}n=i&&CKEDITOR.dom.element.get(i.item&&i.item(0)||i.parentElement())}return(!n||n.type!=CKEDITOR.NODE_ELEMENT&&n.type!=CKEDITOR.NODE_TEXT||!this.root.equals(n)&&!this.root.contains(n))&&(this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList),this};var c,v={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=C?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:C?function(){var e=this._.cache;if(e.type)return e.type;var t=CKEDITOR.SELECTION_NONE;try{var n=this.getNative(),i=n.type;"Text"==i&&(t=CKEDITOR.SELECTION_TEXT),"Control"==i&&(t=CKEDITOR.SELECTION_ELEMENT),n.createRange().parentElement()&&(t=CKEDITOR.SELECTION_TEXT)}catch(m){}return e.type=t}:function(){var e=this._.cache;if(e.type)return e.type;var t=CKEDITOR.SELECTION_TEXT;if((n=this.getNative())&&n.rangeCount){if(1==n.rangeCount){var n,i=(n=n.getRangeAt(0)).startContainer;i==n.endContainer&&1==i.nodeType&&n.endOffset-n.startOffset==1&&v[i.childNodes[n.startOffset].nodeName.toLowerCase()]&&(t=CKEDITOR.SELECTION_ELEMENT)}}else t=CKEDITOR.SELECTION_NONE;return e.type=t},getRanges:(c=C?function(){function h(e){return new CKEDITOR.dom.node(e).getIndex()}var a=function(e,t){(e=e.duplicate()).collapse(t);var n=e.parentElement();if(!n.hasChildNodes())return{container:n,offset:0};for(var i,o,r,s,a=n.children,l=e.duplicate(),c=0,d=a.length-1,u=-1;c<=d;)if(i=a[u=Math.floor((c+d)/2)],l.moveToElementText(i),0<(r=l.compareEndPoints("StartToStart",e)))d=u-1;else{if(!(r<0))return{container:n,offset:h(i)};c=u+1}if(-1==u||u==a.length-1&&r<0){if(l.moveToElementText(n),l.setEndPoint("StartToStart",e),l=l.text.replace(/(\r\n|\r)/g,"\n").length,a=n.childNodes,!l)return(i=a[a.length-1]).nodeType!=CKEDITOR.NODE_TEXT?{container:n,offset:a.length}:{container:i,offset:i.nodeValue.length};for(n=a.length;0<l&&0<n;)(o=a[--n]).nodeType==CKEDITOR.NODE_TEXT&&(l-=(s=o).nodeValue.length);return{container:s,offset:-l}}if(l.collapse(0<r),l.setEndPoint(0<r?"StartToStart":"EndToStart",e),!(l=l.text.replace(/(\r\n|\r)/g,"\n").length))return{container:n,offset:h(i)+(0<r?0:1)};for(;0<l;)try{(o=i[0<r?"previousSibling":"nextSibling"]).nodeType==CKEDITOR.NODE_TEXT&&(l-=o.nodeValue.length,s=o),i=o}catch(g){return{container:n,offset:h(i)}}return{container:s,offset:0<r?-l:s.nodeValue.length+l}};return function(){var e=(s=this.getNative())&&s.createRange(),t=this.getType();if(!s)return[];if(t==CKEDITOR.SELECTION_TEXT)return s=new CKEDITOR.dom.range(this.root),t=a(e,!0),s.setStart(new CKEDITOR.dom.node(t.container),t.offset),t=a(e),s.setEnd(new CKEDITOR.dom.node(t.container),t.offset),s.endContainer.getPosition(s.startContainer
)&CKEDITOR.POSITION_PRECEDING&&s.endOffset<=s.startContainer.getIndex()&&s.collapse(),[s];if(t!=CKEDITOR.SELECTION_ELEMENT)return[];t=[];for(var n=0;n<e.length;n++){for(var i=e.item(n),o=i.parentNode,r=0,s=new CKEDITOR.dom.range(this.root);r<o.childNodes.length&&o.childNodes[r]!=i;r++);s.setStart(new CKEDITOR.dom.node(o),r),s.setEnd(new CKEDITOR.dom.node(o),r+1),t.push(s)}return t}}():function(){var e,t=[],n=this.getNative();if(!n)return t;for(var i=0;i<n.rangeCount;i++){var o=n.getRangeAt(i);(e=new CKEDITOR.dom.range(this.root)).setStart(new CKEDITOR.dom.node(o.startContainer),o.startOffset),e.setEnd(new CKEDITOR.dom.node(o.endContainer),o.endOffset),t.push(e)}return t},function(e){var t=this._.cache;if(t.ranges&&!e)return t.ranges;if(t.ranges||(t.ranges=new CKEDITOR.dom.rangeList(c.call(this))),e)for(var n=t.ranges,i=0;i<n.length;i++){var o=n[i];if(o.getCommonAncestor().isReadOnly()&&n.splice(i,1),!o.collapsed){var r;if(o.startContainer.isReadOnly())for(e=o.startContainer;e&&!((r=e.type==CKEDITOR.NODE_ELEMENT)&&e.is("body")||!e.isReadOnly());)r&&"false"==e.getAttribute("contentEditable")&&o.setStartAfter(e),e=e.getParent();e=o.startContainer,r=o.endContainer;var s=o.startOffset,a=o.endOffset,l=o.clone();e&&e.type==CKEDITOR.NODE_TEXT&&(s>=e.getLength()?l.setStartAfter(e):l.setStartBefore(e)),r&&r.type==CKEDITOR.NODE_TEXT&&(a?l.setEndAfter(r):l.setEndBefore(r)),(e=new CKEDITOR.dom.walker(l)).evaluator=function(e){if(e.type==CKEDITOR.NODE_ELEMENT&&e.isReadOnly()){var t=o.clone();return o.setEndBefore(e),o.collapsed&&n.splice(i--,1),e.getPosition(l.endContainer)&CKEDITOR.POSITION_CONTAINS||(t.setStartAfter(e),t.collapsed||n.splice(i+1,0,t)),!0}return!1},e.next()}}return t.ranges}),getStartElement:function(){var e,t=this._.cache;if(void 0!==t.startElement)return t.startElement;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var n=this.getRanges()[0];if(n){if(n.collapsed)(e=n.startContainer).type!=CKEDITOR.NODE_ELEMENT&&(e=e.getParent());else{for(n.optimize();e=n.startContainer,n.startOffset==(e.getChildCount?e.getChildCount():e.getLength())&&!e.isBlockBoundary();)n.setStartAfter(e);if((e=n.startContainer).type!=CKEDITOR.NODE_ELEMENT)return e.getParent();if((e=e.getChild(n.startOffset))&&e.type==CKEDITOR.NODE_ELEMENT)for(n=e.getFirst();n&&n.type==CKEDITOR.NODE_ELEMENT;)n=(e=n).getFirst();else e=n.startContainer}e=e.$}}return t.startElement=e?new CKEDITOR.dom.element(e):null},getSelectedElement:function(){var e=this._.cache;if(void 0!==e.selectedElement)return e.selectedElement;var o=this,t=CKEDITOR.tools.tryThese(function(){return o.getNative().createRange().item(0)},function(){for(var e,t,n=o.getRanges()[0].clone(),i=2;i&&(!(e=n.getEnclosedNode())||e.type!=CKEDITOR.NODE_ELEMENT||!v[e.getName()]||!(t=e));i--)n.shrink(CKEDITOR.SHRINK_ELEMENT);return t&&t.$});return e.selectedElement=t?new CKEDITOR.dom.element(t):null},getSelectedText:function(){var e=this._.cache;if(void 0!==e.selectedText)return e.selectedText;var t=this.getNative();t=C?"Control"==t.type?"":t.createRange().text:t.toString();return e.selectedText=t},lock:function(){this.getRanges(),this.getStartElement(),this.getSelectedElement(),this.getSelectedText(),this._.cache.nativeSel=null,this.isLocked=1},unlock:function(e){if(this.isLocked){if(e)var t=this.getSelectedElement(),n=!t&&this.getRanges(),i=this.isFake;this.isLocked=0,this.reset(),e&&(e=t||n[0]&&n[0].getCommonAncestor())&&e.getAscendant("body",1)&&(i?this.fake(t):t?this.selectElement(t):this.selectRanges(n))}},reset:function(){this._.cache={},this.isFake=0;var e=this.root.editor;if(e&&e._.fakeSelection&&this.rev==e._.fakeSelection.rev){delete e._.fakeSelection;var t=e._.hiddenSelectionContainer;t&&(e.fire("lockSnapshot"),t.remove(),e.fire("unlockSnapshot")),delete e._.hiddenSelectionContainer}this.rev=h++},selectElement:function(e){var t=new CKEDITOR.dom.range(this.root);t.setStartBefore(e),t.setEndAfter(e),this.selectRanges([t])},selectRanges:function(e){var t=(t=this.root.editor)&&t._.hiddenSelectionContainer;if(this.reset(),t){t=this.root;for(var n,i=0;i<e.length;++i)(n=e[i]).endContainer.equals(t)&&(n.endOffset=Math.min(n.endOffset,t.getChildCount()))}if(e.length)if(this.isLocked){var o=CKEDITOR.document.getActive();this.unlock(),this.selectRanges(e),this.lock(),!o.equals(this.root)&&o.focus()}else{var r,s,a;if(1==e.length&&!(a=e[0]).collapsed&&(r=a.getEnclosedNode())&&r.type==CKEDITOR.NODE_ELEMENT&&((a=a.clone()).shrink(CKEDITOR.SHRINK_ELEMENT,!0),(s=a.getEnclosedNode())&&s.type==CKEDITOR.NODE_ELEMENT&&(r=s),"false"==r.getAttribute("contenteditable"))||(r=void 0),r)this.fake(r);else{if(C){a=CKEDITOR.dom.walker.whitespaces(!0),s=/\ufeff|\u00a0/,t={table:1,tbody:1,tr:1},1<e.length&&(r=e[e.length-1],e[0].setEnd(r.endContainer,r.endOffset));var l,c,d;e=(r=e[0]).collapsed;if((n=r.getEnclosedNode())&&n.type==CKEDITOR.NODE_ELEMENT&&n.getName()in v&&(!n.is("a")||!n.getText()))try{return(d=n.$.createControlRange()).addElement(n.$),void d.select()}catch(h){}(r.startContainer.type==CKEDITOR.NODE_ELEMENT&&r.startContainer.getName()in t||r.endContainer.type==CKEDITOR.NODE_ELEMENT&&r.endContainer.getName()in t)&&r.shrink(CKEDITOR.NODE_ELEMENT,!0),t=(d=r.createBookmark()).startNode,e||(o=d.endNode),(d=r.document.$.body.createTextRange()).moveToElementText(t.$),d.moveStart("character",1),o?((s=r.document.$.body.createTextRange()).moveToElementText(o.$),d.setEndPoint("EndToEnd",s),d.moveEnd("character",-1)):(l=t.getNext(a),c=t.hasAscendant("pre"),l=!(l&&l.getText&&l.getText().match(s))&&(c||!t.hasPrevious()||t.getPrevious().is&&t.getPrevious().is("br")),(c=r.document.createElement("span")).setHtml("&#65279;"),c.insertBefore(t),l&&r.document.createText("\ufeff").insertBefore(t)),r.setStartBefore(t),t.remove(),e?(l?(d.moveStart("character",-1),d.select(),r.document.$.selection.clear()):d.select(),r.moveToPosition(c,CKEDITOR.POSITION_BEFORE_START),c.remove()):(r.setEndBefore(o),o.remove(),d.select())}else{if(!(o=this.getNative()))return;for(CKEDITOR.env.opera&&((d=this.document.$.createRange()).selectNodeContents(this.root.$),o.addRange(d)),this.removeAllRanges(),d=0;d<e.length;d++)if(d<e.length-1&&(r=e[d],l=e[d+1],(s=r.clone()).setStart(r.endContainer,r.endOffset),s.setEnd(l.startContainer,l.startOffset),!s.collapsed&&(s.shrink(CKEDITOR.NODE_ELEMENT,!0),c=s.getCommonAncestor(),s=s.getEnclosedNode(),c.isReadOnly()||s&&s.isReadOnly())))l.setStart(r.startContainer,r.startOffset),e.splice(d--,1);else{r=e[d],c=this.document.$.createRange(),l=r.startContainer,CKEDITOR.env.opera&&r.collapsed&&l.type==CKEDITOR.NODE_ELEMENT&&(s=l.getChild(r.startOffset-1),a=l.getChild(r.startOffset),(!s&&!a&&l.is(CKEDITOR.dtd.$removeEmpty)||s&&s.type==CKEDITOR.NODE_ELEMENT||a&&a.type==CKEDITOR.NODE_ELEMENT)&&(r.insertNode(this.document.createText("")),r.collapse(1))),r.collapsed&&CKEDITOR.env.webkit&&u(r)&&(p(l=this.root,!1),s=l.getDocument().createText("\u200b"),l.setCustomData("cke-fillingChar",s),r.insertNode(s),(l=s.getNext())&&!s.getPrevious()&&l.type==CKEDITOR.NODE_ELEMENT&&"br"==l.getName()?(p(this.root),r.moveToPosition(l,CKEDITOR.POSITION_BEFORE_START)):r.moveToPosition(s,CKEDITOR.POSITION_AFTER_END)),c.setStart(r.startContainer.$,r.startOffset);try{c.setEnd(r.endContainer.$,r.endOffset)}catch(T){if(!(0<=T.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")))throw T;r.collapse(1),c.setEnd(r.endContainer.$,r.endOffset)}o.addRange(c)}}this.reset(),this.root.fire("selectionchange")}}},fake:function(e){var t=this.root.editor;this.reset(),o(t);var n=this._.cache,i=new CKEDITOR.dom.range(this.root);i.setStartBefore(e),i.setEndAfter(e),n.ranges=new CKEDITOR.dom.rangeList(i),n.selectedElement=n.startElement=e,n.type=CKEDITOR.SELECTION_ELEMENT,n.selectedText=n.nativeSel=null,this.isFake=1,this.rev=h++,(t._.fakeSelection=this).root.fire("selectionchange")},isHidden:function(){var e=this.getCommonAncestor();return e&&e.type==CKEDITOR.NODE_TEXT&&(e=e.getParent()),!(!e||!e.data("cke-hidden-sel"))},createBookmarks:function(e){return e=this.getRanges().createBookmarks(e),this.isFake&&(e.isFake=1),e},createBookmarks2:function(e){return e=this.getRanges().createBookmarks2(e),this.isFake&&(e.isFake=1),e},selectBookmarks:function(e){for(var t=[],n=0;n<e.length;n++){var i=new CKEDITOR.dom.range(this.root);i.moveToBookmark(e[n]),t.push(i)}return e.isFake?this.fake(t[0].getEnclosedNode()):this.selectRanges(t),this},getCommonAncestor:function(){var e=this.getRanges();return e.length?e[0].startContainer.getCommonAncestor(e[e.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){var e=this.getNative();try{e&&e[C?"empty":"removeAllRanges"]()}catch(t){}this.reset()}}}(),CKEDITOR.editor.prototype.attachStyleStateChange=function(e,t){var o=this._.styleStateChangeCallbacks;o||(o=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(e){for(var t=0;t<o.length;t++){var n=o[t],i=n.style.checkActive(e.data.path)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;n.fn.call(this,i)}})),o.push({style:e,fn:t})},CKEDITOR.STYLE_BLOCK=1,CKEDITOR.STYLE_INLINE=2,CKEDITOR.STYLE_OBJECT=3,function(){function y(e,t){for(var n,i;(e=e.getParent())&&!e.equals(t);)if(e.getAttribute("data-nostyle"))n=e;else if(!i){var o=e.getAttribute("contentEditable");"false"==o?n=e:"true"==o&&(i=1)}return n}function _(e){var t=e.document;if(e.collapsed)t=k(this,t),e.insertNode(t),e.moveToPosition(t,CKEDITOR.POSITION_BEFORE_END);else{var n,i=this.element,o=this._.definition,r=(h=o.ignoreReadonly)||o.includeReadonly;null==r&&(r=e.root.getCustomData("cke_includeReadonly"));var s=CKEDITOR.dtd[i];s||(n=!0,s=CKEDITOR.dtd.span),e.enlarge(CKEDITOR.ENLARGE_INLINE,1),e.trim();var a,l=e.createBookmark(),c=l.startNode,d=l.endNode,u=c;if(!h){var h=y(c,f=e.getCommonAncestor()),f=y(d,f);h&&(u=h.getNextSourceNode(!0)),f&&(d=f)}for(u.getPosition(d)==CKEDITOR.POSITION_FOLLOWING&&(u=0);u;){if(h=!1,u.equals(d))h=!(u=null);else{f=(v=u.type==CKEDITOR.NODE_ELEMENT?u.getName():null)&&"false"==u.getAttribute("contentEditable");var m=v&&u.getAttribute("data-nostyle");if(v&&u.data("cke-bookmark")){u=u.getNextSourceNode(!0);continue}if(f&&r&&CKEDITOR.dtd.$block[v])for(var p=void 0,g=0,E=(R=(D=K(E=u)).length)&&new CKEDITOR.dom.range(E.getDocument());g<R;++g){p=D[g];var T=CKEDITOR.filter.instances[p.data("cke-filter")];T&&!T.check(this)||(E.selectNodeContents(p),_.call(this,E))}if(D=v?!s[v]||m?0:f&&!r?0:(u.getPosition(d)|x)==x&&(!o.childRule||o.childRule(u)):1){if(!(D=u.getParent())||!(D.getDtd()||CKEDITOR.dtd.span)[i]&&!n||o.parentRule&&!o.parentRule(D))h=!0;else if(a||v&&CKEDITOR.dtd.$removeEmpty[v]&&(u.getPosition(d)|x)!=x||(a=e.clone()).setStartBefore(u),(v=u.type)==CKEDITOR.NODE_TEXT||f||v==CKEDITOR.NODE_ELEMENT&&!u.getChildCount()){for(var C,v=u;(h=!v.getNext(N))&&s[(C=v.getParent()).getName()]&&(C.getPosition(c)|S)==S&&(!o.childRule||o.childRule(C));)v=C;a.setEndAfter(v)}}else h=!0;u=u.getNextSourceNode(m||f)}if(h&&a&&!a.collapsed){f=(h=k(this,t)).hasAttributes(),m=a.getCommonAncestor(),v={};for(var I,O,b,D={},R=(p={},{});h&&m;){if(m.getName()==i){for(I in o.attributes)!R[I]&&(b=m.getAttribute(O))&&(h.getAttribute(I)==b?D[I]=1:R[I]=1);for(O in o.styles)!p[O]&&(b=m.getStyle(O))&&(h.getStyle(O)==b?v[O]=1:p[O]=1)}m=m.getParent()}for(I in D)h.removeAttribute(I);for(O in v)h.removeStyle(O);f&&!h.hasAttributes()&&(h=null),h?(a.extractContents().appendTo(h),a.insertNode(h),w.call(this,h),h.mergeSiblings(),CKEDITOR.env.ie||h.$.normalize()):(h=new CKEDITOR.dom.element("span"),a.extractContents().appendTo(h),a.insertNode(h),w.call(this,h),h.remove(!0)),a=null}}e.moveToBookmark(l),e.shrink(CKEDITOR.SHRINK_TEXT),e.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function t(e){function t(){for(var e=new CKEDITOR.dom.elementPath(s.getParent()),t=new CKEDITOR.dom.elementPath(c.getParent()),n=null,i=null,o=0;o<e.elements.length;o++){var r=e.elements[o];if(r==e.block||r==e.blockLimit)break;d.checkElementRemovable(r)&&(n=r)}for(o=0;o<t.elements.length&&((r=t.elements[o])!=t.block&&r!=t.blockLimit);o++)d.checkElementRemovable(r)&&(i=r);i&&c.breakParent(i),n&&s.breakParent(n)}e.enlarge(CKEDITOR.ENLARGE_INLINE,1);var n=e.createBookmark(),s=n.startNode;if(e.collapsed){for(var i,o,r=new CKEDITOR.dom.elementPath(s.getParent(),e.root),a=0;a<r.elements.length&&(o=r.elements[a])&&(o!=r.block&&o!=r.blockLimit);a++){var l;this.checkElementRemovable(o)&&(e.collapsed&&(e.checkBoundaryOfElement(o,CKEDITOR.END)||(l=e.checkBoundaryOfElement(o,CKEDITOR.START)))?(i=o).match=l?"start":"end":(o.mergeSiblings(),o.is(this.element)?u.call(this,o):h(o,p(this)[o.getName()])))}if(i){for(o=s,a=0;!(l=r.elements[a]).equals(i);a++)l.match||((l=l.clone()).append(o),o=l);o["start"==i.match?"insertBefore":"insertAfter"](i)}}else{var c=n.endNode,d=this;for(t(),r=s;!r.equals(c);)i=r.getNextSourceNode(),r.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(r)&&(r.getName()==this.element?u.call(this,r):h(r,p(this)[r.getName()]),i.type==CKEDITOR.NODE_ELEMENT&&i.contains(s)&&(t(),i=s.getNext())),r=i}e.moveToBookmark(n),e.shrink(CKEDITOR.NODE_ELEMENT,!0)}function K(e){var t=[];return e.forEach(function(e){if("true"==e.getAttribute("contenteditable"))return t.push(e),!1},CKEDITOR.NODE_ELEMENT,!0),t}function n(e){var t=e.getEnclosedNode()||e.getCommonAncestor(!1,!0);(e=new CKEDITOR.dom.elementPath(t,e.root).contains(this.element,1))&&!e.isReadOnly()&&a(e,this)}function i(e){var t=e.getCommonAncestor(!0,!0);if(e=new CKEDITOR.dom.elementPath(t,e.root).contains(this.element,1)){var n=(t=this._.definition).attributes;if(n)for(var i in n)e.removeAttribute(i,n[i]);if(t.styles)for(var o in t.styles)t.styles.hasOwnProperty(o)&&e.removeStyle(o)}}function o(e){var t=e.createBookmark(!0),n=e.createIterator();n.enforceRealBlocks=!0,this._.enterMode&&(n.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var i,o=e.document;i=n.getNextParagraph();)i.isReadOnly()||n.activeFilter&&!n.activeFilter.check(this)||s(i,k(this,o,i));e.moveToBookmark(t)}function r(e){var t,n,i=e.createBookmark(1),o=e.createIterator();for(o.enforceRealBlocks=!0,o.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;t=o.getNextParagraph();)this.checkElementRemovable(t)&&(t.is("pre")?((n=this._.enterMode==CKEDITOR.ENTER_BR?null:e.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&t.copyAttributes(n),s(t,n)):u.call(this,t));e.moveToBookmark(i)}function s(e,t){(n=!t)&&(t=e.getDocument().createElement("div"),e.copyAttributes(t));var n,i,o=t&&t.is("pre"),r=e.is("pre"),s=!o&&r;if(o&&!r){if(r=t,(s=e.getBogus())&&s.remove(),s=(s=(s=(s=c(s=e.getHtml(),/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"")).replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1")).replace(/([ \t\n\r]+|&nbsp;)/g," ")).replace(/<br\b[^>]*>/gi,"\n"),CKEDITOR.env.ie){var a=e.getDocument().createElement("div");a.append(r),r.$.outerHTML="<pre>"+s+"</pre>",r.copyAttributes(a.getFirst()),r=a.getFirst().remove()}else r.setHtml(s);t=r}else s?t=d(n?[e.getHtml()]:l(e),t):e.moveChildren(t);(t.replace(e),o)?(i=(n=t).getPrevious(O))&&i.type==CKEDITOR.NODE_ELEMENT&&i.is("pre")&&(o=c(i.getHtml(),/\n$/,"")+"\n\n"+c(n.getHtml(),/^\n/,""),CKEDITOR.env.ie?n.$.outerHTML="<pre>"+o+"</pre>":n.setHtml(o),i.remove()):n&&f(t)}function l(e){e.getName();var n=[];return c(e.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(e,t,n){return t+"</pre>"+n+"<pre>"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(e,t){n.push(t)}),n}function c(e,t,n){var i="",o="";e=e.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(e,t,n){return t&&(i=t),n&&(o=n),""});return i+e.replace(t,n)+o}function d(e,t){var n;1<e.length&&(n=new CKEDITOR.dom.documentFragment(t.getDocument()));for(var i=0;i<e.length;i++){var o=(o=(o=c(o=c(o=c(o=(o=e[i]).replace(/(\r\n|\r)/g,"\n"),/^[ \t]*\n/,""),/\n$/,""),/^[ \t]+|[ \t]+$/g,function(e,t){return 1==e.length?"&nbsp;":t?" "+CKEDITOR.tools.repeat("&nbsp;",e.length-1):CKEDITOR.tools.repeat("&nbsp;",e.length-1)+" "})).replace(/\n/g,"<br>")).replace(/[ \t]{2,}/g,function(e){return CKEDITOR.tools.repeat("&nbsp;",e.length-1)+" "});if(n){var r=t.clone();r.setHtml(o),n.append(r)}else t.setHtml(o)}return n||t}function u(e,t){var n,i=(o=this._.definition).attributes,o=o.styles,r=p(this)[e.getName()],s=CKEDITOR.tools.isEmpty(i)&&CKEDITOR.tools.isEmpty(o);for(n in i)("class"==n||this._.definition.fullMatch)&&e.getAttribute(n)!=g(n,i[n])||t&&"data-"==n.slice(0,5)||(s=e.hasAttribute(n),e.removeAttribute(n));for(var a in o)this._.definition.fullMatch&&e.getStyle(a)!=g(a,o[a],!0)||(s=s||!!e.getStyle(a),e.removeStyle(a));h(e,r,T[e.getName()]),s&&(this._.definition.alwaysRemoveElement?f(e,1):!CKEDITOR.dtd.$block[e.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!e.hasAttributes()?f(e):e.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function w(e){for(var t,n=p(this),i=e.getElementsByTag(this.element),o=i.count();0<=--o;)(t=i.getItem(o)).isReadOnly()||u.call(this,t,!0);for(var r in n)if(r!=this.element)for(o=(i=e.getElementsByTag(r)).count()-1;0<=o;o--)(t=i.getItem(o)).isReadOnly()||h(t,n[r])}function h(e,t,n){if(t=t&&t.attributes)for(var i=0;i<t.length;i++){var o,r=t[i][0];if(o=e.getAttribute(r)){var s=t[i][1];(null===s||s.test&&s.test(o)||"string"==typeof s&&o==s)&&e.removeAttribute(r)}}n||f(e)}function f(e,t){if(!e.hasAttributes()||t)if(CKEDITOR.dtd.$block[e.getName()]){var n=e.getPrevious(O),i=e.getNext(O);n&&(n.type==CKEDITOR.NODE_TEXT||!n.isBlockBoundary({br:1}))&&e.append("br",1),i&&(i.type==CKEDITOR.NODE_TEXT||!i.isBlockBoundary({br:1}))&&e.append("br"),e.remove(!0)}else n=e.getFirst(),i=e.getLast(),e.remove(!0),n&&(n.type==CKEDITOR.NODE_ELEMENT&&n.mergeSiblings(),i&&!n.equals(i)&&i.type==CKEDITOR.NODE_ELEMENT&&i.mergeSiblings())}function k(e,t,n){var i;return"*"==(i=e.element)&&(i="span"),i=new CKEDITOR.dom.element(i,t),n&&n.copyAttributes(i),i=a(i,e),t.getCustomData("doc_processing_style")&&i.hasAttribute("id")?i.removeAttribute("id"):t.setCustomData("doc_processing_style",1),i}function a(e,t){var n=(i=t._.definition).attributes,i=CKEDITOR.style.getStyleText(i);if(n)for(var o in n)e.setAttribute(o,n[o]);return i&&e.setAttribute("style",i),e}function m(e,n){for(var t in e)e[t]=e[t].replace(I,function(e,t){return n[t]})}function p(e){if(e._.overrides)return e._.overrides;var t=e._.overrides={},n=e._.definition.overrides;if(n){CKEDITOR.tools.isArray(n)||(n=[n]);for(var i=0;i<n.length;i++){var o,r;if("string"==typeof(a=n[i])?o=a.toLowerCase():(o=a.element?a.element.toLowerCase():e.element,r=a.attributes),a=t[o]||(t[o]={}),r){var s,a=a.attributes=a.attributes||[];for(s in r)a.push([s.toLowerCase(),r[s]])}}}return t}function g(e,t,n){var i=new CKEDITOR.dom.element("span");return i[n?"setStyle":"setAttribute"](e,t),i[n?"getStyle":"getAttribute"](e)}function E(e,t){for(var n,i=e.document,o=e.getRanges(),r=t?this.removeFromRange:this.applyToRange,s=o.createIterator();n=s.getNextRange();)r.call(this,n);e.selectRanges(o),i.removeCustomData("doc_processing_style")}var T={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},C={a:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},v=/\s*(?:;\s*|$)/,I=/#\((.+?)\)/g,N=CKEDITOR.dom.walker.bookmark(0,1),O=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(e,t){var n=e.attributes;n&&n.style&&(e.styles=CKEDITOR.tools.extend({},e.styles,CKEDITOR.tools.parseCssText(n.style)),delete n.style),t&&(m((e=CKEDITOR.tools.clone(e)).attributes,t),m(e.styles,t)),n=this.element=e.element?"string"==typeof e.element?e.element.toLowerCase():e.element:"*",this.type=e.type||(T[n]?CKEDITOR.STYLE_BLOCK:C[n]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE),"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT),this._={definition:e}},CKEDITOR.editor.prototype.applyStyle=function(e){e.checkApplicable(this.elementPath())&&E.call(e,this.getSelection())},CKEDITOR.editor.prototype.removeStyle=function(e){e.checkApplicable(this.elementPath())&&E.call(e,this.getSelection(),1)},CKEDITOR.style.prototype={apply:function(e){E.call(this,e.getSelection())},remove:function(e){E.call(this,e.getSelection(),1)},applyToRange:function(e){return(this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?_:this.type==CKEDITOR.STYLE_BLOCK?o:this.type==CKEDITOR.STYLE_OBJECT?n:null).call(this,e)},removeFromRange:function(e){return(this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?t:this.type==CKEDITOR.STYLE_BLOCK?r:this.type==CKEDITOR.STYLE_OBJECT?i:null).call(this,e)},applyToObject:function(e){a(e,this)},checkActive:function(e){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(e.block||e.blockLimit,!0);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var t,n=e.elements,i=0;i<n.length;i++)if(t=n[i],this.type!=CKEDITOR.STYLE_INLINE||t!=e.block&&t!=e.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var o=t.getName();if(!("string"==typeof this.element?o==this.element:o in this.element))continue}if(this.checkElementRemovable(t,!0))return!0}}return!1},checkApplicable:function(e,t){if(t&&!t.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!e.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!e.blockLimit.getDtd()[this.element]}return!0},checkElementMatch:function(e,t){var n=this._.definition;if(!e||!n.ignoreReadonly&&e.isReadOnly())return!1;var i=e.getName();if("string"==typeof this.element?i==this.element:i in this.element){if(!t&&!e.hasAttributes())return!0;if(i=n._AC)n=i;else{i={};var o=0,r=n.attributes;if(r)for(var s in r)o++,i[s]=r[s];(s=CKEDITOR.style.getStyleText(n))&&(i.style||o++,i.style=s),i._length=o,n=n._AC=i}if(!n._length)return!0;for(var a in n)if("_length"!=a){if(o=e.getAttribute(a)||"","style"==a)e:{for(s in"string"==typeof(i=n[a])&&(i=CKEDITOR.tools.parseCssText(i)),"string"==typeof o&&(o=CKEDITOR.tools.parseCssText(o,!0)),s=void 0,i)if(!(s in o)||o[s]!=i[s]&&"inherit"!=i[s]&&"inherit"!=o[s]){i=!1;break e}i=!0}else i=n[a]==o;if(i){if(!t)return!0}else if(t)return!1}if(t)return!0}return!1},checkElementRemovable:function(e,t){if(this.checkElementMatch(e,t))return!0;var n=p(this)[e.getName()];if(n){var i;if(!(n=n.attributes))return!0;for(var o=0;o<n.length;o++)if(i=n[o][0],i=e.getAttribute(i)){var r=n[o][1];if(null===r||"string"==typeof r&&i==r||r.test(i))return!0}}return!1},buildPreview:function(e){var t=this._.definition,n=[],i=t.element;"bdo"==i&&(i="span");n=["<",i];var o=t.attributes;if(o)for(var r in o)n.push(" ",r,'="',o[r],'"');return(o=CKEDITOR.style.getStyleText(t))&&n.push(' style="',o,'"'),n.push(">",e||t.name,"</",i,">"),n.join("")},getDefinition:function(){return this._.definition}},CKEDITOR.style.getStyleText=function(e){if(t=e._ST)return t;var t=e.styles,n=e.attributes&&e.attributes.style||"",i="";for(var o in n.length&&(n=n.replace(v,";")),t){var r=t[o],s=(o+":"+r).replace(v,";");"inherit"==r?i+=s:n+=s}return n.length&&(n=CKEDITOR.tools.normalizeCssText(n,!0)),e._ST=n+i};var x=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,S=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED}(),CKEDITOR.styleCommand=function(e,t){this.requiredContent=this.allowedContent=this.style=e,CKEDITOR.tools.extend(this,t,!0)},CKEDITOR.styleCommand.prototype.exec=function(e){e.focus(),this.state==CKEDITOR.TRISTATE_OFF?e.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&e.removeStyle(this.style)},CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet"),CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet),CKEDITOR.loadStylesSet=function(e,t,n){CKEDITOR.stylesSet.addExternal(e,t,""),CKEDITOR.stylesSet.load(e,n)},CKEDITOR.editor.prototype.getStylesSet=function(t){if(this._.stylesDefinitions)t(this._.stylesDefinitions);else{var n=this;if(!1===(e=n.config.stylesCombo_stylesSet||n.config.stylesSet))t(null);else if(e instanceof Array)n._.stylesDefinitions=e,t(e);else{e||(e="default");var e,i=(e=e.split(":"))[0];CKEDITOR.stylesSet.addExternal(i,e[1]?e.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),""),CKEDITOR.stylesSet.load(i,function(e){n._.stylesDefinitions=e[i],t(n._.stylesDefinitions)})}}},CKEDITOR.dom.comment=function(e,t){"string"==typeof e&&(e=(t?t.$:document).createComment(e)),CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"<!--"+this.$.nodeValue+"-->"}}),function(){var e,d={},u={};for(e in CKEDITOR.dtd.$blockLimit)e in CKEDITOR.dtd.$list||(d[e]=1);for(e in CKEDITOR.dtd.$block)e in CKEDITOR.dtd.$blockLimit||e in CKEDITOR.dtd.$empty||(u[e]=1);CKEDITOR.dom.elementPath=function(e,t){var n,i=null,o=null,r=[],s=e;t=t||e.getDocument().getBody();do{if(s.type==CKEDITOR.NODE_ELEMENT){if(r.push(s),!this.lastElement&&((this.lastElement=s).is(CKEDITOR.dtd.$object)||"false"==s.getAttribute("contenteditable")))continue;if(s.equals(t))break;if(!o&&(n=s.getName(),"true"==s.getAttribute("contenteditable")?o=s:!i&&u[n]&&(i=s),d[n])){var a;if(a=!i){if(n="div"==n){e:{a=0;for(var l=(n=s.getChildren()).count();a<l;a++){var c=n.getItem(a);if(c.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[c.getName()]){n=!0;break e}}n=!1}n=!n}a=n}a?i=s:o=s}}}while(s=s.getParent());o||(o=t),this.block=i,this.blockLimit=o,this.root=t,this.elements=r}}(),CKEDITOR.dom.elementPath.prototype={compare:function(e){var t=this.elements;if(!(e=e&&e.elements)||t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0},contains:function(t,e,n){var i;"string"==typeof t&&(i=function(e){return e.getName()==t}),t instanceof CKEDITOR.dom.element?i=function(e){return e.equals(t)}:CKEDITOR.tools.isArray(t)?i=function(e){return-1<CKEDITOR.tools.indexOf(t,e.getName())}:"function"==typeof t?i=t:"object"==typeof t&&(i=function(e){return e.getName()in t});var o=this.elements,r=o.length;for(e&&r--,n&&(o=Array.prototype.slice.call(o,0)).reverse(),e=0;e<r;e++)if(i(o[e]))return o[e];return null},isContextFor:function(e){return!(e in CKEDITOR.dtd.$block)||!!(this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit).getDtd()[e]},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}},CKEDITOR.dom.text=function(e,t){"string"==typeof e&&(e=(t?t.$:document).createTextNode(e)),this.$=e},CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(e){this.$.nodeValue=e},split:function(e){var t=this.$.parentNode,n=t.childNodes.length,i=this.getLength(),o=this.getDocument(),r=new CKEDITOR.dom.text(this.$.splitText(e),o);return t.childNodes.length==n&&(i<=e?(r=o.createText("")).insertAfter(this):((e=o.createText("")).insertAfter(r),e.remove())),r},substring:function(e,t){return"number"!=typeof t?this.$.nodeValue.substr(e):this.$.nodeValue.substring(e,t)}}),function(){function r(e,t,n){var i=e.serializable,o=t[n?"endContainer":"startContainer"],r=n?"endOffset":"startOffset",s=i?t.document.getById(e.startNode):e.startNode;e=i?t.document.getById(e.endNode):e.endNode;return o.equals(s.getPrevious())?(t.startOffset=t.startOffset-o.getLength()-e.getPrevious().getLength(),o=e.getNext()):o.equals(e.getPrevious())&&(t.startOffset=t.startOffset-o.getLength(),o=e.getNext()),o.equals(s.getParent())&&t[r]++,o.equals(e.getParent())&&t[r]++,t[n?"endContainer":"startContainer"]=o,t}CKEDITOR.dom.rangeList=function(e){return e instanceof CKEDITOR.dom.rangeList?e:(e?e instanceof CKEDITOR.dom.range&&(e=[e]):e=[],CKEDITOR.tools.extend(e,t))};var t={createIterator:function(){var r,s=this,a=CKEDITOR.dom.walker.bookmark(),l=[];return{getNextRange:function(e){var t=s[r=null==r?0:r+1];if(t&&1<s.length){if(!r)for(var n=s.length-1;0<=n;n--)l.unshift(s[n].createBookmark(!0));if(e)for(var i=0;s[r+i+1];){e=0,n=(o=t.document).getById(l[i].endNode);for(var o=o.getById(l[i+1].startNode);;){if(n=n.getNextSourceNode(!1),o.equals(n))e=1;else if(a(n)||n.type==CKEDITOR.NODE_ELEMENT&&n.isBlockBoundary())continue;break}if(!e)break;i++}for(t.moveToBookmark(l.shift());i--;)(n=s[++r]).moveToBookmark(l.shift()),t.setEnd(n.endContainer,n.endOffset)}return t}}},createBookmarks:function(e){for(var t,n=[],i=0;i<this.length;i++){n.push(t=this[i].createBookmark(e,!0));for(var o=i+1;o<this.length;o++)this[o]=r(t,this[o]),this[o]=r(t,this[o],!0)}return n},createBookmarks2:function(e){for(var t=[],n=0;n<this.length;n++)t.push(this[n].createBookmark2(e));return t},moveToBookmarks:function(e){for(var t=0;t<this.length;t++)this[t].moveToBookmark(e[t])}}}(),function(){function r(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function n(e){var t=CKEDITOR.skin["ua_"+e],n=CKEDITOR.env;if(t){t=t.split(",").sort(function(e,t){return t<e?-1:1});for(var i,o=0;o<t.length;o++)if(i=t[o],n.ie&&(i.replace(/^ie/,"")==n.version||n.quirks&&"iequirks"==i)&&(i="ie"),n[i]){e=e+"_"+t[o];break}}return CKEDITOR.getUrl(r()+e+".css")}function i(e,t){a[e]||(CKEDITOR.document.appendStyleSheet(n(e)),a[e]=1),t&&t()}function o(e){var t=e.getById(l);return t||((t=e.getHead().append("style")).setAttribute("id",l),t.setAttribute("type","text/css")),t}function s(e,t,n){var i,o,r;if(CKEDITOR.env.webkit)for(t=t.split("}").slice(0,-1),o=0;o<t.length;o++)t[o]=t[o].split("{");for(var s=0;s<e.length;s++)if(CKEDITOR.env.webkit)for(o=0;o<t.length;o++){for(r=t[o][1],i=0;i<n.length;i++)r=r.replace(n[i][0],n[i][1]);e[s].$.sheet.addRule(t[o][0],r)}else{for(r=t,i=0;i<n.length;i++)r=r.replace(n[i][0],n[i][1]);CKEDITOR.env.ie&&CKEDITOR.env.version<11?e[s].$.styleSheet.cssText=e[s].$.styleSheet.cssText+r:e[s].$.innerHTML=e[s].$.innerHTML+r}}var a={};CKEDITOR.skin={path:r,loadPart:function(e,t){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(r()+"skin.js"),function(){i(e,t)}):i(e,t)},getPath:function(e){return CKEDITOR.getUrl(n(e))},icons:{},addIcon:function(e,t,n,i){e=e.toLowerCase(),this.icons[e]||(this.icons[e]={path:t,offset:n||0,bgsize:i||"16px"})},getIconStyle:function(e,t,n,i,o){var r;return e&&(e=e.toLowerCase(),t&&(r=this.icons[e+"-rtl"]),r||(r=this.icons[e])),e=n||r&&r.path||"",i=i||r&&r.offset,o=o||r&&r.bgsize||"16px",e&&"background-image:url("+CKEDITOR.getUrl(e)+");background-position:0 "+i+"px;background-size:"+o+";"}},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(e){var i=o(CKEDITOR.document);return(this.setUiColor=function(e){var t=CKEDITOR.skin.chameleon,n=[[d,e]];this.uiColor=e,s([i],t(this,"editor"),n),s(c,t(this,"panel"),n)}).call(this,e)}});var l="cke_ui_color",c=[],d=/\$color/g;CKEDITOR.on("instanceLoaded",function(e){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var n=e.editor;e=function(e){if(!(e=(e.data[0]||e.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument()).getById("cke_ui_color")){e=o(e),c.push(e);var t=n.getUiColor();t&&s([e],CKEDITOR.skin.chameleon(n,"panel"),[[d,t]])}};n.on("panelShow",e),n.on("menuShow",e),n.config.uiColor&&n.setUiColor(n.config.uiColor)}})}(),function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var e=CKEDITOR.dom.element.createFromHtml('<div style="width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"></div>',CKEDITOR.document);e.appendTo(CKEDITOR.document.getHead());try{var t=e.getComputedStyle("border-top-color"),n=e.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(!t||t!=n)}catch(i){CKEDITOR.env.hc=!1}e.remove()}if(CKEDITOR.env.hc&&(CKEDITOR.env.cssClass=CKEDITOR.env.cssClass+" cke_hc"),CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}"),CKEDITOR.status="loaded",CKEDITOR.fireOnce("loaded"),e=CKEDITOR._.pending)for(delete CKEDITOR._.pending,t=0;t<e.length;t++)CKEDITOR.editor.prototype.constructor.apply(e[t][0],e[t][1]),CKEDITOR.add(e[t][0])}(),CKEDITOR.skin.name="moono",CKEDITOR.skin.ua_editor="ie,iequirks,ie7,ie8,gecko",CKEDITOR.skin.ua_dialog="ie,iequirks,ie7,ie8,opera",CKEDITOR.skin.chameleon=(P=function(e,t){for(var n=e.match(/[^#]./g),i=0;i<3;i++){var o,r=n,s=i;o=parseInt(n[i],16),o=("0"+(t<0?0|o*(1+t):0|o+(255-o)*t).toString(16)).slice(-2),r[s]=o}return"#"+n.join("")},F=new CKEDITOR.template(
"background:#{to};background-image:-webkit-gradient(linear,lefttop,leftbottom,from({from}),to({to}));background-image:-moz-linear-gradient(top,{from},{to});background-image:-webkit-linear-gradient(top,{from},{to});background-image:-o-linear-gradient(top,{from},{to});background-image:-ms-linear-gradient(top,{from},{to});background-image:linear-gradient(top,{from},{to});filter:progid:DXImageTransform.Microsoft.gradient(gradientType=0,startColorstr='{from}',endColorstr='{to}');"),B=function(e,t){return F.output({from:e,to:t})},M={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ {defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_bottom [{defaultGradient}border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [{defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [{defaultGradient}outline-color:{defaultBorder};border-top-color:{defaultBorder};] {id} .cke_dialog_tab [{lightGradient}border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [{mediumGradient}] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} .cke_toolgroup [{lightGradient}border-color:{defaultBorder};] {id} a.cke_button_off:hover, {id} a.cke_button_off:focus, {id} a.cke_button_off:active [{mediumGradient}] {id} .cke_button_on [{ckeButtonOn}] {id} .cke_toolbar_separator [background-color: {ckeToolbarSeparator};] {id} .cke_combo_button [border-color:{defaultBorder};{lightGradient}] {id} a.cke_combo_button:hover, {id} a.cke_combo_button:focus, {id} .cke_combo_on a.cke_combo_button [border-color:{defaultBorder};{mediumGradient}] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover, {id} a.cke_path_item:focus, {id} a.cke_path_item:active [background-color:{elementsPathBg};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [{lightGradient}border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:focus.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:focus.cke_colorauto, a:focus.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")},function(e,t){var n=e.uiColor;return n={id:"."+e.id,defaultBorder:P(n,-.1),defaultGradient:B(P(n,.9),n),lightGradient:B(P(n,1),P(n,.7)),mediumGradient:B(P(n,.8),P(n,.5)),ckeButtonOn:B(P(n,.6),P(n,.7)),ckeResizer:P(n,-.4),ckeToolbarSeparator:P(n,.5),ckeColorauto:P(n,.8),dialogBody:P(n,.7),dialogTabSelected:B("#FFFFFF","#FFFFFF"),dialogTabSelectedBorder:"#FFF",elementsPathColor:P(n,-.6),elementsPathBg:n,menubuttonIcon:P(n,.5),menubuttonIconHover:P(n,.3)},M[t].output(n).replace(/\[/g,"{").replace(/\]/g,"}")}),CKEDITOR.plugins.add("dialogui",{onLoad:function(){var a,l,c,d=function(e){this._||(this._={}),this._["default"]=this._.initValue=e["default"]||"",this._.required=e.required||!1;for(var t=[this._],n=1;n<arguments.length;n++)t.push(arguments[n]);return t.push(!0),CKEDITOR.tools.extend.apply(CKEDITOR.tools,t),this._},e={build:function(e,t,n){return new CKEDITOR.ui.dialog.textInput(e,t,n)}},t={build:function(e,t,n){return new CKEDITOR.ui.dialog[t.type](e,t,n)}},n={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(e){this.setValue(this.getInitValue(),e)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._["default"]},getInitValue:function(){return this._.initValue}},i=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(e,t){this._.domOnChangeRegistered||(e.on("load",function(){this.getInputElement().on("change",function(){e.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",t)}},!0),o=/^on([A-Z]\w+)/,p=function(e){for(var t in e)(o.test(t)||"title"==t||"type"==t)&&delete e[t];return e};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(n,i,e,o){if(!(arguments.length<4)){var r=d.call(this,i);r.labelId=CKEDITOR.tools.getNextId()+"_label",this._.children=[],CKEDITOR.ui.dialog.uiElement.call(this,n,i,e,"div",null,{role:"presentation"},function(){var e=[],t=i.required?" cke_required":"";return"horizontal"!=i.labelLayout?e.push('<label class="cke_dialog_ui_labeled_label'+t+'" ',' id="'+r.labelId+'"',r.inputId?' for="'+r.inputId+'"':"",(i.labelStyle?' style="'+i.labelStyle+'"':"")+">",i.label,"</label>",'<div class="cke_dialog_ui_labeled_content"',i.controlStyle?' style="'+i.controlStyle+'"':"",' role="radiogroup" aria-labelledby="'+r.labelId+'">',o.call(this,n,i),"</div>"):(t={type:"hbox",widths:i.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+t+'" id="'+r.labelId+'" for="'+r.inputId+'"'+(i.labelStyle?' style="'+i.labelStyle+'"':"")+">"+CKEDITOR.tools.htmlEncode(i.label)+"</span>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(i.controlStyle?' style="'+i.controlStyle+'"':"")+">"+o.call(this,n,i)+"</span>"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(n,t,e)),e.join("")})}},textInput:function(t,n,e){if(!(arguments.length<3)){d.call(this,n);var i=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",o={"class":"cke_dialog_ui_input_"+n.type,id:i,type:n.type};n.validate&&(this.validate=n.validate),n.maxLength&&(o.maxlength=n.maxLength),n.size&&(o.size=n.size),n.inputStyle&&(o.style=n.inputStyle);var r=this,s=!1;t.on("load",function(){r.getInputElement().on("keydown",function(e){13==e.data.getKeystroke()&&(s=!0)}),r.getInputElement().on("keyup",function(e){13==e.data.getKeystroke()&&s&&(t.getButton("ok")&&setTimeout(function(){t.getButton("ok").click()},0),s=!1)},null,null,1e3)}),CKEDITOR.ui.dialog.labeledElement.call(this,t,n,e,function(){var e=['<div class="cke_dialog_ui_input_',n.type,'" role="presentation"'];for(var t in n.width&&e.push('style="width:'+n.width+'" '),e.push("><input "),o["aria-labelledby"]=this._.labelId,this._.required&&(o["aria-required"]=this._.required),o)e.push(t+'="'+o[t]+'" ');return e.push(" /></div>"),e.join("")})}},textarea:function(e,t,n){if(!(arguments.length<3)){d.call(this,t);var i=this,o=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",r={};t.validate&&(this.validate=t.validate),r.rows=t.rows||5,r.cols=t.cols||20,r["class"]="cke_dialog_ui_input_textarea "+(t["class"]||""),"undefined"!=typeof t.inputStyle&&(r.style=t.inputStyle),t.dir&&(r.dir=t.dir),CKEDITOR.ui.dialog.labeledElement.call(this,e,t,n,function(){r["aria-labelledby"]=this._.labelId,this._.required&&(r["aria-required"]=this._.required);var e,t=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea id="',o,'" '];for(e in r)t.push(e+'="'+CKEDITOR.tools.htmlEncode(r[e])+'" ');return t.push(">",CKEDITOR.tools.htmlEncode(i._["default"]),"</textarea></div>"),t.join("")})}},checkbox:function(o,r,e){if(!(arguments.length<3)){var s=d.call(this,r,{"default":!!r["default"]});r.validate&&(this.validate=r.validate),CKEDITOR.ui.dialog.uiElement.call(this,o,r,e,"span",null,null,function(){var e=CKEDITOR.tools.extend({},r,{id:r.id?r.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),t=[],n=CKEDITOR.tools.getNextId()+"_label",i={"class":"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":n};return p(e),r["default"]&&(i.checked="checked"),"undefined"!=typeof e.inputStyle&&(e.style=e.inputStyle),s.checkbox=new CKEDITOR.ui.dialog.uiElement(o,e,t,"input",null,i),t.push(' <label id="',n,'" for="',i.id,'"'+(r.labelStyle?' style="'+r.labelStyle+'"':"")+">",CKEDITOR.tools.htmlEncode(r.label),"</label>"),t.join("")})}},radio:function(u,h,e){if(!(arguments.length<3)){d.call(this,h),this._["default"]||(this._["default"]=this._.initValue=h.items[0][1]),h.validate&&(this.validate=h.valdiate);var f=[],m=this;CKEDITOR.ui.dialog.labeledElement.call(this,u,h,e,function(){for(var e=[],t=[],n=(h.id?h.id:CKEDITOR.tools.getNextId())+"_radio",i=0;i<h.items.length;i++){var o=h.items[i],r=void 0!==o[2]?o[2]:o[0],s=void 0!==o[1]?o[1]:o[0],a=(l=CKEDITOR.tools.getNextId()+"_radio_input")+"_label",l=CKEDITOR.tools.extend({},h,{id:l,title:null,type:null},!0),c=(r=CKEDITOR.tools.extend({},l,{title:r},!0),{type:"radio","class":"cke_dialog_ui_radio_input",name:n,value:s,"aria-labelledby":a}),d=[];m._["default"]==s&&(c.checked="checked"),p(l),p(r),"undefined"!=typeof l.inputStyle&&(l.style=l.inputStyle),l.keyboardFocusable=!0,f.push(new CKEDITOR.ui.dialog.uiElement(u,l,d,"input",null,c)),d.push(" "),new CKEDITOR.ui.dialog.uiElement(u,r,d,"label",null,{id:a,"for":c.id},o[0]),e.push(d.join(""))}return new CKEDITOR.ui.dialog.hbox(u,f,e,t),t.join("")}),this._.children=f}},button:function(e,t,n){if(arguments.length){"function"==typeof t&&(t=t(e.getParentEditor())),d.call(this,t,{disabled:t.disabled||!1}),CKEDITOR.event.implementOn(this);var i=this;e.on("load",function(){var e=this.getElement();e.on("click",function(e){i.click(),e.data.preventDefault()}),e.on("keydown",function(e){e.data.getKeystroke()in{32:1}&&(i.click(),e.data.preventDefault())}),e.unselectable()},this);var o=CKEDITOR.tools.extend({},t);delete o.style;var r=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,e,o,n,"a",null,{style:t.style,href:"javascript:void(0)",title:t.label,hidefocus:"true","class":t["class"],role:"button","aria-labelledby":r},'<span id="'+r+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(t.label)+"</span>")}},select:function(s,a,e){if(!(arguments.length<3)){var l=d.call(this,a);a.validate&&(this.validate=a.validate),l.inputId=CKEDITOR.tools.getNextId()+"_select",CKEDITOR.ui.dialog.labeledElement.call(this,s,a,e,function(){var e=CKEDITOR.tools.extend({},a,{id:a.id?a.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),t=[],n=[],i={id:l.inputId,"class":"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};t.push('<div class="cke_dialog_ui_input_',a.type,'" role="presentation"'),a.width&&t.push('style="width:'+a.width+'" '),t.push(">"),null!=a.size&&(i.size=a.size),null!=a.multiple&&(i.multiple=a.multiple),p(e);for(var o,r=0;r<a.items.length&&(o=a.items[r]);r++)n.push('<option value="',CKEDITOR.tools.htmlEncode(void 0!==o[1]?o[1]:o[0]).replace(/"/g,"&quot;"),'" /> ',CKEDITOR.tools.htmlEncode(o[0]));return"undefined"!=typeof e.inputStyle&&(e.style=e.inputStyle),l.select=new CKEDITOR.ui.dialog.uiElement(s,e,t,"select",null,i,n.join("")),t.push("</div>"),t.join("")})}},file:function(e,t,n){if(!(arguments.length<3)){void 0===t["default"]&&(t["default"]="");var i=CKEDITOR.tools.extend(d.call(this,t),{definition:t,buttons:[]});t.validate&&(this.validate=t.validate),e.on("load",function(){CKEDITOR.document.getById(i.frameId).getParent().addClass("cke_dialog_ui_input_file")}),CKEDITOR.ui.dialog.labeledElement.call(this,e,t,n,function(){i.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var e=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="',i.frameId,'" title="',t.label,'" src="javascript:void('];return e.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0"),e.push(')"></iframe>'),e.join("")})}},fileButton:function(n,i,e){if(!(arguments.length<3)){d.call(this,i);var t=this;i.validate&&(this.validate=i.validate);var o=CKEDITOR.tools.extend({},i),r=o.onClick;o.className=(o.className?o.className+" ":"")+"cke_dialog_ui_button",o.onClick=function(e){var t=i["for"];r&&!1===r.call(this,e)||(n.getContentElement(t[0],t[1]).submit(),this.disable())},n.on("load",function(){n.getContentElement(i["for"][0],i["for"][1])._.buttons.push(t)}),CKEDITOR.ui.dialog.button.call(this,n,o,e)}},html:(a=/^\s*<[\w:]+\s+([^>]*)?>/,l=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,c=/\/$/,function(e,t,n){if(!(arguments.length<3)){var i=[],o=t.html;"<"!=o.charAt(0)&&(o="<span>"+o+"</span>");var r=t.focus;if(r){var s=this.focus;this.focus=function(){("function"==typeof r?r:s).call(this),this.fire("focus")},t.isFocusable&&(this.isFocusable=this.isFocusable),this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,e,t,i,"span",null,null,""),i=i.join("").match(a),o=o.match(l)||["","",""],c.test(o[1])&&(o[1]=o[1].slice(0,-1),o[2]="/"+o[2]),n.push([o[1]," ",i[1]||"",o[2]].join(""))}}),fieldset:function(e,t,n,i,o){var r=o.label;this._={children:t},CKEDITOR.ui.dialog.uiElement.call(this,e,o,i,"fieldset",null,null,function(){var e=[];r&&e.push("<legend"+(o.labelStyle?' style="'+o.labelStyle+'"':"")+">"+r+"</legend>");for(var t=0;t<n.length;t++)e.push(n[t]);return e.join("")})}},!0),CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement,CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(e){var t=CKEDITOR.document.getById(this._.labelId);return t.getChildCount()<1?new CKEDITOR.dom.text(e,CKEDITOR.document).appendTo(t):t.getChild(0).$.nodeValue=e,this},getLabel:function(){var e=CKEDITOR.document.getById(this._.labelId);return!e||e.getChildCount()<1?"":e.getChild(0).getText()},eventProcessors:i},!0),CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return!this._.disabled&&this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var e=this.getElement();e&&e.removeClass("cke_disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(e,t){this.on("click",function(){t.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var t=this.selectParentTab();setTimeout(function(){var e=t.getInputElement();e&&e.$.focus()},0)},select:function(){var t=this.selectParentTab();setTimeout(function(){var e=t.getInputElement();e&&(e.$.focus(),e.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(e){return!e&&(e=""),CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},keyboardFocusable:!0},n,!0),CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput,CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(e,t,n){var i=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),o=this.getInputElement().$;return i.$.text=e,i.$.value=null==t?e:t,null==n?CKEDITOR.env.ie?o.add(i.$):o.add(i.$,null):o.add(i.$,n),this},remove:function(e){return this.getInputElement().$.remove(e),this},clear:function(){for(var e=this.getInputElement().$;0<e.length;)e.remove(0);return this},keyboardFocusable:!0},n,!0),CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(e,t){this.getInputElement().$.checked=e,!t&&this.fire("change",{value:e})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(e,t){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?i.onChange.apply(this,arguments):(e.on("load",function(){var t=this._.checkbox.getElement();t.on("propertychange",function(e){"checked"==(e=e.data.$).propertyName&&this.fire("change",{value:t.$.checked})},this)},this),this.on("change",t),null)}},keyboardFocusable:!0},n,!0),CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(e,t){for(var n,i=this._.children,o=0;o<i.length&&(n=i[o]);o++)n.getElement().$.checked=n.getValue()==e;!t&&this.fire("change",{value:e})},getValue:function(){for(var e=this._.children,t=0;t<e.length;t++)if(e[t].getElement().$.checked)return e[t].getValue();return null},accessKeyUp:function(){var e,t=this._.children;for(e=0;e<t.length;e++)if(t[e].getElement().$.checked)return void t[e].getElement().focus();t[0].getElement().focus()},eventProcessors:{onChange:function(e,t){return CKEDITOR.env.ie?(e.on("load",function(){for(var e=this._.children,t=this,n=0;n<e.length;n++)e[n].getElement().on("propertychange",function(e){"checked"==(e=e.data.$).propertyName&&this.$.checked&&t.fire("change",{value:this.getAttribute("value")})})},this),this.on("change",t),null):i.onChange.apply(this,arguments)}}},n,!0),CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,n,{getInputElement:function(){var e=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<e.$.forms.length?new CKEDITOR.dom.element(e.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(e){var t,n,i=/^on([A-Z]\w+)/,o=function(e,t,n,i){e.on("formLoaded",function(){e.getInputElement().on(n,i,e)})};for(n in e)(t=n.match(i))&&(this.eventProcessors[n]?this.eventProcessors[n].call(this,this._.dialog,e[n]):o(this,this._.dialog,t[1].toLowerCase(),e[n]));return this},reset:function(){function e(){i.$.open();var e="";o.size&&(e=o.size-(CKEDITOR.env.ie?7:0));var t=n.frameId+"_input";for(i.$.write(['<html dir="'+l+'" lang="'+c+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+l+'" lang="'+c+'" action="',CKEDITOR.tools.htmlEncode(o.action),'"><label id="',n.labelId,'" for="',t,'" style="display:none">',CKEDITOR.tools.htmlEncode(o.label),'</label><input id="',t,'" aria-labelledby="',n.labelId,'" type="file" name="',CKEDITOR.tools.htmlEncode(o.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(0<e?e:""),'" /></form></body></html><script>',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+s+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+a+")}","</script>"].join("")),i.$.close(),e=0;e<r.length;e++)r[e].enable()}var n=this._,i=CKEDITOR.document.getById(n.frameId).getFrameDocument(),o=n.definition,r=n.buttons,s=this.formLoadedNumber,a=this.formUnloadNumber,l=n.dialog._.editor.lang.dir,c=n.dialog._.editor.langCode;s||(s=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),a=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(s),CKEDITOR.tools.removeFunction(a)})),CKEDITOR.env.gecko?setTimeout(e,500):e()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(e,t){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",t)}},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button,CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype),CKEDITOR.dialog.addUIElement("text",e),CKEDITOR.dialog.addUIElement("password",e),CKEDITOR.dialog.addUIElement("textarea",t),CKEDITOR.dialog.addUIElement("checkbox",t),CKEDITOR.dialog.addUIElement("radio",t),CKEDITOR.dialog.addUIElement("button",t),CKEDITOR.dialog.addUIElement("select",t),CKEDITOR.dialog.addUIElement("file",t),CKEDITOR.dialog.addUIElement("fileButton",t),CKEDITOR.dialog.addUIElement("html",t),CKEDITOR.dialog.addUIElement("fieldset",{build:function(e,t,n){for(var i,o=t.children,r=[],s=[],a=0;a<o.length&&(i=o[a]);a++){var l=[];r.push(l),s.push(CKEDITOR.dialog._.uiElementBuilders[i.type].build(e,i,l))}return new CKEDITOR.ui.dialog[t.type](e,s,r,n,t)}})}}),CKEDITOR.DIALOG_RESIZE_NONE=0,CKEDITOR.DIALOG_RESIZE_WIDTH=1,CKEDITOR.DIALOG_RESIZE_HEIGHT=2,CKEDITOR.DIALOG_RESIZE_BOTH=3,function(){function E(){for(var e=this._.tabIdList.length,t=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+e,n=t-1;t-e<n;n--)if(this._.tabs[this._.tabIdList[n%e]][0].$.offsetHeight)return this._.tabIdList[n%e];return null}function T(){for(var e=this._.tabIdList.length,t=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),n=t+1;n<t+e;n++)if(this._.tabs[this._.tabIdList[n%e]][0].$.offsetHeight)return this._.tabIdList[n%e];return null}function r(e,t){for(var n=e.$.getElementsByTagName("input"),i=0,o=n.length;i<o;i++){var r=new CKEDITOR.dom.element(n[i]);"text"==r.getAttribute("type").toLowerCase()&&(t?(r.setAttribute("value",r.getCustomData("fake_value")||""),r.removeCustomData("fake_value")):(r.setCustomData("fake_value",r.getAttribute("value")),r.setAttribute("value","")))}}function C(e,t){var n=this.getInputElement();n&&(e?n.removeAttribute("aria-invalid"):n.setAttribute("aria-invalid",!0)),e||(this.select?this.select():this.focus()),t&&alert(t),this.fire("validated",{valid:e,msg:t})}function v(){var e=this.getInputElement();e&&e.removeAttribute("aria-invalid")}function I(e){var t=(e=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",l).output({id:CKEDITOR.tools.getNextNumber(),editorId:e.id,langDir:e.lang.dir,langCode:e.langCode,editorDialogClass:"cke_editor_"+e.name.replace(/\./g,"\\.")+"_dialog",closeTitle:e.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""}))).getChild([0,0,0,0,0]),n=t.getChild(0),i=t.getChild(1);if(CKEDITOR.env.ie&&!CKEDITOR.env.ie6Compat){var o="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())";CKEDITOR.dom.element.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+o+'" tabIndex="-1"></iframe>').appendTo(t.getParent())}return n.unselectable(),i.unselectable(),{element:e,parts:{dialog:e.getChild(0),title:n,close:i,tabs:t.getChild(2),contents:t.getChild([3,0,0,0]),footer:t.getChild([3,0,1,0])}}}function i(e,t,n){this.element=t,this.focusIndex=n,this.tabIndex=0,this.isFocusable=function(){return!t.getAttribute("disabled")&&t.isVisible()},this.focus=function(){e._.currentFocusIndex=this.focusIndex,this.element.focus()},t.on("keydown",function(e){e.data.getKeystroke()in{32:1,13:1}&&this.fire("click")}),t.on("focus",function(){this.fire("mouseover")}),t.on("blur",function(){this.fire("mouseout")})}function c(e){function t(){e.layout()}var n=CKEDITOR.document.getWindow();n.on("resize",t),e.on("hide",function(){n.removeListener("resize",t)})}function s(e,t){this._={dialog:e},CKEDITOR.tools.extend(this,t)}function O(a){function n(e){var t=a.getSize(),n=CKEDITOR.document.getWindow().getViewPaneSize(),i=e.data.$.screenX,o=e.data.$.screenY,r=i-l.x,s=o-l.y;l={x:i,y:o},c.x+=r,c.y+=s,a.move(c.x+h[3]<u?-h[3]:c.x-h[1]>n.width-t.width-u?n.width-t.width+("rtl"==d.lang.dir?0:h[1]):c.x,c.y+h[0]<u?-h[0]:c.y-h[2]>n.height-t.height-u?n.height-t.height+h[2]:c.y,1),e.data.preventDefault()}function i(){if(CKEDITOR.document.removeListener("mousemove",n),CKEDITOR.document.removeListener("mouseup",i),CKEDITOR.env.ie6Compat){var e=y.getChild(0).getFrameDocument();e.removeListener("mousemove",n),e.removeListener("mouseup",i)}}var l=null,c=null;a.getElement().getFirst();var d=a.getParentEditor(),u=d.config.dialog_magnetDistance,h=CKEDITOR.skin.margins||[0,0,0,0];void 0===u&&(u=20),a.parts.title.on("mousedown",function(e){if(l={x:e.data.$.screenX,y:e.data.$.screenY},CKEDITOR.document.on("mousemove",n),CKEDITOR.document.on("mouseup",i),c=a.getPosition(),CKEDITOR.env.ie6Compat){var t=y.getChild(0).getFrameDocument();t.on("mousemove",n),t.on("mouseup",i)}e.data.preventDefault()},a)}function b(l){function n(e){var t="rtl"==E.lang.dir,n=g.width,i=g.height,o=n+(e.data.$.screenX-c)*(t?-1:1)*(l._.moved?1:2),r=i+(e.data.$.screenY-d)*(l._.moved?1:2),s=l._.element.getFirst(),a=(s=t&&s.getComputedStyle("right"),l.getPosition());a.y+r>p.height&&(r=p.height-a.y),(t?s:a.x)+o>p.width&&(o=p.width-(t?s:a.x)),h!=CKEDITOR.DIALOG_RESIZE_WIDTH&&h!=CKEDITOR.DIALOG_RESIZE_BOTH||(n=Math.max(u.minWidth||0,o-f)),h!=CKEDITOR.DIALOG_RESIZE_HEIGHT&&h!=CKEDITOR.DIALOG_RESIZE_BOTH||(i=Math.max(u.minHeight||0,r-m)),l.resize(n,i),l._.moved||l.layout(),e.data.preventDefault()}function i(){if(CKEDITOR.document.removeListener("mouseup",i),CKEDITOR.document.removeListener("mousemove",n),o&&(o.remove(),o=null),CKEDITOR.env.ie6Compat){var e=y.getChild(0).getFrameDocument();e.removeListener("mouseup",i),e.removeListener("mousemove",n)}}var c,d,u=l.definition,h=u.resizable;if(h!=CKEDITOR.DIALOG_RESIZE_NONE){var f,m,p,g,o,E=l.getParentEditor(),t=CKEDITOR.tools.addFunction(function(e){g=l.getSize();var t=l.parts.contents;t.$.getElementsByTagName("iframe").length&&(o=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),t.append(o)),m=g.height-l.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.opera||CKEDITOR.env.ie&&CKEDITOR.env.quirks)),f=g.width-l.parts.contents.getSize("width",1),c=e.screenX,d=e.screenY,p=CKEDITOR.document.getWindow().getViewPaneSize(),CKEDITOR.document.on("mousemove",n),CKEDITOR.document.on("mouseup",i),CKEDITOR.env.ie6Compat&&((t=y.getChild(0).getFrameDocument()).on("mousemove",n),t.on("mouseup",i)),e.preventDefault&&e.preventDefault()});l.on("load",function(){var e="";h==CKEDITOR.DIALOG_RESIZE_WIDTH?e=" cke_resizer_horizontal":h==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(e=" cke_resizer_vertical"),e=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+e+" cke_resizer_"+E.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode(E.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+t+', event )">'+("ltr"==E.lang.dir?"\u25e2":"\u25e3")+"</div>"),l.parts.footer.append(e,1)}),E.on("destroy",function(){CKEDITOR.tools.removeFunction(t)})}}function d(e){e.data.preventDefault(1)}function u(e){var n=CKEDITOR.document.getWindow(),t=(r=e.config).dialog_backgroundCoverColor||"white",i=r.dialog_backgroundCoverOpacity,o=r.baseFloatZIndex,r=CKEDITOR.tools.genKey(t,i,o),s=S[r];s?s.show():(o=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",o,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+t,'" class="cke_dialog_background_cover">'],CKEDITOR.env.ie6Compat&&(t="<html><body style=\\'background-color:"+t+";\\'></body></html>",o.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),o.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+t+"' );document.close();")+"})())"),o.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')),o.push("</div>"),(s=CKEDITOR.dom.element.createFromHtml(o.join(""))).setOpacity(null!=i?i:.5),s.on("keydown",d),s.on("keypress",d),s.on("keyup",d),s.appendTo(CKEDITOR.document.getBody()),S[r]=s),e.focusManager.add(s),y=s;var a=function(){var e=n.getScrollPosition(),t=CKEDITOR.dialog._.currentTop;if(s.setStyles({left:e.x+"px",top:e.y+"px"}),t)for(;e=t.getPosition(),t.move(e.x,e.y),t=t._.parentDialog;);};if(g=e=function(){var e=n.getViewPaneSize();s.setStyles({width:e.width+"px",height:e.height+"px"})},n.on("resize",e),e(),(!CKEDITOR.env.mac||!CKEDITOR.env.webkit)&&s.focus(),CKEDITOR.env.ie6Compat){var l=function(){a(),arguments.callee.prevScrollHandler.apply(this,arguments)};n.$.setTimeout(function(){l.prevScrollHandler=window.onscroll||function(){},window.onscroll=l},0),a()}}function o(e){y&&(e.focusManager.remove(y),e=CKEDITOR.document.getWindow(),y.hide(),e.removeListener("resize",g),CKEDITOR.env.ie6Compat&&e.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null},0),g=null)}var e,n,a,h=CKEDITOR.tools.cssLength,l='<div class="cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir="{langDir}" lang="{langCode}" role="dialog" aria-labelledby="cke_dialog_title_{id}"><table class="cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="cke_dialog_body" role="presentation"><div id="cke_dialog_title_{id}" class="cke_dialog_title" role="presentation"></div><a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a><div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div><table class="cke_dialog_contents" role="presentation"><tr><td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td></tr><tr><td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td></tr></table></div></td></tr></table></div>';CKEDITOR.dialog=function(i,e){function t(){var e=m._.focusList;e.sort(function(e,t){return e.tabIndex!=t.tabIndex?t.tabIndex-e.tabIndex:e.focusIndex-t.focusIndex});for(var t=e.length,n=0;n<t;n++)e[n].focusIndex=n}function o(e){var t=m._.focusList;e=e||0;if(!(t.length<1)){var n=m._.currentFocusIndex;try{t[n].getInputElement().$.blur()}catch(l){}for(var i=n=(n+e+t.length)%t.length;e&&!t[i].isFocusable()&&(i=(i+e+t.length)%t.length)!=n;);t[i].focus(),"text"==t[i].type&&t[i].select()}}function n(e){if(m==CKEDITOR.dialog._.currentTop){var t=e.data.getKeystroke(),n="rtl"==i.lang.dir;if(s=a=0,9==t||t==CKEDITOR.SHIFT+9)t=t==CKEDITOR.SHIFT+9,m._.tabBarMode?(t=t?E.call(m):T.call(m),m.selectPage(t),m._.tabs[t][0].focus()):o(t?-1:1),s=1;else if(t==CKEDITOR.ALT+121&&!m._.tabBarMode&&1<m.getPageCount())m._.tabBarMode=!0,m._.tabs[m._.currentTabId][0].focus(),s=1;else if(37!=t&&39!=t||!m._.tabBarMode)if(13!=t&&32!=t||!m._.tabBarMode)if(13==t)(t=e.data.getTarget()).is("a","button","select","textarea")||t.is("input")&&"button"==t.$.type||((t=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(t.click,0,t),s=1),a=1;else{if(27!=t)return;(t=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(t.click,0,t):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),a=1}else this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,o(1),s=1;else t=t==(n?39:37)?E.call(m):T.call(m),m.selectPage(t),m._.tabs[t][0].focus(),s=1;r(e)}}function r(e){s?e.data.preventDefault(1):a&&e.data.stopPropagation()}var s,a,l=CKEDITOR.dialog._.dialogDefinitions[e],c=CKEDITOR.tools.clone(D),d=i.config.dialog_buttonsOrder||"OS",u=i.lang.dir,h={};if(("OS"==d&&CKEDITOR.env.mac||"rtl"==d&&"ltr"==u||"ltr"==d&&"rtl"==u)&&c.buttons.reverse(),l=CKEDITOR.tools.extend(l(i),c),l=CKEDITOR.tools.clone(l),l=new R(this,l),c=I(i),this._={editor:i,element:c.element,name:e,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1},this.parts=c.parts,CKEDITOR.tools.setTimeout(function(){i.fire("ariaWidget",this.parts.contents)},0,this),(c={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"})["rtl"==u?"right":"left"]=0,this.parts.dialog.setStyles(c),CKEDITOR.event.call(this),this.definition=l=CKEDITOR.fire("dialogDefinition",{name:e,definition:l},i).definition,!("removeDialogTabs"in i._)&&i.config.removeDialogTabs){for(c=i.config.removeDialogTabs.split(";"),u=0;u<c.length;u++)if(2==(d=c[u].split(":")).length){var f=d[0];h[f]||(h[f]=[]),h[f].push(d[1])}i._.removeDialogTabs=h}if(i._.removeDialogTabs&&(h=i._.removeDialogTabs[e]))for(u=0;u<h.length;u++)l.removeContents(h[u]);l.onLoad&&this.on("load",l.onLoad),l.onShow&&this.on("show",l.onShow),l.onHide&&this.on("hide",l.onHide),l.onOk&&this.on("ok",function(e){i.fire("saveSnapshot"),setTimeout(function(){i.fire("saveSnapshot")},0),
!1===l.onOk.call(this,e)&&(e.data.hide=!1)}),l.onCancel&&this.on("cancel",function(e){!1===l.onCancel.call(this,e)&&(e.data.hide=!1)});var m=this,p=function(e){var t,n=m._.contents;for(t in n)for(var i in n[t])if(e.call(this,n[t][i]))return};this.on("ok",function(i){p(function(e){if(e.validate){var t=e.validate(this),n="string"==typeof t||!1===t;return n&&(i.data.hide=!1,i.stop()),C.call(e,!n,"string"==typeof t?t:void 0),n}})},this,null,0),this.on("cancel",function(t){p(function(e){if(e.isChanged())return!i.config.dialog_noConfirmCancel&&!confirm(i.lang.common.confirmCancel)&&(t.data.hide=!1),!0})},this,null,0),this.parts.close.on("click",function(e){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),e.data.preventDefault()},this),this.changeFocus=o;var g=this._.element;for(i.focusManager.add(g,1),this.on("show",function(){g.on("keydown",n,this),(CKEDITOR.env.opera||CKEDITOR.env.gecko)&&g.on("keypress",r,this)}),this.on("hide",function(){g.removeListener("keydown",n),(CKEDITOR.env.opera||CKEDITOR.env.gecko)&&g.removeListener("keypress",r),p(function(e){v.apply(e)})}),this.on("iframeAdded",function(e){new CKEDITOR.dom.document(e.data.iframe.$.contentWindow.document).on("keydown",n,this,null,0)}),this.on("show",function(){if(t(),i.config.dialog_startupFocusTab&&1<m._.pageCount)m._.tabBarMode=!0,m._.tabs[m._.currentTabId][0].focus();else if(!this._.hasFocus)if(this._.currentFocusIndex=-1,l.onFocus){var e=l.onFocus.call(this);e&&e.focus()}else o(1)},this,null,4294967295),CKEDITOR.env.ie6Compat&&this.on("load",function(){var e=this.getElement(),t=e.getFirst();t.remove(),t.appendTo(e)},this),O(this),b(this),new CKEDITOR.dom.text(l.title,CKEDITOR.document).appendTo(this.parts.title),u=0;u<l.contents.length;u++)(h=l.contents[u])&&this.addPage(h);for(this.parts.tabs.on("click",function(e){var t=e.data.getTarget();t.hasClass("cke_dialog_tab")&&(t=t.$.id,this.selectPage(t.substring(4,t.lastIndexOf("_"))),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,o(1)),e.data.preventDefault())},this),u=[],h=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:l.buttons},u).getChild(),this.parts.footer.setHtml(u.join("")),u=0;u<h.length;u++)this._.buttons[h[u].id]=h[u]},CKEDITOR.dialog.prototype={destroy:function(){this.hide(),this._.element.remove()},resize:function(e,t){this._.contentSize&&this._.contentSize.width==e&&this._.contentSize.height==t||(CKEDITOR.dialog.fire("resize",{dialog:this,width:e,height:t},this._.editor),this.fire("resize",{width:e,height:t},this._.editor),this.parts.contents.setStyles({width:e+"px",height:t+"px"}),"rtl"==this._.editor.lang.dir&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:e,height:t})},getSize:function(){var e=this._.element.getFirst();return{width:e.$.offsetWidth||0,height:e.$.offsetHeight||0}},move:function(e,t,n){var i=this._.element.getFirst(),o="rtl"==this._.editor.lang.dir,r="fixed"==i.getComputedStyle("position");CKEDITOR.env.ie&&i.setStyle("zoom","100%"),r&&this._.position&&this._.position.x==e&&this._.position.y==t||(this._.position={x:e,y:t},r||(e+=(r=CKEDITOR.document.getWindow().getScrollPosition()).x,t+=r.y),o&&(r=this.getSize(),e=CKEDITOR.document.getWindow().getViewPaneSize().width-r.width-e),(t={top:(0<t?t:0)+"px"})[o?"right":"left"]=(0<e?e:0)+"px",i.setStyles(t),n&&(this._.moved=1))},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var e=this._.element,t=this.definition;if(e.getParent()&&e.getParent().equals(CKEDITOR.document.getBody())?e.setStyle("display","block"):e.appendTo(CKEDITOR.document.getBody()),CKEDITOR.env.gecko&&CKEDITOR.env.version<10900){var n=this.parts.dialog;n.setStyle("position","absolute"),setTimeout(function(){n.setStyle("position","fixed")},0)}for(var i in this.resize(this._.contentSize&&this._.contentSize.width||t.width||t.minWidth,this._.contentSize&&this._.contentSize.height||t.height||t.minHeight),this.reset(),this.selectPage(this.definition.contents[0].id),null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10),null===CKEDITOR.dialog._.currentTop?((CKEDITOR.dialog._.currentTop=this)._.parentDialog=null,u(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this),e.on("keydown",L),e.on(CKEDITOR.env.opera?"keypress":"keyup",$),this._.hasFocus=!1,t.contents)if(t.contents[i]){e=t.contents[i];var o=this._.tabs[e.id],r=e.requiredContent,s=0;if(o){for(var a in this._.contents[e.id]){var l=this._.contents[e.id][a];"hbox"==l.type||"vbox"==l.type||!l.getInputElement()||(l.requiredContent&&!this._.editor.activeFilter.check(l.requiredContent)?l.disable():(l.enable(),s++))}!s||r&&!this._.editor.activeFilter.check(r)?o[0].addClass("cke_dialog_tab_disabled"):o[0].removeClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout(function(){this.layout(),c(this),this.parts.dialog.setStyle("visibility",""),this.fireOnce("load",{}),CKEDITOR.ui.fire("ready",this),this.fire("show",{}),this._.editor.fire("dialogShow",this),this._.parentDialog||this._.editor.focusManager.lock(),this.foreach(function(e){e.setInitValue&&e.setInitValue()})},100,this)},layout:function(){var e=this.parts.dialog,t=this.getSize(),n=CKEDITOR.document.getWindow().getViewPaneSize(),i=(n.width-t.width)/2,o=(n.height-t.height)/2;CKEDITOR.env.ie6Compat||(t.height+(0<o?o:0)>n.height||t.width+(0<i?i:0)>n.width?e.setStyle("position","absolute"):e.setStyle("position","fixed")),this.move(this._.moved?this._.position.x:i,this._.moved?this._.position.y:o)},foreach:function(e){for(var t in this._.contents)for(var n in this._.contents[t])e.call(this,this._.contents[t][n]);return this},reset:(e=function(e){e.reset&&e.reset(1)},function(){return this.foreach(e),this}),setupContent:function(){var t=arguments;this.foreach(function(e){e.setup&&e.setup.apply(e,t)})},commitContent:function(){var t=arguments;this.foreach(function(e){CKEDITOR.env.ie&&this._.currentFocusIndex==e.focusIndex&&e.getInputElement().$.blur(),e.commit&&e.commit.apply(e,t)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{}),this._.editor.fire("dialogHide",this),this.selectPage(this._.tabIdList[0]);var e=this._.element;for(e.setStyle("display","none"),this.parts.dialog.setStyle("visibility","hidden"),P(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();if(this._.parentDialog){var t=this._.parentDialog.getElement().getFirst();t.setStyle("z-index",parseInt(t.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else o(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null,e.removeListener("keydown",L),e.removeListener(CKEDITOR.env.opera?"keypress":"keyup",$);var n=this._.editor;n.focus(),setTimeout(function(){n.focusManager.unlock()},0)}delete this._.parentDialog,this.foreach(function(e){e.resetInitValue&&e.resetInitValue()})}},addPage:function(e){if(!e.requiredContent||this._.editor.filter.check(e.requiredContent)){for(var t=[],n=e.label?' title="'+CKEDITOR.tools.htmlEncode(e.label)+'"':"",i=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:e.elements,expand:!!e.expand,padding:e.padding,style:e.style||"width: 100%;"},t),o=this._.contents[e.id]={},r=i.getChild(),s=0;i=r.shift();)!i.notAllowed&&"hbox"!=i.type&&"vbox"!=i.type&&s++,"function"==typeof(o[i.id]=i).getChild&&r.push.apply(r,i.getChild());s||(e.hidden=!0),(t=CKEDITOR.dom.element.createFromHtml(t.join(""))).setAttribute("role","tabpanel"),i=CKEDITOR.env,o="cke_"+e.id+"_"+CKEDITOR.tools.getNextNumber(),n=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",n,e.hidden?' style="display:none"':"",' id="',o,'"',i.gecko&&10900<=i.version&&!i.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',e.label,"</a>"].join("")),t.setAttribute("aria-labelledby",o),this._.tabs[e.id]=[n,t],this._.tabIdList.push(e.id),!e.hidden&&this._.pageCount++,this._.lastTab=n,this.updateStyle(),t.setAttribute("name",e.id),t.appendTo(this.parts.contents),n.unselectable(),this.parts.tabs.append(n),e.accessKey&&(F(this,this,"CTRL+"+e.accessKey,M,B),this._.accessKeyMap["CTRL+"+e.accessKey]=e.id)}},selectPage:function(e){if(this._.currentTabId!=e&&!this._.tabs[e][0].hasClass("cke_dialog_tab_disabled")&&!0!==this.fire("selectPage",{page:e,currentPage:this._.currentTabId})){for(var t in this._.tabs){var n=this._.tabs[t][0],i=this._.tabs[t][1];t!=e&&(n.removeClass("cke_dialog_tab_selected"),i.hide()),i.setAttribute("aria-hidden",t!=e)}var o=this._.tabs[e];o[0].addClass("cke_dialog_tab_selected"),CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(r(o[1]),o[1].show(),setTimeout(function(){r(o[1],1)},0)):o[1].show(),this._.currentTabId=e,this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,e)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(e){var t=this._.tabs[e]&&this._.tabs[e][0];t&&1!=this._.pageCount&&t.isVisible()&&(e==this._.currentTabId&&this.selectPage(E.call(this)),t.hide(),this._.pageCount--,this.updateStyle())},showPage:function(e){(e=this._.tabs[e]&&this._.tabs[e][0])&&(e.show(),this._.pageCount++,this.updateStyle())},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(e,t){var n=this._.contents[e];return n&&n[t]},getValueOf:function(e,t){return this.getContentElement(e,t).getValue()},setValueOf:function(e,t,n){return this.getContentElement(e,t).setValue(n)},getButton:function(e){return this._.buttons[e]},click:function(e){return this._.buttons[e].click()},disableButton:function(e){return this._.buttons[e].disable()},enableButton:function(e){return this._.buttons[e].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(e,t){if(void 0===t)t=this._.focusList.length,this._.focusList.push(new i(this,e,t));else{this._.focusList.splice(t,0,new i(this,e,t));for(var n=t+1;n<this._.focusList.length;n++)this._.focusList[n].focusIndex++}}},CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(e,t){this._.dialogDefinitions[e]&&"function"!=typeof t||(this._.dialogDefinitions[e]=t)},exists:function(e){return!!this._.dialogDefinitions[e]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(e,t,n){return!((e=e.config.removeDialogTabs)&&e.match(RegExp("(?:^|;)"+t+":"+n+"(?:$|;)","i")))},okButton:(a=function(e,t){return t=t||{},CKEDITOR.tools.extend({id:"ok",type:"button",label:e.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(e){!1!==(e=e.data.dialog).fire("ok",{hide:!0}).hide&&e.hide()}},t,!0)},a.type="button",a.override=function(t){return CKEDITOR.tools.extend(function(e){return a(e,t)},{type:"button"},!0)},a),cancelButton:(n=function(e,t){return t=t||{},CKEDITOR.tools.extend({id:"cancel",type:"button",label:e.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(e){!1!==(e=e.data.dialog).fire("cancel",{hide:!0}).hide&&e.hide()}},t,!0)},n.type="button",n.override=function(t){return CKEDITOR.tools.extend(function(e){return n(e,t)},{type:"button"},!0)},n),addUIElement:function(e,t){this._.uiElementBuilders[e]=t}}),CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null},CKEDITOR.event.implementOn(CKEDITOR.dialog),CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var D={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},f=function(e,t,n){for(var i,o=0;i=e[o];o++)if(i.id==t||n&&i[n]&&(i=f(i[n],t,n)))return i;return null},m=function(e,t,n,i,o){if(n){for(var r,s=0;r=e[s];s++){if(r.id==n)return e.splice(s,0,t),t;if(i&&r[i]&&(r=m(r[i],t,n,i,!0)))return r}if(o)return null}return e.push(t),t},p=function(e,t,n){for(var i,o=0;i=e[o];o++){if(i.id==t)return e.splice(o,1);if(n&&i[n]&&(i=p(i[n],t,n)))return i}return null},R=function(e,t){this.dialog=e;for(var n,i=t.contents,o=0;n=i[o];o++)i[o]=n&&new s(e,n);CKEDITOR.tools.extend(this,t)};R.prototype={getContents:function(e){return f(this.contents,e)},getButton:function(e){return f(this.buttons,e)},addContents:function(e,t){return m(this.contents,e,t)},addButton:function(e,t){return m(this.buttons,e,t)},removeContents:function(e){p(this.contents,e)},removeButton:function(e){p(this.buttons,e)}},s.prototype={get:function(e){return f(this.elements,e,"children")},add:function(e,t){return m(this.elements,e,t,"children")},remove:function(e){p(this.elements,e,"children")}};var g,y,t,_,K,w,k,N,x,S={},A={},L=function(e){var t=e.data.$.ctrlKey||e.data.$.metaKey,n=e.data.$.altKey,i=e.data.$.shiftKey,o=String.fromCharCode(e.data.$.keyCode);(t=A[(t?"CTRL+":"")+(n?"ALT+":"")+(i?"SHIFT+":"")+o])&&t.length&&((t=t[t.length-1]).keydown&&t.keydown.call(t.uiElement,t.dialog,t.key),e.data.preventDefault())},$=function(e){var t=e.data.$.ctrlKey||e.data.$.metaKey,n=e.data.$.altKey,i=e.data.$.shiftKey,o=String.fromCharCode(e.data.$.keyCode);(t=A[(t?"CTRL+":"")+(n?"ALT+":"")+(i?"SHIFT+":"")+o])&&t.length&&((t=t[t.length-1]).keyup&&(t.keyup.call(t.uiElement,t.dialog,t.key),e.data.preventDefault()))},F=function(e,t,n,i,o){(A[n]||(A[n]=[])).push({uiElement:e,dialog:t,key:n,keyup:o||e.accessKeyUp,keydown:i||e.accessKeyDown})},P=function(e){for(var t in A){for(var n=A[t],i=n.length-1;0<=i;i--)(n[i].dialog==e||n[i].uiElement==e)&&n.splice(i,1);0===n.length&&delete A[t]}},B=function(e,t){e._.accessKeyMap[t]&&e.selectPage(e._.accessKeyMap[t])},M=function(){};CKEDITOR.ui.dialog={uiElement:function(n,i,e,t,o,r,s){if(!(arguments.length<4)){var a=(t.call?t(i):t)||"div",l=["<",a," "],c=(o&&o.call?o(i):o)||{},d=(r&&r.call?r(i):r)||{},u=(s&&s.call?s.call(this,n,i):s)||"",h=this.domId=d.id||CKEDITOR.tools.getNextId()+"_uiElement";this.id=i.id,i.requiredContent&&!n.getParentEditor().filter.check(i.requiredContent)&&(c.display="none",this.notAllowed=!0),d.id=h;var f={};i.type&&(f["cke_dialog_ui_"+i.type]=1),i.className&&(f[i.className]=1),i.disabled&&(f.cke_disabled=1);var m=d["class"]&&d["class"].split?d["class"].split(" "):[];for(h=0;h<m.length;h++)m[h]&&(f[m[h]]=1);for(h in m=[],f)m.push(h);for(h in d["class"]=m.join(" "),i.title&&(d.title=i.title),f=(i.style||"").split(";"),i.align&&(m=i.align,c["margin-left"]="left"==m?0:"auto",c["margin-right"]="right"==m?0:"auto"),c)f.push(h+":"+c[h]);for(i.hidden&&f.push("display:none"),h=f.length-1;0<=h;h--)""===f[h]&&f.splice(h,1);for(h in 0<f.length&&(d.style=(d.style?d.style+"; ":"")+f.join("; ")),d)l.push(h+'="'+CKEDITOR.tools.htmlEncode(d[h])+'" ');l.push(">",u,"</",a,">"),e.push(l.join("")),(this._||(this._={})).dialog=n,"boolean"==typeof i.isChanged&&(this.isChanged=function(){return i.isChanged}),"function"==typeof i.isChanged&&(this.isChanged=i.isChanged),"function"==typeof i.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(t){return function(e){t.call(this,i.setValue.call(this,e))}})),"function"==typeof i.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(e){return function(){return i.getValue.call(this,e.call(this))}})),CKEDITOR.event.implementOn(this),this.registerEvents(i),this.accessKeyUp&&this.accessKeyDown&&i.accessKey&&F(this,n,"CTRL+"+i.accessKey);var p=this;n.on("load",function(){var e=p.getInputElement();if(e){var t=p.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&CKEDITOR.env.version<8?"cke_dialog_ui_focused":"";e.on("focus",function(){n._.tabBarMode=!1,n._.hasFocus=!0,p.fire("focus"),t&&this.addClass(t)}),e.on("blur",function(){p.fire("blur"),t&&this.removeClass(t)})}}),CKEDITOR.tools.extend(this,i),this.keyboardFocusable&&(this.tabIndex=i.tabIndex||0,this.focusIndex=n._.focusList.push(this)-1,this.on("focus",function(){n._.currentFocusIndex=p.focusIndex}))}},hbox:function(e,t,i,n,o){if(!(arguments.length<4)){this._||(this._={});var r,s=this._.children=t,a=o&&o.widths||null,l=o&&o.height||null,c={role:"presentation"};o&&o.align&&(c.align=o.align),CKEDITOR.ui.dialog.uiElement.call(this,e,o||{type:"hbox"},n,"table",{},c,function(){var e=['<tbody><tr class="cke_dialog_ui_hbox">'];for(r=0;r<i.length;r++){var t="cke_dialog_ui_hbox_child",n=[];0===r&&(t="cke_dialog_ui_hbox_first"),r==i.length-1&&(t="cke_dialog_ui_hbox_last"),e.push('<td class="',t,'" role="presentation" '),a?a[r]&&n.push("width:"+h(a[r])):n.push("width:"+Math.floor(100/i.length)+"%"),l&&n.push("height:"+h(l)),o&&null!=o.padding&&n.push("padding:"+h(o.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&s[r].align&&n.push("text-align:"+s[r].align),0<n.length&&e.push('style="'+n.join("; ")+'" '),e.push(">",i[r],"</td>")}return e.push("</tr></tbody>"),e.join("")})}},vbox:function(i,e,o,t,r){if(!(arguments.length<3)){this._||(this._={});var s=this._.children=e,a=r&&r.width||null,l=r&&r.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,i,r||{type:"vbox"},t,"div",null,{role:"presentation"},function(){var e=['<table role="presentation" cellspacing="0" border="0" '];e.push('style="'),r&&r.expand&&e.push("height:100%;"),e.push("width:"+h(a||"100%"),";"),CKEDITOR.env.webkit&&e.push("float:none;"),e.push('"'),e.push('align="',CKEDITOR.tools.htmlEncode(r&&r.align||("ltr"==i.getParentEditor().lang.dir?"left":"right")),'" '),e.push("><tbody>");for(var t=0;t<o.length;t++){var n=[];e.push('<tr><td role="presentation" '),a&&n.push("width:"+h(a||"100%")),l?n.push("height:"+h(l[t])):r&&r.expand&&n.push("height:"+Math.floor(100/o.length)+"%"),r&&null!=r.padding&&n.push("padding:"+h(r.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&s[t].align&&n.push("text-align:"+s[t].align),0<n.length&&e.push('style="',n.join("; "),'" '),e.push(' class="cke_dialog_ui_vbox_child">',o[t],"</td></tr>")}return e.push("</tbody></table>"),e.join("")})}}},CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(e,t){return this.getInputElement().setValue(e),!t&&this.fire("change",{value:e}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var e=this.getInputElement();(e=e.getParent())&&-1==e.$.className.search("cke_dialog_page_contents"););return e&&(e=e.getAttribute("name"),this._.dialog._.currentTabId!=e&&this._.dialog.selectPage(e)),this},focus:function(){return this.selectParentTab().getInputElement().focus(),this},registerEvents:function(e){var t,n,i=/^on([A-Z]\w+)/,o=function(e,t,n,i){t.on("load",function(){e.getInputElement().on(n,i,e)})};for(n in e)(t=n.match(i))&&(this.eventProcessors[n]?this.eventProcessors[n].call(this,this._.dialog,e[n]):o(this,this._.dialog,t[1].toLowerCase(),e[n]));return this},eventProcessors:{onLoad:function(e,t){e.on("load",t,this)},onShow:function(e,t){e.on("show",t,this)},onHide:function(e,t){e.on("hide",t,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var e=this.getElement();this.getInputElement().setAttribute("disabled","true"),e.addClass("cke_disabled")},enable:function(){var e=this.getElement();this.getInputElement().removeAttribute("disabled"),e.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return!(!this.isEnabled()||!this.isVisible())}},CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(e){return arguments.length<1?this._.children.concat():(e.splice||(e=[e]),e.length<2?this._.children[e[0]]:this._.children[e[0]]&&this._.children[e[0]].getChild?this._.children[e[0]].getChild(e.slice(1,e.length)):null)}},!0),CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox,t={build:function(e,t,n){for(var i,o=t.children,r=[],s=[],a=0;a<o.length&&(i=o[a]);a++){var l=[];r.push(l),s.push(CKEDITOR.dialog._.uiElementBuilders[i.type].build(e,i,l))}return new CKEDITOR.ui.dialog[t.type](e,s,r,n,t)}},CKEDITOR.dialog.addUIElement("hbox",t),CKEDITOR.dialog.addUIElement("vbox",t),CKEDITOR.dialogCommand=function(e,t){this.dialogName=e,CKEDITOR.tools.extend(this,t,!0)},CKEDITOR.dialogCommand.prototype={exec:function(e){CKEDITOR.env.opera?CKEDITOR.tools.setTimeout(function(){e.openDialog(this.dialogName)},0,this):e.openDialog(this.dialogName)},canUndo:!1,editorFocus:1},_=/^([a]|[^a])+$/,K=/^\d*$/,w=/^\d*(?:\.\d+)?$/,k=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,N=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,x=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/,CKEDITOR.VALIDATE_OR=1,CKEDITOR.VALIDATE_AND=2,CKEDITOR.dialog.validate={functions:function(){var s=arguments;return function(){var e,t=this&&this.getValue?this.getValue():s[0],n=void 0,i=CKEDITOR.VALIDATE_AND,o=[];for(e=0;e<s.length&&"function"==typeof s[e];e++)o.push(s[e]);e<s.length&&"string"==typeof s[e]&&(n=s[e],e++),e<s.length&&"number"==typeof s[e]&&(i=s[e]);var r=i==CKEDITOR.VALIDATE_AND;for(e=0;e<o.length;e++)r=i==CKEDITOR.VALIDATE_AND?r&&o[e](t):r||o[e](t);return!!r||n}},regex:function(t,n){return function(e){return e=this&&this.getValue?this.getValue():e,!!t.test(e)||n}},notEmpty:function(e){return this.regex(_,e)},integer:function(e){return this.regex(K,e)},number:function(e){return this.regex(w,e)},cssLength:function(e){return this.functions(function(e){return N.test(CKEDITOR.tools.trim(e))},e)},htmlLength:function(e){return this.functions(function(e){return k.test(CKEDITOR.tools.trim(e))},e)},inlineStyle:function(e){return this.functions(function(e){return x.test(CKEDITOR.tools.trim(e))},e)},equals:function(t,e){return this.functions(function(e){return e==t},e)},notEqual:function(t,e){return this.functions(function(e){return e!=t},e)}},CKEDITOR.on("instanceDestroyed",function(e){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var t;t=CKEDITOR.dialog._.currentTop;)t.hide();for(var n in S)S[n].remove();S={}}var i;for(i in e=e.editor._.storedDialogs)e[i].destroy()}),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(e,t){var n=null,i=CKEDITOR.dialog._.dialogDefinitions[e];if(null===CKEDITOR.dialog._.currentTop&&u(this),"function"==typeof i)n=(n=this._.storedDialogs||(this._.storedDialogs={}))[e]||(n[e]=new CKEDITOR.dialog(this,e)),t&&t.call(n,n),n.show();else{if("failed"==i)throw o(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+e+'" failed when loading definition.');"string"==typeof i&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(i),function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[e]&&(CKEDITOR.dialog._.dialogDefinitions[e]="failed"),this.openDialog(e,t)},this,0,1)}return CKEDITOR.skin.loadPart("dialog"),n}})}(),CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(t){t.on("doubleclick",function(e){e.data.dialog&&t.openDialog(e.data.dialog)},null,null,999)}}),CKEDITOR.plugins.add("about",{requires:"dialog",init:function(e){var t=e.addCommand("about",new CKEDITOR.dialogCommand("about"));t.modes={wysiwyg:1,source:1},t.canUndo=!1,t.readOnly=1,e.ui.addButton&&e.ui.addButton("About",{label:e.lang.about.title,command:"about",toolbar:"about"}),CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}}),CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,en:1,eo:1,es:1,et:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},init:function(t){var n=this;t.addCommand("a11yHelp",{exec:function(){var e=t.langCode;e=n.availableLangs[e]?e:n.availableLangs[e.replace(/-.*/,"")]?e.replace(/-.*/,""):"en",CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(n.path+"dialogs/lang/"+e+".js"),function(){t.lang.a11yhelp=n.langEntries[e],t.openDialog("a11yHelp")})},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1}),t.setKeystroke(CKEDITOR.ALT+48,"a11yHelp"),CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js")}}),CKEDITOR.plugins.add("basicstyles",{init:function(r){var s=0,e=function(e,t,n,i){if(i){i=new CKEDITOR.style(i);var o=a[n];o.unshift(i),r.attachStyleStateChange(i,function(e){!r.readOnly&&r.getCommand(n).setState(e)}),r.addCommand(n,new CKEDITOR.styleCommand(i,{contentForms:o})),r.ui.addButton&&r.ui.addButton(e,{label:t,command:n,toolbar:"basicstyles,"+(s+=10)})}},a={bold:["strong","b",["span",function(e){return"bold"==(e=e.styles["font-weight"])||700<=+e}]],italic:["em","i",["span",function(e){return"italic"==e.styles["font-style"]}]],underline:["u",["span",function(e){return"underline"==e.styles["text-decoration"]}]],strike:["s","strike",["span",function(e){return"line-through"==e.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},t=r.config,n=r.lang.basicstyles;e("Bold",n.bold,"bold",t.coreStyles_bold),e("Italic",n.italic,"italic",t.coreStyles_italic),e("Underline",n.underline,"underline",t.coreStyles_underline),e("Strike",n.strike,"strike",t.coreStyles_strike),e("Subscript",n.subscript,"subscript",t.coreStyles_subscript),e("Superscript",n.superscript,"superscript",t.coreStyles_superscript),r.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}}),CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"},CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"},CKEDITOR.config.coreStyles_underline={element:"u"},CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"},CKEDITOR.config.coreStyles_subscript={element:"sub"},CKEDITOR.config.coreStyles_superscript={element:"sup"},H={exec:function(e){var t=e.getCommand("blockquote").state,n=e.getSelection(),i=n&&n.getRanges()[0];if(i){var o=n.createBookmarks();if(CKEDITOR.env.ie){var r,s=o[0].startNode,a=o[0].endNode;if(s&&"blockquote"==s.getParent().getName())for(r=s;r=r.getNext();)if(r.type==CKEDITOR.NODE_ELEMENT&&r.isBlockBoundary()){s.move(r,!0);break}if(a&&"blockquote"==a.getParent().getName())for(r=a;r=r.getPrevious();)if(r.type==CKEDITOR.NODE_ELEMENT&&r.isBlockBoundary()){a.move(r);break}}if((l=i.createIterator()).enlargeBr=e.config.enterMode!=CKEDITOR.ENTER_BR,t==CKEDITOR.TRISTATE_OFF){for(s=[];t=l.getNextParagraph();)s.push(t);for(s.length<1&&(t=e.document.createElement(e.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),a=o.shift(),i.insertNode(t),t.append(new CKEDITOR.dom.text("\ufeff",e.document)),i.moveToBookmark(a),i.selectNodeContents(t),i.collapse(!0),a=i.createBookmark(),s.push(t),o.unshift(a)),r=s[0].getParent(),i=[],a=0;a<s.length;a++)t=s[a],r=r.getCommonAncestor(t.getParent());for(t={table:1,tbody:1,tr:1,ol:1,ul:1};t[r.getName()];)r=r.getParent();for(a=null;0<s.length;){for(t=s.shift();!t.getParent().equals(r);)t=t.getParent();t.equals(a)||i.push(t),a=t}for(;0<i.length;)if("blockquote"==(t=i.shift()).getName()){for(a=new CKEDITOR.dom.documentFragment(e.document);t.getFirst();)a.append(t.getFirst().remove()),s.push(a.getLast());a.replace(t)}else s.push(t);for((i=e.document.createElement("blockquote")).insertBefore(s[0]);0<s.length;)t=s.shift(),i.append(t)}else if(t==CKEDITOR.TRISTATE_ON){for(a=[],r={};t=l.getNextParagraph();){for(s=i=null;t.getParent();){if("blockquote"==t.getParent().getName()){i=t.getParent(),s=t;break}t=t.getParent()}i&&s&&!s.getCustomData("blockquote_moveout")&&(a.push(s),CKEDITOR.dom.element.setMarker(r,s,"blockquote_moveout",!0))}for(CKEDITOR.dom.element.clearAllMarkers(r),t=[],s=[],r={};0<a.length;)i=(l=a.shift()).getParent(),l.getPrevious()?l.getNext()?(l.breakParent(l.getParent()),s.push(l.getNext())):l.remove().insertAfter(i):l.remove().insertBefore(i),i.getCustomData("blockquote_processed")||(s.push(i),CKEDITOR.dom.element.setMarker(r,i,"blockquote_processed",!0)),t.push(l);for(CKEDITOR.dom.element.clearAllMarkers(r),a=s.length-1;0<=a;a--){e:{for(var l=0,c=(r=i=s[a]).getChildCount(),d=void 0;l<c&&(d=r.getChild(l));l++)if(d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()){r=!1;break e}r=!0}r&&i.remove()}if(e.config.enterMode==CKEDITOR.ENTER_BR)for(i=!0;t.length;)if("div"==(l=t.shift()).getName()){for(a=new CKEDITOR.dom.documentFragment(e.document),i&&l.getPrevious()&&(l.getPrevious().type!=CKEDITOR.NODE_ELEMENT||!l.getPrevious().isBlockBoundary())&&a.append(e.document.createElement("br")),i=l.getNext()&&!(l.getNext().type==CKEDITOR.NODE_ELEMENT&&l.getNext().isBlockBoundary());l.getFirst();)l.getFirst().remove().appendTo(a);i&&a.append(e.document.createElement("br")),a.replace(l),i=!1}}n.selectBookmarks(o),e.focus()}},refresh:function(e,t){this.setState(e.elementPath(t.block||t.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"},CKEDITOR.plugins.add("blockquote",{init:function(e){e.blockless||(e.addCommand("blockquote",H),e.ui.addButton&&e.ui.addButton("Blockquote",{label:e.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}}),function(){function e(f){function e(){var e,t=f.editable();t.on(T,function(e){(!CKEDITOR.env.ie||!p)&&u(e)}),CKEDITOR.env.ie&&t.on("paste",function(e){g||(i(),e.data.preventDefault(),u(e),r("paste")||f.openDialog("paste"))}),CKEDITOR.env.ie&&(t.on("contextmenu",o,null,null,0),t.on("beforepaste",function(e){e.data&&!e.data.$.ctrlKey&&o()},null,null,0)),t.on("beforecut",function(){!p&&a(f)}),t.attachListener(CKEDITOR.env.ie?t:f.document.getDocumentElement(),"mouseup",function(){e=setTimeout(function(){h()},0)}),f.on("destroy",function(){clearTimeout(e)}),t.on("keyup",h)}function t(e){return{type:e,canUndo:"cut"==e,startDisabled:!0,exec:function(){var e;"cut"==this.type&&a();var t=this.type;if(CKEDITOR.env.ie)e=r(t);else try{e=f.document.$.execCommand(t,!1,null)}catch(n){e=!1}return e||alert(f.lang.clipboard[this.type+"Error"]),e}}}function n(){return{canUndo:!1,async:!0,exec:function(n,e){var t=function(e,t){e&&s(e.type,e.dataValue,!!t),n.fire("afterCommandExec",{name:"paste",command:i,returnValue:!!e})},i=this;"string"==typeof e?t({type:"auto",dataValue:e},1):n.getClipboardData(t)}}}function i(){g=1,setTimeout(function(){g=0},100)}function o(){p=1,setTimeout(function(){p=0},10)}function r(e){var t=f.document,n=t.getBody(),i=!1,o=function(){i=!0};return n.on(e,o),(7<CKEDITOR.env.version?t.$:t.$.selection.createRange()).execCommand(e),n.removeListener(e,o),i}function s(e,t,n){return e={type:e},!(n&&!f.fire("beforePaste",e)||!t)&&(e.dataValue=t,f.fire("paste",e))}function a(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var e,t,n,i=f.getSelection();i.getType()==CKEDITOR.SELECTION_ELEMENT&&(e=i.getSelectedElement())&&(t=i.getRanges()[0],(n=f.document.createText("")).insertBefore(e),t.setStartBefore(n),t.setEndAfter(e),i.selectRanges([t]),setTimeout(function(){e.getParent()&&(n.remove(),i.selectElement(e))},0))}}function l(e,t){var n,i=f.document,o=f.editable(),r=function(e){e.cancel()},s=CKEDITOR.env.gecko&&CKEDITOR.env.version<=10902;if(!i.getById("cke_pastebin")){var a=f.getSelection(),l=a.createBookmarks(),c=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!o.is("body")||CKEDITOR.env.ie||CKEDITOR.env.opera?"div":"body",i);c.setAttributes({id:"cke_pastebin","data-cke-temp":"1"}),CKEDITOR.env.opera&&c.appendBogus();var d=0;i=i.getWindow();s?(c.insertAfter(l[0].startNode),c.setStyle("display","inline")):(CKEDITOR.env.webkit?(o.append(c),c.addClass("cke_editable"),o.is("body")||(d=(s="static"!=o.getComputedStyle("position")?o:CKEDITOR.dom.element.get(o.$.offsetParent)).getDocumentPosition().y)):o.getAscendant(CKEDITOR.env.ie||CKEDITOR.env.opera?"body":"html",1).append(c),c.setStyles({position:"absolute",top:i.getScrollPosition().y-d+10+"px",width:"1px",height:Math.max(1,i.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0})),(s=c.getParent().isReadOnly())?(c.setOpacity(0),c.setAttribute("contenteditable",!0)):c.setStyle("ltr"==f.config.contentsLangDirection?"left":"right","-1000px"),f.on("selectionChange",r,null,null,0),(CKEDITOR.env.webkit||CKEDITOR.env.gecko)&&(n=o.once("blur",r,null,null,-100)),s&&c.focus(),(s=new CKEDITOR.dom.range(c)).selectNodeContents(c);var u=s.select();CKEDITOR.env.ie&&(n=o.once("blur",function(){f.lockSelection(
u)}));var h=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){var e;(CKEDITOR.env.webkit||CKEDITOR.env.opera)&&(CKEDITOR.document[CKEDITOR.env.webkit?"getBody":"getDocumentElement"]().$.scrollTop=h),n&&n.removeListener(),CKEDITOR.env.ie&&o.focus(),a.selectBookmarks(l),c.remove(),CKEDITOR.env.webkit&&(e=c.getFirst())&&e.is&&e.hasClass("Apple-style-span")&&(c=e),f.removeListener("selectionChange",r),t(c.getHtml())},0)}}function c(){if(CKEDITOR.env.ie){f.focus(),i();var e=f.focusManager;if(e.lock(),f.editable().fire(T)&&!r("paste"))return e.unlock(),!1;e.unlock()}else try{if(f.editable().fire(T)&&!f.document.$.execCommand("Paste",!1,null))throw 0}catch(n){return!1}return!0}function d(e){if("wysiwyg"==f.mode)switch(e.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:e=f.editable(),i(),!CKEDITOR.env.ie&&e.fire("beforepaste"),(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.version<10900)&&e.fire("paste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:f.fire("saveSnapshot"),setTimeout(function(){f.fire("saveSnapshot")},50)}}function u(e){var t={type:"auto"},n=f.fire("beforePaste",t);l(e,function(e){e=e.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/gi,""),n&&s(t.type,e,0,1)})}function h(){if("wysiwyg"==f.mode){var e=m("paste");f.getCommand("cut").setState(m("cut")),f.getCommand("copy").setState(m("copy")),f.getCommand("paste").setState(e),f.fire("pasteState",e)}}function m(e){if(E&&e in{paste:1,cut:1})return CKEDITOR.TRISTATE_DISABLED;if("paste"==e)return CKEDITOR.TRISTATE_OFF;var t=(e=f.getSelection()).getRanges();return e.getType()==CKEDITOR.SELECTION_NONE||1==t.length&&t[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF}var p=0,g=0,E=0,T=CKEDITOR.env.ie?"beforepaste":"paste";f.on("key",d),f.on("contentDom",e),f.on("selectionChange",function(e){E=e.data.selection.getRanges()[0].checkReadOnly(),h()}),f.contextMenu&&f.contextMenu.addListener(function(e,t){return E=t.getRanges()[0].checkReadOnly(),{cut:m("cut"),copy:m("copy"),paste:m("paste")}}),function(){function e(e,t,n,i,o){var r=f.lang.clipboard[t];f.addCommand(t,n),f.ui.addButton&&f.ui.addButton(e,{label:r,command:t,toolbar:"clipboard,"+i}),f.addMenuItems&&f.addMenuItem(t,{label:r,command:t,group:"clipboard",order:o})}e("Cut","cut",t("cut"),10,1),e("Copy","copy",t("copy"),20,4),e("Paste","paste",n(),30,8)}(),f.getClipboardData=function(e,t){function n(e){e.removeListener(),e.cancel(),t(e.data)}function i(e){e.removeListener(),e.cancel(),a=!0,t({type:s,dataValue:e.data})}function o(){this.customTitle=e&&e.title}var r=!1,s="auto",a=!1;t||(t=e,e=null),f.on("paste",n,null,null,0),f.on("beforePaste",function(e){e.removeListener(),r=!0,s=e.data.type},null,null,1e3),!1===c()&&(f.removeListener("paste",n),r&&f.fire("pasteDialog",o)?(f.on("pasteDialogCommit",i),f.on("dialogHide",function(e){e.removeListener(),e.data.removeListener("pasteDialogCommit",i),setTimeout(function(){a||t(null)},10)})):t(null))}}function a(e){if(CKEDITOR.env.webkit){if(!e.match(/^[^<]*$/g)&&!e.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!e.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!e.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else{if(!CKEDITOR.env.gecko&&!CKEDITOR.env.opera)return"html";if(!e.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}return"htmlifiedtext"}function l(e,t){function n(e){return CKEDITOR.tools.repeat("</p><p>",~~(e/2))+(1==e%2?"<br>":"")}return(t=(t=t.replace(/\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>")).replace(/<\/?[A-Z]+>/g,function(e){return e.toLowerCase()})).match(/^[^<]$/)?t:(CKEDITOR.env.webkit&&-1<t.indexOf("<div>")&&((t=t.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>")).match(/<div>(<br>|)<\/div>/)&&(t="<p>"+t.replace(/(<div>(<br>|)<\/div>)+/g,function(e){return n(e.split("</div><div>").length+1)})+"</p>"),t=(t=t.replace(/<\/div><div>/g,"<br>")).replace(/<\/?div>/g,"")),(CKEDITOR.env.gecko||CKEDITOR.env.opera)&&e.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(t=t.replace(/^<br><br>$/,"<br>")),-1<t.indexOf("<br><br>")&&(t="<p>"+t.replace(/(<br>){2,}/g,function(e){return n(e.length/4)})+"</p>")),r(e,t))}function c(){var e=new CKEDITOR.htmlParser.filter,i={blockquote:1,dl:1,fieldset:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ol:1,p:1,table:1,ul:1},o=CKEDITOR.tools.extend({br:0},CKEDITOR.dtd.$inline),r={p:1,br:1,"cke:br":1},s=CKEDITOR.dtd,a=CKEDITOR.tools.extend({area:1,basefont:1,embed:1,iframe:1,map:1,object:1,param:1},CKEDITOR.dtd.$nonBodyContent,CKEDITOR.dtd.$cdata),t=function(e){delete e.name,e.add(new CKEDITOR.htmlParser.text(" "))},n=function(e){for(var t,n=e;(n=n.next)&&n.name&&n.name.match(/^h\d$/);)for((t=new CKEDITOR.htmlParser.element("cke:br")).isEmpty=!0,e.add(t);t=n.children.shift();)e.add(t)};return e.addRules({elements:{h1:n,h2:n,h3:n,h4:n,h5:n,h6:n,img:function(e){var t=" ";return(e=CKEDITOR.tools.trim(e.attributes.alt||""))&&!e.match(/(^http|\.(jpe?g|gif|png))/i)&&(t=" ["+e+"] "),new CKEDITOR.htmlParser.text(t)},td:t,th:t,$:function(e){var t,n=e.name;if(a[n])return!1;if(e.attributes={},"br"==n)return e;if(i[n])e.name="p";else if(o[n])delete e.name;else if(s[n]){if((t=new CKEDITOR.htmlParser.element("cke:br")).isEmpty=!0,CKEDITOR.dtd.$empty[n])return t;e.add(t,0),(t=t.clone()).isEmpty=!0,e.add(t),delete e.name}return r[e.name]||delete e.name,e}}},{applyToAll:!0}),e}function d(e,t,n){t=new CKEDITOR.htmlParser.fragment.fromHtml(t);var i=new CKEDITOR.htmlParser.basicWriter;t.writeHtml(i,n);t=(t=i.getHtml()).replace(/\s*(<\/?[a-z:]+ ?\/?>)\s*/g,"$1").replace(/(<cke:br \/>){2,}/g,"<cke:br />").replace(/(<cke:br \/>)(<\/?p>|<br \/>)/g,"$2").replace(/(<\/?p>|<br \/>)(<cke:br \/>)/g,"$1").replace(/<(cke:)?br( \/)?>/g,"<br>").replace(/<p><\/p>/g,"");var o=0;return r(e,t=t.replace(/<\/?p>/g,function(e){if("<p>"==e){if(1<++o)return"</p><p>"}else if(0<--o)return"</p><p>";return e}).replace(/<p><\/p>/g,""))}function r(e,t){return e.enterMode==CKEDITOR.ENTER_BR?t=t.replace(/(<\/p><p>)+/g,function(e){return CKEDITOR.tools.repeat("<br>",e.length/7*2)}).replace(/<\/?p>/g,""):e.enterMode==CKEDITOR.ENTER_DIV&&(t=t.replace(/<(\/)?p>/g,"<$1div>")),t}CKEDITOR.plugins.add("clipboard",{requires:"dialog",init:function(r){var s;e(r),CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js")),r.on("paste",function(n){var e=n.data.dataValue,i=CKEDITOR.dtd.$block;if(-1<e.indexOf("Apple-")&&(e=e.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=n.data.type&&(e=e.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(e,t){return t.replace(/\t/g,"&nbsp;&nbsp; &nbsp;")})),-1<e.indexOf('<br class="Apple-interchange-newline">')&&(n.data.startsWithEOL=1,n.data.preSniffing="html",e=e.replace(/<br class="Apple-interchange-newline">/,"")),e=e.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1")),e.match(/^<[^<]+cke_(editable|contents)/i)){var t,o,r=new CKEDITOR.dom.element("div");for(r.setHtml(e);1==r.getChildCount()&&(t=r.getFirst())&&t.type==CKEDITOR.NODE_ELEMENT&&(t.hasClass("cke_editable")||t.hasClass("cke_contents"));)r=o=t;o&&(e=o.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?e=e.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(e,t){return t.toLowerCase()in i?(n.data.preSniffing="html","<"+t):e}):CKEDITOR.env.webkit?e=e.replace(/<\/(\w+)><div><br><\/div>$/,function(e,t){return t in i?(n.data.endsWithEOL=1,"</"+t+">"):e}):CKEDITOR.env.gecko&&(e=e.replace(/(\s)<br>$/,"$1")),n.data.dataValue=e},null,null,3),r.on("paste",function(e){var t,n=(e=e.data).type,i=e.dataValue,o=r.config.clipboard_defaultContentType||"html";"htmlifiedtext"==(t="html"==n||"html"==e.preSniffing?"html":a(i))?i=l(r.config,i):"text"==n&&"html"==t&&(i=d(r.config,i,s||(s=c(r)))),e.startsWithEOL&&(i='<br data-cke-eol="1">'+i),e.endsWithEOL&&(i+='<br data-cke-eol="1">'),"auto"==n&&(n="html"==t||"html"==o?"html":"text"),e.type=n,e.dataValue=i,delete e.preSniffing,delete e.startsWithEOL,delete e.endsWithEOL},null,null,6),r.on("paste",function(e){e=e.data,r.insertHtml(e.dataValue,e.type),setTimeout(function(){r.fire("afterPaste")},0)},null,null,1e3),r.on("pasteDialog",function(e){setTimeout(function(){r.openDialog("paste",e.data)},0)})}})}(),function(){CKEDITOR.plugins.add("panel",{beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}}),CKEDITOR.UI_PANEL="panel",CKEDITOR.ui.panel=function(e,t){t&&CKEDITOR.tools.extend(this,t),CKEDITOR.tools.extend(this,{className:"",css:[]}),this.id=CKEDITOR.tools.getNextId(),this.document=e,this.isFramed=this.forceIFrame||this.css.length,this._={blocks:{}}},CKEDITOR.ui.panel.handler={create:function(e){return new CKEDITOR.ui.panel(e)}};var o=CKEDITOR.addTemplate("panel",'<div lang="{langCode}" id="{id}" dir={dir} class="cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style="z-index:{z-index}" role="presentation">{frame}</div>'),r=CKEDITOR.addTemplate("panel-frame",'<iframe id="{id}" class="cke_panel_frame" role="presentation" frameborder="0" src="{src}"></iframe>'),s=CKEDITOR.addTemplate("panel-frame-inner",'<!DOCTYPE html><html class="cke_panel_container {env}" dir="{dir}" lang="{langCode}"><head>{css}</head><body class="cke_{dir}" style="margin:0;padding:0" onload="{onload}"></body></html>');CKEDITOR.ui.panel.prototype={render:function(e,t){this.getHolderElement=function(){if(!(t=this._.holder)){if(this.isFramed){var e=(t=this.document.getById(this.id+"_frame")).getParent(),t=t.getFrameDocument();CKEDITOR.env.iOS&&e.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"}),e=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0,this.onLoad&&this.onLoad()},this)),t.write(s.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+e+");"},n))),t.getWindow().$.CKEDITOR=CKEDITOR,t.on("key"+(CKEDITOR.env.opera?"press":"down"),function(e){var t=e.data.getKeystroke(),n=this.document.getById(this.id).getAttribute("dir");this._.onKeyDown&&!1===this._.onKeyDown(t)?e.data.preventDefault():(27==t||t==("rtl"==n?39:37))&&this.onEscape&&!1===this.onEscape(t)&&e.data.preventDefault()},this),(t=t.getBody()).unselectable(),CKEDITOR.env.air&&CKEDITOR.tools.callFunction(e)}else t=this.document.getById(this.id);this._.holder=t}return t};var n={editorId:e.id,id:this.id,langCode:e.langCode,dir:e.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":e.config.baseFloatZIndex+1};if(this.isFramed){var i=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";n.frame=r.output({id:this.id+"_frame",src:i})}return i=o.output(n),t&&t.push(i),i},addBlock:function(e,t){return t=this._.blocks[e]=t instanceof CKEDITOR.ui.panel.block?t:new CKEDITOR.ui.panel.block(this.getHolderElement(),t),this._.currentBlock||this.showBlock(e),t},getBlock:function(e){return this._.blocks[e]},showBlock:function(e){e=this._.blocks[e];var t=this._.currentBlock,n=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");return t&&t.hide(),this._.currentBlock=e,CKEDITOR.fire("ariaWidget",n),e._.focusIndex=-1,this._.onKeyDown=e.onKeyDown&&CKEDITOR.tools.bind(e.onKeyDown,e),e.show(),e},destroy:function(){this.element&&this.element.remove()}},CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(e,t){this.element=e.append(e.getDocument().createElement("div",{attributes:{tabindex:-1,"class":"cke_panel_block"},styles:{display:"none"}})),t&&CKEDITOR.tools.extend(this,t),this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]}),this.keys={},this._.focusIndex=-1,this.element.disableContextMenu()},_:{markItem:function(e){-1!=e&&(e=this.element.getElementsByTag("a").getItem(this._.focusIndex=e),(CKEDITOR.env.webkit||CKEDITOR.env.opera)&&e.getDocument().getWindow().focus(),e.focus(),this.onMark&&this.onMark(e))}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){(!this.onHide||!0!==this.onHide.call(this))&&this.element.setStyle("display","none")},onKeyDown:function(e,t){switch(o=this.keys[e]){case"next":for(var n,i=this._.focusIndex,o=this.element.getElementsByTag("a");n=o.getItem(++i);)if(n.getAttribute("_cke_focus")&&n.$.offsetWidth){this._.focusIndex=i,n.focus();break}return!n&&!t&&(this._.focusIndex=-1,this.onKeyDown(e,1));case"prev":for(i=this._.focusIndex,o=this.element.getElementsByTag("a");0<i&&(n=o.getItem(--i));){if(n.getAttribute("_cke_focus")&&n.$.offsetWidth){this._.focusIndex=i,n.focus();break}n=null}return!n&&!t&&(this._.focusIndex=o.count(),this.onKeyDown(e,1));case"click":case"mouseup":return(n=0<=(i=this._.focusIndex)&&this.element.getElementsByTag("a").getItem(i))&&(n.$[o]?n.$[o]():n.$["on"+o]()),!1}return!0}}})}(),CKEDITOR.plugins.add("floatpanel",{requires:"panel"}),function(){function c(e,t,n,i,o){o=CKEDITOR.tools.genKey(t.getUniqueId(),n.getUniqueId(),e.lang.dir,e.uiColor||"",i.css||"",o||"");var r=s[o];return r||((r=s[o]=new CKEDITOR.ui.panel(t,i)).element=n.append(CKEDITOR.dom.element.createFromHtml(r.render(e),t)),r.element.setStyles({display:"none",position:"absolute"})),r}var s={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(e,t,n,i){function o(){l.hide()}n.forceIFrame=1,n.toolbarRelated&&e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(t=CKEDITOR.document.getById("cke_"+e.name));var r=t.getDocument(),s=(i=c(e,r,t,n,i||0)).element,a=s.getFirst(),l=this;s.disableContextMenu(),this.element=s,this._={editor:e,panel:i,parentElement:t,definition:n,document:r,iframe:a,children:[],dir:e.lang.dir},e.on("mode",o),e.on("resize",o),r.getWindow().on("resize",o)},proto:{addBlock:function(e,t){return this._.panel.addBlock(e,t)},addListBlock:function(e,t){return this._.panel.addListBlock(e,t)},getBlock:function(e){return this._.panel.getBlock(e)},showBlock:function(e,t,n,i,o,a){var l=this._.panel,c=l.showBlock(e);this.allowBlur(!1),e=this._.editor.editable(),this._.returnFocus=e.hasFocus?e:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement);var d=this.element,r=(e=this._.iframe,e=CKEDITOR.env.ie?e:new CKEDITOR.dom.window(e.$.contentWindow),d.getDocument()),s=this._.parentElement.getPositionedAncestor(),u=t.getDocumentPosition(r),h=(r=s?s.getDocumentPosition(r):{x:0,y:0},"rtl"==this._.dir),f=u.x+(i||0)-r.x,m=u.y+(o||0)-r.y;!h||1!=n&&4!=n?h||2!=n&&3!=n||(f+=t.$.offsetWidth-1):f+=t.$.offsetWidth,3!=n&&4!=n||(m+=t.$.offsetHeight-1),this._.panel._.offsetParentId=t.getId(),d.setStyles({top:m+"px",left:0,display:""}),d.setOpacity(0),d.getFirst().removeStyle("width"),this._.editor.focusManager.add(e),this._.blurSet||(CKEDITOR.event.useCapture=!0,e.on("blur",function(e){this.allowBlur()&&e.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(delete this._.returnFocus,this.hide())},this),e.on("focus",function(){this._.focused=!0,this.hideChild(),this.allowBlur(!0)},this),CKEDITOR.event.useCapture=!1,this._.blurSet=1),l.onEscape=CKEDITOR.tools.bind(function(e){if(this.onEscape&&!1===this.onEscape(e))return!1},this),CKEDITOR.tools.setTimeout(function(){var e=CKEDITOR.tools.bind(function(){if(d.removeStyle("width"),c.autoSize){var e=c.element.getDocument();e=(CKEDITOR.env.webkit?c.element:e.getBody()).$.scrollWidth;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<e&&(e+=(d.$.offsetWidth||0)-(d.$.clientWidth||0)+3),d.setStyle("width",e+10+"px"),e=c.element.$.scrollHeight,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<e&&(e+=(d.$.offsetHeight||0)-(d.$.clientHeight||0)+3),d.setStyle("height",e+"px"),l._.currentBlock.element.setStyle("display","none").removeStyle("display")}else d.removeStyle("height");h&&(f-=d.$.offsetWidth),d.setStyle("left",f+"px");var t,n=l.element.getWindow(),i=(e=d.$.getBoundingClientRect(),n=n.getViewPaneSize(),e.width||e.right-e.left),o=e.height||e.bottom-e.top,r=h?e.right:n.width-e.left,s=h?n.width-e.right:e.left;h?r<i&&(f=i<s?f+i:n.width>i?f-e.left:f-e.right+n.width):r<i&&(f=i<s?f-i:n.width>i?f-e.right+n.width:f-e.left),i=e.top,n.height-e.top<o&&(m=o<i?m-o:n.height>o?m-e.bottom+n.height:m-e.top),CKEDITOR.env.ie&&("html"==(n=e=new CKEDITOR.dom.element(d.$.offsetParent)).getName()&&(n=n.getDocument().getBody()),"rtl"==n.getComputedStyle("direction")&&(f=CKEDITOR.env.ie8Compat?f-2*d.getDocument().getDocumentElement().$.scrollLeft:f-(e.$.scrollWidth-e.$.clientWidth))),(t=(e=d.getFirst()).getCustomData("activePanel"))&&t.onHide&&t.onHide.call(this,1),e.setCustomData("activePanel",this),d.setStyles({top:m+"px",left:f+"px"}),d.setOpacity(1),a&&a()},this);l.isLoaded?e():l.onLoad=e,CKEDITOR.tools.setTimeout(function(){var e=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus(),c.element.focus(),CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=e),this.allowBlur(!0),this._.editor.fire("panelShow",this)},0,this)},CKEDITOR.env.air?200:0,this),this.visible=1,this.onShow&&this.onShow.call(this)},focus:function(){if(CKEDITOR.env.webkit){var e=CKEDITOR.document.getActive();!e.equals(this._.iframe)&&e.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var e=this._.iframe.getFrameDocument().getActive();e.is("a")&&(this._.lastFocused=e)},hide:function(e){!this.visible||this.onHide&&!0===this.onHide.call(this)||(this.hideChild(),CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur(),this.element.setStyle("display","none"),this.visible=0,this.element.getFirst().removeCustomData("activePanel"),(e=e&&this._.returnFocus)&&(CKEDITOR.env.webkit&&e.type&&e.getWindow().$.focus(),e.focus()),delete this._.lastFocused,this._.editor.fire("panelHide",this))},allowBlur:function(e){var t=this._.panel;return null!=e&&(t.allowBlur=e),t.allowBlur},showAsChild:function(e,t,n,i,o,r){this._.activeChild==e&&e._.panel._.offsetParentId==n.getId()||(this.hideChild(),e.onHide=CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=e,this._.focused=!1,e.showBlock(t,n,i,o,r),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){e.element.getChild(0).$.style.cssText+=""},100))},hideChild:function(e){var t=this._.activeChild;t&&(delete t.onHide,delete this._.activeChild,t.hide(),e&&this.focus())}}}),CKEDITOR.on("instanceDestroyed",function(){var e,t=CKEDITOR.tools.isEmpty(CKEDITOR.instances);for(e in s){var n=s[e];t?n.destroy():n.element.hide()}t&&(s={})})}(),CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(e){for(var t=e.config.menu_groups.split(","),n=e._.menuGroups={},i=e._.menuItems={},o=0;o<t.length;o++)n[t[o]]=o+1;e.addMenuGroup=function(e,t){n[e]=t||100},e.addMenuItem=function(e,t){n[t.group]&&(i[e]=new CKEDITOR.menuItem(this,e,t))},e.addMenuItems=function(e){for(var t in e)this.addMenuItem(t,e[t])},e.getMenuItem=function(e){return i[e]},e.removeMenuItem=function(e){delete i[e]}}}),function(){function f(e){e.sort(function(e,t){return e.group<t.group?-1:e.group>t.group?1:e.order<t.order?-1:e.order>t.order?1:0})}var e='<span class="cke_menuitem"><a id="{id}" class="cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href="{href}" title="{title}" tabindex="-1"_cke_focus=1 hidefocus="true" role="{role}" aria-haspopup="{hasPopup}" aria-disabled="{disabled}" {ariaChecked}';(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;"');e=e+' onmouseover="CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout="CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},{index}); return false;">';var d=CKEDITOR.addTemplate("menuItem",e+'<span class="cke_menubutton_inner"><span class="cke_menubutton_icon"><span class="cke_button_icon cke_button__{iconName}_icon" style="{iconStyle}"></span></span><span class="cke_menubutton_label">{label}</span>{arrowHtml}</span></a></span>'),u=CKEDITOR.addTemplate("menuArrow",'<span class="cke_menuarrow"><span>{label}</span></span>');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(e,t){t=this._.definition=t||{},this.id=CKEDITOR.tools.getNextId(),this.editor=e,this.items=[],this._.listeners=[],this._.level=t.level||1;var n=CKEDITOR.tools.extend({},t.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),i=n.block.attributes=n.attributes||{};!i.role&&(i.role="menu"),this._.panelDefinition=n},_:{onShow:function(){var e=this.editor.getSelection(),t=e&&e.getStartElement(),n=this.editor.elementPath(),i=this._.listeners;this.removeAll();for(var o=0;o<i.length;o++){var r=i[o](t,e,n);if(r)for(var s in r){var a=this.editor.getMenuItem(s);!a||a.command&&!this.editor.getCommand(a.command).state||(a.state=r[s],this.add(a))}}},onClick:function(e){this.hide(),e.onClick?e.onClick():e.command&&this.editor.execCommand(e.command)},onEscape:function(e){var t=this.parent;return t?t._.panel.hideChild(1):27==e&&this.hide(1),!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(e){var t=this._.subMenu,n=this.items[e];if(n=n.getItems&&n.getItems()){for(var i in t?t.removeAll():((t=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0))).parent=this,t._.onClick=CKEDITOR.tools.bind(this._.onClick,this)),n){var o=this.editor.getMenuItem(i);o&&(o.state=n[i],t.add(o))}var r=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+""+e);setTimeout(function(){t.show(r,2)},0)}else this._.panel.hideChild(1)}},proto:{add:function(e){e.order||(e.order=this.items.length),this.items.push(e)},removeAll:function(){this.items=[]},show:function(e,t,n,i){if(this.parent||(this._.onShow(),this.items.length)){t=t||("rtl"==this.editor.lang.dir?2:1);var o=this.items,r=this.editor,s=this._.panel,a=this._.element;if(!s)(s=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level)).onEscape=CKEDITOR.tools.bind(function(e){if(!1===this._.onEscape(e))return!1},this),s.onShow=function(){s._.panel.getHolderElement().getParent().addClass("cke cke_reset_all")},s.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this),(a=s.addBlock(this.id,this._.panelDefinition.block)).autoSize=!0,(l=a.keys)[40]="next",l[9]="next",l[38]="prev",l[CKEDITOR.SHIFT+9]="prev",l["rtl"==r.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click",l[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(l[13]="mouseup"),(l=(a=this._.element=a.element).getDocument()).getBody().setStyle("overflow","hidden"),l.getElementsByTag("html").getItem(0).setStyle("overflow","hidden"),this._.itemOverFn=CKEDITOR.tools.addFunction(function(e){clearTimeout(this._.showSubTimeout),this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,r.config.menu_subMenuDelay||400,this,[e])},this),this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this),this._.itemClickFn=CKEDITOR.tools.addFunction(function(e){var t=this.items[e];t.state==CKEDITOR.TRISTATE_DISABLED?this.hide(1):t.getItems?this._.showSubMenu(e):this._.onClick(t)},this);f(o);for(var l=['<div class="cke_menu'+((l=r.elementPath())&&l.direction()!=r.lang.dir?" cke_mixed_dir_content":"")+'" role="presentation">'],c=o.length,d=c&&o[0].group,u=0;u<c;u++){var h=o[u];d!=h.group&&(l.push('<div class="cke_menuseparator" role="separator"></div>'),d=h.group),h.render(this,u,l)}l.push("</div>"),a.setHtml(l.join("")),CKEDITOR.ui.fire("ready",this),this.parent?this.parent._.panel.showAsChild(s,this.id,e,t,n,i):s.showBlock(this.id,e,t,n,i),r.fire("menuShow",[s])}},addListener:function(e){this._.listeners.push(e)},hide:function(e){this._.onHide&&this._.onHide(),this._.panel&&this._.panel.hide(e)}}}),CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(e,t,n){CKEDITOR.tools.extend(this,n,{order:0,className:"cke_menubutton__"+t}),this.group=e._.menuGroups[this.group],this.editor=e,this.name=t},proto:{render:function(e,t,n){var i=e.id+""+t,o="undefined"==typeof this.state?CKEDITOR.TRISTATE_OFF:this.state,r="",s=o==CKEDITOR.TRISTATE_ON?"on":o==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in{menuitemcheckbox:1,menuitemradio:1}&&(r=' aria-checked="'+(o==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var a=this.getItems,l="&#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",c=this.name;this.icon&&!/\./.test(this.icon)&&(c=this.icon),e={id:i,name:this.name,iconName:c,label:this.label,cls:this.className||"",state:s,hasPopup:a?"true":"false",disabled:o==CKEDITOR.TRISTATE_DISABLED,title:this.label,href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:e._.itemOverFn,moveOutFn:e._.itemOutFn,clickFn:e._.itemClickFn,index:t,iconStyle:CKEDITOR.skin.getIconStyle(c,"rtl"==this.editor.lang.dir,c==this.icon?null:this.icon,this.iconOffset),arrowHtml:a?u.output({label:l}):"",role:this.role?this.role:"menuitem",ariaChecked:r},d.output(e,n)}}})}(),CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div",CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(e){this.base.call(this,e,{panel:{className:"cke_menu_panel",attributes:{"aria-label":e.lang.contextmenu.options}}})},proto:{addTarget:function(e,s){if(e.on("contextmenu",function(e){e=e.data;var t=CKEDITOR.env.webkit?a:CKEDITOR.env.mac?e.$.metaKey:e.$.ctrlKey;if(!s||!t){e.preventDefault();var n=e.getTarget().getDocument(),i=e.getTarget().getDocument().getDocumentElement(),o=(t=!n.equals(CKEDITOR.document),n=n.getWindow().getScrollPosition(),t?e.$.clientX:e.$.pageX||n.x+e.$.clientX),r=t?e.$.clientY:e.$.pageY||n.y+e.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(i,null,o,r)},CKEDITOR.env.ie?200:0,this)}},this),CKEDITOR.env.webkit){var a,t=function(){a=0};e.on("keydown",function(e){a=CKEDITOR.env.mac?e.data.$.metaKey:e.data.$.ctrlKey}),e.on("keyup",t),e.on("contextmenu",t)}},open:function(e,t,n,i){this.editor.focus(),e=e||CKEDITOR.document.getDocumentElement(),this.editor.selectionChange(1),this.show(e,t,n,i)}}})},beforeInit:function(e){var t=e.contextMenu=new CKEDITOR.plugins.contextMenu(e);e.on("contentDom",function(){t.addTarget(e.editable(),!1!==e.config.browserContextMenuOnCtrl)}),e.addCommand("contextMenu",{exec:function(){e.contextMenu.open(e.document.getBody())}}),e.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu"),e.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}}),CKEDITOR.plugins.add("resize",{init:function(o){var r,s,a,l,c=o.config,i=o.ui.spaceId("resizer"),d=o.element?o.element.getDirection(1):"ltr";if(!c.resize_dir&&(c.resize_dir="vertical"),null==c.resize_maxWidth&&(c.resize_maxWidth=3e3),null==c.resize_maxHeight&&(c.resize_maxHeight=3e3),null==c.resize_minWidth&&(c.resize_minWidth=750),null==c.resize_minHeight&&(c.resize_minHeight=250),!1!==c.resize_enabled){var t=null,u=("both"==c.resize_dir||"horizontal"==c.resize_dir)&&c.resize_minWidth!=c.resize_maxWidth,h=("both"==c.resize_dir||"vertical"==c.resize_dir)&&c.resize_minHeight!=c.resize_maxHeight,n=function(e){var t=r,n=s,i=t+(e.data.$.screenX-a)*("rtl"==d?-1:1);e=n+(e.data.$.screenY-l);u&&(t=Math.max(c.resize_minWidth,Math.min(i,c.resize_maxWidth))),h&&(n=Math.max(c.resize_minHeight,Math.min(e,c.resize_maxHeight))),o.resize(u?t:null,n)},f=function(){CKEDITOR.document.removeListener("mousemove",n),CKEDITOR.document.removeListener("mouseup",f),o.document&&(o.document.removeListener("mousemove",n),o.document.removeListener("mouseup",f))},m=CKEDITOR.tools.addFunction(function(e){t||(t=o.getResizable()),r=t.$.offsetWidth||0,s=t.$.offsetHeight||0,a=e.screenX,l=e.screenY,c.resize_minWidth>r&&(c.resize_minWidth=r),c.resize_minHeight>s&&(c.resize_minHeight=s),CKEDITOR.document.on("mousemove",n),CKEDITOR.document.on("mouseup",f),o.document&&(o.document.on("mousemove",n),o.document.on("mouseup",f)),e.preventDefault&&e.preventDefault()});o.on("destroy",function(){CKEDITOR.tools.removeFunction(m)}),o.on("uiSpace",function(e){if("bottom"==e.data.space){var t="";u&&!h&&(t=" cke_resizer_horizontal"),!u&&h&&(t=" cke_resizer_vertical");var n='<span id="'+i+'" class="cke_resizer'+t+" cke_resizer_"+d+'" title="'+CKEDITOR.tools.htmlEncode(o.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+m+', event)">'+("ltr"==d?"\u25e2":"\u25e3")+"</span>";"ltr"==d&&"ltr"==t?e.data.html+=n:e.data.html=n+e.data.html}},o,null,100),o.on("maximize",function(e){o.ui.space("resizer")[e.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()})}}}),function(){var e='<a id="{id}" class="cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&10900<=CKEDITOR.env.version&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' title="{title}" tabindex="-1" hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="{hasArrow}" aria-disabled="{ariaDisabled}"';(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;"');e=(e=e+' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);"  onmousedown="return CKEDITOR.tools.callFunction({mousedownFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span class="cke_button_icon cke_button__{iconName}_icon" style="{style}"')+'>&nbsp;</span><span id="{id}_label" class="cke_button_label cke_button__{name}_label" aria-hidden="false">{label}</span>{arrowHtml}</a>';var p=CKEDITOR.addTemplate("buttonArrow",'<span class="cke_button_arrow">'+(CKEDITOR.env.hc?"&#9660;":"")+"</span>"),g=CKEDITOR.addTemplate("button",e);CKEDITOR.plugins.add("button",{beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}}),CKEDITOR.UI_BUTTON="button",CKEDITOR.ui.button=function(t){CKEDITOR.tools.extend(this,t,{title:t.label,click:t.click||function(e){e.execCommand(t.command)}}),this._={}},CKEDITOR.ui.button.handler={create:function(e){return new CKEDITOR.ui.button(e)}},CKEDITOR.ui.button.prototype={render:function(i,e){var t,n=CKEDITOR.env,o=this._.id=CKEDITOR.tools.getNextId(),r="",s=this.command;this._.editor=i;var a={id:o,button:this,editor:i,focus:function(){CKEDITOR.document.getById(o).focus()},execute:function(){this.button.click(i)},attach:function(e){this.button.attach(e)}},l=CKEDITOR.tools.addFunction(function(e){if(a.onkey)return e=new CKEDITOR.dom.event(e),!1!==a.onkey(a,e.getKeystroke())}),c=CKEDITOR.tools.addFunction(function(e){var t;return a.onfocus&&(t=!1!==a.onfocus(a,new CKEDITOR.dom.event(e))),CKEDITOR.env.gecko&&CKEDITOR.env.version<10900&&e.preventBubble(),t}),d=0,u=CKEDITOR.tools.addFunction(function(){if(CKEDITOR.env.opera){var e=i.editable();e.isInline()&&e.hasFocus&&(i.lockSelection(),d=1)}});if(a.clickFn=t=CKEDITOR.tools.addFunction(function(){d&&(i.unlockSelection(1),d=0),a.execute()}),this.modes){var h={},f=function(){var e=i.mode;e&&(e=this.modes[e]?null!=h[e]?h[e]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,e=i.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:e,this.setState(e),this.refresh&&this.refresh())};i.on("beforeModeUnload",function(){i.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(h[i.mode]=this._.state)},this),i.on("activeFilterChange",f,this),i.on("mode",f,this),!this.readOnly&&i.on("readOnly",f,this)}else s&&(s=i.getCommand(s))&&(s.on("state",function(){this.setState(s.state)},this),r+=s.state==CKEDITOR.TRISTATE_ON?"on":s.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off");this.directional&&i.on("contentDirChanged",function(e){var t=CKEDITOR.document.getById(this._.id),n=t.getFirst();(e=e.data)!=i.lang.dir?t.addClass("cke_"+e):t.removeClass("cke_ltr").removeClass("cke_rtl"),n.setAttribute("style",CKEDITOR.skin.getIconStyle(m,"rtl"==e,this.icon,this.iconOffset))},this),s||(r+="off");var m=f=this.name||this.command;return this.icon&&!/\./.test(this.icon)&&(m=this.icon,this.icon=null),n={id:o,name:f,iconName:m,label:this.label,cls:this.className||"",state:r,ariaDisabled:"disabled"==r?"true":"false",title:this.title,titleJs:n.gecko&&10900<=n.version&&!n.hc?"":(this.title||"").replace("'",""),hasArrow:this.hasArrow?"true":"false",keydownFn:l,mousedownFn:u,focusFn:c,clickFn:t,style:CKEDITOR.skin.getIconStyle(m,"rtl"==i.lang.dir,this.icon,
this.iconOffset),arrowHtml:this.hasArrow?p.output():""},g.output(n,e),this.onRender&&this.onRender(),a},setState:function(e){if(this._.state==e)return!1;this._.state=e;var t=CKEDITOR.document.getById(this._.id);return!!t&&(t.setState(e,"cke_button"),e==CKEDITOR.TRISTATE_DISABLED?t.setAttribute("aria-disabled",!0):t.removeAttribute("aria-disabled"),this.hasArrow?(e=e==CKEDITOR.TRISTATE_ON?this._.editor.lang.button.selectedLabel.replace(/%1/g,this.label):this.label,CKEDITOR.document.getById(this._.id+"_label").setText(e)):e==CKEDITOR.TRISTATE_ON?t.setAttribute("aria-pressed",!0):t.removeAttribute("aria-pressed"),!0)},getState:function(){return this._.state},toFeature:function(e){if(this._.feature)return this._.feature;var t=this;return!this.allowedContent&&!this.requiredContent&&this.command&&(t=e.getCommand(this.command)||t),this._.feature=t}},CKEDITOR.ui.prototype.addButton=function(e,t){this.add(e,CKEDITOR.UI_BUTTON,t)}}(),function(){function v(a){function e(){for(var e=l(),t=CKEDITOR.tools.clone(a.config.toolbarGroups)||d(a),n=0;n<t.length;n++){var i=t[n];if("/"!=i){"string"==typeof i&&(i=t[n]={name:i});var o,r=i.groups;if(r)for(var s=0;s<r.length;s++)(o=e[o=r[s]])&&c(i,o);(o=e[i.name])&&c(i,o)}}return t}function l(){var e,t,n,i={};for(e in a.ui.items)t=(n=(n=(t=a.ui.items[e]).toolbar||"others").split(","))[0],n=parseInt(n[1]||-1,10),i[t]||(i[t]=[]),i[t].push({name:e,order:n});for(t in i)i[t]=i[t].sort(function(e,t){return e.order==t.order?0:t.order<0?-1:e.order<0?1:e.order<t.order?-1:1});return i}function c(e,t){if(t.length){e.items?e.items.push(a.ui.create("-")):e.items=[];for(var n;n=t.shift();)n="string"==typeof n?n:n.name,i&&-1!=CKEDITOR.tools.indexOf(i,n)||(n=a.ui.create(n))&&a.addFeature(n)&&e.items.push(n)}}function t(e){var t,n,i,o=[];for(t=0;t<e.length;++t)i={},"/"==(n=e[t])?o.push(n):CKEDITOR.tools.isArray(n)?(c(i,CKEDITOR.tools.clone(n)),o.push(i)):n.items&&(c(i,CKEDITOR.tools.clone(n.items)),i.name=n.name,o.push(i));return o}var i=(i=a.config.removeButtons)&&i.split(","),n=a.config.toolbar;return"string"==typeof n&&(n=a.config["toolbar_"+n]),a.toolbar=n?t(n):e()}function d(e){return e._.toolbarGroups||(e._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var I=function(){this.toolbars=[],this.focusCommandExecuted=!1};I.prototype.focus=function(){for(var e,t=0;e=this.toolbars[t++];)for(var n,i=0;n=e.items[i++];)if(n.focus)return void n.focus()};var e={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(e){e.toolbox&&(e.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){e.toolbox.focus()},100):e.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(T){var s,C=function(e,t){var n,i=(o="rtl"==T.lang.dir)?37:39,o=o?39:37,r=void 0===(r=T.config.toolbarGroupCycling)||r;switch(t){case 9:case CKEDITOR.SHIFT+9:for(;!n||!n.items.length;)if((n=9==t?(n?n.next:e.toolbar.next)||T.toolbox.toolbars[0]:(n?n.previous:e.toolbar.previous)||T.toolbox.toolbars[T.toolbox.toolbars.length-1]).items.length)for(e=n.items[s?n.items.length-1:0];e&&!e.focus;)(e=s?e.previous:e.next)||(n=0);return e&&e.focus(),!1;case i:for(n=e;!(n=n.next)&&r&&(n=e.toolbar.items[0]),n&&!n.focus;);return n?n.focus():C(e,9),!1;case 40:return e.button&&e.button.hasArrow?(T.once("panelShow",function(e){e.data._.panel._.currentBlock.onKeyDown(40)}),e.execute()):C(e,40==t?i:o),!1;case o:case 38:for(n=e;!(n=n.previous)&&r&&(n=e.toolbar.items[e.toolbar.items.length-1]),n&&!n.focus;);return n?n.focus():(s=1,C(e,CKEDITOR.SHIFT+9),s=0),!1;case 27:return T.focus(),!1;case 13:case 32:return e.execute(),!1}return!0};T.on("uiSpace",function(e){if(e.data.space==T.config.toolbarLocation){e.removeListener(),T.toolbox=new I;var t,n,i=['<span id="',o=CKEDITOR.tools.getNextId(),'" class="cke_voice_label">',T.lang.toolbar.toolbars,"</span>",'<span id="'+T.ui.spaceId("toolbox")+'" class="cke_toolbox" role="group" aria-labelledby="',o,'" onmousedown="return false;">'],o=!1!==T.config.toolbarStartupExpanded;T.config.toolbarCanCollapse&&T.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&i.push('<span class="cke_toolbox_main"'+(o?">":' style="display:none">'));for(var r=T.toolbox.toolbars,s=v(T),a=0;a<s.length;a++){var l,c,d,u=0,h=s[a];if(h)if(t&&(i.push("</span>"),n=t=0),"/"===h)i.push('<span class="cke_toolbar_break"></span>');else{d=h.items||h;for(var f=0;f<d.length;f++){var m,p=d[f];if(p)if(p.type==CKEDITOR.UI_SEPARATOR)n=t&&p;else{if(m=!1!==p.canGroup,!u){l=CKEDITOR.tools.getNextId(),u={id:l,items:[]},c=h.name&&(T.lang.toolbar.toolbarGroups[h.name]||h.name),i.push('<span id="',l,'" class="cke_toolbar"',c?' aria-labelledby="'+l+'_label"':"",' role="toolbar">'),c&&i.push('<span id="',l,'_label" class="cke_voice_label">',c,"</span>"),i.push('<span class="cke_toolbar_start"></span>');var g=r.push(u)-1;0<g&&(u.previous=r[g-1],u.previous.next=u)}m?t||(i.push('<span class="cke_toolgroup" role="presentation">'),t=1):t&&(i.push("</span>"),t=0),l=function(e){e=e.render(T,i),0<(g=u.items.push(e)-1)&&(e.previous=u.items[g-1],e.previous.next=e),e.toolbar=u,e.onkey=C,e.onfocus=function(){T.toolbox.focusCommandExecuted||T.focus()}},n&&(l(n),n=0),l(p)}}t&&(i.push("</span>"),n=t=0),u&&i.push('<span class="cke_toolbar_end"></span></span>')}}if(T.config.toolbarCanCollapse&&i.push("</span>"),T.config.toolbarCanCollapse&&T.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var E=CKEDITOR.tools.addFunction(function(){T.execCommand("toolbarCollapse")});T.on("destroy",function(){CKEDITOR.tools.removeFunction(E)}),T.addCommand("toolbarCollapse",{readOnly:1,exec:function(e){var t=e.ui.space("toolbar_collapser"),n=t.getPrevious(),i=e.ui.space("contents"),o=n.getParent(),r=parseInt(i.$.style.height,10),s=o.$.offsetHeight,a=t.hasClass("cke_toolbox_collapser_min");a?(n.show(),t.removeClass("cke_toolbox_collapser_min"),t.setAttribute("title",e.lang.toolbar.toolbarCollapse)):(n.hide(),t.addClass("cke_toolbox_collapser_min"),t.setAttribute("title",e.lang.toolbar.toolbarExpand)),t.getFirst().setText(a?"\u25b2":"\u25c0"),i.setStyle("height",r-(o.$.offsetHeight-s)+"px"),e.fire("resize")},modes:{wysiwyg:1,source:1}}),T.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse"),i.push('<a title="'+(o?T.lang.toolbar.toolbarCollapse:T.lang.toolbar.toolbarExpand)+'" id="'+T.ui.spaceId("toolbar_collapser")+'" tabIndex="-1" class="cke_toolbox_collapser'),o||i.push(" cke_toolbox_collapser_min"),i.push('" onclick="CKEDITOR.tools.callFunction('+E+')">','<span class="cke_arrow">&#9650;</span>',"</a>")}i.push("</span>"),e.data.html+=i.join("")}}),T.on("destroy",function(){if(this.toolbox){var e,t,n,i,o=0;for(e=this.toolbox.toolbars;o<e.length;o++)for(n=e[o].items,t=0;t<n.length;t++)(i=n[t]).clickFn&&CKEDITOR.tools.removeFunction(i.clickFn),i.keyDownFn&&CKEDITOR.tools.removeFunction(i.keyDownFn)}}),T.on("uiReady",function(){var e=T.ui.space("toolbox");e&&T.focusManager.add(e,1)}),T.addCommand("toolbarFocus",e),T.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus"),T.ui.add("-",CKEDITOR.UI_SEPARATOR,{}),T.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(e,t){return t.push('<span class="cke_toolbar_separator" role="separator"></span>'),{}}}}})}}),CKEDITOR.ui.prototype.addToolbarGroup=function(e,t,n){var i=d(this.editor),o=0===t,r={name:e};if(n){if(n=CKEDITOR.tools.search(i,function(e){return e.name==n}))return!n.groups&&(n.groups=[]),t&&0<=(t=CKEDITOR.tools.indexOf(n.groups,t))?void n.groups.splice(t+1,0,e):void(o?n.groups.splice(0,0,e):n.groups.push(e));t=null}t&&(t=CKEDITOR.tools.indexOf(i,function(e){return e.name==t})),o?i.splice(0,0,e):"number"==typeof t?i.splice(t+1,0,r):i.push(e)}}(),CKEDITOR.UI_SEPARATOR="separator",CKEDITOR.config.toolbarLocation="top",function(){function n(h,e){function o(e){if((e=p.list[e]).equals(h.editable())||"true"==e.getAttribute("contenteditable")){var t=h.createRange();t.selectNodeContents(e),t.select()}else h.getSelection().selectElement(e);h.focus()}function t(){f&&f.setHtml(C),delete p.list}var f,m=h.ui.spaceId("path"),p=h._.elementsPath,g=p.idBase;e.html+='<span id="'+m+'_label" class="cke_voice_label">'+h.lang.elementspath.eleLabel+'</span><span id="'+m+'" class="cke_path" role="group" aria-labelledby="'+m+'_label">'+C+"</span>",h.on("uiReady",function(){var e=h.ui.space("path");e&&h.focusManager.add(e,1)}),p.onClick=o;var E=CKEDITOR.tools.addFunction(o),T=CKEDITOR.tools.addFunction(function(e,t){var n,i=p.idBase;t=new CKEDITOR.dom.event(t);switch(n="rtl"==h.lang.dir,t.getKeystroke()){case n?39:37:case 9:return(n=CKEDITOR.document.getById(i+(e+1)))||(n=CKEDITOR.document.getById(i+"0")),n.focus(),!1;case n?37:39:case CKEDITOR.SHIFT+9:return(n=CKEDITOR.document.getById(i+(e-1)))||(n=CKEDITOR.document.getById(i+(p.list.length-1))),n.focus(),!1;case 27:return h.focus(),!1;case 13:case 32:return o(e),!1}return!0});h.on("selectionChange",function(){h.editable();for(var e,t=[],n=p.list=[],i=[],o=p.filters,r=!0,s=h.elementPath().elements,a=s.length;a--;){var l=s[a],c=0;e=l.data("cke-display-name")?l.data("cke-display-name"):l.data("cke-real-element-type")?l.data("cke-real-element-type"):l.getName(),!(r=l.hasAttribute("contenteditable")?"true"==l.getAttribute("contenteditable"):r)&&!l.hasAttribute("contenteditable")&&(c=1);for(var d=0;d<o.length;d++){var u=o[d](l,e);if(!1===u){c=1;break}e=u||e}c||(n.unshift(l),i.unshift(e))}for(n=n.length,o=0;o<n;o++)e=i[o],r=h.lang.elementspath.eleTitle.replace(/%1/,e),e=v.output({id:g+o,label:r,text:e,jsTitle:"javascript:void('"+e+"')",index:o,keyDownFn:T,clickFn:E}),t.unshift(e);f||(f=CKEDITOR.document.getById(m)),(i=f).setHtml(t.join("")+C),h.fire("elementsPathUpdate",{space:i})}),h.on("readOnly",t),h.on("contentDomUnload",t),h.addCommand("elementsPathFocus",i),h.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus")}var i;i={editorFocus:!1,readOnly:1,exec:function(e){(e=CKEDITOR.document.getById(e._.elementsPath.idBase+"0"))&&e.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}};var C='<span class="cke_path_empty">&nbsp;</span>',e="";(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;"');var v=CKEDITOR.addTemplate("pathItem",'<a id="{id}" href="{jsTitle}" tabindex="-1" class="cke_path_item" title="{label}"'+(CKEDITOR.env.gecko&&CKEDITOR.env.version<10900?' onfocus="event.preventBubble();"':"")+e+' hidefocus="true"  onkeydown="return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick="CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role="button" aria-label="{label}">{text}</a>');CKEDITOR.plugins.add("elementspath",{init:function(t){t._.elementsPath={idBase:"cke_elementspath_"+CKEDITOR.tools.getNextNumber()+"_",filters:[]},t.on("uiSpace",function(e){"bottom"==e.data.space&&n(t,e.data)})}})}(),function(){function t(e,t,n){n=e.config.forceEnterMode||n,"wysiwyg"==e.mode&&(t||(t=e.activeEnterMode),e.elementPath().isContextFor("p")||(t=CKEDITOR.ENTER_BR,n=1),e.fire("saveSnapshot"),t==CKEDITOR.ENTER_BR?E(e,t,null,n):l(e,t,null,n),e.fire("saveSnapshot"))}function m(e){for(var t=(e=e.getSelection().getRanges(!0)).length-1;0<t;t--)e[t].deleteContents();return e[0]}CKEDITOR.plugins.add("enterkey",{init:function(e){e.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(e){t(e)}}),e.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(e){t(e,e.activeShiftEnterMode,1)}}),e.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var p=CKEDITOR.dom.walker.whitespaces(),g=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(e,t,n,i){if(n=n||m(e)){var o,r=n.document,s=n.checkStartOfBlock(),a=n.checkEndOfBlock(),l=e.elementPath(n.startContainer).block,c=t==CKEDITOR.ENTER_DIV?"div":"p";if(s&&a){if(l&&(l.is("li")||l.getParent().is("li"))){o=(n=l.getParent()).getParent();i=!l.hasPrevious();var d=!l.hasNext(),u=(c=e.getSelection()).createBookmarks(),h=(s=l.getDirection(1),a=l.getAttribute("class"),l.getAttribute("style")),f=o.getDirection(1)!=s;e=e.enterMode!=CKEDITOR.ENTER_BR||f||h||a;if(o.is("li"))i||d?l[i?"insertBefore":"insertAfter"](o):l.breakParent(o);else{if(e)o=r.createElement(t==CKEDITOR.ENTER_P?"p":"div"),f&&o.setAttribute("dir",s),h&&o.setAttribute("style",h),a&&o.setAttribute("class",a),l.moveChildren(o),i||d?o[i?"insertBefore":"insertAfter"](n):(l.breakParent(n),o.insertAfter(n));else if(l.appendBogus(!0),i||d)for(;r=l[i?"getFirst":"getLast"]();)r[i?"insertBefore":"insertAfter"](n);else for(l.breakParent(n);r=l.getLast();)r.insertAfter(n);l.remove()}return void c.selectBookmarks(u)}if(l&&l.getParent().is("blockquote"))return l.breakParent(l.getParent()),l.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||l.getPrevious().remove(),l.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||l.getNext().remove(),n.moveToElementEditStart(l),void n.select()}else if(l&&l.is("pre")&&!a)return void E(e,t,n,i);if(a=n.splitBlock(c)){if(t=a.previousBlock,l=a.nextBlock,e=a.wasStartOfBlock,s=a.wasEndOfBlock,l?(u=l.getParent()).is("li")&&(l.breakParent(u),l.move(l.getNext(),1)):t&&(u=t.getParent())&&u.is("li")&&(t.breakParent(u),u=t.getNext(),n.moveToElementEditStart(u),t.move(t.getPrevious())),e||s){if(t?(t.is("li")||!T.test(t.getName())&&!t.is("pre"))&&(o=t.clone()):l&&(o=l.clone()),o?i&&!o.is("li")&&o.renameNode(c):u&&u.is("li")?o=u:(o=r.createElement(c),t&&(d=t.getDirection())&&o.setAttribute("dir",d)),r=a.elementPath)for(i=0,c=r.elements.length;i<c&&(!(u=r.elements[i]).equals(r.block)&&!u.equals(r.blockLimit));i++)CKEDITOR.dtd.$removeEmpty[u.getName()]&&(u=u.clone(),o.moveChildren(u),o.append(u));o.appendBogus(),o.getParent()||n.insertNode(o),o.is("li")&&o.removeAttribute("value"),!CKEDITOR.env.ie||!e||s&&t.getChildCount()||(n.moveToElementEditStart(s?t:o),n.select()),n.moveToElementEditStart(e&&!s?l:o)}else l.is("li")&&((o=n.clone()).selectNodeContents(l),(o=new CKEDITOR.dom.walker(o)).evaluator=function(e){return!(g(e)||p(e)||e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in CKEDITOR.dtd.$inline&&!(e.getName()in CKEDITOR.dtd.$empty))},(u=o.next())&&u.type==CKEDITOR.NODE_ELEMENT&&u.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?r.createElement("br"):r.createText("\xa0")).insertBefore(u)),l&&n.moveToElementEditStart(l);n.select(),n.scrollIntoView()}}},enterBr:function(e,t,n,i){if(n=n||m(e)){var o=n.document,r=n.checkEndOfBlock(),s=(a=new CKEDITOR.dom.elementPath(e.getSelection().getStartElement())).block,a=s&&a.block.getName();i||"li"!=a?(!i&&r&&T.test(a)?(r=s.getDirection())?((o=o.createElement("div")).setAttribute("dir",r),o.insertAfter(s),n.setStart(o,0)):(o.createElement("br").insertAfter(s),CKEDITOR.env.gecko&&o.createText("").insertAfter(s),n.setStartAt(s.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(s="pre"==a&&CKEDITOR.env.ie&&CKEDITOR.env.version<8?o.createText("\r"):o.createElement("br"),n.deleteContents(),n.insertNode(s),CKEDITOR.env.needsBrFiller?(o.createText("\ufeff").insertAfter(s),r&&s.getParent().appendBogus(),s.getNext().$.nodeValue="",n.setStartAt(s.getNext(),CKEDITOR.POSITION_AFTER_START)):n.setStartAt(s,CKEDITOR.POSITION_AFTER_END)),n.collapse(!0),n.select(),n.scrollIntoView()):l(e,t,n,i)}}};var e=CKEDITOR.plugins.enterkey,E=e.enterBr,l=e.enterBlock,T=/^h[1-6]$/}(),function(){function c(e,i){var o={},r=[],s={nbsp:"\xa0",shy:"\xad",gt:">",lt:"<",amp:"&",apos:"'",quot:'"'};e=e.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(e,t){var n=i?"&"+t+";":s[t];return o[n]=i?s[t]:"&"+t+";",r.push(n),""});if(!i&&e){e=e.split(",");var t,n=document.createElement("div");for(n.innerHTML="&"+e.join(";&")+";",t=n.innerHTML,n=null,n=0;n<t.length;n++){var a=t.charAt(n);o[a]="&"+e[n]+";",r.push(a)}}return o.regex=r.join(i?"|":""),o}CKEDITOR.plugins.add("entities",{afterInit:function(e){var t=e.config;if(e=(e=e.dataProcessor)&&e.htmlFilter){var n=[];!1!==t.basicEntities&&n.push("nbsp,gt,lt,amp"),t.entities&&(n.length&&n.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),t.entities_latin&&n.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),t.entities_greek&&n.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),t.entities_additional&&n.push(t.entities_additional));var i=c(n.join(",")),o=i.regex?"["+i.regex+"]":"a^";delete i.regex,t.entities&&t.entities_processNumerical&&(o="[^ -~]|"+o);o=RegExp(o,"g");var r=function(e){return"force"!=t.entities_processNumerical&&i[e]?i[e]:"&#"+e.charCodeAt(0)+";"},s=c("nbsp,gt,lt,amp,shy",!0),a=RegExp(s.regex,"g"),l=function(e){return s[e]};e.addRules({text:function(e){return e.replace(a,l).replace(o,r)}},{applyToAll:!0,excludeNestedEditable:!0})}}})}(),CKEDITOR.config.basicEntities=!0,CKEDITOR.config.entities=!0,CKEDITOR.config.entities_latin=!0,CKEDITOR.config.entities_greek=!0,CKEDITOR.config.entities_additional="#39",CKEDITOR.plugins.add("popup"),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(e,t,n,i){n=n||"70%","string"==typeof(t=t||"80%")&&1<t.length&&"%"==t.substr(t.length-1,1)&&(t=parseInt(window.screen.width*parseInt(t,10)/100,10)),"string"==typeof n&&1<n.length&&"%"==n.substr(n.length-1,1)&&(n=parseInt(window.screen.height*parseInt(n,10)/100,10)),t<640&&(t=640),n<420&&(n=420);var o=parseInt((window.screen.height-n)/2,10),r=parseInt((window.screen.width-t)/2,10),s=(i=(i||"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes")+",width="+t+",height="+n+",top="+o+",left="+r,window.open("",null,i,!0));if(!s)return!1;try{-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(s.moveTo(r,o),s.resizeTo(t,n)),s.focus(),s.location.href=e}catch(a){window.open(e,null,i,!0)}return!0}}),function(){function o(e,t){var n=[];if(!t)return e;for(var i in t)n.push(i+"="+encodeURIComponent(t[i]));return e+(-1!=e.indexOf("?")?"&":"?")+n.join("&")}function l(e){return(e+="").charAt(0).toUpperCase()+e.substr(1)}function c(){var e=(n=this.getDialog()).getParentEditor();e._.filebrowserSe=this;var t=e.config["filebrowser"+l(n.getName())+"WindowWidth"]||e.config.filebrowserWindowWidth||"80%",n=e.config["filebrowser"+l(n.getName())+"WindowHeight"]||e.config.filebrowserWindowHeight||"70%",i=this.filebrowser.params||{};i.CKEditor=e.name,i.CKEditorFuncNum=e._.filebrowserFn,i.langCode||(i.langCode=e.langCode),i=o(this.filebrowser.url,i),e.popup(i,t,n,e.config.filebrowserWindowFeatures||e.config.fileBrowserWindowFeatures)}function d(){var e=this.getDialog();return e.getParentEditor()._.filebrowserSe=this,!(!e.getContentElement(this["for"][0],this["for"][1]).getInputElement().$.value||!e.getContentElement(this["for"][0],this["for"][1]).getAction())}function u(e,t,n){var i=n.params||{};i.CKEditor=e.name,i.CKEditorFuncNum=e._.filebrowserFn,i.langCode||(i.langCode=e.langCode),t.action=o(n.url,i),t.filebrowser=n}function h(e,t,n,i){if(i&&i.length)for(var o,r=i.length;r--;)if(("hbox"==(o=i[r]).type||"vbox"==o.type||"fieldset"==o.type)&&h(e,t,n,o.children),o.filebrowser)if("string"==typeof o.filebrowser&&(o.filebrowser={action:"fileButton"==o.type?"QuickUpload":"Browse",target:o.filebrowser}),"Browse"==o.filebrowser.action){var s=o.filebrowser.url;void 0===s&&(void 0===(s=e.config["filebrowser"+l(t)+"BrowseUrl"])&&(s=e.config.filebrowserBrowseUrl)),s&&(o.onClick=c,o.filebrowser.url=s,o.hidden=!1)}else if("QuickUpload"==o.filebrowser.action&&o["for"]&&(void 0===(s=o.filebrowser.url)&&(void 0===(s=e.config["filebrowser"+l(t)+"UploadUrl"])&&(s=e.config.filebrowserUploadUrl)),s)){var a=o.onClick;o.onClick=function(e){var t=e.sender;return(!a||!1!==a.call(t,e))&&d.call(t,e)},o.filebrowser.url=s,o.hidden=!1,u(e,n.getContents(o["for"][0]).get(o["for"][1]),o.filebrowser)}}function r(e,t,n){if(-1===n.indexOf(";"))return(e=e.getContents(t).get(n).filebrowser)&&e.url;n=n.split(";");for(var i=0;i<n.length;i++)if(r(e,t,n[i]))return!0;return!1}function t(e,t){var n=this._.filebrowserSe.getDialog(),i=this._.filebrowserSe["for"],o=this._.filebrowserSe.filebrowser.onSelect;i&&n.getContentElement(i[0],i[1]).reset(),"function"==typeof t&&!1===t.call(this._.filebrowserSe)||o&&!1===o.call(this._.filebrowserSe,e,t)||("string"==typeof t&&t&&alert(t),!(e&&(n=(i=this._.filebrowserSe).getDialog(),i=i.filebrowser.target||null)))||(i=i.split(":"),(o=n.getContentElement(i[0],i[1]))&&(o.setValue(e),n.selectPage(i[0])))}CKEDITOR.plugins.add("filebrowser",{requires:"popup",init:function(e){e._.filebrowserFn=CKEDITOR.tools.addFunction(t,e),e.on("destroy",function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn)})}}),CKEDITOR.on("dialogDefinition",function(e){if(e.editor.plugins.filebrowser)for(var t,n=e.data.definition,i=0;i<n.contents.length;++i)(t=n.contents[i])&&(h(e.editor,e.data.name,n,t.elements),t.hidden&&t.filebrowser&&(t.hidden=!r(n,t.id,t.filebrowser)))})}(),function(){function t(p){var e=p.config,t=p.fire("uiSpace",{space:"top",html:""}).html,g=function(){function n(e,t,n){E.setStyle(t,C(n)),E.setStyle("position",e)}function i(e){var t=r.getDocumentPosition();switch(e){case"top":n("absolute","top",t.y-c-h);break;case"pin":n("fixed","top",m);break;case"bottom":n("absolute","top",t.y+(a.height||a.bottom-a.top)+h)}o=e}var o,r,s,a,l,c,d,u=e.floatSpaceDockedOffsetX||0,h=e.floatSpaceDockedOffsetY||0,f=e.floatSpacePinnedOffsetX||0,m=e.floatSpacePinnedOffsetY||0;return function(e){if(r=p.editable())if(e&&"focus"==e.name&&E.show(),E.removeStyle("left"),E.removeStyle("right"),s=E.getClientRect(),a=r.getClientRect(),l=T.getViewPaneSize(),c=s.height,d="pageXOffset"in T.$?T.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft,o){c+h<=a.top?i("top"):c+h>l.height-a.bottom?i("pin"):i("bottom");var t;e=l.width/2,e=0<a.left&&a.right<l.width&&a.width>s.width?"rtl"==p.config.contentsLangDirection?"right":"left":e-a.left>a.right-e?"left":"right";s.width>l.width?(e="left",t=0):(t="left"==e?0<a.left?a.left:0:a.right<l.width?l.width-a.right:0)+s.width>l.width&&(e="left"==e?"right":"left",t=0),E.setStyle(e,C(("pin"==o?f:u)+t+("pin"==o?0:"left"==e?d:-d)))}else i(o="pin"),g(e)}}();if(t){var E=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(o.output({content:t,id:p.id,langDir:p.lang.dir,langCode:p.langCode,name:p.name,style:"display:none;z-index:"+(e.baseFloatZIndex-1),topId:p.ui.spaceId("top"),voiceLabel:p.lang.editorPanel+", "+p.name}))),n=CKEDITOR.tools.eventsBuffer(500,g),i=CKEDITOR.tools.eventsBuffer(100,g);E.unselectable(),E.on("mousedown",function(e){(e=e.data).getTarget().hasAscendant("a",1)||e.preventDefault()}),p.on("focus",function(e){g(e),p.on("change",n.input),T.on("scroll",i.input),T.on("resize",i.input)}),p.on("blur",function(){E.hide(),p.removeListener("change",n.input),T.removeListener("scroll",i.input),T.removeListener("resize",i.input)}),p.on("destroy",function(){T.removeListener("scroll",i.input),T.removeListener("resize",i.input),E.clearCustomData(),E.remove()}),p.focusManager.hasFocus&&E.show(),p.focusManager.add(E,1)}}var o=CKEDITOR.addTemplate("floatcontainer",'<div id="cke_{name}" class="cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir="{langDir}" title="'+(CKEDITOR.env.gecko?" ":"")+'" lang="{langCode}" role="application" style="{style}" aria-labelledby="cke_{name}_arialbl"><span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span><div class="cke_inner"><div id="{topId}" class="cke_top" role="presentation">{content}</div></div></div>'),T=CKEDITOR.document.getWindow(),C=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(e){e.on("loaded",function(){t(this)},null,null,20)}})}(),CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var t=CKEDITOR.addTemplate("panel-list",'<ul role="presentation" class="cke_panel_list">{items}</ul>'),o=CKEDITOR.addTemplate("panel-list-item",'<li id="{id}" class="cke_panel_listItem" role=presentation><a id="{id}_option" _cke_focus=1 hidefocus=true title="{title}" href="javascript:void(\'{val}\')"  {onclick}="CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role="option">{text}</a></li>'),n=CKEDITOR.addTemplate("panel-list-group",'<h1 id="{id}" class="cke_panel_grouptitle" role="presentation" >{label}</h1>'),r=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(e,t){return this.addBlock(e,new CKEDITOR.ui.listBlock(this.getHolderElement(),t))},CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(e,t){var n=(t=t||{}).attributes||(t.attributes={});(this.multiSelect=!!t.multiSelect)&&(n["aria-multiselectable"]=!0),!n.role&&(n.role="listbox"),this.base.apply(this,arguments),this.element.setAttribute("role",n.role),(n=this.keys)[40]="next",n[9]="next",n[38]="prev",n[CKEDITOR.SHIFT+9]="prev",n[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(n[13]="mouseup"),this._.pendingHtml=[],this._.pendingList=[],this._.items={},this._.groups={}},_:{close:function(){if(this._.started){var e=t.output({items:this._.pendingList.join("")});this._.pendingList=[],this._.pendingHtml.push(e),delete this._.started}},getClick:function(){return this._.click||(this._.click=CKEDITOR.tools.addFunction(function(e){var t=this.toggle(e);this.onClick&&this.onClick(e,t)},this)),this._.click}},proto:{add:function(e,t,n){var i=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0),e={id:this._.items[e]=i,val:CKEDITOR.tools.htmlEncodeAttr(e).replace(r,"\\'"),onclick:CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(n||e),text:t||e},this._.pendingList.push(o.output(e))},startGroup:function(e){this._.close();var t=CKEDITOR.tools.getNextId();this._.groups[e]=t,this._.pendingHtml.push(n.output({id:t,label:e}))},commit:function(){this._.close(),this.element.appendHtml(this._.pendingHtml.join("")),delete this._.size,this._.pendingHtml=[]},toggle:function(e){var t=this.isMarked(e);return t?this.unmark(e):this.mark(e),!t},hideGroup:function(e){var t=(e=this.element.getDocument().getById(this._.groups[e]))&&e.getNext();e&&(e.setStyle("display","none"),t&&"ul"==t.getName()&&t.setStyle("display","none"))},hideItem:function(e){this.element.getDocument().getById(this._.items[e]).setStyle("display","none")},showAll:function(){var e,t=this._.items,n=this._.groups,i=this.element.getDocument();for(e in t)i.getById(t[e]).setStyle("display","");for(var o in n)e=(t=i.getById(n[o])).getNext(),t.setStyle("display",""),e&&"ul"==e.getName()&&e.setStyle("display","")},mark:function(e){this.multiSelect||this.unmarkAll();e=this._.items[e];var t=this.element.getDocument().getById(e);t.addClass("cke_selected"),this.element.getDocument().getById(e+"_option").setAttribute("aria-selected",!0),this.onMark&&this.onMark(t)},unmark:function(e){var t=this.element.getDocument(),n=(e=this._.items[e],t.getById(e));n.removeClass("cke_selected"),t.getById(e+"_option").removeAttribute("aria-selected"),this.onUnmark&&this.onUnmark(n)},unmarkAll:function(){var e,t=this._.items,n=this.element.getDocument();for(e in t){var i=t[e];n.getById(i).removeClass("cke_selected"),n.getById(i+"_option").removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(e){return this.element.getDocument().getById(this._.items[e]).hasClass("cke_selected")},focus:function(e){this._.focusIndex=-1;var t,n=this.element.getElementsByTag("a"),i=-1;if(e){for(t=this.element.getDocument().getById(this._.items[e]).getFirst();e=n.getItem(++i);)if(e.equals(t)){this._.focusIndex=i;break}}else this.element.focus();t&&setTimeout(function(){t.focus()},0)}}})}}),CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}}),function(){var e='<span id="{id}" class="cke_combo cke_combo__{name} {cls}" role="presentation"><span id="{id}_label" class="cke_combo_label">{label}</span><a class="cke_combo_button" hidefocus=true title="{title}" tabindex="-1"'+(CKEDITOR.env.gecko&&10900<=CKEDITOR.env.version&&!CKEDITOR.env.hc?"":'" href="javascript:void(\'{titleJs}\')"')+' hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="true"';(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;"');e=e+' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event,this);" onmousedown="return CKEDITOR.tools.callFunction({mousedownFn},event);"  onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span id="{id}_text" class="cke_combo_text cke_combo_inlinelabel">{label}</span><span class="cke_combo_open"><span class="cke_combo_arrow">'+(CKEDITOR.env.hc?"&#9660;":CKEDITOR.env.air?"&nbsp;":"")+"</span></span></a></span>";var h=CKEDITOR.addTemplate("combo",e);CKEDITOR.UI_RICHCOMBO="richcombo",CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(e){CKEDITOR.tools.extend(this,e,{canGroup:!1,title:e.label,modes:{wysiwyg:1},editorFocus:1}),e=this.panel||{},delete this.panel,this.id=CKEDITOR.tools.getNextNumber(),this.document=e.parent&&e.parent.getDocument()||CKEDITOR.document,e.className="cke_combopanel",e.block={multiSelect:e.multiSelect,attributes:e.attributes},e.toolbarRelated=!0,this._={panelDefinition:e,items:{}}},proto:{renderHtml:function(e){var t=[];return this.render(e,t),t.join("")},render:function(i,e){function t(){var e=this.modes[i.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;i.readOnly&&!this.readOnly&&(e=CKEDITOR.TRISTATE_DISABLED),this.setState(e),this.setValue(""),e!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}var n=CKEDITOR.env,o="cke_"+this.id,r=CKEDITOR.tools.addFunction(function(e){d&&(i.unlockSelection(1),d=0),a.execute(e)},this),s=this,a={id:o,combo:this,focus:function(){CKEDITOR.document.getById(o).getChild(1).focus()},execute:function(e){var t=s._;if(t.state!=CKEDITOR.TRISTATE_DISABLED)if(s.createPanel(i),t.on)t.panel.hide();else{s.commit();var n=s.getValue();n?t.list.mark(n):t.list.unmarkAll(),t.panel.showBlock(s.id,new CKEDITOR.dom.element(e),4)}},clickFn:r};i.on("activeFilterChange",t,this),i.on("mode",t,this),!this.readOnly&&i.on("readOnly",t,this);var l=CKEDITOR.tools.addFunction(function(e,t){var n=(e=new CKEDITOR.dom.event(e)).getKeystroke();switch(40==n&&i.once("panelShow",function(e){e.data._.panel._.currentBlock.onKeyDown(40)}),n){case 13:case 32:case 40:CKEDITOR.tools.callFunction(r,t);break;default:a.onkey(a,n)}e.preventDefault()}),c=CKEDITOR.tools.addFunction(function(){a.onfocus&&a.onfocus()}),d=0,u=CKEDITOR.tools.addFunction(function(){if(CKEDITOR.env.opera){var e=i.editable();e.isInline()&&e.hasFocus&&(i.lockSelection(),d=1)}});return a.keyDownFn=l,n={id:o,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:n.gecko&&10900<=n.version&&!n.hc?"":(this.title||"").replace("'",""),keydownFn:l,mousedownFn:u,focusFn:c,clickFn:r},h.output(n,e),this.onRender&&this.onRender(),a},createPanel:function(t){if(!this._.panel){var e=this._.panelDefinition,
n=this._.panelDefinition.block,i=e.parent||CKEDITOR.document.getBody(),o="cke_combopanel__"+this.name,r=new CKEDITOR.ui.floatPanel(t,i,e),s=r.addListBlock(this.id,n),a=this;r.onShow=function(){this.element.addClass(o),a.setState(CKEDITOR.TRISTATE_ON),a._.on=1,a.editorFocus&&!t.focusManager.hasFocus&&t.focus(),a.onOpen&&a.onOpen(),t.once("panelShow",function(){s.focus(!s.multiSelect&&a.getValue())})},r.onHide=function(e){this.element.removeClass(o),a.setState(a.modes&&a.modes[t.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),a._.on=0,!e&&a.onClose&&a.onClose()},r.onEscape=function(){r.hide(1)},s.onClick=function(e,t){a.onClick&&a.onClick.call(a,e,t),r.hide()},this._.panel=r,this._.list=s,r.getBlock(this.id).onHide=function(){a._.on=0,a.setState(CKEDITOR.TRISTATE_OFF)},this.init&&this.init()}},setValue:function(e,t){this._.value=e;var n=this.document.getById("cke_"+this.id+"_text");n&&(e||t?n.removeClass("cke_combo_inlinelabel"):(t=this.label,n.addClass("cke_combo_inlinelabel")),n.setText(void 0!==t?t:e))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(e){this._.list.mark(e)},hideItem:function(e){this._.list.hideItem(e)},hideGroup:function(e){this._.list.hideGroup(e)},showAll:function(){this._.list.showAll()},add:function(e,t,n){this._.items[e]=n||e,this._.list.add(e,t,n)},startGroup:function(e){this._.list.startGroup(e)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this)),this._.committed=1},setState:function(e){if(this._.state!=e){var t=this.document.getById("cke_"+this.id);t.setState(e,"cke_combo"),e==CKEDITOR.TRISTATE_DISABLED?t.setAttribute("aria-disabled",!0):t.removeAttribute("aria-disabled"),this._.state=e}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))}},statics:{handler:{create:function(e){return new CKEDITOR.ui.richCombo(e)}}}}),CKEDITOR.ui.prototype.addRichCombo=function(e,t){this.add(e,CKEDITOR.UI_RICHCOMBO,t)}}(),CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(i){if(!i.blockless){for(var e=i.config,n=i.lang.format,t=e.format_tags.split(";"),o={},r=0,s=[],a=0;a<t.length;a++){var l=t[a],c=new CKEDITOR.style(e["format_"+l]);i.filter.customConfig&&!i.filter.check(c)||(r++,o[l]=c,o[l]._.enterMode=i.config.enterMode,s.push(c))}0!==r&&i.ui.addRichCombo("Format",{label:n.label,title:n.panelTitle,toolbar:"styles,20",allowedContent:s,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(e.contentsCss),multiSelect:!1,attributes:{"aria-label":n.panelTitle}},init:function(){for(var e in this.startGroup(n.panelTitle),o){var t=n["tag_"+e];this.add(e,o[e].buildPreview(t),t)}},onClick:function(e){i.focus(),i.fire("saveSnapshot");e=o[e];var t=i.elementPath();i[e.checkActive(t)?"removeStyle":"applyStyle"](e),setTimeout(function(){i.fire("saveSnapshot")},0)},onRender:function(){i.on("selectionChange",function(e){var t=this.getValue();e=e.data.path;for(var n in this.refresh(),o)if(o[n].checkActive(e))return void(n!=t&&this.setValue(n,i.lang.format["tag_"+n]));this.setValue("")},this)},onOpen:function(){for(var e in this.showAll(),o)i.activeFilter.check(o[e])||this.hideItem(e)},refresh:function(){var e=i.elementPath();if(e){if(e.isContextFor("p"))for(var t in o)if(i.activeFilter.check(o[t]))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}}),CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div",CKEDITOR.config.format_p={element:"p"},CKEDITOR.config.format_div={element:"div"},CKEDITOR.config.format_pre={element:"pre"},CKEDITOR.config.format_address={element:"address"},CKEDITOR.config.format_h1={element:"h1"},CKEDITOR.config.format_h2={element:"h2"},CKEDITOR.config.format_h3={element:"h3"},CKEDITOR.config.format_h4={element:"h4"},CKEDITOR.config.format_h5={element:"h5"},CKEDITOR.config.format_h6={element:"h6"},q={canUndo:!1,exec:function(e){var t=e.document.createElement("hr");e.insertElement(t)},allowedContent:"hr",requiredContent:"hr"},CKEDITOR.plugins.add("horizontalrule",{init:function(e){e.blockless||(e.addCommand("horizontalrule",q),e.ui.addButton&&e.ui.addButton("HorizontalRule",{label:e.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}}),CKEDITOR.plugins.add("htmlwriter",{init:function(e){var t=new CKEDITOR.htmlWriter;t.forceSimpleAmpersand=e.config.forceSimpleAmpersand,t.indentationChars=e.config.dataIndentationChars||"\t",e.dataProcessor.writer=t}}),CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base(),this.indentationChars="\t",this.selfClosingEnd=" />",this.lineBreakChars="\n",this.sortAttributes=1,this._.indent=0,this._.indentation="",this._.inPre=0,this._.rules={};var e,t=CKEDITOR.dtd;for(e in CKEDITOR.tools.extend({},t.$nonBodyContent,t.$block,t.$listItem,t.$tableContent))this.setRules(e,{indent:!t[e]["#"],breakBeforeOpen:1,breakBeforeClose:!t[e]["#"],breakAfterClose:1,needsSpace:e in t.$block&&!(e in{li:1,dt:1,dd:1})});this.setRules("br",{breakAfterOpen:1}),this.setRules("title",{indent:0,breakAfterOpen:0}),this.setRules("style",{indent:0,breakBeforeClose:1}),this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(e){var t=this._.rules[e];this._.afterCloser&&t&&t.needsSpace&&this._.needsSpace&&this._.output.push("\n"),this._.indent?this.indentation():t&&t.breakBeforeOpen&&(this.lineBreak(),this.indentation()),this._.output.push("<",e),this._.afterCloser=0},openTagClose:function(e,t){var n=this._.rules[e];t?(this._.output.push(this.selfClosingEnd),n&&n.breakAfterClose&&(this._.needsSpace=n.needsSpace)):(this._.output.push(">"),n&&n.indent&&(this._.indentation+=this.indentationChars)),n&&n.breakAfterOpen&&this.lineBreak(),"pre"==e&&(this._.inPre=1)},attribute:function(e,t){"string"==typeof t&&(this.forceSimpleAmpersand&&(t=t.replace(/&amp;/g,"&")),t=CKEDITOR.tools.htmlEncodeAttr(t)),this._.output.push(" ",e,'="',t,'"')},closeTag:function(e){var t=this._.rules[e];t&&t.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length)),this._.indent?this.indentation():t&&t.breakBeforeClose&&(this.lineBreak(),this.indentation()),this._.output.push("</",e,">"),"pre"==e&&(this._.inPre=0),t&&t.breakAfterClose&&(this.lineBreak(),this._.needsSpace=t.needsSpace),this._.afterCloser=1},text:function(e){this._.indent&&(this.indentation(),!this._.inPre&&(e=CKEDITOR.tools.ltrim(e))),this._.output.push(e)},comment:function(e){this._.indent&&this.indentation(),this._.output.push("<!--",e,"-->")},lineBreak:function(){!this._.inPre&&0<this._.output.length&&this._.output.push(this.lineBreakChars),this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation),this._.indent=0},reset:function(){this._.output=[],this._.indent=0,this._.indentation="",this._.afterCloser=0,this._.inPre=0},setRules:function(e,t){var n=this._.rules[e];n?CKEDITOR.tools.extend(n,t,!0):this._.rules[e]=t}}}),function(){function t(e){var i=this.editor,o=e.document,t=o.body;(e=o.getElementById("cke_actscrpt"))&&e.parentNode.removeChild(e),(e=o.getElementById("cke_shimscrpt"))&&e.parentNode.removeChild(e),CKEDITOR.env.gecko&&(t.contentEditable=!1,CKEDITOR.env.version<2e4&&(t.innerHTML=t.innerHTML.replace(/^.*<\!-- cke-content-start --\>/,""),setTimeout(function(){var e=new CKEDITOR.dom.range(new CKEDITOR.dom.document(o));e.setStart(new CKEDITOR.dom.node(t),0),i.getSelection().selectRanges([e])},0))),t.contentEditable=!0,CKEDITOR.env.ie&&(t.hideFocus=!0,t.disabled=!0,t.removeAttribute("disabled")),delete this._.isLoadingData,this.$=t,o=new CKEDITOR.dom.document(o),this.setup(),CKEDITOR.env.ie&&(o.getDocumentElement().addClass(o.$.compatMode),i.config.enterMode!=CKEDITOR.ENTER_P&&this.attachListener(o,"selectionchange",function(){var e=o.getBody(),t=i.getSelection(),n=t&&t.getRanges()[0];n&&e.getHtml().match(/^<p>(?:&nbsp;|<br>)<\/p>$/i)&&n.startContainer.equals(e)&&setTimeout(function(){(n=i.getSelection().getRanges()[0]).startContainer.equals("body")||(e.getFirst().remove(1),n.moveToElementEditEnd(e),n.select())},0)})),(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version)&&o.getDocumentElement().on("mousedown",function(e){e.data.getTarget().is("html")&&setTimeout(function(){i.editable().focus()})});try{i.document.$.execCommand("2D-position",!1,!0)}catch(n){}try{i.document.$.execCommand("enableInlineTableEditing",!1,!i.config.disableNativeTableHandles)}catch(r){}if(i.config.disableObjectResizing)try{this.getDocument().$.execCommand("enableObjectResizing",!1,!1)}catch(s){this.attachListener(this,CKEDITOR.env.ie?"resizestart":"resize",function(e){e.data.preventDefault()})}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==i.document.$.compatMode)&&this.attachListener(this,"keydown",function(e){var t=e.data.getKeystroke();if(33==t||34==t)if(CKEDITOR.env.ie)setTimeout(function(){i.getSelection().scrollIntoView()},0);else if(i.window.$.innerHeight>this.$.offsetHeight){var n=i.createRange();n[33==t?"moveToElementEditStart":"moveToElementEditEnd"](this),n.select(),e.data.preventDefault()}}),CKEDITOR.env.ie&&this.attachListener(o,"blur",function(){try{o.$.selection.empty()}catch(e){}}),i.document.getElementsByTag("title").getItem(0).data("cke-title",i.document.$.title),CKEDITOR.env.ie&&(i.document.$.title=this._.docTitle),CKEDITOR.tools.setTimeout(function(){i.fire("contentDom"),this._.isPendingFocus&&(i.focus(),this._.isPendingFocus=!1),setTimeout(function(){i.fire("dataReady")},0),CKEDITOR.env.ie&&setTimeout(function(){if(i.document){var e=i.document.$.body;e.runtimeStyle.marginBottom="0px",e.runtimeStyle.marginBottom=""}},1e3)},0,this)}function c(){var e=[];if(8<=CKEDITOR.document.$.documentMode){e.push("html.CSS1Compat [contenteditable=false]{min-height:0 !important}");var t,n=[];for(t in CKEDITOR.dtd.$removeEmpty)n.push("html.CSS1Compat "+t+"[contenteditable=false]");e.push(n.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&(e.push("html{height:100% !important}"),e.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));return e.push("html{cursor:text;*cursor:auto}"),e.push("img,input,textarea{cursor:default}"),e.join("\n")}CKEDITOR.plugins.add("wysiwygarea",{init:function(l){l.config.fullPage&&l.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"}),l.addMode("wysiwyg",function(t){function e(e){e&&e.removeListener(),l.editable(new d(l,i.$.contentWindow.document.body)),l.setData(l.getData(1),t)}var n="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",i=(n=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent(n)+"}())":"",CKEDITOR.dom.element.createFromHtml('<iframe src="'+n+'" frameBorder="0"></iframe>'));i.setStyles({width:"100%",height:"100%"}),i.addClass("cke_wysiwyg_frame cke_reset");var o=l.ui.space("contents");o.append(i),(n=CKEDITOR.env.ie||CKEDITOR.env.gecko)&&i.on("load",e);var r=l.title,s=l.lang.common.editorHelp;r&&(CKEDITOR.env.ie&&(r+=", "+s),i.setAttribute("title",r));r=CKEDITOR.tools.getNextId();var a=CKEDITOR.dom.element.createFromHtml('<span id="'+r+'" class="cke_voice_label">'+s+"</span>");o.append(a,1),l.on("beforeModeUnload",function(e){e.removeListener(),a.remove()}),i.setAttributes({"aria-describedby":r,tabIndex:l.tabIndex,allowTransparency:"true"}),!n&&e(),CKEDITOR.env.webkit&&(n=function(){o.setStyle("width","100%"),i.hide(),i.setSize("width",o.getSize("width")),o.removeStyle("width"),i.show()},i.setCustomData("onResize",n),CKEDITOR.document.getWindow().on("resize",n)),l.fire("ariaWidget",i)})}});var d=CKEDITOR.tools.createClass({$:function(e){this.base.apply(this,arguments),this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(e){CKEDITOR.tools.setTimeout(t,0,this,e)},this),this._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(e,t){var n=this.editor;if(t)this.setHtml(e),n.fire("dataReady");else{this._.isLoadingData=!0,n._.dataStore={id:1};var i=n.config,o=i.fullPage,r=i.docType,s=CKEDITOR.tools.buildStyleHtml(c()).replace(/<style>/,'<style data-cke-temp="1">');o||(s+=CKEDITOR.tools.buildStyleHtml(n.config.contentsCss));var a=i.baseHref?'<base href="'+i.baseHref+'" data-cke-temp="1" />':"";o&&(e=e.replace(/<!DOCTYPE[^>]*>/i,function(e){return n.docType=r=e,""}).replace(/<\?xml\s[^\?]*\?>/i,function(e){return n.xmlDeclaration=e,""})),e=n.dataProcessor.toHtml(e),e=o?(/<body[\s|>]/.test(e)||(e="<body>"+e),/<html[\s|>]/.test(e)||(e="<html>"+e+"</html>"),/<head[\s|>]/.test(e)?/<title[\s|>]/.test(e)||(e=e.replace(/<head[^>]*>/,"$&<title></title>")):e=e.replace(/<html[^>]*>/,"$&<head><title></title></head>"),a&&(e=e.replace(/<head>/,"$&"+a)),e=e.replace(/<\/head\s*>/,s+"$&"),r+e):i.docType+'<html dir="'+i.contentsLangDirection+'" lang="'+(i.contentsLanguage||n.langCode)+'"><head><title>'+this._.docTitle+"</title>"+a+s+"</head><body"+(i.bodyId?' id="'+i.bodyId+'"':"")+(i.bodyClass?' class="'+i.bodyClass+'"':"")+">"+e+"</body></html>",CKEDITOR.env.gecko&&(e=e.replace(/<body/,'<body contenteditable="true" '),CKEDITOR.env.version<2e4&&(e=e.replace(/<body[^>]*>/,"$&<!-- cke-content-start -->"))),i='<script id="cke_actscrpt" type="text/javascript"'+(CKEDITOR.env.ie?' defer="defer" ':"")+">var wasLoaded=0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded=1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"</script>",CKEDITOR.env.ie&&CKEDITOR.env.version<9&&(i+='<script id="cke_shimscrpt">window.parent.CKEDITOR.tools.enableHtml5Elements(document)</script>'),e=e.replace(/(?=\s*<\/(:?head)>)/,i),this.clearCustomData(),this.clearListeners(),n.fire("contentDomUnload");var l=this.getDocument();try{l.write(e)}catch(d){setTimeout(function(){l.write(e)},0)}}},getData:function(e){if(e)return this.getHtml();var t=(e=this.editor).config,n=(r=t.fullPage)&&e.docType,i=r&&e.xmlDeclaration,o=this.getDocument(),r=r?o.getDocumentElement().getOuterHtml():o.getBody().getHtml();return CKEDITOR.env.gecko&&t.enterMode!=CKEDITOR.ENTER_BR&&(r=r.replace(/<br>(?=\s*(:?$|<\/body>))/,"")),r=e.dataProcessor.toDataFormat(r),i&&(r=i+"\n"+r),n&&(r=n+"\n"+r),r},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:d.baseProto.focus.call(this)},detach:function(){var e=(t=this.editor).document,t=t.window.getFrame();d.baseProto.detach.call(this),this.clearCustomData(),e.getDocumentElement().clearCustomData(),t.clearCustomData(),CKEDITOR.tools.removeFunction(this._.frameLoadedHandler),(e=t.removeCustomData("onResize"))&&e.removeListener(),t.remove()}}})}(),CKEDITOR.config.disableObjectResizing=!1,CKEDITOR.config.disableNativeTableHandles=!0,CKEDITOR.config.disableNativeSpellChecker=!0,CKEDITOR.config.contentsCss=CKEDITOR.getUrl("contents.css"),function(){function o(e,t){if(t||(t=e.getSelection().getSelectedElement()),t&&t.is("img")&&!t.data("cke-realelement")&&!t.isReadOnly())return t}function r(e){var t=e.getStyle("float");return"inherit"!=t&&"none"!=t||(t=0),t||(t=e.getAttribute("align")),t}CKEDITOR.plugins.add("image",{requires:"dialog",init:function(t){if(!t.plugins.image2){CKEDITOR.dialog.add("image",this.path+"dialogs/image.js");var e="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}";CKEDITOR.dialog.isTabEnabled(t,"image","advanced")&&(e="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)"),t.addCommand("image",new CKEDITOR.dialogCommand("image",{allowedContent:e,requiredContent:"img[alt,src]",contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]})),t.ui.addButton&&t.ui.addButton("Image",{label:t.lang.common.image,command:"image",toolbar:"insert,10"}),t.on("doubleclick",function(e){var t=e.data.element;t.is("img")&&!t.data("cke-realelement")&&!t.isReadOnly()&&(e.data.dialog="image")}),t.addMenuItems&&t.addMenuItems({image:{label:t.lang.image.menu,command:"image",group:"image"}}),t.contextMenu&&t.contextMenu.addListener(function(e){if(o(t,e))return{image:CKEDITOR.TRISTATE_OFF}})}},afterInit:function(i){function e(n){var e=i.getCommand("justify"+n);e&&("left"!=n&&"right"!=n||e.on("exec",function(e){var t=o(i);t&&(r(t)==n?(t.removeStyle("float"),n==r(t)&&t.removeAttribute("align")):t.setStyle("float",n),e.cancel())}),e.on("refresh",function(e){var t=o(i);t&&(t=r(t),this.setState(t==n?CKEDITOR.TRISTATE_ON:"right"==n||"left"==n?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),e.cancel())}))}i.plugins.image2||(e("left"),e("right"),e("center"),e("block"))}})}(),CKEDITOR.config.image_removeLinkByEmptyURL=!0,function(){function t(t,e){var n,i;e.on("refresh",function(e){var t,n=[o];for(t in e.data.states)n.push(e.data.states[t]);this.setState(CKEDITOR.tools.search(n,r)?r:o)},e,null,100),e.on("exec",function(e){n=t.getSelection(),i=n.createBookmarks(1),e.data||(e.data={}),e.data.done=!1},e,null,0),e.on("exec",function(){t.forceNextSelectionCheck(),n.selectBookmarks(i)},e,null,100)}var o=CKEDITOR.TRISTATE_DISABLED,r=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(l){var e=CKEDITOR.plugins.indent.genericDefinition;t(l,l.addCommand("indent",new e(!0))),t(l,l.addCommand("outdent",new e)),l.ui.addButton&&(l.ui.addButton("Indent",{label:l.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),l.ui.addButton("Outdent",{label:l.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"})),l.on("dirChanged",function(e){var t=l.createRange(),n=e.data.node;t.setStartBefore(n),t.setEndAfter(n);for(var i,o=new CKEDITOR.dom.walker(t);i=o.next();)if(i.type==CKEDITOR.NODE_ELEMENT)if(!i.equals(n)&&i.getDirection())t.setStartAfter(i),o=new CKEDITOR.dom.walker(t);else{var r=l.config.indentClasses;if(r)for(var s="ltr"==e.data.dir?["_rtl",""]:["","_rtl"],a=0;a<r.length;a++)i.hasClass(r[a]+s[0])&&(i.removeClass(r[a]+s[0]),i.addClass(r[a]+s[1]));r=i.getStyle("margin-right"),s=i.getStyle("margin-left"),r?i.setStyle("margin-left",r):i.removeStyle("margin-left"),s?i.setStyle("margin-right",s):i.removeStyle("margin-right")}})}}),CKEDITOR.plugins.indent={genericDefinition:function(e){this.isIndent=!!e,this.startDisabled=!this.isIndent},specificDefinition:function(e,t,n){this.name=t,this.editor=e,this.jobs={},this.enterBr=e.config.enterMode==CKEDITOR.ENTER_BR,this.isIndent=!!n,this.relatedGlobal=n?"indent":"outdent",this.indentKey=n?9:CKEDITOR.SHIFT+9,this.database={}},registerCommands:function(e,t){e.on("pluginsLoaded",function(){for(var e in t)!function(t,n){var i,e=t.getCommand(n.relatedGlobal);for(i in n.jobs)e.on("exec",function(e){e.data.done||(t.fire("lockSnapshot"),n.execJob(t,i)&&(e.data.done=!0),t.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(n.database))},this,null,i),e.on("refresh",function(e){e.data.states||(e.data.states={}),e.data.states[n.name+"@"+i]=n.refreshJob(t,i,e.data.path)},this,null,i);t.addFeature(n)}(this,t[e])})}},CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}},CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(e,t){var n=this.jobs[t];if(n.state!=o)return n.exec.call(this,e)},refreshJob:function(e,t,n){return(t=this.jobs[t]).state=e.activeFilter.checkFeature(this)?t.refresh.call(this,e,n):o,t.state},getContext:function(e){return e.contains(this.context)}}}(),function(){function o(d){function e(e){for(var t=u.startContainer,n=u.endContainer;t&&!t.getParent().equals(e);)t=t.getParent();for(;n&&!n.getParent().equals(e);)n=n.getParent();if(!t||!n)return!1;for(var i=t,o=(t=[],!1);!o;)i.equals(n)&&(o=!0),t.push(i),i=i.getNext();if(t.length<1)return!1;for(i=e.getParents(!0),n=0;n<i.length;n++)if(i[n].getName&&m[i[n].getName()]){e=i[n];break}i=h.isIndent?1:-1,n=t[0],t=t[t.length-1];var r=(o=CKEDITOR.plugins.list.listToArray(e,f))[t.getCustomData("listarray_index")].indent;for(n=n.getCustomData("listarray_index");n<=t.getCustomData("listarray_index");n++)if(o[n].indent+=i,0<i){var s=o[n].parent;o[n].parent=new CKEDITOR.dom.element(s.getName(),s.getDocument())}for(n=t.getCustomData("listarray_index")+1;n<o.length&&o[n].indent>r;n++)o[n].indent+=i;var a;if((t=CKEDITOR.plugins.list.arrayToList(o,f,null,d.config.enterMode,e.getDirection()),!h.isIndent)&&((a=e.getParent())&&a.is("li"))){var l,c=[];for(n=(i=t.listNode.getChildren()).count()-1;0<=n;n--)(l=i.getItem(n))&&l.is&&l.is("li")&&c.push(l)}if(t&&t.listNode.replace(e),c&&c.length)for(n=0;n<c.length;n++){for(l=e=c[n];(l=l.getNext())&&l.is&&l.getName()in m;)CKEDITOR.env.needsNbspFiller&&!e.getFirst(p)&&e.append(u.document.createText("\xa0")),e.append(l);e.insertAfter(a)}return t&&d.fire("contentDomInvalidated"),!0}for(var u,h=this,f=this.database,m=this.context,t=((t=d.getSelection())&&t.getRanges()).createIterator();u=t.getNextRange();){for(var n=u.getCommonAncestor();n&&(n.type!=CKEDITOR.NODE_ELEMENT||!m[n.getName()]);)n=n.getParent();if(n||(n=u.startPath().contains(m))&&u.setEndAt(n,CKEDITOR.POSITION_BEFORE_END),!n){var i=u.getEnclosedNode();i&&i.type==CKEDITOR.NODE_ELEMENT&&i.getName()in m&&(u.setStartAt(i,CKEDITOR.POSITION_AFTER_START),u.setEndAt(i,CKEDITOR.POSITION_BEFORE_END),n=i)}if(n&&u.startContainer.type==CKEDITOR.NODE_ELEMENT&&u.startContainer.getName()in m&&((i=new CKEDITOR.dom.walker(u)).evaluator=s,u.startContainer=i.next()),n&&u.endContainer.type==CKEDITOR.NODE_ELEMENT&&u.endContainer.getName()in m&&((i=new CKEDITOR.dom.walker(u)).evaluator=s,u.endContainer=i.previous()),n)return e(n)}return 0}function r(e,t){return t||(t=e.contains(this.context)),t&&e.block&&e.block.equals(t.getFirst(s))}function s(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.is("li")}function p(e){return t(e)&&n(e)}var t=CKEDITOR.dom.walker.whitespaces(!0),n=CKEDITOR.dom.walker.bookmark(!1,!0),a=CKEDITOR.TRISTATE_DISABLED,l=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(e){function t(n,e){i.specificDefinition.apply(this,arguments),this.requiredContent=["ul","ol"],n.on("key",function(e){if("wysiwyg"==n.mode&&e.data.keyCode==this.indentKey){var t=this.getContext(n.elementPath());!t||this.isIndent&&r.call(this,n.elementPath(),t)||(n.execCommand(this.relatedGlobal),e.cancel())}},this),this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(e,t){var n=this.getContext(t),i=r.call(this,t,n);return n&&this.isIndent&&!i?l:a}:function(e,t){return!this.getContext(t)||this.isIndent?a:l},exec:CKEDITOR.tools.bind(o,this)}}var i=CKEDITOR.plugins.indent;i.registerCommands(e,{indentlist:new t(e,"indentlist",!0),outdentlist:new t(e,"outdentlist")}),CKEDITOR.tools.extend(t.prototype,i.specificDefinition.prototype,{context:{ol:1,ul:1}})}})}(),function(){function o(e,t){var n=r.exec(e),i=r.exec(t);if(n){if(!n[2]&&"px"==i[2])return i[1];if("px"==n[2]&&!i[2])return i[1]+"px"}return t}var s=CKEDITOR.htmlParser.cssStyle,a=CKEDITOR.tools.cssLength,r=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,t={elements:{$:function(e){var t=e.attributes;if((t=(t=(t=t&&t["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(t)))&&t.children[0])&&e.attributes["data-cke-resizable"]){var n=new s(e).rules,i=(e=t.attributes,n.width);n=n.height;i&&(e.width=o(e.width,i)),n&&(e.height=o(e.height,n))}return t}}},l=CKEDITOR.plugins.add("fakeobjects",{init:function(e){e.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(e){(e=(e=e.dataProcessor)&&e.htmlFilter)&&e.addRules(t)}});CKEDITOR.editor.prototype.createFakeElement=function(e,t,n,i){var o=(o=this.lang.fakeobjects)[n]||o.unknown;t={"class":t,"data-cke-realelement":encodeURIComponent(e.getOuterHtml()),"data-cke-real-node-type":e.type,alt:o,title:o,align:e.getAttribute("align")||""};return CKEDITOR.env.hc||(t.src=CKEDITOR.getUrl(l.path+"images/spacer.gif")),n&&(t["data-cke-real-element-type"]=n),i&&(t["data-cke-resizable"]=i,n=new s,i=e.getAttribute("width"),e=e.getAttribute("height"),i&&(n.rules.width=a(i)),e&&(n.rules.height=a(e)),n.populate(t)),this.document.createElement("img",{attributes:t})},CKEDITOR.editor.prototype.createFakeParserElement=function(e,t,n,i){var o,r=(r=this.lang.fakeobjects)[n]||r.unknown;return o=new CKEDITOR.htmlParser.basicWriter,e.writeHtml(o),o=o.getHtml(),t={"class":t,"data-cke-realelement":encodeURIComponent(o),"data-cke-real-node-type":e.type,alt:r,title:r,align:e.attributes.align||""},CKEDITOR.env.hc||(t.src=CKEDITOR.getUrl(l.path+"images/spacer.gif")),n&&(t["data-cke-real-element-type"]=n),i&&(t["data-cke-resizable"]=i,i=e.attributes,e=new s,n=i.width,i=i.height,null!=n&&(e.rules.width=a(n)),null!=i&&(e.rules.height=a(i)),e.populate(t)),new CKEDITOR.htmlParser.element("img",t)},CKEDITOR.editor.prototype.restoreRealElement=function(e){if(e.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;var t=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(e.data("cke-realelement")),this.document);if(e.data("cke-resizable")){var n=e.getStyle("width");e=e.getStyle("height");n&&t.setAttribute("width",o(t.getAttribute("width"),n)),e&&t.setAttribute("height",o(t.getAttribute("height"),e))}return t}}(),CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function e(e){return n.replace(/%1/g,"rtl"==e?"right":"left").replace(/%2/g,"cke_contents_"+e)}var t="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",n=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+t+"padding-%1:18px;cursor:auto;}"+(CKEDITOR.plugins.link.synAnchorSelector?"a.cke_anchor_empty{display:inline-block;"+(CKEDITOR.env.ie&&10<CKEDITOR.env.version?"min-height:16px;vertical-align:middle":"")+"}":"")+".%2 img.cke_anchor{"+t+"width:16px;min-height:15px;height:1.15em;vertical-align:"+(CKEDITOR.env.opera?"middle":"text-bottom")+";}";CKEDITOR.addCss(e("ltr")+e("rtl"))},init:function(n){var e="a[!href]";CKEDITOR.dialog.isTabEnabled(n,"link","advanced")&&(e=e.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type]{*}(*)")),CKEDITOR.dialog.isTabEnabled(n,"link","target")&&(e=e.replace("]",",target,onclick]")),n.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:e,requiredContent:"a[href]"})),n.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"})),n.addCommand("unlink",new CKEDITOR.unlinkCommand),n.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand),n.setKeystroke(CKEDITOR.CTRL+76,"link"),n.ui.addButton&&(n.ui.addButton("Link",{label:n.lang.link.toolbar,command:"link",toolbar:"links,10"}),n.ui.addButton("Unlink",{label:n.lang.link.unlink,command:"unlink",toolbar:"links,20"}),n.ui.addButton("Anchor",{label:n.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"})),CKEDITOR.dialog.add("link",this.path+"dialogs/link.js"),CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js"),n.on("doubleclick",function(e){var t=CKEDITOR.plugins.link.getSelectedLink(n)||e.data.element;t.isReadOnly()||(t.is("a")?(e.data.dialog=!t.getAttribute("name")||t.getAttribute("href")&&t.getChildCount()?"link":"anchor",n.getSelection().selectElement(t)):CKEDITOR.plugins.link.tryRestoreFakeAnchor(n,t)&&(e.data.dialog="anchor"))}),n.addMenuItems&&n.addMenuItems({anchor:{label:n.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:n.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:n.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:n.lang.link.unlink,command:"unlink",group:"link",order:5}}),n.contextMenu&&n.contextMenu.addListener(function(e){if(!e||e.isReadOnly())return null;if(!(e=CKEDITOR.plugins.link.tryRestoreFakeAnchor(n,e))&&!(e=CKEDITOR.plugins.link.getSelectedLink(n)))return null;var t={};return e.getAttribute("href")&&e.getChildCount()&&(t={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF}),e&&e.hasAttribute("name")&&(t.anchor=t.removeAnchor=CKEDITOR.TRISTATE_OFF),t})},afterInit:function(o){var e=(t=o.dataProcessor)&&t.dataFilter,t=t&&t.htmlFilter,n=o._.elementsPath&&o._.elementsPath.filters;e&&e.addRules({elements:{a:function(e){var t=e.attributes;if(!t.name)return null;var n=!e.children.length;if(CKEDITOR.plugins.link.synAnchorSelector){e=n?"cke_anchor_empty":"cke_anchor";var i=t["class"];t.name&&(!i||i.indexOf(e)<0)&&(t["class"]=(i||"")+" "+e),n&&CKEDITOR.plugins.link.emptyAnchorFix&&(t.contenteditable="false",t["data-cke-editable"]=1)}else if(CKEDITOR.plugins.link.fakeAnchor&&n)return o.createFakeParserElement(e,"cke_anchor","anchor");return null}}}),CKEDITOR.plugins.link.emptyAnchorFix&&t&&t.addRules({elements:{a:function(e){delete e.attributes.contenteditable}}}),n&&n.push(function(e,t){if("a"==t&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(o,e)||e.getAttribute("name")&&(!e.getAttribute("href")||!e.getChildCount())))return"anchor"})}}),CKEDITOR.plugins.link={getSelectedLink:function(e){var t=e.getSelection(),n=t.getSelectedElement();return n&&n.is("a")?n:(t=t.getRanges()[0])?(t.shrink(CKEDITOR.SHRINK_TEXT),e.elementPath(t.getCommonAncestor()).contains("a",1)):null},fakeAnchor:CKEDITOR.env.opera||CKEDITOR.env.webkit,synAnchorSelector:CKEDITOR.env.ie,emptyAnchorFix:CKEDITOR.env.ie&&CKEDITOR.env.version<8,tryRestoreFakeAnchor:function(e,t){if(t&&t.data("cke-real-element-type")&&"anchor"==t.data("cke-real-element-type")){var n=e.restoreRealElement(t);if(n.data("cke-saved-name"))return n}}},CKEDITOR.unlinkCommand=function(){},CKEDITOR.unlinkCommand.prototype={exec:function(e){var t=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1});e.removeStyle(t)},refresh:function(e,t){var n=t.lastElement&&t.lastElement.getAscendant("a",!0);n&&"a"==n.getName()&&n.getAttribute("href")&&n.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]"},CKEDITOR.removeAnchorCommand=function(){},CKEDITOR.removeAnchorCommand.prototype={exec:function(e){var t,n=e.getSelection(),i=n.createBookmarks();n&&(t=n.getSelectedElement())&&(CKEDITOR.plugins.link.fakeAnchor&&!t.getChildCount()?CKEDITOR.plugins.link.tryRestoreFakeAnchor(e,t):t.is("a"))?t.remove(1):(t=CKEDITOR.plugins.link.getSelectedLink(e))&&(t.hasAttribute("href")?(t.removeAttributes({name:1,"data-cke-saved-name":1}),t.removeClass("cke_anchor")):t.remove(1)),n.selectBookmarks(i)},requiredContent:"a[name]"},CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0}),function(){function E(t,n,e){function i(e){!(l=d[e?"getFirst":"getLast"]())||l.is&&l.isBlockBoundary()||!(c=n.root[e?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||c.is&&c.isBlockBoundary({br:1})||t.document.createElement("br")[e?"insertBefore":"insertAfter"](l)}for(var o=CKEDITOR.plugins.list.listToArray(n.root,e),r=[],s=0;s<n.contents.length;s++){var a=n.contents[s];(a=a.getAscendant("li",!0))&&!a.getCustomData("list_item_processed")&&(r.push(a),CKEDITOR.dom.element.setMarker(e,a,"list_item_processed",!0))}for(a=null,s=0;s<r.length;s++)o[a=r[s].getCustomData("listarray_index")].indent=-1;for(s=a+1;s<o.length;s++)if(o[s].indent>o[s-1].indent+1){for(r=o[s-1].indent+1-o[s].indent,a=o[s].indent;o[s]&&o[s].indent>=a;)o[s].indent+=r,s++;s--}var l,c,d=CKEDITOR.plugins.list.arrayToList(o,e,null,t.config.enterMode,n.root.getAttribute("dir")).listNode;i(!0),i(),d.replace(n.root),t.fire("contentDomInvalidated")}function e(e,t){this.name=e,this.context=this.type=t,this.allowedContent=t+" li",this.requiredContent=t}function c(e,t,n,i){for(var o,r;o=e[i?"getLast":"getFirst"](s);)(r=o.getDirection(1))!==t.getDirection(1)&&o.setAttribute("dir",r),o.remove(),n?o[i?"insertBefore":"insertAfter"](n):t.append(o,i)}function T(n){var e;(e=function(e){var t=n[e?"getPrevious":"getNext"](y);t&&t.type==CKEDITOR.NODE_ELEMENT&&t.is(n.getName())&&(c(n,t,null,!e),n.remove(),n=t)})(),e(1)}function d(e){return e.type==CKEDITOR.NODE_ELEMENT&&(e.getName()in CKEDITOR.dtd.$block||e.getName()in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[e.getName()]["#"]}function u(e,t,n){e.fire("saveSnapshot"),n.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var i=n.extractContents();t.trim(!1,!0);var o=t.createBookmark(),r=(s=new CKEDITOR.dom.elementPath(t.startContainer)).block,s=s.lastElement.getAscendant("li",1)||r,a=(l=new CKEDITOR.dom.elementPath(n.startContainer)).contains(CKEDITOR.dtd.$listItem
),l=l.contains(CKEDITOR.dtd.$list);for(r?(r=r.getBogus())&&r.remove():l&&(r=l.getPrevious(y))&&f(r)&&r.remove(),(r=i.getLast())&&r.type==CKEDITOR.NODE_ELEMENT&&r.is("br")&&r.remove(),(r=t.startContainer.getChild(t.startOffset))?i.insertBefore(r):t.startContainer.append(i),a&&(i=h(a))&&(s.contains(a)?(c(i,a.getParent(),a),i.remove()):s.append(i));n.checkStartOfBlock()&&n.checkEndOfBlock()&&(i=(l=n.startPath()).block);)i.is("li")&&(s=i.getParent(),i.equals(s.getLast(y))&&i.equals(s.getFirst(y))&&(i=s)),n.moveToPosition(i,CKEDITOR.POSITION_BEFORE_START),i.remove();n=n.clone(),i=e.editable(),n.setEndAt(i,CKEDITOR.POSITION_BEFORE_END),(n=new CKEDITOR.dom.walker(n)).evaluator=function(e){return y(e)&&!f(e)},(n=n.next())&&n.type==CKEDITOR.NODE_ELEMENT&&n.getName()in CKEDITOR.dtd.$list&&T(n),t.moveToBookmark(o),t.select(),e.fire("saveSnapshot")}function h(e){return(e=e.getLast(y))&&e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in D?e:null}var D={ol:1,ul:1},t=CKEDITOR.dom.walker.whitespaces(),R=CKEDITOR.dom.walker.bookmark(),y=function(e){return!(t(e)||R(e))},f=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(e,t,n,i,o){if(!D[e.getName()])return[];i||(i=0),n||(n=[]);for(var r=0,s=e.getChildCount();r<s;r++){var a=e.getChild(r);if(a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(a,t,n,i+1),"li"==a.$.nodeName.toLowerCase()){var l={parent:e,indent:i,element:a,contents:[]};o?l.grandparent=o:(l.grandparent=e.getParent(),l.grandparent&&"li"==l.grandparent.$.nodeName.toLowerCase()&&(l.grandparent=l.grandparent.getParent())),t&&CKEDITOR.dom.element.setMarker(t,a,"listarray_index",n.length),n.push(l);for(var c,d=0,u=a.getChildCount();d<u;d++)(c=a.getChild(d)).type==CKEDITOR.NODE_ELEMENT&&D[c.getName()]?CKEDITOR.plugins.list.listToArray(c,t,n,i+1,l.grandparent):l.contents.push(c)}}return n},arrayToList:function(e,t,n,i,o){if(n||(n=0),!e||e.length<n+1)return null;for(var r,s,a,l=e[n].parent.getDocument(),c=new CKEDITOR.dom.documentFragment(l),d=null,u=n,h=Math.max(e[n].indent,0),f=null,m=i==CKEDITOR.ENTER_P?"p":"div";;){var p=e[u];if(r=p.grandparent,s=p.element.getDirection(1),p.indent==h){for(d&&e[u].parent.getName()==d.getName()||(d=e[u].parent.clone(!1,1),o&&d.setAttribute("dir",o),c.append(d)),f=d.append(p.element.clone(0,1)),s!=d.getDirection(1)&&f.setAttribute("dir",s),r=0;r<p.contents.length;r++)f.append(p.contents[r].clone(1,1));u++}else if(p.indent==Math.max(h,0)+1)p=e[u-1].element.getDirection(1),u=CKEDITOR.plugins.list.arrayToList(e,null,u,i,p!=s?s:null),!f.getChildCount()&&CKEDITOR.env.needsNbspFiller&&!(7<l.$.documentMode)&&f.append(l.createText("\xa0")),f.append(u.listNode),u=u.nextIndex;else{if(-1!=p.indent||n||!r)return null;D[r.getName()]?(f=p.element.clone(!1,!0),s!=r.getDirection(1)&&f.setAttribute("dir",s)):f=new CKEDITOR.dom.documentFragment(l);d=r.getDirection(1)!=s;var g,E,T=p.element,C=T.getAttribute("class"),v=T.getAttribute("style"),I=f.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(i!=CKEDITOR.ENTER_BR||d||v||C),O=p.contents.length;for(r=0;r<O;r++)if(g=p.contents[r],R(g)&&1<O)I?E=g.clone(1,1):f.append(g.clone(1,1));else if(g.type==CKEDITOR.NODE_ELEMENT&&g.isBlockBoundary()){d&&!g.getDirection()&&g.setAttribute("dir",s),a=g;var b=T.getAttribute("style");b&&a.setAttribute("style",b.replace(/([^;])$/,"$1;")+(a.getAttribute("style")||"")),C&&g.addClass(C),a=null,E&&(f.append(E),E=null),f.append(g.clone(1,1))}else I?(a||(a=l.createElement(m),f.append(a),d&&a.setAttribute("dir",s)),v&&a.setAttribute("style",v),C&&a.setAttribute("class",C),E&&(a.append(E),E=null),a.append(g.clone(1,1))):f.append(g.clone(1,1));E&&((a||f).append(E),E=null),f.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&u!=e.length-1&&(CKEDITOR.env.needsBrFiller&&(s=f.getLast())&&s.type==CKEDITOR.NODE_ELEMENT&&s.is("br")&&s.remove(),(!(s=f.getLast(y))||s.type!=CKEDITOR.NODE_ELEMENT||!s.is(CKEDITOR.dtd.$block))&&f.append(l.createElement("br"))),("div"==(s=f.$.nodeName.toLowerCase())||"p"==s)&&f.appendBogus(),c.append(f),d=null,u++}if(a=null,e.length<=u||Math.max(e[u].indent,0)<h)break}if(t)for(e=c.getFirst();e;){if(e.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(t,e),e.getName()in CKEDITOR.dtd.$listItem&&(l=o=i=void 0,i=(n=e).getDirection()))){for(o=n.getParent();o&&!(l=o.getDirection());)o=o.getParent();i==l&&n.removeAttribute("dir")}e=e.getNextSourceNode()}return{listNode:c,nextIndex:u}}};var C=/^h[1-6]$/,s=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);e.prototype={exec:function(e){this.refresh(e,e.elementPath());var t=e.config,n=e.getSelection(),i=n&&n.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF)if((r=e.editable()).getFirst(y)){var o=1==i.length&&i[0];(t=o&&o.getEnclosedNode())&&t.is&&this.type==t.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else t.enterMode==CKEDITOR.ENTER_BR?r.appendBogus():i[0].fixBlock(1,t.enterMode==CKEDITOR.ENTER_P?"p":"div"),n.selectRanges(i);t=n.createBookmarks(!0);for(var r=[],s={},a=(i=i.createIterator(),0);(o=i.getNextRange())&&++a;){var l=(p=o.getBoundaryNodes()).startNode,c=p.endNode;for(l.type==CKEDITOR.NODE_ELEMENT&&"td"==l.getName()&&o.setStartAt(p.startNode,CKEDITOR.POSITION_AFTER_START),c.type==CKEDITOR.NODE_ELEMENT&&"td"==c.getName()&&o.setEndAt(p.endNode,CKEDITOR.POSITION_BEFORE_END),(o=o.createIterator()).forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;p=o.getNextParagraph();)if(!p.getCustomData("list_block")){CKEDITOR.dom.element.setMarker(s,p,"list_block",1);l=(u=e.elementPath(p)).elements,c=0;for(var d,u=u.blockLimit,h=l.length-1;0<=h&&(d=l[h]);h--)if(D[d.getName()]&&u.contains(d)){u.removeCustomData("list_group_object_"+a),(l=d.getCustomData("list_group_object"))?l.contents.push(p):(l={root:d,contents:[p]},r.push(l),CKEDITOR.dom.element.setMarker(s,d,"list_group_object",l)),c=1;break}c||((c=u).getCustomData("list_group_object_"+a)?c.getCustomData("list_group_object_"+a).contents.push(p):(l={root:c,contents:[p]},CKEDITOR.dom.element.setMarker(s,c,"list_group_object_"+a,l),r.push(l)))}}for(d=[];0<r.length;)if(l=r.shift(),this.state==CKEDITOR.TRISTATE_OFF)if(D[l.root.getName()]){for(i=e,a=l,l=s,o=d,c=CKEDITOR.plugins.list.listToArray(a.root,l),u=[],p=0;p<a.contents.length;p++)(h=(h=a.contents[p]).getAscendant("li",!0))&&!h.getCustomData("list_item_processed")&&(u.push(h),CKEDITOR.dom.element.setMarker(l,h,"list_item_processed",!0));h=a.root.getDocument();for(var f=void 0,m=void 0,p=0;p<u.length;p++){var g=u[p].getCustomData("listarray_index");(f=c[g].parent).is(this.type)||(m=h.createElement(this.type),f.copyAttributes(m,{start:1,type:1}),m.removeStyle("list-style-type"),c[g].parent=m)}for(l=CKEDITOR.plugins.list.arrayToList(c,l,null,i.config.enterMode),c=void 0,u=l.listNode.getChildCount(),p=0;p<u&&(c=l.listNode.getChild(p));p++)c.getName()==this.type&&o.push(c);l.listNode.replace(a.root),i.fire("contentDomInvalidated")}else{for(c=e,o=d,u=(p=l).contents,i=p.root.getDocument(),a=[],1==u.length&&u[0].equals(p.root)&&(l=i.createElement("div"),u[0].moveChildren&&u[0].moveChildren(l),u[0].append(l),u[0]=l),p=p.contents[0].getParent(),h=0;h<u.length;h++)p=p.getCommonAncestor(u[h].getParent());for(f=c.config.useComputedState,c=l=void 0,f=void 0===f||f,h=0;h<u.length;h++)for(m=u[h];g=m.getParent();){if(g.equals(p)){a.push(m),!c&&m.getDirection()&&(c=1),m=m.getDirection(f),null!==l&&(l=l&&l!=m?null:m);break}m=g}if(!(a.length<1)){for(u=a[a.length-1].getNext(),h=i.createElement(this.type),o.push(h),f=o=void 0;a.length;)o=a.shift(),f=i.createElement("li"),o.is("pre")||C.test(o.getName())||"false"==o.getAttribute("contenteditable")?o.appendTo(f):(o.copyAttributes(f),l&&o.getDirection()&&(f.removeStyle("direction"),f.removeAttribute("dir")),o.moveChildren(f),o.remove()),f.appendTo(h);l&&c&&h.setAttribute("dir",l),u?h.insertBefore(u):h.appendTo(p)}}else this.state==CKEDITOR.TRISTATE_ON&&D[l.root.getName()]&&E.call(this,e,l,s);for(h=0;h<d.length;h++)T(d[h]);CKEDITOR.dom.element.clearAllMarkers(s),n.selectBookmarks(t),e.focus()},refresh:function(e,t){var n=t.contains(D,1),i=t.blockLimit||t.root;n&&i.contains(n)?this.setState(n.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(c){c.blockless||(c.addCommand("numberedlist",new e("numberedlist","ol")),c.addCommand("bulletedlist",new e("bulletedlist","ul")),c.ui.addButton&&(c.ui.addButton("NumberedList",{label:c.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),c.ui.addButton("BulletedList",{label:c.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),c.on("key",function(e){var t=e.data.keyCode;if("wysiwyg"==c.mode&&t in{8:1,46:1}){var n=c.getSelection().getRanges()[0],i=n&&n.startPath();if(n&&n.collapsed){i=new CKEDITOR.dom.elementPath(n.startContainer);var o,r,s=8==t,a=c.editable(),l=new CKEDITOR.dom.walker(n.clone());if(l.evaluator=function(e){return y(e)&&!f(e)},l.guard=function(e,t){return!(t&&e.type==CKEDITOR.NODE_ELEMENT&&e.is("table"))},t=n.clone(),s)(o=i.contains(D))&&n.checkBoundaryOfElement(o,CKEDITOR.START)&&(o=o.getParent())&&o.is("li")&&(o=h(o))?(o=(r=o).getPrevious(y),t.moveToPosition(o&&f(o)?o:r,CKEDITOR.POSITION_BEFORE_START)):(l.range.setStartAt(a,CKEDITOR.POSITION_AFTER_START),l.range.setEnd(n.startContainer,n.startOffset),(o=l.previous())&&o.type==CKEDITOR.NODE_ELEMENT&&(o.getName()in D||o.is("li"))&&(o.is("li")||(l.range.selectNodeContents(o),l.reset(),l.evaluator=d,o=l.previous()),r=o,t.moveToElementEditEnd(r))),r?(u(c,t,n),e.cancel()):(t=i.contains(D))&&n.checkBoundaryOfElement(t,CKEDITOR.START)&&(r=t.getFirst(y),n.checkBoundaryOfElement(r,CKEDITOR.START)&&(o=t.getPrevious(y),h(r)?o&&(n.moveToElementEditEnd(o),n.select()):c.execCommand("outdent"),e.cancel()));else(r=i.contains("li"))?(l.range.setEndAt(a,CKEDITOR.POSITION_BEFORE_END),a=(i=r.getLast(y))&&d(i)?i:r,r=0,(o=l.next())&&o.type==CKEDITOR.NODE_ELEMENT&&o.getName()in D&&o.equals(i)?(r=1,o=l.next()):n.checkBoundaryOfElement(a,CKEDITOR.END)&&(r=1),r&&o&&((n=n.clone()).moveToElementEditStart(o),u(c,t,n),e.cancel())):(l.range.setEndAt(a,CKEDITOR.POSITION_BEFORE_END),(o=l.next())&&o.type==CKEDITOR.NODE_ELEMENT&&o.is(D)&&(o=o.getFirst(y),i.block&&n.checkStartOfBlock()&&n.checkEndOfBlock()?(i.block.remove(),n.moveToElementEditStart(o),n.select()):h(o)?(n.moveToElementEditStart(o),n.select()):((n=n.clone()).moveToElementEditStart(o),u(c,t,n)),e.cancel()));setTimeout(function(){c.selectionChange(1)})}}}))}})}(),function(){function d(e,t,n){return T(t)&&T(n)&&n.equals(t.getNext(function(e){return!(Z(e)||Q(e)||C(e))}))}function u(e){this.upper=e[0],this.lower=e[1],this.set.apply(this,e.slice(2))}function c(e){var t=e.element;if(t&&T(t)&&(t=t.getAscendant(e.triggers,!0))&&e.editable.contains(t)){var n=s(t,!0);if("true"==n.getAttribute("contenteditable"))return t;if(n.is(e.triggers))return n}return null}function h(e,t,n){return _(e,t),_(e,n),e=t.size.bottom,n=n.size.top,e&&n?0|(e+n)/2:e||n}function f(t,e,n){return e[n?"getPrevious":"getNext"](function(e){return e&&e.type==CKEDITOR.NODE_TEXT&&!Z(e)||T(e)&&!C(e)&&!E(t,e)})}function s(e,t){if(e.data("cke-editable"))return null;for(t||(e=e.getParent());e&&!e.data("cke-editable");){if(e.hasAttribute("contenteditable"))return e;e=e.getParent()}return null}function m(c){var e=c.doc,t=i('<span contenteditable="false" style="'+W+"position:absolute;border-top:1px dashed "+c.boxColor+'"></span>',e),n=this.path+"images/"+(x.hidpi?"hidpi/":"")+"icon.png";for(N(t,{attach:function(){return this.wrap.getParent()||this.wrap.appendTo(c.editable,!0),this},lineChildren:[N(i('<span title="'+c.editor.lang.magicline.title+'" contenteditable="false">&#8629;</span>',e),{base:W+"height:17px;width:17px;"+(c.rtl?"left":"right")+":17px;background:url("+n+") center no-repeat "+c.boxColor+";cursor:pointer;"+(x.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(x.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","2px",1),"top:-17px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","2px 2px 0px 0px",1),"top:-1px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","0px 0px 2px 2px",1)]}),N(i(X,e),{base:G+"left:0px;border-left-color:"+c.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),N(i(X,e),{base:G+"right:0px;border-right-color:"+c.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function(){return this.wrap.getParent()&&this.wrap.remove(),this},mouseNear:function(){_(c,this);var e=c.holdDistance,t=this.size;return!!(t&&c.mouse.y>t.top-e&&c.mouse.y<t.bottom+e&&c.mouse.x>t.left-e&&c.mouse.x<t.right+e)},place:function(){var e=c.view,t=c.editable,n=c.trigger,i=n.upper,o=n.lower,r=i||o,s=r.getParent(),a={};for(var l in this.trigger=n,i&&_(c,i,!0),o&&_(c,o,!0),_(c,s,!0),c.inInlineMode&&K(c,!0),s.equals(t)?(a.left=e.scroll.x,a.right=-e.scroll.x,a.width=""):(a.left=r.size.left-r.size.margin.left+e.scroll.x-(c.inInlineMode?e.editable.left+e.editable.border.left:0),a.width=r.size.outerWidth+r.size.margin.left+r.size.margin.right+e.scroll.x,a.right=""),i&&o?a.top=i.size.margin.bottom===o.size.margin.top?0|i.size.bottom+i.size.margin.bottom/2:i.size.margin.bottom<o.size.margin.top?i.size.bottom+i.size.margin.bottom:i.size.bottom+i.size.margin.bottom-o.size.margin.top:i?o||(a.top=i.size.bottom+i.size.margin.bottom):a.top=o.size.top-o.size.margin.top,n.is(M)||a.top>e.scroll.y-15&&a.top<e.scroll.y+5?(a.top=c.inInlineMode?0:e.scroll.y,this.look(M)):n.is(H)||a.top>e.pane.bottom-5&&a.top<e.pane.bottom+15?(a.top=c.inInlineMode?e.editable.height+e.editable.padding.top+e.editable.padding.bottom:e.pane.bottom-1,this.look(H)):(c.inInlineMode&&(a.top-=e.editable.top+e.editable.border.top),this.look(q)),c.inInlineMode&&(a.top--,a.top+=e.editable.scroll.top,a.left+=e.editable.scroll.left),a)a[l]=CKEDITOR.tools.cssLength(a[l]);this.setStyles(a)},look:function(e){if(this.oldLook!=e){for(var t,n=this.lineChildren.length;n--;)(t=this.lineChildren[n]).setAttribute("style",t.base+t.looks[0|e/2]);this.oldLook=e}},wrap:new a("span",c.doc)}),e=t.lineChildren.length;e--;)t.lineChildren[e].appendTo(t);t.look(q),t.appendTo(t.wrap),t.unselectable(),t.lineChildren[0].on("mouseup",function(e){t.detach(),p(c,function(e){var t=c.line.trigger;e[t.is(L)?"insertBefore":"insertAfter"](t.is(L)?t.lower:t.upper)},!0),c.editor.focus(),!x.ie&&c.enterMode!=CKEDITOR.ENTER_BR&&c.hotNode.scrollIntoView(),e.data.preventDefault(!0)}),t.on("mousedown",function(e){e.data.preventDefault(!0)}),c.line=t}function p(e,t,n){var i,o=new CKEDITOR.dom.range(e.doc),r=e.editor;x.ie&&e.enterMode==CKEDITOR.ENTER_BR?i=e.doc.createText(z):(i=(i=s(e.element,!0))&&i.data("cke-enter-mode")||e.enterMode,(i=new a(l[i],e.doc)).is("br")||e.doc.createText(z).appendTo(i)),n&&r.fire("saveSnapshot"),t(i),o.moveToPosition(i,CKEDITOR.POSITION_AFTER_START),r.getSelection().selectRanges([o]),e.hotNode=i,n&&r.fire("saveSnapshot")}function g(o,r){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function i(t){var e=x.ie&&x.version<9?" ":z,n=o.hotNode&&o.hotNode.getText()==e&&o.element.equals(o.hotNode)&&o.lastCmdDirection===!!r;p(o,function(e){n&&o.hotNode&&o.hotNode.remove(),e[r?"insertAfter":"insertBefore"](t),e.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!r}),o.lastCmdDirection=!!r}),!x.ie&&o.enterMode!=CKEDITOR.ENTER_BR&&o.hotNode.scrollIntoView(),o.line.detach()}return function(e){var t,n;e=(e=e.getSelection().getStartElement()).getAscendant(U,1);O(o,e)||!e||e.equals(o.editable)||e.contains(o.editable)||((t=s(e))&&"false"==t.getAttribute("contenteditable")&&(e=t),o.element=e,T(t=f(o,e,!r))&&t.is(o.triggers)&&t.is(V)&&(!f(o,t,!r)||(n=f(o,t,!r))&&T(n)&&n.is(o.triggers))?i(t):T(n=c(o,e))&&(f(o,n,!r)?(e=f(o,n,!r))&&T(e)&&e.is(o.triggers)&&i(n):i(n)))}}()}}function E(e,t){if(!t||t.type!=CKEDITOR.NODE_ELEMENT||!t.$)return!1;var n=e.line;return n.wrap.equals(t)||n.wrap.contains(t)}function T(e){return e&&e.type==CKEDITOR.NODE_ELEMENT&&e.$}function C(e){return!!T(e)&&((t=v(e))||(t=!!T(e)&&!(!(t={left:1,right:1,center:1})[e.getComputedStyle("float")]&&!t[e.getAttribute("align")])),t);var t}function v(e){return!!{absolute:1,fixed:1}[e.getComputedStyle("position")]}function I(e,t){return T(t)?t.is(e.triggers):null}function O(e,t){if(!t)return!1;for(var n=t.getParents(1),i=n.length;i--;)for(var o=e.tabuList.length;o--;)if(n[i].hasAttribute(e.tabuList[o]))return!0;return!1}function b(t,e,n){return!!(e=e[n?"getLast":"getFirst"](function(e){return t.isRelevant(e)&&!e.is(o)}))&&(_(t,e),n?e.size.top>t.mouse.y:e.size.bottom<t.mouse.y)}function D(e){var t=e.editable,n=e.mouse,i=e.view,o=e.triggerOffset;K(e);var r=n.y>(e.inInlineMode?i.editable.top+i.editable.height/2:Math.min(i.editable.height,i.pane.height)/2);return(t=t[r?"getLast":"getFirst"](function(e){return!(Z(e)||Q(e))}))?(E(e,t)&&(t=e.line.wrap[r?"getPrevious":"getNext"](function(e){return!(Z(e)||Q(e))})),T(t)&&!C(t)&&I(e,t)?(_(e,t),!r&&0<=t.size.top&&0<n.y&&n.y<t.size.top+o?(e=e.inInlineMode||0===i.scroll.y?M:q,new u([null,t,L,P,e])):r&&t.size.bottom<=i.pane.height&&n.y>t.size.bottom-o&&n.y<i.pane.height?(e=e.inInlineMode||t.size.bottom>i.pane.height-o&&t.size.bottom<i.pane.height?H:q,new u([t,null,$,P,e])):null):null):null}function R(e){var t=e.mouse,n=e.view,i=e.triggerOffset,o=c(e);if(!o)return null;_(e,o);i=Math.min(i,0|o.size.outerHeight/2);var r,s,a=[];if(t.y>o.size.top-1&&t.y<o.size.top+i)s=!1;else{if(!(t.y>o.size.bottom-i&&t.y<o.size.bottom+1))return null;s=!0}if(C(o)||b(e,o,s)||o.getParent().is(j))return null;var l=f(e,o,!s);if(l){if(l&&l.type==CKEDITOR.NODE_TEXT)return null;if(T(l)){if(C(l)||!I(e,l)||l.getParent().is(j))return null;a=[l,o][s?"reverse":"concat"]().concat([F,P])}}else o.equals(e.editable[s?"getLast":"getFirst"](e.isRelevant))?(K(e),s&&t.y>o.size.bottom-i&&t.y<n.pane.height&&o.size.bottom>n.pane.height-i&&o.size.bottom<n.pane.height?r=H:0<t.y&&t.y<o.size.top+i&&(r=M)):r=q,a=[null,o][s?"reverse":"concat"]().concat([s?$:L,P,r,o.equals(e.editable[s?"getLast":"getFirst"](e.isRelevant))?s?H:M:q]);return 0 in a?new u(a):null}function y(e,n,t,i){for(var o=function(){var t=x.ie?n.$.currentStyle:e.win.$.getComputedStyle(n.$,"");return x.ie?function(e){return t[CKEDITOR.tools.cssStyleToDomStyle(e)]}:function(e){return t.getPropertyValue(e)}}(),r=n.getDocumentPosition(),s={},a={},l={},c={},d=ee.length;d--;)s[ee[d]]=parseInt(o("border-"+ee[d]+"-width"),10)||0,l[ee[d]]=parseInt(o("padding-"+ee[d]),10)||0,a[ee[d]]=parseInt(o("margin-"+ee[d]),10)||0;return(!t||i)&&w(e,i),c.top=r.y-(t?0:e.view.scroll.y),c.left=r.x-(t?0:e.view.scroll.x),c.outerWidth=n.$.offsetWidth,c.outerHeight=n.$.offsetHeight,c.height=c.outerHeight-(l.top+l.bottom+s.top+s.bottom),c.width=c.outerWidth-(l.left+l.right+s.left+s.right),c.bottom=c.top+c.outerHeight,c.right=c.left+c.outerWidth,e.inInlineMode&&(c.scroll={top:n.$.scrollTop,left:n.$.scrollLeft}),N({border:s,padding:l,margin:a,ignoreScroll:t},c,!0)}function _(e,t,n){if(!T(t))return t.size=null;if(t.size){if(t.size.ignoreScroll==n&&t.size.date>new Date-r)return null}else t.size={};return N(t.size,y(e,t,n),{date:+new Date},!0)}function K(e,t){e.view.editable=y(e,e.editable,t,!0)}function w(e,t){e.view||(e.view={});var n=e.view;if(t||!(n&&n.date>new Date-r)){n=(i=e.win).getScrollPosition();var i=i.getViewPaneSize();N(e.view,{scroll:{x:n.x,y:n.y,width:e.doc.$.documentElement.scrollWidth-i.width,height:e.doc.$.documentElement.scrollHeight-i.height},pane:{width:i.width,height:i.height,bottom:i.height+n.y},date:+new Date},!0)}}function k(e,t,n,i){for(var o=i,r=i,s=0,a=!1,l=!1,c=e.view.pane.height,d=e.mouse;d.y+s<c&&0<d.y-s&&(a||(a=t(o,i)),l||(l=t(r,i)),!a&&0<d.y-s&&(o=n(e,{x:d.x,y:d.y-s})),!l&&d.y+s<c&&(r=n(e,{x:d.x,y:d.y+s})),!a||!l);)s+=2;return new u([o,r,null,null])}CKEDITOR.plugins.add("magicline",{init:function(o){var i,r,s,a=o.config,e=a.magicline_triggerOffset||30,l={editor:o,enterMode:a.enterMode,triggerOffset:e,holdDistance:0|e*(a.magicline_holdDistance||.5),boxColor:a.magicline_color||"#ff0000",rtl:"rtl"==a.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(a.magicline_tabuList||[]),triggers:a.magicline_everywhere?U:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1}};l.isRelevant=function(e){return T(e)&&!E(l,e)&&!C(e)},o.on("contentDom",function(){var e=o.editable(),t=o.document,n=o.window;N(l,{editable:e,inInlineMode:e.isInline(),doc:t,win:n,hotNode:null},!0),l.boundary=l.inInlineMode?l.editable:l.doc.getDocumentElement(),e.is(A.$inline)||(l.inInlineMode&&!v(e)&&e.setStyles({position:"relative",top:null,left:null}),m.call(this,l),w(l),e.attachListener(o,"beforeUndoImage",function(){l.line.detach()}),e.attachListener(o,"beforeGetData",function(){l.line.wrap.getParent()&&(l.line.detach(),o.once("getData",function(){l.line.attach()},null,null,1e3))},null,null,0),e.attachListener(l.inInlineMode?t:t.getWindow().getFrame(),"mouseout",function(e){if("wysiwyg"==o.mode)if(l.inInlineMode){var t=e.data.$.clientX;e=e.data.$.clientY;w(l),K(l,!0);var n=l.view.editable,i=l.view.scroll;t>n.left-i.x&&t<n.right-i.x&&e>n.top-i.y&&e<n.bottom-i.y||(clearTimeout(s),s=null,l.line.detach())}else clearTimeout(s),s=null,l.line.detach()}),e.attachListener(e,"keyup",function(){l.hiddenMode=0}),e.attachListener(e,"keydown",function(e){if("wysiwyg"==o.mode)switch(e=e.data.getKeystroke(),o.getSelection().getStartElement(),e){case 2228240:case 16:l.hiddenMode=1,l.line.detach()}}),e.attachListener(l.inInlineMode?e:t,"mousemove",function(e){if(r=!0,"wysiwyg"==o.mode&&!o.readOnly&&!s){var t={x:e.data.$.clientX,y:e.data.$.clientY};s=setTimeout(function(){l.mouse=t,s=l.trigger=null,w(l),r&&!l.hiddenMode&&o.focusManager.hasFocus&&!l.line.mouseNear()&&(l.element=Y(l,!0))&&((l.trigger=D(l)||R(l)||J(l))&&!O(l,l.trigger.upper||l.trigger.lower)?l.line.attach().place():(l.trigger=null,l.line.detach()),r=!1)},30)}}),e.attachListener(n,"scroll",function(){"wysiwyg"==o.mode&&(l.line.detach(),x.webkit&&(l.hiddenMode=1,clearTimeout(i),i=setTimeout(function(){l.mouseDown||(l.hiddenMode=0)},50)))}),e.attachListener(S?t:n,"mousedown",function(){"wysiwyg"==o.mode&&(l.line.detach(),l.hiddenMode=1,l.mouseDown=1)}),e.attachListener(S?t:n,"mouseup",function(){l.hiddenMode=0,l.mouseDown=0}),o.addCommand("accessPreviousSpace",g(l)),o.addCommand("accessNextSpace",g(l,!0)),o.setKeystroke([[a.magicline_keystrokePrevious,"accessPreviousSpace"],[a.magicline_keystrokeNext,"accessNextSpace"]]),o.on("loadSnapshot",function(){var e,t,n,i;for(i in{p:1,br:1,div:1})for(n=(e=o.document.getElementsByTag(i)).count();n--;)if((t=e.getItem(n)).data("cke-magicline-hot"))return l.hotNode=t,void(l.lastCmdDirection="true"===t.data("cke-magicline-dir"))}),this.backdoor={accessFocusSpace:p,boxTrigger:u,isLine:E,getAscendantTrigger:c,getNonEmptyNeighbour:f,getSize:y,that:l,triggerEdge:R,triggerEditable:D,triggerExpand:J})},this)}});var N=CKEDITOR.tools.extend,a=CKEDITOR.dom.element,i=a.createFromHtml,x=CKEDITOR.env,S=CKEDITOR.env.ie&&CKEDITOR.env.version<9,A=CKEDITOR.dtd,l={},L=128,$=64,F=32,P=16,B=8,M=4,H=2,q=1,z="\xa0",j=A.$listItem,o=A.$tableContent,V=N({},A.$nonEditable,A.$empty),U=A.$block,r=100,W="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",G=W+"border-color:transparent;display:block;border-style:solid;",X="<span>"+z+"</span>";l[CKEDITOR.ENTER_BR]="br",l[CKEDITOR.ENTER_P]="p",l[CKEDITOR.ENTER_DIV]="div",u.prototype={set:function(e,t,n){return this.properties=e+t+(n||q),this},is:function(e){return(this.properties&e)==e}};var Y=function(e,t,n){if(!e.mouse)return null;var i=e.doc,o=e.line.wrap,r=(n=n||e.mouse,new CKEDITOR.dom.element(i.$.elementFromPoint(n.x,n.y)));return t&&E(e,r)&&(o.hide(),r=new CKEDITOR.dom.element(i.$.elementFromPoint(n.x,n.y)),o.show()),!r||r.type!=CKEDITOR.NODE_ELEMENT||!r.$||x.ie&&x.version<9&&!e.boundary.equals(r)&&!e.boundary.contains(r)?null:r},Z=CKEDITOR.dom.walker.whitespaces(),Q=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),J=function(){function o(t){var e,n,i;if(!T(l=t.element)||l.contains(t.editable)||l.isReadOnly())return null;if(e=(i=k(t,function(e,t){return!t.equals(e)},function(e,t){return Y(e,!0,t)},l)).upper,n=i.lower,d(t,e,n))return i.set(F,B);if(e&&l.contains(e))for(;!e.getParent().equals(l);)e=e.getParent();else e=l.getFirst(function(e){return c(t,e)});if(n&&l.contains(n))for(;!n.getParent().equals(l);)n=n.getParent();else n=l.getLast(function(e){return c(t,e)});if(!e||!n)return null;if(_(t,e),_(t,n),!(t.mouse.y>e.size.top&&t.mouse.y<n.size.bottom))return null;for(var o,r,s,a,l=Number.MAX_VALUE;n&&!n.equals(e)&&(r=e.getNext(t.isRelevant));)(o=Math.abs(h(t,e,r)-t.mouse.y))<l&&(l=o,s=e,a=r),_(t,e=r);return s&&a&&t.mouse.y>s.size.top&&t.mouse.y<a.size.bottom?(i.upper=s,i.lower=a,i.set(F,B)):null}function c(e,t){return!(t&&t.type==CKEDITOR.NODE_TEXT||Q(t)||C(t)||E(e,t)||t.type==CKEDITOR.NODE_ELEMENT&&t.$&&t.is("br"))}return function(e){var t,n=o(e);if(t=n){t=n.upper;var i=n.lower;t=!(!t||!i||C(i)||C(t)||i.equals(t)||t.equals(i)||i.contains(t)||t.contains(i))&&!!(I(e,t)&&I(e,i)&&d(e,t,i))}return t?n:null}}(),ee=["top","left","right","bottom"]}(),CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51,CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52,function(){function r(e){if(!e||e.type!=CKEDITOR.NODE_ELEMENT||"form"!=e.getName())return[];for(var t=[],n=["style","className"],i=0;i<n.length;i++){var o=e.$.elements.namedItem(n[i]);o&&(o=new CKEDITOR.dom.element(o),t.push([o,o.nextSibling]),o.remove())}return t}function s(e,t){if(e&&e.type==CKEDITOR.NODE_ELEMENT&&"form"==e.getName()&&0<t.length)for(var n=t.length-1;0<=n;n--){var i=t[n][0],o=t[n][1];o?i.insertBefore(o):i.appendTo(e)}}function f(e,t){var n=r(e),i={},o=e.$;return t||(i["class"]=o.className||"",o.className=""),i.inline=o.style.cssText||"",t||(o.style.cssText="position: static; overflow: visible"),s(n),i}function m(e,t){var n=r(e),i=e.$;"class"in t&&(i.className=t["class"]),"inline"in t&&(i.style.cssText=t.inline),s(n)}function p(e){if(!e.editable().isInline()){var t,n=CKEDITOR.instances;for(t in n){var i=n[t];"wysiwyg"==i.mode&&!i.readOnly&&((i=i.document.getBody()).setAttribute("contentEditable",!1),i.setAttribute("contentEditable",!0))}e.editable().hasFocus&&(e.toolbox.focus(),e.focus())}}CKEDITOR.plugins.add("maximize",{init:function(o){function r(){var e=u.getViewPaneSize();o.resize(e.width,e.height,null,!0)}if(o.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var s,a,l,c=o.lang,d=CKEDITOR.document,u=d.getWindow(),h=CKEDITOR.TRISTATE_OFF;o.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var e=o.container.getChild(1),t=o.ui.space("contents");if("wysiwyg"==o.mode){var n=o.getSelection();s=n&&n.getRanges(),a=u.getScrollPosition()}else{var i=o.editable().$;s=!CKEDITOR.env.ie&&[i.selectionStart,i.selectionEnd],a=[i.scrollLeft,i.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){for(u.on("resize",r),l=u.getScrollPosition(),n=o.container;n=n.getParent();)n.setCustomData("maximize_saved_styles",f(n)),n.setStyle("z-index",o.config.baseFloatZIndex-5);t.setCustomData("maximize_saved_styles",f(t,!0)),e.setCustomData("maximize_saved_styles",f(e,!0)),t={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0},d.getDocumentElement().setStyles(t),!CKEDITOR.env.gecko&&d.getDocumentElement().setStyle("position","fixed"),(!CKEDITOR.env.gecko||!CKEDITOR.env.quirks)&&d.getBody().setStyles(t),CKEDITOR.env.ie?setTimeout(function(){u.$.scrollTo(0,0)},0):u.$.scrollTo(0,0),e.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute"),e.$.offsetLeft,e.setStyles({"z-index":o.config.baseFloatZIndex-5,left:"0px",top:"0px"}),e.addClass("cke_maximized"),r(),t=e.getDocumentPosition(),e.setStyles({left:-1*t.x+"px",top:-1*t.y+"px"}),CKEDITOR.env.gecko&&p(o)}else if(this.state==CKEDITOR.TRISTATE_ON){for(u.removeListener("resize",r),t=[t,e],n=0;n<t.length;n++)m(t[n],t[n].getCustomData("maximize_saved_styles")),t[n].removeCustomData("maximize_saved_styles");for(n=o.container;n=n.getParent();)m(n,n.getCustomData("maximize_saved_styles")),n.removeCustomData("maximize_saved_styles");CKEDITOR.env.ie?setTimeout(function(){u.$.scrollTo(l.x,l.y)},0):u.$.scrollTo(l.x,l.y),e.removeClass("cke_maximized"),CKEDITOR.env.webkit&&(e.setStyle("display","inline"),setTimeout(function(){e.setStyle("display","block")},0)),o.fire("resize")}this.toggleState(),(n=this.uiItems[0])&&(t=this.state==CKEDITOR.TRISTATE_OFF?c.maximize.maximize:c.maximize.minimize,(n=CKEDITOR.document.getById(n._.id)).getChild(1).setHtml(t),n.setAttribute("title",t),n.setAttribute("href",'javascript:void("'+t+'");')),"wysiwyg"==o.mode?s?(CKEDITOR.env.gecko&&p(o),o.getSelection().selectRanges(s),(i=o.getSelection().getStartElement())&&i.scrollIntoView(!0)):u.$.scrollTo(a.x,a.y):(s&&(i.selectionStart=s[0],i.selectionEnd=s[1]),i.scrollLeft=a[0],i.scrollTop=a[1]),s=a=null,h=this.state,o.fire("maximize",this.state)},canUndo:!1}),o.ui.addButton&&o.ui.addButton("Maximize",{label:c.maximize.maximize,command:"maximize",toolbar:"tools,10"}),o.on("mode",function(){var e=o.getCommand("maximize");e.setState(e.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:h)},null,null,100)}}})}(),z={canUndo:!1,async:!0,exec:function(t){t.getClipboardData({title:t.lang.pastetext.title},function(e){e&&t.fire("paste",{type:"text",dataValue:e.dataValue}),t.fire("afterCommandExec",{name:"pastetext",command:z,returnValue:!!e})})}},CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(t){t.addCommand("pastetext",z),t.ui.addButton&&t.ui.addButton("PasteText",{label:t.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"}),t.config.forcePasteAsPlainText&&t.on("beforePaste",function(e){"html"!=e.data.type&&(e.data.type="text")}),t.on("pasteState",function(e){t.getCommand("pastetext").setState(e.data)})}}),function(){function a(e,t,n){var i=CKEDITOR.cleanWord;return i?n():(e=CKEDITOR.getUrl(e.config.pasteFromWordCleanupFile||t+"filter/default.js"),CKEDITOR.scriptLoader.load(e,n,null,!0)),!i}function e(e){e.data.type="html"}CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(o){var r=0,s=this.path;o.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(t){var n=this;r=1,t.once("beforePaste",e),t.getClipboardData({title:t.lang.pastefromword.title},function(e){e&&t.fire("paste",{type:"html",dataValue:e.dataValue}),t.fire("afterCommandExec",{name:"pastefromword",command:n,returnValue:!!e})})}}),o.ui.addButton&&o.ui.addButton("PasteFromWord",{label:o.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"}),o.on("pasteState",function(e){o.getCommand("pastefromword").setState(e.data)}),o.on("paste",function(e){var t=e.data,n=t.dataValue;if(n&&(r||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(n))){var i=a(o,s,function(){i?o.fire("paste",t):(!o.config.pasteFromWordPromptCleanup||r||confirm(o.lang.pastefromword.confirmCleanup))&&(t.dataValue=CKEDITOR.cleanWord(n,o))});i&&e.cancel()}},null,null,3)}})}(),CKEDITOR.plugins.add("removeformat",{init:function(e){e.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat),e.ui.addButton&&e.ui.addButton("RemoveFormat",{label:e.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}}),CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(r){for(var e,s=r._.removeFormatRegex||(r._.removeFormatRegex=RegExp("^(?:"+r.config.removeFormatTags.replace(/,/g,"|")+")$","i")),t=r._.removeAttributes||(r._.removeAttributes=r.config.removeFormatAttributes.split(",")),a=CKEDITOR.plugins.removeformat.filter,n=r.getSelection().getRanges(1),i=n.createIterator();e=i.getNextRange();){e.collapsed||e.enlarge(CKEDITOR.ENLARGE_ELEMENT);var o=e.createBookmark(),l=o.startNode,c=o.endNode,d=function(e){for(var t,n=r.elementPath(e),i=n.elements,o=1;(t=i[o])&&!t.equals(n.block)&&!t.equals(n.blockLimit);o++)s.test(t.getName())&&a(r,t)&&e.breakParent(t)};if(d(l),c)for(d(c),l=l.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);l&&!l.equals(c);)d=l.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),!("img"==l.getName()&&l.data("cke-realelement"))&&a(r,l)&&(s.test(l.getName())?l.remove(1):(l.removeAttributes(t),r.fire("removeFormatCleanup",l))),l=d;e.moveToBookmark(o)}r.forceNextSelectionCheck(),r.getSelection().selectRanges(n)}}},filter:function(e,t){for(var n=e._.removeFormatFilters||[],i=0;i<n.length;i++)if(!1===n[i](t))return!1;return!0}},CKEDITOR.editor.prototype.addRemoveFormatFilter=function(e){this._.removeFormatFilters||(this._.removeFormatFilters=[]),this._.removeFormatFilters.push(e)},
CKEDITOR.config.removeFormatTags="b,big,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var",CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign",function(){CKEDITOR.plugins.add("sourcearea",{init:function(n){function i(){this.hide(),this.setStyle("height",this.getParent().$.clientHeight+"px"),this.setStyle("width",this.getParent().$.clientWidth+"px"),this.show()}if(n.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var e=CKEDITOR.plugins.sourcearea;n.addMode("source",function(e){var t=n.ui.space("contents").getDocument().createElement("textarea");t.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",n.config.sourceAreaTabSize||4))),t.setAttribute("dir","ltr"),t.addClass("cke_source cke_reset cke_enable_context_menu"),n.ui.space("contents").append(t),(t=n.editable(new o(n,t))).setData(n.getData(1)),CKEDITOR.env.ie&&(t.attachListener(n,"resize",i,t),t.attachListener(CKEDITOR.document.getWindow(),"resize",i,t),CKEDITOR.tools.setTimeout(i,0,t)),n.fire("ariaWidget",this),e()}),n.addCommand("source",e.commands.source),n.ui.addButton&&n.ui.addButton("Source",{label:n.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"}),n.on("mode",function(){n.getCommand("source").setState("source"==n.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)})}}});var o=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(e){this.setValue(e),this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(e){this[(e?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){o.baseProto.detach.call(this),this.clearCustomData(),this.remove()}}})}(),CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(e){"wysiwyg"==e.mode&&e.fire("saveSnapshot"),e.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED),e.setMode("source"==e.mode?"wysiwyg":"source")},canUndo:!1}}},CKEDITOR.plugins.add("specialchar",{availableLangs:{ar:1,bg:1,ca:1,cs:1,cy:1,de:1,el:1,en:1,eo:1,es:1,et:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ku:1,lv:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ru:1,si:1,sk:1,sl:1,sq:1,sv:1,th:1,tr:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(t){var n=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js"),t.addCommand("specialchar",{exec:function(){var e=t.langCode;e=n.availableLangs[e]?e:n.availableLangs[e.replace(/-.*/,"")]?e.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(n.path+"dialogs/lang/"+e+".js"),function(){CKEDITOR.tools.extend(t.lang.specialchar,n.langEntries[e]),t.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:!1}),t.ui.addButton&&t.ui.addButton("SpecialChar",{label:t.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}}),CKEDITOR.config.specialChars="! &quot; # $ % &amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ &euro; &lsquo; &rsquo; &ldquo; &rdquo; &ndash; &mdash; &iexcl; &cent; &pound; &curren; &yen; &brvbar; &sect; &uml; &copy; &ordf; &laquo; &not; &reg; &macr; &deg; &sup2; &sup3; &acute; &micro; &para; &middot; &cedil; &sup1; &ordm; &raquo; &frac14; &frac12; &frac34; &iquest; &Agrave; &Aacute; &Acirc; &Atilde; &Auml; &Aring; &AElig; &Ccedil; &Egrave; &Eacute; &Ecirc; &Euml; &Igrave; &Iacute; &Icirc; &Iuml; &ETH; &Ntilde; &Ograve; &Oacute; &Ocirc; &Otilde; &Ouml; &times; &Oslash; &Ugrave; &Uacute; &Ucirc; &Uuml; &Yacute; &THORN; &szlig; &agrave; &aacute; &acirc; &atilde; &auml; &aring; &aelig; &ccedil; &egrave; &eacute; &ecirc; &euml; &igrave; &iacute; &icirc; &iuml; &eth; &ntilde; &ograve; &oacute; &ocirc; &otilde; &ouml; &divide; &oslash; &ugrave; &uacute; &ucirc; &uuml; &yacute; &thorn; &yuml; &OElig; &oelig; &#372; &#374 &#373 &#375; &sbquo; &#8219; &bdquo; &hellip; &trade; &#9658; &bull; &rarr; &rArr; &hArr; &diams; &asymp;".split(" "),CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){var t=function(t){var n=this._,e=n.menu;n.state!==CKEDITOR.TRISTATE_DISABLED&&(n.on&&e?e.hide():(n.previousState=n.state,e||((e=n.menu=new CKEDITOR.menu(t,{panel:{className:"cke_menu_panel",attributes:{"aria-label":t.lang.common.options}}})).onHide=CKEDITOR.tools.bind(function(){var e=this.command?t.getCommand(this.command).modes:this.modes;this.setState(!e||e[t.mode]?n.previousState:CKEDITOR.TRISTATE_DISABLED),n.on=0},this),this.onMenu&&e.addListener(this.onMenu)),this.setState(CKEDITOR.TRISTATE_ON),n.on=1,setTimeout(function(){e.show(CKEDITOR.document.getById(n.id),4)},0)))};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(e){delete e.panel,this.base(e),this.hasArrow=!0,this.click=t},statics:{handler:{create:function(e){return new CKEDITOR.ui.menuButton(e)}}}})},beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}}),CKEDITOR.UI_MENUBUTTON="menubutton",function(){function E(e,t){var n,i=0;for(n in t)if(t[n]==e){i=1;break}return i}var s="",i=function(){function i(){r.once("focus",t),r.once("blur",e)}function e(e){e=e.editor;var t=T.getScayt(e),n=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE;t&&(T.setPaused(e,!t.disabled),T.setControlId(e,t.id),t.destroy(!0),delete T.instances[e.name],n&&i())}var r=this,t=function(){if("undefined"==typeof T.instances[r.name]&&null==T.instances[r.name]){var e=r.config,t={};if(t.srcNodeRef="BODY"==r.editable().$.nodeName?r.document.getWindow().$.frameElement:r.editable().$,t.assocApp="CKEDITOR."+CKEDITOR.version+"@"+CKEDITOR.revision,t.customerid=e.scayt_customerid||"1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2",t.customDictionaryIds=e.scayt_customDictionaryIds||"",t.userDictionaryName=e.scayt_userDictionaryName||"",t.sLang=e.scayt_sLang||"en_US",t.onLoad=function(){CKEDITOR.env.ie&&CKEDITOR.env.version<8||this.addStyle(this.selectorCss(),"padding-bottom: 2px !important;"),r.editable().hasFocus&&!T.isControlRestored(r)&&this.focus()},"object"==typeof(e=window.scayt_custom_params))for(var n in e)t[n]=e[n];T.getControlId(r)&&(t.id=T.getControlId(r));var i=new window.scayt(t);i.afterMarkupRemove.push(function(e){new CKEDITOR.dom.element(e,i.document).mergeSiblings()}),(t=T.instances[r.name])&&(i.sLang=t.sLang,i.option(t.option()),i.paused=t.paused),T.instances[r.name]=i;try{i.setDisabled(!1===T.isPaused(r))}catch(o){}r.fire("showScaytState")}};r.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?i():r.on("contentDom",t),r.on("contentDomUnload",function(){for(var e=CKEDITOR.document.getElementsByTag("script"),t=/^dojoIoScript(\d+)$/i,n=/^https?:\/\/svc\.webspellchecker\.net\/spellcheck\/script\/ssrv\.cgi/i,i=0;i<e.count();i++){var o=e.getItem(i),r=o.getId(),s=o.getAttribute("src");r&&s&&r.match(t)&&s.match(n)&&o.remove()}}),r.on("beforeCommandExec",function(e){"source"==e.data.name&&"source"==r.mode&&T.markControlRestore(r)}),r.on("afterCommandExec",function(e){!T.isScaytEnabled(r)||"wysiwyg"!=r.mode||"undo"!=e.data.name&&"redo"!=e.data.name||(T.getScayt(r).setDisabled(!0),T.refresh_timeout&&window.clearTimeout(T.refresh_timeout),T.refresh_timeout=window.setTimeout(function(){T.getScayt(r).setDisabled(!1),T.getScayt(r).focus(),T.getScayt(r).refresh()},10))}),r.on("destroy",e),r.on("setData",e),r.on("insertElement",function(){var e=T.getScayt(r);T.isScaytEnabled(r)&&(CKEDITOR.env.ie&&r.getSelection().unlock(!0),window.setTimeout(function(){e.focus(),e.refresh()},10))},this,null,50),r.on("insertHtml",function(){var e=T.getScayt(r);T.isScaytEnabled(r)&&(CKEDITOR.env.ie&&r.getSelection().unlock(!0),window.setTimeout(function(){e.focus(),e.refresh()},10))},this,null,50),r.on("scaytDialog",function(e){e.data.djConfig=window.djConfig,e.data.scayt_control=T.getScayt(r),e.data.tab=s,e.data.scayt=window.scayt}),(n=(n=r.dataProcessor)&&n.htmlFilter)&&n.addRules({elements:{span:function(e){if(e.attributes["data-scayt_word"]&&e.attributes["data-scaytid"])return delete e.name,e}}});var n,o="function"==typeof(n=CKEDITOR.plugins.undo.Image.prototype).equalsContent?"equalsContent":"equals";n[o]=CKEDITOR.tools.override(n[o],function(o){return function(e){var t=this.contents,n=e.contents,i=T.getScayt(this.editor);return i&&T.isScaytReady(this.editor)&&(this.contents=i.reset(t)||"",e.contents=i.reset(n)||""),i=o.apply(this,arguments),this.contents=t,e.contents=n,i}}),(n=CKEDITOR.editor.prototype).checkDirty=CKEDITOR.tools.override(n.checkDirty,function(t){return function(){var e=T.getScayt(this);return e&&T.isScaytReady(this)?e.reset(this.getSnapshot())!==(e=e.reset(this._.previousValue)):t.apply(this)}}),r.document&&(r.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE||r.focusManager.hasFocus)&&t()};CKEDITOR.plugins.scayt={engineLoaded:!1,instances:{},controlInfo:{},setControlInfo:function(e,t){for(var n in e&&e.name&&"object"!=typeof this.controlInfo[e.name]&&(this.controlInfo[e.name]={}),t)this.controlInfo[e.name][n]=t[n]},isControlRestored:function(e){return!!(e&&e.name&&this.controlInfo[e.name])&&this.controlInfo[e.name].restored},markControlRestore:function(e){this.setControlInfo(e,{restored:!0})},setControlId:function(e,t){this.setControlInfo(e,{id:t})},getControlId:function(e){return e&&e.name&&this.controlInfo[e.name]&&this.controlInfo[e.name].id?this.controlInfo[e.name].id:null},setPaused:function(e,t){this.setControlInfo(e,{paused:t})},isPaused:function(e){if(e&&e.name&&this.controlInfo[e.name])return this.controlInfo[e.name].paused},getScayt:function(e){return this.instances[e.name]},isScaytReady:function(e){return!0===this.engineLoaded&&"undefined"!=typeof window.scayt&&this.getScayt(e)},isScaytEnabled:function(e){return!!(e=this.getScayt(e))&&!1===e.disabled},getUiTabs:function(e){var t,n=[];(t=(t=e.config.scayt_uiTabs||"1,1,1").split(","))[3]="1";for(var i=0;i<4;i++)n[i]="undefined"!=typeof window.scayt&&"undefined"!=typeof window.scayt.uiTags?parseInt(t[i],10)&&window.scayt.uiTags[i]:parseInt(t[i],10);return"object"==typeof e.plugins.wsc?n.push(1):n.push(0),n},loadEngine:function(e){if(CKEDITOR.env.gecko&&CKEDITOR.env.version<10900||CKEDITOR.env.opera||CKEDITOR.env.air)return e.fire("showScaytState");if(!0===this.engineLoaded)return i.apply(e);if(-1==this.engineLoaded)return CKEDITOR.on("scaytReady",function(){i.apply(e)});CKEDITOR.on("scaytReady",i,e),CKEDITOR.on("scaytReady",function(){this.engineLoaded=!0},this,null,0);var t=(this.engineLoaded=-1)!=(t=document.location.protocol).search(/https?:/)?t:"http:",n=(t=e.config.scayt_srcUrl||t+"//svc.webspellchecker.net/scayt26/loader__base.js",T.parseUrl(t).path+"/");return null==window.scayt?(CKEDITOR._djScaytConfig={baseUrl:n,addOnLoad:[function(){CKEDITOR.fireOnce("scaytReady")}],isDebug:!1},CKEDITOR.document.getHead().append(CKEDITOR.document.createElement("script",{attributes:{type:"text/javascript",async:"true",src:t}}))):CKEDITOR.fireOnce("scaytReady"),null},parseUrl:function(e){var t;return e.match&&(t=e.match(/(.*)[\/\\](.*?\.\w+)$/))?{path:t[1],file:t[2]}:e}};var T=CKEDITOR.plugins.scayt,C=function(e,t,n,i,o,r,s){e.addCommand(i,o),e.addMenuItem(i,{label:n,command:i,group:r,order:s})},o={preserveState:!0,editorFocus:!1,canUndo:!1,exec:function(e){if(T.isScaytReady(e)){var t=T.isScaytEnabled(e);this.setState(t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_ON),(e=T.getScayt(e)).focus(),e.setDisabled(t)}else!e.config.scayt_autoStartup&&0<=T.engineLoaded&&(e.focus(),this.setState(CKEDITOR.TRISTATE_DISABLED),T.loadEngine(e))}};CKEDITOR.plugins.add("scayt",{requires:"menubutton,dialog",beforeInit:function(e){var t=e.config.scayt_contextMenuItemsOrder||"suggest|moresuggest|control",n="";if((t=t.split("|"))&&t.length)for(var i=0;i<t.length;i++)n+="scayt_"+t[i]+(t.length!=parseInt(i,10)+1?",":"");e.config.menu_groups=n+","+e.config.menu_groups},checkEnvironment:function(){return CKEDITOR.env.opera||CKEDITOR.env.air?0:1},init:function(f){var e=f.dataProcessor&&f.dataProcessor.dataFilter,t={elements:{span:function(e){var t=e.attributes;t&&t["data-scaytid"]&&delete e.name}}};e&&e.addRules(t);var m={},p={},n=f.addCommand("scaytcheck",o);CKEDITOR.dialog.add("scaytcheck",CKEDITOR.getUrl(this.path+"dialogs/options.js")),e=T.getUiTabs(f),f.addMenuGroup("scaytButton"),f.addMenuGroup("scayt_suggest",-10),f.addMenuGroup("scayt_moresuggest",-9),f.addMenuGroup("scayt_control",-8);t={};var g=f.lang.scayt;t.scaytToggle={label:g.enable,command:"scaytcheck",group:"scaytButton"},1==e[0]&&(t.scaytOptions={label:g.options,group:"scaytButton",onClick:function(){s="options",f.openDialog("scaytcheck")}}),1==e[1]&&(t.scaytLangs={label:g.langs,group:"scaytButton",onClick:function(){s="langs",f.openDialog("scaytcheck")}}),1==e[2]&&(t.scaytDict={label:g.dictionariesTab,group:"scaytButton",onClick:function(){s="dictionaries",f.openDialog("scaytcheck")}}),t.scaytAbout={label:f.lang.scayt.about,group:"scaytButton",onClick:function(){s="about",f.openDialog("scaytcheck")}},1==e[4]&&(t.scaytWSC={label:f.lang.wsc.toolbar,group:"scaytButton",command:"checkspell"}),f.addMenuItems(t),f.ui.add("Scayt",CKEDITOR.UI_MENUBUTTON,{label:g.title,title:CKEDITOR.env.opera?g.opera_title:g.title,modes:{wysiwyg:this.checkEnvironment()},toolbar:"spellchecker,20",onRender:function(){n.on("state",function(){this.setState(n.state)},this)},onMenu:function(){var e=T.isScaytEnabled(f);f.getMenuItem("scaytToggle").label=g[e?"disable":"enable"];var t=T.getUiTabs(f);return{scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:e&&t[0]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytLangs:e&&t[1]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:e&&t[2]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:e&&t[3]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytWSC:t[4]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}}),f.contextMenu&&f.addMenuItems&&f.contextMenu.addListener(function(e,t){if(!T.isScaytEnabled(f)||t.getRanges()[0].checkReadOnly())return null;var n=T.getScayt(f),i=n.getScaytNode();if(!i)return null;if(!(a=n.getWord(i)))return null;var o,r=n.getLang(),s=f.config.scayt_contextCommands||"all",a=window.scayt.getSuggestion(a,r);s=s.split("|");for(o in m)delete f._.menuItems[o],delete f.commands[o];for(o in p)delete f._.menuItems[o],delete f.commands[o];if(a&&a.length){m={},p={},o=f.config.scayt_moreSuggestions||"on";r=!1;var l=f.config.scayt_maxSuggestions;"number"!=typeof l&&(l=5),!l&&(l=a.length);for(var c=0,d=a.length;c<d;c+=1){var u="scayt_suggestion_"+a[c].replace(" ","_"),h=function(e,t){return{exec:function(){n.replace(e,t)}}}(i,a[c]);c<l?(C(f,"button_"+u,a[c],u,h,"scayt_suggest",c+1),p[u]=CKEDITOR.TRISTATE_OFF):"on"==o&&(C(f,"button_"+u,a[c],u,h,"scayt_moresuggest",c+1),m[u]=CKEDITOR.TRISTATE_OFF,r=!0)}r&&(f.addMenuItem("scayt_moresuggest",{label:g.moreSuggestions,group:"scayt_moresuggest",order:10,getItems:function(){return m}}),p.scayt_moresuggest=CKEDITOR.TRISTATE_OFF)}else C(f,"no_sugg",g.noSuggestions,"scayt_no_sugg",{exec:function(){}},"scayt_control",1,!0),p.scayt_no_sugg=CKEDITOR.TRISTATE_OFF;return(E("all",s)||E("ignore",s))&&(C(f,"ignore",g.ignore,"scayt_ignore",{exec:function(){n.ignore(i)}},"scayt_control",2),p.scayt_ignore=CKEDITOR.TRISTATE_OFF),(E("all",s)||E("ignoreall",s))&&(C(f,"ignore_all",g.ignoreAll,"scayt_ignore_all",{exec:function(){n.ignoreAll(i)}},"scayt_control",3),p.scayt_ignore_all=CKEDITOR.TRISTATE_OFF),(E("all",s)||E("add",s))&&(C(f,"add_word",g.addWord,"scayt_add_word",{exec:function(){window.scayt.addWordToUserDictionary(i)}},"scayt_control",4),p.scayt_add_word=CKEDITOR.TRISTATE_OFF),n.fireOnContextMenu&&n.fireOnContextMenu(f),p}),e=function(e){e.removeListener(),CKEDITOR.env.opera||CKEDITOR.env.air?n.setState(CKEDITOR.TRISTATE_DISABLED):n.setState(T.isScaytEnabled(f)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},f.on("showScaytState",e),f.on("instanceReady",e),f.config.scayt_autoStartup&&f.on("instanceReady",function(){T.loadEngine(f)})},afterInit:function(e){var t,n=function(e){if(e.hasAttribute("data-scaytid"))return!1};e._.elementsPath&&(t=e._.elementsPath.filters)&&t.push(n),e.addRemoveFormatFilter&&e.addRemoveFormatFilter(n)}})}(),CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(r){var s=r.config,a=r.lang.stylescombo,l={},c=[],d=[];r.on("stylesSet",function(e){if(e=e.data.styles){for(var t,n,i=0,o=e.length;i<o;i++)t=e[i],r.blockless&&t.element in CKEDITOR.dtd.$block||(n=t.name,t=new CKEDITOR.style(t),r.filter.customConfig&&!r.filter.check(t))||(t._name=n,t._.enterMode=s.enterMode,t._.weight=i+1e3*(t.type==CKEDITOR.STYLE_OBJECT?1:t.type==CKEDITOR.STYLE_BLOCK?2:3),l[n]=t,c.push(t),d.push(t));c.sort(function(e,t){return e._.weight-t._.weight})}}),r.ui.addRichCombo("Styles",{label:a.label,title:a.panelTitle,toolbar:"styles,10",allowedContent:d,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(s.contentsCss),multiSelect:!0,attributes:{"aria-label":a.panelTitle}},init:function(){var e,t,n,i,o,r;for(o=0,r=c.length;o<r;o++)t=(e=c[o])._name,(i=e.type)!=n&&(this.startGroup(a["panelTitle"+i]),n=i),this.add(t,e.type==CKEDITOR.STYLE_OBJECT?t:e.buildPreview(),t);this.commit()},onClick:function(e){r.focus(),r.fire("saveSnapshot"),e=l[e];var t=r.elementPath();r[e.checkActive(t)?"removeStyle":"applyStyle"](e),r.fire("saveSnapshot")},onRender:function(){r.on("selectionChange",function(e){for(var t,n=this.getValue(),i=0,o=(e=e.data.path.elements).length;i<o;i++)for(var r in t=e[i],l)if(l[r].checkElementRemovable(t,!0))return void(r!=n&&this.setValue(r));this.setValue("")},this)},onOpen:function(){var e=r.getSelection().getSelectedElement(),t=(e=r.elementPath(e),[0,0,0,0]);for(var n in this.showAll(),this.unmarkAll(),l){var i=l[n],o=i.type;i.checkApplicable(e,r.activeFilter)?t[o]++:this.hideItem(n),i.checkActive(e)&&this.mark(n)}t[CKEDITOR.STYLE_BLOCK]||this.hideGroup(a["panelTitle"+CKEDITOR.STYLE_BLOCK]),t[CKEDITOR.STYLE_INLINE]||this.hideGroup(a["panelTitle"+CKEDITOR.STYLE_INLINE]),t[CKEDITOR.STYLE_OBJECT]||this.hideGroup(a["panelTitle"+CKEDITOR.STYLE_OBJECT])},refresh:function(){var e=r.elementPath();if(e){for(var t in l)if(l[t].checkApplicable(e,r.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){l={},c=[]}})}}),function(){function o(a){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(e){if(e.editable().hasFocus){var t,n=e.getSelection();if(t=new CKEDITOR.dom.elementPath(n.getCommonAncestor(),n.root).contains({td:1,th:1},1)){n=e.createRange();if((o=CKEDITOR.tools.tryThese(function(){var e=t.getParent().$.cells[t.$.cellIndex+(a?-1:1)];return e.parentNode.parentNode,e},function(){var e;return(e=(e=t.getParent()).getAscendant("table").$.rows[e.$.rowIndex+(a?-1:1)]).cells[a?e.cells.length-1:0]}))||a){if(!o)return!0;o=new CKEDITOR.dom.element(o),n.moveToElementEditStart(o),(!n.checkStartOfBlock()||!n.checkEndOfBlock())&&n.selectNodeContents(o)}else{for(var i=t.getAscendant("table").$,o=t.getParent().$.cells,r=(i=new CKEDITOR.dom.element(i.insertRow(-1),e.document),0),s=o.length;r<s;r++)i.append(new CKEDITOR.dom.element(o[r],e.document).clone(!1,!1)).appendBogus();n.moveToElementEditStart(i)}return n.select(!0),!0}}return!1}}}var r={editorFocus:!1,modes:{wysiwyg:1,source:1}},s={exec:function(e){e.container.focusNext(!0,e.tabIndex)}},a={exec:function(e){e.container.focusPrevious(!0,e.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(t){for(var e=!1!==t.config.enableTabKeyTools,n=t.config.tabSpaces||0,i="";n--;)i+="\xa0";i&&t.on("key",function(e){9==e.data.keyCode&&(t.insertHtml(i),e.cancel())}),e&&t.on("key",function(e){(9==e.data.keyCode&&t.execCommand("selectNextCell")||e.data.keyCode==CKEDITOR.SHIFT+9&&t.execCommand("selectPreviousCell"))&&e.cancel()}),t.addCommand("blur",CKEDITOR.tools.extend(s,r)),t.addCommand("blurBack",CKEDITOR.tools.extend(a,r)),t.addCommand("selectNextCell",o()),t.addCommand("selectPreviousCell",o(!0))}})}(),CKEDITOR.dom.element.prototype.focusNext=function(e,t){var n,i,o,r,s,a,l=void 0===t?this.getTabIndex():t;if(l<=0)for(s=this.getNextSourceNode(e,CKEDITOR.NODE_ELEMENT);s;){if(s.isVisible()&&0===s.getTabIndex()){o=s;break}s=s.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(s=this.getDocument().getBody().getFirst();s=s.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!n)if(!i&&s.equals(this)){if(i=!0,e){if(!(s=s.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;n=1}}else i&&!this.contains(s)&&(n=1);if(s.isVisible()&&!((a=s.getTabIndex())<0)){if(n&&a==l){o=s;break}l<a&&(!o||!r||a<r)?(o=s,r=a):!o&&0===a&&(o=s,r=a)}}o&&o.focus()},CKEDITOR.dom.element.prototype.focusPrevious=function(e,t){for(var n,i,o,r,s=void 0===t?this.getTabIndex():t,a=0,l=this.getDocument().getBody().getLast();l=l.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!n)if(!i&&l.equals(this)){if(i=!0,e){if(!(l=l.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;n=1}}else i&&!this.contains(l)&&(n=1);if(l.isVisible()&&!((r=l.getTabIndex())<0))if(s<=0){if(n&&0===r){o=l;break}a<r&&(o=l,a=r)}else{if(n&&r==s){o=l;break}r<s&&(!o||a<r)&&(o=l,a=r)}}o&&o.focus()},CKEDITOR.plugins.add("table",{requires:"dialog",init:function(e){function t(e){return CKEDITOR.tools.extend(e||{},{contextSensitive:1,refresh:function(e,t){this.setState(t.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!e.blockless){var n=e.lang.table;e.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];"+(e.plugins.dialogadvtab?"table"+e.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"]]})),e.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",t())),e.addCommand("tableDelete",t({exec:function(e){var t=e.elementPath().contains("table",1);if(t){var n=t.getParent();1==n.getChildCount()&&!n.is("body","td","th")&&(t=n),(e=e.createRange()).moveToPosition(t,CKEDITOR.POSITION_BEFORE_START),t.remove(),e.select()}}})),e.ui.addButton&&e.ui.addButton("Table",{label:n.toolbar,command:"table",toolbar:"insert,30"}),CKEDITOR.dialog.add("table",this.path+"dialogs/table.js"),CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js"),e.addMenuItems&&e.addMenuItems({table:{label:n.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:n.deleteTable,command:"tableDelete",group:"table",order:1}}),e.on("doubleclick",function(e){e.data.element.is("table")&&(e.data.dialog="tableProperties")}),e.contextMenu&&e.contextMenu.addListener(function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}})}}}),function(){function O(e){function t(e){!(0<n.length)&&e.type==CKEDITOR.NODE_ELEMENT&&m.test(e.getName())&&!e.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(i,e,"selected_cell",!0),n.push(e))}e=e.getRanges();for(var n=[],i={},o=0;o<e.length;o++){var r,s;if((r=e[o]).collapsed)(r=(r=r.getCommonAncestor()).getAscendant("td",!0)||r.getAscendant("th",!0))&&n.push(r);else for((r=new CKEDITOR.dom.walker(r)).guard=t;s=r.next();)s.type==CKEDITOR.NODE_ELEMENT&&s.is(CKEDITOR.dtd.table)||(s=s.getAscendant("td",!0)||s.getAscendant("th",!0))&&!s.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(i,s,"selected_cell",!0),n.push(s))}return CKEDITOR.dom.element.clearAllMarkers(i),n}function o(e,t){var n=(i=(s=O(e))[0]).getAscendant("table"),i=i.getDocument(),o=(a=s[0].getParent()).$.rowIndex,r=(s=s[s.length-1]).getParent().$.rowIndex+s.$.rowSpan-1,s=new CKEDITOR.dom.element(n.$.rows[r]),a=(o=t?o:r,t?a:s);for(n=(s=CKEDITOR.tools.buildTableMap(n))[o],o=t?s[o-1]:s[o+1],s=s[0].length,i=i.createElement("tr"),r=0;n[r]&&r<s;r++){var l;1<n[r].rowSpan&&o&&n[r]==o[r]?(l=n[r]).rowSpan+=1:((l=new CKEDITOR.dom.element(n[r]).clone()).removeAttribute("rowSpan"),l.appendBogus(),i.append(l),l=l.$),r+=l.colSpan-1}t?i.insertBefore(a):i.insertAfter(a)}function u(e){if(e instanceof CKEDITOR.dom.selection){for(var t=(o=O(e))[0].getAscendant("table"),n=CKEDITOR.tools.buildTableMap(t),i=(e=o[0].getParent().$.rowIndex,(o=o[o.length-1]).getParent().$.rowIndex+o.$.rowSpan-1),o=[],r=e;r<=i;r++){for(var s=n[r],a=new CKEDITOR.dom.element(t.$.rows[r]),l=0;l<s.length;l++){var c=new CKEDITOR.dom.element(s[l]),d=c.getParent().$.rowIndex;1==c.$.rowSpan?c.remove():(c.$.rowSpan-=1,d==r&&((d=n[r+1])[l-1]?c.insertAfter(new CKEDITOR.dom.element(d[l-1])):new CKEDITOR.dom.element(t.$.rows[r+1]).append(c,1))),l+=c.$.colSpan-1}o.push(a)}for(n=t.$.rows,t=new CKEDITOR.dom.element(n[i+1]||(0<e?n[e-1]:null)||t.$.parentNode),r=o.length;0<=r;r--)u(o[r]);return t}return e instanceof CKEDITOR.dom.element&&(1==(t=e.getAscendant("table")).$.rows.length?t.remove():e.remove()),null}function l(e,t){for(var n=t?Infinity:0,i=0;i<e.length;i++){for(var o,r=t,s=(o=e[i]).getParent().$.cells,a=0,l=0;l<s.length;l++){var c=s[l];a=a+(r?1:c.colSpan);if(c==o.$)break}o=a-1,(t?o<n:n<o)&&(n=o)}return n}function r(e,t){for(var n=(o=O(e))[0].getAscendant("table"),i=l(o,1),o=l(o),r=(i=t?i:o,CKEDITOR.tools.buildTableMap(n)),s=(n=[],o=[],r.length),a=0;a<s;a++)n.push(r[a][i]),o.push(t?r[a][i-1]:r[a][i+1]);for(a=0;a<s;a++)n[a]&&(1<n[a].colSpan&&o[a]==n[a]?(i=n[a]).colSpan+=1:((i=new CKEDITOR.dom.element(n[a]).clone()).removeAttribute("colSpan"),i.appendBogus(),i[t?"insertBefore":"insertAfter"].call(i,new CKEDITOR.dom.element(n[a])),i=i.$),a+=i.rowSpan-1)}function s(e,t){var n=e.getStartElement();if(n=n.getAscendant("td",1)||n.getAscendant("th",1)){var i=n.clone();i.appendBogus(),t?i.insertBefore(n):i.insertAfter(n)}}function a(e){if(e instanceof CKEDITOR.dom.selection){var t,n=(e=O(e))[0]&&e[0].getAscendant("table");e:{var i=0;t=e.length-1;for(var o,r,s={};o=e[i++];)CKEDITOR.dom.element.setMarker(s,o,"delete_cell",!0);for(i=0;o=e[i++];)if((r=o.getPrevious())&&!r.getCustomData("delete_cell")||(r=o.getNext())&&!r.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(s),t=r;break e}CKEDITOR.dom.element.clearAllMarkers(s),t=(r=(r=e[0].getParent()).getPrevious())?r.getLast():(r=(r=e[t].getParent()).getNext())?r.getChild(0):null}for(r=e.length-1;0<=r;r--)a(e[r]);t?h(t,!0):n&&n.remove()}else e instanceof CKEDITOR.dom.element&&(1==(n=e.getParent()).getChildCount()?n.remove():e.remove())}function h(e,t){var n=e.getDocument(),i=CKEDITOR.document;CKEDITOR.env.ie&&CKEDITOR.env.version<11&&(i.focus(),n.focus()),(n=new CKEDITOR.dom.range(n))["moveToElementEdit"+(t?"End":"Start")](e)||(n.selectNodeContents(e),n.collapse(!t)),n.select(!0)}function b(e,t,n){if(e=e[t],void 0===n)return e;for(t=0;e&&t<e.length;t++){if(n.is&&e[t]==n.$)return t;if(t==n)return new CKEDITOR.dom.element(e[t])}return n.is?-1:null}function c(e,t,n){var i,o,r=O(e);if((t?1!=r.length:r.length<2)||(i=e.getCommonAncestor())&&i.type==CKEDITOR.NODE_ELEMENT&&i.is("table"))return!1;i=(e=r[0]).getAscendant("table");var s=CKEDITOR.tools.buildTableMap(i),a=s.length,l=s[0].length,c=e.getParent().$.rowIndex,d=b(s,c,e);if(t){var u;try{var h=parseInt(e.getAttribute("rowspan"),10)||1;o=parseInt(e.getAttribute("colspan"),10)||1,u=s["up"==t?c-h:"down"==t?c+h:c]["left"==t?d-o:"right"==t?d+o:d]}catch(I){return!1}if(!u||e.$==u)return!1;r["up"==t||"left"==t?"unshift":"push"](new CKEDITOR.dom.element(u))}t=e.getDocument();var f=c,m=(h=u=0,!n&&new CKEDITOR.dom.documentFragment(t)),p=0;for(t=0;t<r.length;t++){var g=(o=r[t]).getParent(),E=o.getFirst(),T=o.$.colSpan,C=o.$.rowSpan,v=b(s,g=g.$.rowIndex,o);p=p+T*C,h=Math.max(h,v-d+T);u=Math.max(u,g-c+C),n||((C=(T=o).getBogus())&&C.remove(),T.trim(),o.getChildren().count()&&(g==f||!E||E.isBlockBoundary&&E.isBlockBoundary({br:1})||(f=m.getLast(CKEDITOR.dom.walker.whitespaces(!0)))&&(!f.is||!f.is("br"))&&m.append("br"),o.moveChildren(m)),t?o.remove():o.setHtml("")),f=g}if(n)return u*h==p;for(m.moveChildren(e),e.appendBogus(),l<=h?e.removeAttribute("rowSpan"):e.$.rowSpan=u,a<=u?e.removeAttribute("colSpan"):e.$.colSpan=h,t=(r=(n=new CKEDITOR.dom.nodeList(i.$.rows)).count())-1;0<=t;t--)(i=n.getItem(t)).$.cells.length||(i.remove(),r++);return e}function d(e,t){if(1<(n=O(e)).length)return!1;if(t)return!0;var n,i,o=(l=(n=n[0]).getParent()).getAscendant("table"),r=b(c=CKEDITOR.tools.buildTableMap(o),d=l.$.rowIndex,n);if(1<(a=n.$.rowSpan)){i=Math.ceil(a/2);for(var s,a=Math.floor(a/2),l=d+i,c=(o=new CKEDITOR.dom.element(o.$.rows[l]),b(c,l)),d=(l=n.clone(),0);d<c.length;d++){if((s=c[d]).parentNode==o.$&&r<d){l.insertBefore(new CKEDITOR.dom.element(s));break}s=null}s||o.append(l,!0)}else for(a=i=1,(o=l.clone()).insertAfter(l),o.append(l=n.clone()),s=b(c,d),r=0;r<s.length;r++)s[r].rowSpan++;return l.appendBogus(),n.$.rowSpan=i,l.$.rowSpan=a,1==i&&n.removeAttribute("rowSpan"),1==a&&l.removeAttribute("rowSpan"),l}function f(e,t){if(1<(n=O(e)).length)return!1;if(t)return!0;var n,i=(n=n[0]).getParent(),o=i.getAscendant("table"),r=b(o=CKEDITOR.tools.buildTableMap(o),i.$.rowIndex,n);if(1<(s=n.$.colSpan))i=Math.ceil(s/2),s=Math.floor(s/2);else{for(var s=i=1,a=[],l=0;l<o.length;l++){var c=o[l];a.push(c[r]),1<c[r].rowSpan&&(l+=c[r].rowSpan-1)}for(o=0;o<a.length;o++)a[o].colSpan++}return(o=n.clone()).insertAfter(n),o.appendBogus(),n.$.colSpan=i,o.$.colSpan=s,1==i&&n.removeAttribute("colSpan"),1==s&&o.removeAttribute("colSpan"),o}var m=/^(?:td|th)$/;CKEDITOR.plugins.tabletools={requires:"table,dialog,contextmenu",init:function(i){function e(e){return CKEDITOR.tools.extend(e||{},{contextSensitive:1,refresh:function(e,t){this.setState(t.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function t(e,t){var n=i.addCommand(e,t);i.addFeature(n)}var n=i.lang.table;t("cellProperties",new CKEDITOR.dialogCommand("cellProperties",e({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",requiredContent:"table"}))),CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js"),t("rowDelete",e({requiredContent:"table",exec:function(e){h(u(e=e.getSelection()))}})),t("rowInsertBefore",e({requiredContent:"table",exec:function(e){o(e=e.getSelection(),!0)}})),t("rowInsertAfter",e({requiredContent:"table",exec:function(e){o(e=e.getSelection())}})),t("columnDelete",e({requiredContent:"table",exec:function(e){for(var t,n,i=(e=O(e=e.getSelection()))[0],o=e[e.length-1],r=(e=i.getAscendant("table"),CKEDITOR.tools.buildTableMap(e)),s=[],a=0,l=r.length;a<l;a++)for(var c=0,d=r[a].length;c<d;c++)r[a][c]==i.$&&(t=c),r[a][c]==o.$&&(n=c);for(a=t;a<=n;a++)for(c=0;c<r.length;c++)o=r[c],i=new CKEDITOR.dom.element(e.$.rows[c]),(o=new CKEDITOR.dom.element(o[a])).$&&(1==o.$.colSpan?o.remove():o.$.colSpan-=1,c+=o.$.rowSpan-1,i.$.cells.length||s.push(i));n=e.$.rows[0]&&e.$.rows[0].cells,t=new CKEDITOR.dom.element(n[t]||(t?n[t-1]:e.$.parentNode)),s.length==l&&e.remove(),t&&h(t,!0)}})),t("columnInsertBefore",e({requiredContent:"table",exec:function(e){r(e=e.getSelection(),!0)}})),t("columnInsertAfter",e({requiredContent:"table",exec:function(e){r(e=e.getSelection())}})),t("cellDelete",e({requiredContent:"table",exec:function(e){a(e=e.getSelection())}})),t("cellMerge",e({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(e){h(c(e.getSelection()),!0)}})),t("cellMergeRight",e({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(e){h(c(e.getSelection(),"right"),!0)}})),t("cellMergeDown",e({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(e){h(c(e.getSelection(),"down"),!0)}})),t("cellVerticalSplit",e({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(e){h(d(e.getSelection()))}})),t("cellHorizontalSplit",e({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(e){h(f(e.getSelection()))}})),t("cellInsertBefore",e({requiredContent:"table",exec:function(e){s(e=e.getSelection(),!0)}})),t("cellInsertAfter",e({requiredContent:"table",exec:function(e){s(e=e.getSelection())}})),i.addMenuItems&&i.addMenuItems({tablecell:{label:n.cell.menu,group:"tablecell",order:1,getItems:function(){var e=i.getSelection(),t=O(e);return{tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:c(e,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:c(e,"right",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:c(e,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:d(e,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:f(e,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,
tablecell_properties:0<t.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}},tablecell_insertBefore:{label:n.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:n.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:n.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:n.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:n.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:n.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:n.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:n.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:n.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:n.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:n.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:n.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:n.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:n.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:n.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:n.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:n.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}}),i.contextMenu&&i.contextMenu.addListener(function(e,t,n){return(e=n.contains({td:1,th:1},1))&&!e.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null})},getSelectedCells:O},CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)}(),CKEDITOR.tools.buildTableMap=function(e){e=e.$.rows;for(var t=-1,n=[],i=0;i<e.length;i++){!n[++t]&&(n[t]=[]);for(var o=-1,r=0;r<e[i].cells.length;r++){var s=e[i].cells[r];for(o++;n[t][o];)o++;for(var a=isNaN(s.colSpan)?1:s.colSpan,l=(s=isNaN(s.rowSpan)?1:s.rowSpan,0);l<s;l++){n[t+l]||(n[t+l]=[]);for(var c=0;c<a;c++)n[t+l][o+c]=e[i].cells[r]}o+=a-1}}return n},function(){function s(e){this.editor=e,this.reset()}CKEDITOR.plugins.add("undo",{init:function(e){function t(e){i.enabled&&!1!==e.data.command.canUndo&&i.save()}function n(){i.enabled=!e.readOnly&&"wysiwyg"==e.mode,i.onChange()}var i=e.undoManager=new s(e),o=e.addCommand("undo",{exec:function(){i.undo()&&(e.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),r=e.addCommand("redo",{exec:function(){i.redo()&&(e.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});e.setKeystroke([[CKEDITOR.CTRL+90,"undo"],[CKEDITOR.CTRL+89,"redo"],[CKEDITOR.CTRL+CKEDITOR.SHIFT+90,"redo"]]),i.onChange=function(){o.setState(i.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),r.setState(i.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},e.on("beforeCommandExec",t),e.on("afterCommandExec",t),e.on("saveSnapshot",function(e){i.save(e.data&&e.data.contentOnly)}),e.on("contentDom",function(){e.editable().on("keydown",function(e){(8==(e=e.data.getKey())||46==e)&&i.type(e,0)}),e.editable().on("keypress",function(e){i.type(e.data.getKey(),1)})}),e.on("beforeModeUnload",function(){"wysiwyg"==e.mode&&i.save(!0)}),e.on("mode",n),e.on("readOnly",n),e.ui.addButton&&(e.ui.addButton("Undo",{label:e.lang.undo.undo,command:"undo",toolbar:"undo,10"}),e.ui.addButton("Redo",{label:e.lang.undo.redo,command:"redo",toolbar:"undo,20"})),e.resetUndo=function(){i.reset(),e.fire("saveSnapshot")},e.on("updateSnapshot",function(){i.currentImage&&i.update()}),e.on("lockSnapshot",function(e){i.lock(e.data&&e.data.dontUpdate)}),e.on("unlockSnapshot",i.unlock,i)}}),CKEDITOR.plugins.undo={};var a=CKEDITOR.plugins.undo.Image=function(e,t){(this.editor=e).fire("beforeUndoImage");var n=e.getSnapshot();CKEDITOR.env.ie&&n&&(n=n.replace(/\s+data-cke-expando=".*?"/g,"")),this.contents=n,t||(this.bookmarks=(n=n&&e.getSelection())&&n.createBookmarks2(!0)),e.fire("afterUndoImage")},n=/\b(?:href|src|name)="[^"]*?"/gi;a.prototype={equalsContent:function(e){var t=this.contents;e=e.contents;return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&(t=t.replace(n,""),e=e.replace(n,"")),t==e},equalsSelection:function(e){var t=this.bookmarks;e=e.bookmarks;if(t||e){if(!t||!e||t.length!=e.length)return!1;for(var n=0;n<t.length;n++){var i=t[n],o=e[n];if(i.startOffset!=o.startOffset||i.endOffset!=o.endOffset||!CKEDITOR.tools.arrayCompare(i.start,o.start)||!CKEDITOR.tools.arrayCompare(i.end,o.end))return!1}}return!0}},s.prototype={type:function(e,t){var n=!t&&e!=this.lastKeystroke,i=this.editor;if(!this.typing||t&&!this.wasCharacter||n){var o=new a(i),r=this.snapshots.length;CKEDITOR.tools.setTimeout(function(){var e=i.getSnapshot();CKEDITOR.env.ie&&(e=e.replace(/\s+data-cke-expando=".*?"/g,"")),o.contents!=e&&r==this.snapshots.length&&(this.typing=!0,this.save(!1,o,!1)||this.snapshots.splice(this.index+1,this.snapshots.length-this.index-1),this.hasUndo=!0,this.hasRedo=!1,this.modifiersCount=this.typesCount=1,this.onChange())},0,this)}this.lastKeystroke=e,(this.wasCharacter=t)?(this.modifiersCount=0,this.typesCount++,25<this.typesCount?(this.save(!1,null,!1),this.typesCount=1):setTimeout(function(){i.fire("change")},0)):(this.typesCount=0,this.modifiersCount++,25<this.modifiersCount?(this.save(!1,null,!1),this.modifiersCount=1):setTimeout(function(){i.fire("change")},0))},reset:function(){this.lastKeystroke=0,this.snapshots=[],this.index=-1,this.limit=this.editor.config.undoStackSize||20,this.currentImage=null,this.hasRedo=this.hasUndo=!1,this.locked=null,this.resetType()},resetType:function(){this.typing=!1,delete this.lastKeystroke,this.modifiersCount=this.typesCount=0},fireChange:function(){this.hasUndo=!!this.getNextImage(!0),this.hasRedo=!!this.getNextImage(!1),this.resetType(),this.onChange()},save:function(e,t,n){if(this.locked)return!1;var i=this.snapshots;if(t||(t=new a(this.editor)),!1===t.contents)return!1;if(this.currentImage)if(t.equalsContent(this.currentImage)){if(e||t.equalsSelection(this.currentImage))return!1}else this.editor.fire("change");return i.splice(this.index+1,i.length-this.index-1),i.length==this.limit&&i.shift(),this.index=i.push(t)-1,this.currentImage=t,!1!==n&&this.fireChange(),!0},restoreImage:function(e){var t,n=this.editor;e.bookmarks&&(n.focus(),t=n.getSelection()),this.locked=1,this.editor.loadSnapshot(e.contents),e.bookmarks?t.selectBookmarks(e.bookmarks):CKEDITOR.env.ie&&((t=this.editor.document.getBody().$.createTextRange()).collapse(!0),t.select()),this.locked=0,this.index=e.index,this.currentImage=this.snapshots[this.index],this.update(),this.fireChange(),n.fire("change")},getNextImage:function(e){var t,n=this.snapshots,i=this.currentImage;if(i)if(e){for(t=this.index-1;0<=t;t--)if(e=n[t],!i.equalsContent(e))return e.index=t,e}else for(t=this.index+1;t<n.length;t++)if(e=n[t],!i.equalsContent(e))return e.index=t,e;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var e=this.getNextImage(!0);if(e)return this.restoreImage(e),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var e=this.getNextImage(!1);if(e)return this.restoreImage(e),!0}return!1},update:function(e){if(!this.locked){e||(e=new a(this.editor));for(var t=this.index,n=this.snapshots;0<t&&this.currentImage.equalsContent(n[t-1]);)t-=1;n.splice(t,this.index-t+1,e),this.index=t,this.currentImage=e}},lock:function(e){this.locked?this.locked.level++:this.locked=e?{level:1}:(e=new a(this.editor,!0),{update:this.currentImage&&this.currentImage.equalsContent(e)?e:null,level:1})},unlock:function(){if(this.locked&&!--this.locked.level){var e=this.locked.update,t=e&&new a(this.editor,!0);this.locked=null,e&&!e.equalsContent(t)&&this.update()}}}}(),CKEDITOR.config.wsc_removeGlobalVariable=!0,CKEDITOR.plugins.add("wsc",{requires:"dialog",parseApi:function(e){e.config.wsc_onFinish="function"==typeof e.config.wsc_onFinish?e.config.wsc_onFinish:function(){},e.config.wsc_onClose="function"==typeof e.config.wsc_onClose?e.config.wsc_onClose:function(){}},parseConfig:function(e){e.config.wsc_customerId=e.config.wsc_customerId||CKEDITOR.config.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk",e.config.wsc_customDictionaryIds=e.config.wsc_customDictionaryIds||CKEDITOR.config.wsc_customDictionaryIds||"",e.config.wsc_userDictionaryName=e.config.wsc_userDictionaryName||CKEDITOR.config.wsc_userDictionaryName||"",e.config.wsc_customLoaderScript=e.config.wsc_customLoaderScript||CKEDITOR.config.wsc_customLoaderScript,CKEDITOR.config.wsc_cmd=e.config.wsc_cmd||CKEDITOR.config.wsc_cmd||"spell",CKEDITOR.config.wsc_version="v4.3.0-1e748a6"},init:function(e){this.parseConfig(e),this.parseApi(e),e.addCommand("checkspell",new CKEDITOR.dialogCommand("checkspell")).modes={wysiwyg:!CKEDITOR.env.opera&&!CKEDITOR.env.air&&document.domain==window.location.hostname},"undefined"==typeof e.plugins.scayt&&e.ui.addButton&&e.ui.addButton("SpellChecker",{label:e.lang.wsc.toolbar,command:"checkspell",toolbar:"spellchecker,10"}),CKEDITOR.dialog.add("checkspell",this.path+(CKEDITOR.env.ie&&CKEDITOR.env.version<=8?"dialogs/wsc_ie.js":window.postMessage?"dialogs/wsc.js":"dialogs/wsc_ie.js"))}}),CKEDITOR.config.plugins="dialogui,dialog,about,a11yhelp,basicstyles,blockquote,clipboard,panel,floatpanel,menu,contextmenu,resize,button,toolbar,elementspath,enterkey,entities,popup,filebrowser,floatingspace,listblock,richcombo,format,horizontalrule,htmlwriter,wysiwygarea,image,indent,indentlist,fakeobjects,link,list,magicline,maximize,pastetext,pastefromword,removeformat,sourcearea,specialchar,menubutton,scayt,stylescombo,tab,table,tabletools,undo,wsc",CKEDITOR.config.skin="moono",j=function(e,t){var n=CKEDITOR.getUrl("plugins/"+t);e=e.split(",");for(var i=0;i<e.length;i++)CKEDITOR.skin.icons[e[i]]={path:n,offset:-e[++i],bgsize:e[++i]}},CKEDITOR.env.hidpi?j("about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,blockquote,168,,copy-rtl,192,,copy,216,,cut-rtl,240,,cut,264,,paste-rtl,288,,paste,312,,horizontalrule,336,,image,360,,indent-rtl,384,,indent,408,,outdent-rtl,432,,outdent,456,,anchor-rtl,480,,anchor,504,,link,528,,unlink,552,,bulletedlist-rtl,576,,bulletedlist,600,,numberedlist-rtl,624,,numberedlist,648,,maximize,672,,pastetext-rtl,696,,pastetext,720,,pastefromword-rtl,744,,pastefromword,768,,removeformat,792,,source-rtl,816,,source,840,,specialchar,864,,scayt,888,,table,912,,redo-rtl,936,,redo,960,,undo-rtl,984,,undo,1008,,spellchecker,1032,","icons_hidpi.png"):j("about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,blockquote,168,auto,copy-rtl,192,auto,copy,216,auto,cut-rtl,240,auto,cut,264,auto,paste-rtl,288,auto,paste,312,auto,horizontalrule,336,auto,image,360,auto,indent-rtl,384,auto,indent,408,auto,outdent-rtl,432,auto,outdent,456,auto,anchor-rtl,480,auto,anchor,504,auto,link,528,auto,unlink,552,auto,bulletedlist-rtl,576,auto,bulletedlist,600,auto,numberedlist-rtl,624,auto,numberedlist,648,auto,maximize,672,auto,pastetext-rtl,696,auto,pastetext,720,auto,pastefromword-rtl,744,auto,pastefromword,768,auto,removeformat,792,auto,source-rtl,816,auto,source,840,auto,specialchar,864,auto,scayt,888,auto,table,912,auto,redo-rtl,936,auto,redo,960,auto,undo-rtl,984,auto,undo,1008,auto,spellchecker,1032,auto","icons.png"),CKEDITOR.lang.languages={af:1,sq:1,ar:1,eu:1,bn:1,bs:1,bg:1,ca:1,"zh-cn":1,zh:1,hr:1,cs:1,da:1,nl:1,en:1,"en-au":1,"en-ca":1,"en-gb":1,eo:1,et:1,fo:1,fi:1,fr:1,"fr-ca":1,gl:1,ka:1,de:1,el:1,gu:1,he:1,hi:1,hu:1,is:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lv:1,lt:1,mk:1,ms:1,mn:1,no:1,nb:1,fa:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,sr:1,"sr-latn":1,si:1,sk:1,sl:1,es:1,sv:1,th:1,tr:1,ug:1,uk:1,vi:1,cy:1})}();