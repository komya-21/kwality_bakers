!function(e){"use strict";function s(t){return"[object Array]"===Object.prototype.toString.call(t)}function i(t){return t instanceof Function}function a(t){return!i(t)&&t instanceof Object}function r(t,n){var e;for(e in n)a(n[e])||s(n[e])?(a(n[e])&&!a(t[e])&&(t[e]={}),s(n[e])&&!s(t[e])&&(t[e]=[]),r(t[e],n[e])):n[e]!==undefined&&(t[e]=n[e])}function h(t,n){var e={};return r(e,t),r(e,n),e}function n(t){var n,e,a,r,i,o,c,s,d,u,l;return"[object Date]"===(u=Object.prototype.toString.call(t))?t:"[object String]"===u&&(a=t.match(j))?(l=parseInt(a[1],10),o=parseInt(a[3],10)-1,n=parseInt(a[5],10),e=parseInt(a[7],10),i=a[9]?parseInt(a[9],10):0,d=a[11]?parseInt(a[11],10):0,r=a[12]?1e3*parseFloat(D+a[12].slice(1)):0,s=Date.UTC(l,o,n,e,i,d,r),a[13]&&a[14]&&(c=60*a[15],a[17]&&(c+=parseInt(a[17],10)),s-=60*(c*="-"===a[14]?-1:1)*1e3),new Date(s)):void 0}function d(t){var n,e,a;for(n=0;n<t.length;n++)for(a=t[n].data,e=0;e<a.length;e++)if(a[e][1]<0)return!0;return!1}function p(r,i,o,c,s){return function(t,n,e){var a=h({},r);return a=h(a,e||{}),n.hideLegend&&i(a),"min"in n?o(a,n.min):d(t)||o(a,0),"max"in n&&c(a,n.max),n.stacked&&s(a),n.colors&&(a.colors=n.colors),a=h(a,n.library||{})}}function o(t,n){document.body.innerText?t.innerText=n:t.textContent=n}function c(t,n){o(t,"Error Loading Chart: "+n),t.style.color="#ff0000"}function t(r,t,n){P.ajax({dataType:"json",url:t,success:n,error:function(t,n,e){var a="string"==typeof e?e:e.message;c(r,a)}})}function u(t,n){try{n(t)}catch(e){throw c(t.element,e.message),e}}function l(n,e){"string"==typeof n.dataSource?t(n.element,n.dataSource,function(t){n.data=t,u(n,e)}):(n.data=n.dataSource,u(n,e))}function f(t){return""+t}function m(t){return parseFloat(t)}function g(t){"object"!=typeof t&&(t="number"==typeof t?new Date(1e3*t):n(t.replace(/ /,"T").replace(" ","").replace("UTC","Z"))||new Date(t));return t}function v(t){if(!s(t)){var n,e=[];for(n in t)t.hasOwnProperty(n)&&e.push([n,t[n]]);t=e}return t}function C(t,n){return t[0].getTime()-n[0].getTime()}function w(t,n){var e,a,r;for(r="render"+t+"Chart",e=0;e<I.length;e++)if(i((a=I[e])[r]))return a[r](n);throw new Error("No adapter found")}function y(t,n,e){var a,r,i,o,c;for(!s(t)||"object"!=typeof t[0]||s(t[0])?(t=[{name:"Value",data:t}],n.hideLegend=!0):n.hideLegend=!1,n.discrete&&(e=!1),a=0;a<t.length;a++){for(i=v(t[a].data),o=[],r=0;r<i.length;r++)c=i[r][0],c=e?g(c):f(c),o.push([c,m(i[r][1])]);e&&o.sort(C),t[a].data=o}return t}function x(t){var n,e=v(t);for(n=0;n<e.length;n++)e[n]=[f(e[n][0]),m(e[n][1])];return e}function b(t){t.data=y(t.data,t.options,!0),w("Line",t)}function A(t){t.data=y(t.data,t.options,!1),w("Column",t)}function S(t){t.data=x(t.data),w("Pie",t)}function z(t){t.data=y(t.data,t.options,!1),w("Bar",t)}function T(t){t.data=y(t.data,t.options,!0),w("Area",t)}function L(t){t.data=x(t.data),w("Geo",t)}function k(t,n,e,a,r){"string"==typeof n&&(n=document.getElementById(n)),t.element=n,t.options=a||{},t.dataSource=e,l(O.charts[n.id]=t,r)}var O,j,D,I=[],P=e.jQuery||e.Zepto||e.$;if(j=/(\d\d\d\d)(\-)?(\d\d)(\-)?(\d\d)(T)?(\d\d)(:)?(\d\d)?(:)?(\d\d)?([\.,]\d+)?($|Z|([\+\-])(\d\d)(:)?(\d\d)?)/i,D=String(1.5).charAt(1),"Highcharts"in e){var E=new function(){var l=e.Highcharts,a={chart:{},xAxis:{labels:{style:{fontSize:"12px"}}},yAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},title:{text:null},credits:{enabled:!1},legend:{borderWidth:0},tooltip:{style:{fontSize:"12px"}},plotOptions:{areaspline:{},series:{marker:{}}}},f=p(a,function(t){t.legend.enabled=!1},function(t,n){t.yAxis.min=n},function(t,n){t.yAxis.max=n},function(t){t.plotOptions.series.stacking="normal"});this.renderLineChart=function(t,n){var e={};"areaspline"===(n=n||"spline")&&(e={plotOptions:{areaspline:{stacking:"normal"},series:{marker:{enabled:!1}}}});var a,r,i,o=f(t.data,t.options,e);o.xAxis.type=t.options.discrete?"category":"datetime",o.chart.type=n,o.chart.renderTo=t.element.id;var c=t.data;for(r=0;r<c.length;r++){if(a=c[r].data,!t.options.discrete)for(i=0;i<a.length;i++)a[i][0]=a[i][0].getTime();c[r].marker={symbol:"circle"}}o.series=c,new l.Chart(o)},this.renderPieChart=function(t){var n={};t.options.colors&&(n.colors=t.options.colors);var e=h(h(a,n),t.options.library||{});e.chart.renderTo=t.element.id,e.series=[{type:"pie",name:"Value",data:t.data}],new l.Chart(e)},this.renderColumnChart=function(t,n){n=n||"column";var e,a,r,i,o=t.data,c=f(o,t.options),s=[];for(c.chart.type=n,c.chart.renderTo=t.element.id,e=0;e<o.length;e++)for(r=o[e],a=0;a<r.data.length;a++)s[(i=r.data[a])[0]]||(s[i[0]]=new Array(o.length)),s[i[0]][e]=i[1];var d=[];for(e in s)s.hasOwnProperty(e)&&d.push(e);c.xAxis.categories=d;var u=[];for(e=0;e<o.length;e++){for(i=[],a=0;a<d.length;a++)i.push(s[d[a]][e]||0);u.push({name:o[e].name,data:i})}c.series=u,new l.Chart(c)};var n=this;this.renderBarChart=function(t){n.renderColumnChart(t,"bar")},this.renderAreaChart=function(t){n.renderLineChart(t,"areaspline")}};I.push(E)}if(e.google&&e.google.setOnLoadCallback){var W=new function(){var u=e.google,n=!1;u.setOnLoadCallback(function(){n=!0}),u.load("visualization","1.0",{packages:["corechart"]});var t=function(t){u.setOnLoadCallback(t),n&&t()},r={chartArea:{},fontName:"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif",pointSize:6,legend:{textStyle:{fontSize:12,color:"#444"},alignment:"center",position:"right"},curveType:"function",hAxis:{textStyle:{color:"#666",fontSize:12},gridlines:{color:"transparent"},baselineColor:"#ccc",viewWindow:{}},vAxis:{textStyle:{color:"#666",fontSize:12},baselineColor:"#ccc",viewWindow:{}},tooltip:{textStyle:{color:"#666",fontSize:12}}},i=function(t){t.legend.position="none"},o=function(t,n){t.hAxis.viewWindow.min=n},c=function(t,n){t.hAxis.viewWindow.max=n},s=function(t){t.isStacked=!0},d=p(r,i,function(t,n){t.vAxis.viewWindow.min=n},function(t,n){t.vAxis.viewWindow.max=n},s),l=function(t,n){var e=new u.visualization.DataTable;e.addColumn(n,"");var a,r,i,o,c,s=[];for(a=0;a<t.length;a++)for(i=t[a],e.addColumn("number",i.name),r=0;r<i.data.length;r++)o=i.data[r],s[c="datetime"===n?o[0].getTime():o[0]]||(s[c]=new Array(t.length)),s[c][a]=m(o[1]);var d=[];for(a in s)s.hasOwnProperty(a)&&d.push(["datetime"===n?new Date(m(a)):a].concat(s[a]));return"datetime"===n&&d.sort(C),e.addRows(d),e},f=function(t){e.attachEvent?e.attachEvent("onresize",t):e.addEventListener&&e.addEventListener("resize",t,!0),t()};this.renderLineChart=function(e){t(function(){var t=d(e.data,e.options),n=l(e.data,e.options.discrete?"string":"datetime");e.chart=new u.visualization.LineChart(e.element),f(function(){e.chart.draw(n,t)})})},this.renderPieChart=function(a){t(function(){var t={chartArea:{top:"10%",height:"80%"}};a.options.colors&&(t.colors=a.options.colors);var n=h(h(r,t),a.options.library||{}),e=new u.visualization.DataTable;e.addColumn("string",""),e.addColumn("number","Value"),e.addRows(a.data),a.chart=new u.visualization.PieChart(a.element),f(function(){a.chart.draw(e,n)})})},this.renderColumnChart=function(e){t(function(){var t=d(e.data,e.options),n=l(e.data,"string");e.chart=new u.visualization.ColumnChart(e.element),f(function(){e.chart.draw(n,t)})})},this.renderBarChart=function(a){t(function(){var t={hAxis:{gridlines:{color:"#ccc"}}},n=p(r,i,o,c,s)(a.data,a.options,t),e=l(a.data,"string");a.chart=new u.visualization.BarChart(a.element),f(function(){a.chart.draw(e,n)})})},this.renderAreaChart=function(a){t(function(){var t={isStacked:!0,pointSize:0,areaOpacity:.5},n=d(a.data,a.options,t),e=l(a.data,a.options.discrete?"string":"datetime");a.chart=new u.visualization.AreaChart(a.element),f(function(){a.chart.draw(e,n)})})},this.renderGeoChart=function(a){t(function(){var t={legend:"none",colorAxis:{colors:a.options.colors||["#f6c7b6","#ce502d"]}},n=h(h(r,t),a.options.library||{}),e=new u.visualization.DataTable;e.addColumn("string",""),e.addColumn("number","Value"),e.addRows(a.data),a.chart=new u.visualization.GeoChart(a.element),f(function(){a.chart.draw(e,n)})})}};I.push(W)}O={LineChart:function(t,n,e){k(this,t,n,e,b)},PieChart:function(t,n,e){k(this,t,n,e,S)},ColumnChart:function(t,n,e){k(this,t,n,e,A)},BarChart:function(t,n,e){k(this,t,n,e,z)},AreaChart:function(t,n,e){k(this,t,n,e,T)},GeoChart:function(t,n,e){k(this,t,n,e,L)},charts:{}},e.Chartkick=O}(window);